{"inframe":false,"title":"获取应用列表","hidden":false,"roles":{"demo":1,"default":1,"dev":1,"basic":1},"children":[{"configs":{"itemId":"module"},"children":[{"configs":{"itemId":"funListSwitcher","mysql":"SELECT\n\t@rownum :=@rownum + 1 AS \"index\",\n\tft.FUN_TREE_NAME title,\n\tconcat(\n\t\t\"pub/uip/common/icon/\",\n\t\tCASE ifnull(ft.LARGE_ICON, \"\")\n\tWHEN \"\" THEN\n\t\t\"large_computerBlack.png\"\n\tELSE\n\t\tft.LARGE_ICON\n\tEND\n\t) image,\n\tft.MOB_URL url\nFROM\n\txip_pub_fun_tree ft,\n\t(SELECT @rownum := 0) r\nWHERE\n\tMOB_URL IS NOT NULL\nAND MOB_URL <> ''\nAND 'USER'={?XIP.AUTH_MODAL?}\nAND enable_flag = 'Y'\nAND FUN_TREE_ID IN (\n\tSELECT\n\t\tuf.FUN_TREE_ID\n\tFROM\n\t\txip_pub_user_funs uf,\n\t\txip_pub_emp_asg es,\n\t\txip_pub_users pu\n\tWHERE\n\t\tuf.type = 'U'\n\tAND uf.TARGET_ID = '{#XIP.userId#}'\n\tUNION\n\t\tSELECT\n\t\t\tuf.FUN_TREE_ID\n\t\tFROM\n\t\t\txip_pub_user_funs uf,\n\t\t\txip_pub_emp_asg es,\n\t\t\txip_pub_users pu\n\t\tWHERE\n\t\t\tuf.type = 'D'\n\t\tAND uf.TARGET_ID = es.DEPT_ID\n\t\tAND es.EMP_ID = pu.EMP_ID\n\t\tAND pu.USER_ID = '{#XIP.userId#}'\n\t\tUNION\n\t\t\tSELECT\n\t\t\t\tuf.FUN_TREE_ID\n\t\t\tFROM\n\t\t\t\txip_pub_user_funs uf,\n\t\t\t\txip_pub_emp_asg es,\n\t\t\t\txip_pub_users pu\n\t\t\tWHERE\n\t\t\t\tuf.type = 'P'\n\t\t\tAND uf.TARGET_ID = es.POST_ID\n\t\t\tAND es.EMP_ID = pu.EMP_ID\n\t\t\tAND pu.USER_ID = '{#XIP.userId#}'\n)\nunion\nSELECT\n\t@rownum :=@rownum + 1 AS \"index\",\n\tft.FUN_TREE_NAME title,\n\tconcat(\n\t\t\"pub/uip/common/icon/\",\n\t\tCASE ifnull(ft.LARGE_ICON, \"\")\n\tWHEN \"\" THEN\n\t\t\"large_computerBlack.png\"\n\tELSE\n\t\tft.LARGE_ICON\n\tEND\n\t) image,\n\tft.MOB_URL url\nFROM\n\txip_pub_fun_tree ft,\n\t(SELECT @rownum := 0) r\nWHERE\n\tMOB_URL IS NOT NULL\nAND MOB_URL <> ''\nAND 'ROLE'={?XIP.AUTH_MODAL?}\nAND enable_flag = 'Y'\nAND FUN_TREE_ID IN (\n  select mt.FUN_TREE_ID\nfrom xip_pub_user_roles ur,xip_pub_role pr,xip_pub_mnu_tree mt\nwhere pr.ENABLE_FLAG = 'Y'\n  and pr.MNU_GROUP_ID = mt.MNU_GROUP_ID\n  and pr.ROLE_ID = ur.ROLE_ID\n  and ur.USER_ID = '{#XIP.userId#}'\n)"},"children":[],"expanded":false,"type":"sqlswitcher"},{"configs":{"sql":"{#funListSwitcher#}","itemId":"dataprovider1"},"children":[],"expanded":true,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}