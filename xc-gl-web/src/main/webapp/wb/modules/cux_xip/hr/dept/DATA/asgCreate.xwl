{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"var id,ids=[],lds = [];\nvar rows = Wb.decode(request.getParameter('newArray'));\nvar rec = Wb.decode(request.getParameter('insertLdEmpArray'));\n\n//为新增的数据加上ASG_ID\nWb.each(rows,function(r) {\n    id = java.util.UUID.randomUUID();\n    r.ASG_ID = id;\n    ids.push({\n      ASG_ID: id\n    });\n});\n\n//为新增的数据加上LD_EMP_ID\nWb.each(rec,function(r) {\n    id = java.util.UUID.randomUUID();\n    r.LD_EMP_ID = id;\n    lds.push({\n      LD_EMP_ID: id\n    });\n});\napp.info(rec);\nrequest.setAttribute('insertAsgArray', Wb.encode(rows)); //重置记录\nrequest.setAttribute('insertLdEmpArray', Wb.encode(rec)); //重置记录\napp.send(ids); //把id列表发送到客户端以同步到表格\napp.send(lds); //把id列表发送到客户端以同步到表格\n","loginRequired":"false","itemId":"module"},"children":[{"configs":{"sql":"insert into \nXIP_PUB_EMP_ASG(\n           ASG_ID,\n           EMP_ID,\n           POST_ID,\n           DEPT_ID,\n           ORG_ID,\n           ENABLED,\n           CREATED_BY,\n           CREATION_DATE,\n           LAST_UPDATED_BY,\n           LAST_UPDATE_DATE,\n           POST_SEQ) values(\n             {?ASG_ID?},\n             {?EMP_ID?},\n             {?POST_ID?},\n             {?DEPT_ID?},\n             {?ORG_ID?},\n             'Y',\n             {?XIP.userId?},\n             {?timestamp.sys.date?},\n             {?XIP.userId?},\n             {?timestamp.sys.date?},\n             'N')\n","transaction":"start","arrayName":"insertAsgArray","itemId":"insertEmpAsg"},"children":[],"expanded":false,"type":"query"},{"configs":{"sql":"INSERT INTO xc_gl_ld_emps\n  (ld_emp_id,\n   emp_id,\n   ledger_id,\n   is_enabled,\n   creation_date,\n   created_by,\n   last_update_date,\n   last_updated_by\n )\nVALUES\n  ({?LD_EMP_ID?},\n   {?EMP_ID?},\n   {?LEDGER_ID?},\n   1,\n   {?timestamp.sys.date?},\n   {?XIP.userId?},\n   {?timestamp.sys.date?},\n   {?XIP.userId?}\n  )","transaction":"start","arrayName":"insertLdEmpArray","itemId":"insertLdEmp"},"children":[],"expanded":false,"type":"query"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}