{"inframe":false,"title":"员工扩展信息管理","hidden":false,"roles":{"default":1},"children":[{"configs":{"title":"员工扩展信息管理","loginRequired":"false","serverScript":"//引入对应的json\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,'xc/ex/base/ex-ext-emps/json/XC_EX_EXT_EMPS');","itemId":"module"},"children":[{"configs":{"itemId":"storeFile"},"children":[{"configs":{"autoLoad":"false","itemId":"save_before_check_store","url":"m?xwl=xc/ex/base/ex-ext-emps/ex_ext_emps_db/save_before_check"},"events":{"failure":" Ext.MessageBox.alert('提示','保存失败');","success":"//根据查询出来的结果判断是新增还是修改\nvar count = store.getCount();\n\n//判断是新增状态还是修改，默认为新增状态\nvar temp_url = 'm?xwl=xc/ex/base/ex-ext-emps/ex_ext_emps_db/add_ext_emps';\nif(count!==0)\n  temp_url = 'm?xwl=xc/ex/base/ex-ext-emps/ex_ext_emps_db/update_ext_emps';\n\nWb.request({\n  url:temp_url,\n  params:{EMP_ID:app.EMP_ID.getValue(),BANK_NO:app.BANK_NO.getValue(),BANK_NAME:app.BANK_NAME.getValue()},\n  success:function(){\n    Ext.MessageBox.alert('提示','保存成功'); \n    app.queryBtn.fireEvent('click');\n    app.ext_emp_win.close();\n  },\n  failure:function(){\n    Ext.MessageBox.alert('提示','保存失败');\n  }\n});\n"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"folder"},{"configs":{"title":"{#title1#}","autoShow":"false","height":"200","width":"400","layout":"fit","closeAction":"hide","buttonAlign":"center","itemId":"ext_emp_win","modal":"true","draggable":"false"},"children":[{"configs":{"height":"22","width":"120","itemId":"buttons","y":"432","x":"224"},"children":[{"configs":{"text":"{#save#}","textAlign":"center","itemId":"saveBtn","iconCls":"save_icon"},"events":{"click":"if(app.BANK_NO.getValue()===''||app.BANK_NO.getValue()===null){\n   Ext.MessageBox.alert('{#prompt#}','{#saveMsg1#}');\n   return;\n}\n\n\napp.save_before_check_store.load({\n  params:{emp_id:app.EMP_ID.getValue()}\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#cancel#}","textAlign":"center","itemId":"cancelBtn","iconCls":"cancel_icon"},"events":{"click":"app.ext_emp_win.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"array"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","frame":"true","layout":"form","border":"false","itemId":"tr1"},"children":[{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","frame":"true","layout":"column","border":"false","itemId":"tr1_1"},"children":[{"configs":{"tagConfigs":"columnWidth:0.8","labelWidth":"80","readOnly":"true","hidden":"true","labelAlign":"right","padding":"0 0 0 20","itemId":"EMP_ID","fieldLabel":"{#empId#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","frame":"true","layout":"column","border":"false","itemId":"tr1_2"},"children":[{"configs":{"tagConfigs":"columnWidth:0.8","labelWidth":"80","readOnly":"true","labelAlign":"right","padding":"0 0 0 20","itemId":"EMP_CODE","fieldLabel":"{#empCode#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","frame":"true","layout":"column","border":"false","itemId":"tr1_3"},"children":[{"configs":{"tagConfigs":"columnWidth:0.8","labelWidth":"80","readOnly":"true","labelAlign":"right","padding":"0 0 0 20","itemId":"EMP_NAME","fieldLabel":"{#empName#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","frame":"true","layout":"column","border":"false","itemId":"tr1_4"},"children":[{"configs":{"tagConfigs":"columnWidth:0.8","labelWidth":"80","labelAlign":"right","padding":"0 0 0 20","itemId":"BANK_NO","fieldLabel":"{#bankAccount#}"},"events":{"change":"//使银行卡号只能接收数字\ntext.setValue(text.getValue().replace(/[^\\d\\d]/g, \"\"));"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","frame":"true","layout":"column","border":"false","itemId":"tr1_5"},"children":[{"configs":{"tagConfigs":"columnWidth:0.8","labelWidth":"80","labelAlign":"right","padding":"0 0 0 20","itemId":"BANK_NAME","fieldLabel":"{#bankName#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"window"},{"configs":{"layout":"border","itemId":"viewport1"},"children":[{"configs":{"region":"north","border":"false","itemId":"query_form"},"children":[{"configs":{"layout":"column","border":"false","itemId":"query_emp_panel"},"children":[{"configs":{"tagConfigs":"columnWidth:0.25","labelWidth":"120","labelAlign":"right","padding":"10 20 10 0","itemId":"query_emp","fieldLabel":"{#empCodeName#}"},"events":{"specialkey":"if(e.getKey()===13) \n  app.queryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"text"},{"configs":{"tagConfigs":"columnWidth:0.08","text":"{#query#}","margin":"0 0 0 20","itemId":"queryBtn","y":"10","iconCls":"seek_icon"},"events":{"click":"app.emp_grid.getStore().load({\n  params:{emp_name:Ext.String.escape(app.query_emp.getValue())}\n}); "},"children":[],"expanded":false,"type":"button"},{"configs":{"tagConfigs":"columnWidth:0.08","text":"{#reset#}","margin":"0 0 0 20","itemId":"resetBtn","y":"10","iconCls":"refresh_icon"},"events":{"click":"app.query_emp.setValue();\napp.queryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","itemId":"emp_grid"},"events":{"itemdblclick":"var temp = app.emp_grid.getSelection();\napp.ext_emp_win.show();\napp.ext_emp_win.setTitle(temp[0].data.EMP_NAME+'\u2014\u2014'+'{#dbMsg1#}');\nWb.setValue(app.ext_emp_win,temp[0].data);"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#txt1#}","itemId":"updateBtn","iconCls":"file_edit_icon"},"events":{"click":"var temp = app.emp_grid.getSelection();\n\nif(temp.length===0) {\n   Wb.warn('{#txt1Msg1#}');\n   return;\n}\n\napp.ext_emp_win.show();\napp.ext_emp_win.setTitle(temp[0].data.EMP_NAME+'\u2014\u2014'+'{#dbMsg1#}');\nWb.setValue(app.ext_emp_win,temp[0].data);"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#rowNum#}","align":"center","xtype":"rownumberer","width":"50","titleAlign":"center","itemId":"row_num"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#empCode#}","width":"100","dataIndex":"EMP_CODE","titleAlign":"center","itemId":"emp_code_col"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#empName#}","width":"110","dataIndex":"EMP_NAME","titleAlign":"center","itemId":"emp_name_col"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#sex#}","width":"50","dataIndex":"EMP_SEX","titleAlign":"center","itemId":"emp_sex_col","renderer":"if(value===1 || value ==='1')\n  return '{#man#}';\nif(value===2 || value ==='2')\n  return '{#women#}';"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#bankAccount#}","width":"150","dataIndex":"BANK_NO","titleAlign":"center","itemId":"bank_no_col"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#bankName#}","width":"180","dataIndex":"BANK_NAME","titleAlign":"center","itemId":"bank_name","renderer":"metaData.style = 'overflow:auto;padding: 3px 6px;text-overflow: ellipsis;white-space: nowrap;white-space:normal;line-height:18px;';   \nreturn value;"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#phone#}","width":"100","dataIndex":"PHONE_ID","titleAlign":"center","itemId":"phone_id_col"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#idNo#}","width":"100","dataIndex":"ID_NO","titleAlign":"center","itemId":"id_no_col"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#email#}","width":"100","dataIndex":"EMALI","titleAlign":"center","itemId":"email_col"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#empStatus#}","width":"100","dataIndex":"ATTRIBUTE2","titleAlign":"center","itemId":"attribute2_col","renderer":"if(value==='Y')\n  return '{#Y#}';\nif(value==='N')\n  return '{#N#}';"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xc/ex/base/ex-ext-emps/ex_ext_emps_db/select_emps"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}