{"inframe":false,"title":"单据类型设置","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"//引入对应的json\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,'xc/ex/base/ex-ld-cat/json/XC_EX_LD_CAT');","itemId":"module"},"events":{"finalize":"var _ins;//在SELECT_XC_EX_CAT.xwl中使用到\nvar _ins1;\nvar ex_hrcy_id = '';//费用项目体系"},"children":[{"configs":{"frame":"true","height":"300","width":"500","layout":"fit","buttonAlign":"center","dialog":"true","itemId":"win1","modal":"true"},"events":{"ok":"var recs = app.win1grid1.getSelection();\nif(recs.length === 0){\n  Wb.toast('请选择单据类型') ;\n  return false ;\n}\n\nvar datas = [];\nWb.each(recs, function(r){\n  var data = {\n    'LEDGER_ID'   : app.LEDGER_ID.getValue(),\n    'EX_CAT_CODE' : r.get('EX_CAT_CODE'),\n    'RULE_CODE'   : 'EX'\n  };\n  datas.push(data);\n})　;\n\nWb.request({\n  url:'m?xwl=xc/ex/base/ex-ld-cat/DB/INSERT_XC_EX_LD_CAT',\n  params:{datas:datas},\n  success:function(resp){\n    app.queryBtn.fireEvent('click');\n    win.close();\n  }\n});\n","show":"var LEDGER_ID = app.LEDGER_ID.getValue();\napp.win1grid1.getStore().load({\n  params:{_ins:_ins}\n});"},"children":[{"configs":{"pagingBar":"false","selType":"checkboxmodel","itemId":"win1grid1"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/ex/base/ex-ld-cat/DB/SELECT_XC_EX_CAT"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#rowNum#}","align":"center","width":"50","xtype":"rownumberer","titleAlign":"center","itemId":"ROWNUM_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#exCatCode#}","width":"80","dataIndex":"EX_CAT_CODE","titleAlign":"center","itemId":"EX_CAT_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#exCatName#}","width":"100","dataIndex":"EX_CAT_NAME","titleAlign":"center","itemId":"EX_CAT_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#exCatDesc#}","width":"150","dataIndex":"EX_CAT_DESC","titleAlign":"center","itemId":"EX_CAT_DESC_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"window"},{"configs":{"height":"400","width":"800","layout":"border","buttonAlign":"center","dialog":"true","itemId":"win2","modal":"true"},"events":{"ok":"var rec = app.grid1.getSelection()[0];\nvar EX_LD_CAT_ID = rec.data.EX_LD_CAT_ID;\n//获取记录值\nvar PROCESS_ID = app.win2_process_id.getValue();\nvar RULE_CODE = app.win2_rule_code.getValue();\nvar ATT_CAT_CODE = app.att_cat_code.getValue() ;\n\nif(Wb.isEmpty(RULE_CODE)){\n  Wb.toast('系统尚未内置费用报销编码规则') ;\n  return false ;\n}\n\nWb.request({\n  url:'m?xwl=xc/ex/base/ex-ld-cat/DB/UPDATE_XC_EX_LD_CAT',\n  params:{\n    'EX_LD_CAT_ID': EX_LD_CAT_ID,\n    'PROCESS_ID'  : PROCESS_ID,\n    'RULE_CODE'   : RULE_CODE,\n    'ATT_CAT_CODE': ATT_CAT_CODE\n  },\n  success:function(resp){\n    app.queryBtn.fireEvent('click');\n    win.close();\n  }\n});\n","show":"\nvar LEDGER_ID = app.LEDGER_ID.getValue();\nvar rec = app.grid1.getSelection()[0];\nvar EX_CAT_CODE = rec.data.EX_CAT_CODE;\n\n\n\napp.win2grid1.getStore().load({\n  params:{LEDGER_ID:LEDGER_ID,EX_CAT_CODE:EX_CAT_CODE}\n});"},"children":[{"configs":{"region":"north","layout":"form","border":"false","itemId":"win2form1"},"children":[{"configs":{"tagConfigs":"{\n  baseCls: 'my-panel-no-border'\n}\n","layout":"column","columnWidth":"1","border":"false","itemId":"panel1"},"children":[{"configs":{"layout":"fit","columnWidth":".5","border":"false","itemId":"td_1"},"children":[{"configs":{"labelWidth":"120","readOnly":"true","labelAlign":"right","itemId":"win2_ex_cat_code","fieldLabel":"{#txt1#}"},"children":[],"expanded":false,"type":"text"}],"expanded":false,"type":"panel"},{"configs":{"layout":"fit","columnWidth":".5","border":"false","itemId":"td_2"},"children":[{"configs":{"labelWidth":"120","readOnly":"true","margin":"0 10 0 0","labelAlign":"right","itemId":"win2_ex_cat_name","fieldLabel":"{#txt2#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls: 'my-panel-no-border'\n}","layout":"column","columnWidth":"1","border":"false","itemId":"panel2"},"children":[{"configs":{"layout":"fit","columnWidth":".5","border":"false","itemId":"td_1"},"children":[{"configs":{"itemId":"win2_process_id"},"children":[],"expanded":false,"type":"hidden"},{"configs":{"labelWidth":"120","triggerCls":"x-form-search-trigger","labelAlign":"right","itemId":"win2_process_name","fieldLabel":"{#processName#}"},"children":[{"configs":{"tagConfigs":"{\n  minWidth:500,\n  features: [{ftype:'grouping'}]\n}\n","pagingBar":"false","height":"350","forceFit":"true","normalName":"procPickComp","itemId":"pickComp"},"events":{"itemclick":"var procId = record.data.PROCESS_ID ;\nvar procName = record.data.PROCESS_NAME ;\n\napp.win2_process_id.setValue(procId) ;\napp.win2_process_name.setValue(procName) ;\n\napp.procPickComp.hide() ;"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"emptyText":"{#queryTxt1#}","itemId":"win2_code_name"},"events":{"specialkey":"// 支持回车事件\nif(Ext.EventObject.getKey() == 13){\n  app.win2_query_btn.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"itemId":"win2_query_btn","iconCls":"seek_icon","tooltip":"{#query#}"},"events":{"click":"app.procPickComp.getStore().load() ;\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"itemId":"win2_reset_btn","iconCls":"cancel_icon","tooltip":"{#clear#}"},"events":{"click":"app.win2_process_id.setValue() ;\napp.win2_process_name.setValue();\n"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"groupField":"CAT_NAME","autoLoad":"true","itemId":"store","url":"m?xwl=xc/com-qry/xip-wf/select-processes-by-entitycode"},"events":{"beforeload":"// 取得组织ID\nvar ldId = app.LEDGER_ID.getValue() ;\nvar ldStore = app.LEDGER_ID.getStore() ;\nvar idx = ldStore.find('LEDGER_ID',ldId) ;\nvar r = ldStore.getAt(idx) ;\nvar orgId = r.get('ORG_ID') ;\n\nstore.proxy.extraParams.ecode = 'XC_EX_DOCS' ;\nstore.proxy.extraParams.orgId = orgId ;\nstore.proxy.extraParams.textStr = app.win2_code_name.getValue() ;\n"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#rowNum#}","align":"center","width":"50","xtype":"rownumberer","titleAlign":"center","itemId":"rownum"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#processId#}","hidden":"true","align":"center","dataIndex":"PROCESS_ID","titleAlign":"center","itemId":"PROCESS_ID"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#code#}","dataIndex":"PROCESS_CODE","titleAlign":"center","itemId":"PROCESS_CODE"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#name#}","dataIndex":"PROCESS_NAME","titleAlign":"center","itemId":"PROCESS_NAME"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#cat#}","hidden":"true","dataIndex":"CAT_NAME","titleAlign":"center","itemId":"CAT_NAME"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":false,"type":"grid"}],"expanded":true,"type":"picker"}],"expanded":true,"type":"panel"},{"configs":{"layout":"fit","columnWidth":".5","border":"false","itemId":"td_2"},"children":[{"configs":{"labelWidth":"120","readOnly":"true","displayField":"RULE_DESC","valueField":"RULE_CODE","margin":"0 10 0 0","labelAlign":"right","itemId":"win2_rule_code","fieldLabel":"{#rule#}"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xc/com-qry/rules/select-rule-by-code"},"events":{"beforeload":"store.proxy.extraParams.ruleCode = 'EX' ;"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"layout":"column","columnWidth":"1","border":"false","itemId":"panel3"},"children":[{"configs":{"layout":"fit","columnWidth":".5","border":"false","itemId":"td_1"},"children":[{"configs":{"labelWidth":"120","displayField":"ATT_CAT_NAME","valueField":"ATT_CAT_CODE","columnWidth":"0.48","emptyText":"{#emptyTxt1#}","labelAlign":"right","itemId":"att_cat_code","fieldLabel":"{#txt3#}"},"events":{"select":"var attVal = combo.getValue() ;\nif(attVal === \"ALL\"){\n  combo.setValue() ;\n}"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xc/ex/base/ex-ld-cat/DB/select_ld_att_cat"},"events":{"load":"Ext.define('catModel', {  \n    extend: 'Ext.data.Model',  \n    fields: [  \n        {name: 'ATT_CAT_CODE'},  \n        {name: 'ATT_CAT_NAME'}\n     ]  \n});\nvar r = Ext.create('catModel', {\n  'ATT_CAT_CODE':'ALL', \n  'ATT_CAT_NAME':'---请选择---'\n});\n\nstore.insert(0,r);\n","beforeload":"store.proxy.extraParams.ledgerId = app.LEDGER_ID.getValue() ;"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","pagingBar":"false","selType":"checkboxmodel","itemId":"win2grid1"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/ex/base/ex-ld-cat/DB/SELECT_XC_EX_LD_CAT_ITEMS"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#add#}","itemId":"win2addBtn","iconCls":"file_add_icon"},"events":{"click":"if(ex_hrcy_id === ''){\n  Wb.warn('{#addMsg1#}');\n  return;\n}\nvar store = app.win2grid1.getStore();\nvar count = store.getCount();\nvar ins = \"(\";\nins = ins+\"'\"+\"'\";\nfor(var i=0;i<count;i++){\n  var EX_ITEM_ID = store.getAt(i).data.EX_ITEM_ID;\n  ins = ins+\",\"+\"'\"+EX_ITEM_ID+\"'\";\n}\nins = ins + \")\";\n_ins1 = ins;\nvar win3 = new Ext.window.Window(app._win3);\nwin3.show();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#delete#}","itemId":"win2delBtn","iconCls":"file_delete_icon"},"events":{"click":"var recs = app.win2grid1.getSelection();\nif (!recs.length) {\n  Wb.warn('{#deleteMsg1#}');\n  return;\n}\nvar datas = [];\nfor(var i=0;i<recs.length;i++){\n  var EX_LD_CAT_ITEM_ID = recs[i].data.EX_LD_CAT_ITEM_ID;\n  var data = {EX_LD_CAT_ITEM_ID:EX_LD_CAT_ITEM_ID};\n  datas.push(data);\n}\n\nWb.confirm('{#deleteMsg2#}' + recs.length + '{#deleteMsg3#}', function() {\n  Wb.request({\n    url:'m?xwl=xc/ex/base/ex-ld-cat/DB/DELETE_XC_EX_LD_CAT_ITEMS',\n    params:{datas:datas},\n    success:function(resp){\n      Wb.remove(app.win2grid1);\n      //app.win2queryBtn.fireEvent('click');\n    }\n  });\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#query#}","hidden":"true","itemId":"win2queryBtn"},"events":{"click":"var LEDGER_ID = app.LEDGER_ID.getValue();\nvar rec = app.grid1.getSelection()[0];\nvar EX_CAT_CODE = rec.data.EX_CAT_CODE;\napp.win2grid1.getStore().load({\n  params:{LEDGER_ID:LEDGER_ID,EX_CAT_CODE:EX_CAT_CODE}\n});"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#rowNum#}","align":"center","width":"50","xtype":"rownumberer","titleAlign":"center","itemId":"ROWNUM_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#ezLdCatItemId#}","hidden":"true","dataIndex":"EX_LD_CAT_ITEM_ID","titleAlign":"center","itemId":"EX_LD_CAT_ITEM_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#ledgerId#}","hidden":"true","dataIndex":"LEDGER_ID","titleAlign":"center","itemId":"LEDGER_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#txt1#}","hidden":"true","dataIndex":"EX_CAT_CODE","titleAlign":"center","itemId":"EX_CAT_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#exItemId#}","hidden":"true","dataIndex":"EX_ITEM_ID","titleAlign":"center","itemId":"EX_ITEM_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#exItemCode#}","width":"250","dataIndex":"EX_ITEM_CODE","titleAlign":"center","itemId":"EX_ITEM_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#exItemName#}","width":"350","dataIndex":"EX_ITEM_NAME","titleAlign":"center","itemId":"EX_ITEM_NAME_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":false,"type":"grid"}],"expanded":false,"type":"window"},{"configs":{"frame":"true","height":"400","width":"600","layout":"border","buttonAlign":"center","dialog":"true","itemId":"win3","modal":"true"},"events":{"show":"app.win3queryBtn.fireEvent('click');","ok":"if(Ext.EventObject.getKey() == 13){\n  app.win3queryBtn.fireEvent('click');\n  return false;\n}\nvar recs = app.win3grid1.getSelection();\nvar count = recs.length;\nvar recs1 = app.grid1.getSelection()[0];\nvar LEDGER_ID = app.LEDGER_ID.getValue();\nvar EX_CAT_CODE = recs1.data.EX_CAT_CODE;\nvar datas = [];\n//拼接参数\nfor(var i=0;i<count;i++){\n  var EX_ITEM_ID = recs[i].data.EX_ITEM_ID;\n  var data = {EX_LD_CAT_ITEM_ID:'',\n              LEDGER_ID:LEDGER_ID,\n              EX_CAT_CODE:EX_CAT_CODE,\n              EX_ITEM_ID:EX_ITEM_ID};\n  datas.push(data);\n}\nWb.request({\n  url:'m?xwl=xc/ex/base/ex-ld-cat/DB/INSERT_XC_EX_LD_CAT_ITEMS',\n  params:{datas:datas},\n  success:function(resp){\n    app.win2queryBtn.fireEvent('click');\n    win.close();\n  }\n});"},"children":[{"configs":{"region":"north","layout":"form","border":"false","itemId":"win3form1"},"children":[{"configs":{"tagConfigs":"{\n  baseCls: 'my-panel-no-border'\n}","layout":"column","border":"false","itemId":"win3panel1"},"children":[{"configs":{"labelWidth":"80","width":"300","emptyText":"{#queryTxt2#}","labelAlign":"right","itemId":"win3_code_name_desc","fieldLabel":"{#exItem#}"},"events":{"specialkey":"if(Ext.EventObject.getKey()===13){\n  app.win3queryBtn.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#query#}","hidden":"true","itemId":"win3queryBtn","iconCls":"seek_icon","x":"20"},"events":{"click":"var CODE_NAME_DESC = app.win3_code_name_desc.getValue();\nvar ledger_id = app.LEDGER_ID.getValue();\napp.win3grid1.getStore().load({\n  params:{CODE_NAME_DESC:CODE_NAME_DESC,_ins1:_ins1,LEDGER_ID:ledger_id}\n});\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#reset#}","hidden":"true","itemId":"win3resetBtn","iconCls":"refresh_icon","x":"30"},"events":{"click":"app.win3form1.getForm().reset();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"form"},{"configs":{"region":"center","pagingBar":"false","selType":"checkboxmodel","itemId":"win3grid1"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/ex/base/ex-ld-cat/DB/SELECT_XC_EX_LD_ITEMS"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#rowNum#}","align":"center","xtype":"rownumberer","width":"50","titleAlign":"center","itemId":"ROWNUM_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#txt5#}","hidden":"true","dataIndex":"EX_ITEM_ID","titleAlign":"center","itemId":"EX_ITEM_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#exItemCode#}","width":"100","dataIndex":"EX_ITEM_CODE","titleAlign":"center","itemId":"EX_ITEM_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#exItemName#}","width":"150","dataIndex":"EX_ITEM_NAME","titleAlign":"center","itemId":"EX_ITEM_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#exItemDesc#}","dataIndex":"EX_ITEM_DESC","titleAlign":"center","itemId":"EX_ITEM_DESC_COL","flex":"1"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"window"},{"configs":{"layout":"border","itemId":"viewport1"},"children":[{"configs":{"region":"north","itemId":"queryForm"},"children":[{"configs":{"tagConfigs":"{\nbaseCls: 'my-panel-no-border'\n}","layout":"column","bodyPadding":"10","itemId":"panel1"},"children":[{"configs":{"labelWidth":"40","displayField":"LEDGER_NAME","width":"350","valueField":"LEDGER_ID","emptyText":"{#emptyTxt1#}","labelAlign":"right","itemId":"LEDGER_ID","fieldLabel":"{#ledger#}"},"events":{"select":"var rec = records[0];\nex_hrcy_id = rec.data.EX_HRCY_ID;\n\napp.queryBtn.fireEvent('click');"},"children":[{"configs":{"pageSize":"-1","autoLoad":"true","itemId":"store","url":"m?xwl=xc/com-qry/gl-ledgers/select-sec-fd-ledgers"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"},{"configs":{"labelWidth":"160","labelAlign":"right","itemId":"EX_CAT","fieldLabel":"{#txt4#}"},"events":{"specialkey":"if(e.getKey() == 13){\n  app.queryBtn.fireEvent('click') ;\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#query#}","itemId":"queryBtn","iconCls":"seek_icon","x":"20"},"events":{"click":"app.grid1.getStore().load();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#reset#}","itemId":"resetBtn","iconCls":"refresh_icon","x":"30"},"events":{"click":"app.queryForm.getForm().reset();\napp.grid1.getStore().removeAll();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","selType":"checkboxmodel","itemId":"grid1"},"events":{"itemdblclick":"app.setBtn.fireEvent('click');"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/ex/base/ex-ld-cat/DB/SELECT_XC_EX_LD_CAT"},"events":{"load":"var count = store.getCount();\nvar ins = \"(\";\nins = ins+\"'\"+\"'\";\nfor(var i=0;i<count;i++){\n  var EX_CAT_CODE = store.getAt(i).data.EX_CAT_CODE;\n    ins = ins+\",\"+\"'\"+EX_CAT_CODE+\"'\";\n}\nins = ins + \")\";\n_ins = ins;\n\n","beforeload":"store.proxy.extraParams.LEDGER_ID = app.LEDGER_ID.getValue() ;\nstore.proxy.extraParams.CODE_NAME = app.EX_CAT.getValue() ;\n"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#add#}","itemId":"addBtn","iconCls":"file_add_icon"},"events":{"click":"var ledger = app.LEDGER_ID.getValue();\nif(ledger === null){\n  Wb.toast('请选择账簿');\n  return;\n}\nvar win = new Ext.window.Window(app._win1);\nwin.show();\nwin.setIconCls('record_add_icon');\nwin.setTitle('添加');"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#set#}","itemId":"setBtn","iconCls":"file_edit_icon"},"events":{"click":"var rec = app.grid1.getSelection()[0];\nif(!rec){\n  Wb.toast('{#setMsg1#}');\n  return;\n}\nvar win = new Ext.window.Window(app._win2);\nwin.show();\nwin.setIconCls('record_edit_icon');\nwin.setTitle('{#set#}');\n//获取记录值\nvar ex_cat_code = rec.data.EX_CAT_CODE;\nvar ex_cat_name = rec.data.EX_CAT_NAME;\nvar process_id = rec.data.PROCESS_ID;\nvar process_name = rec.data.PROCESS_NAME;\nvar attCat = rec.data.ATT_CAT_CODE ;\n//设定值\napp.win2_ex_cat_code.setValue(ex_cat_code);\napp.win2_ex_cat_name.setValue(ex_cat_name);\napp.win2_process_id.setValue(process_id);\napp.win2_process_name.setValue(process_name);\napp.win2_rule_code.setValue('EX');\nWb.setValue(app.att_cat_code,{'att_cat_code':attCat}) ;\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"删除","itemId":"delBtn","iconCls":"file_delete_icon"},"events":{"click":"var records = app.grid1.getSelection() ;\nif(records.length === 0){\n  Wb.toast('请选择单据类型') ;\n  return false ;\n}\n\nvar paramArray = [] ;\nWb.each(records, function(r){\n  paramArray.push({\n    'EX_LD_CAT_ID' : r.get('EX_LD_CAT_ID'),\n    'EX_CAT_CODE'  : r.get('EX_CAT_CODE') \n  }) ;\n}) ;\n\nvar processbar = Ext.Msg.wait(\"正在执行数据删除操作...\", \"提示\") ;\n\nWb.confirm('您确定要删除此单据类型吗?', function(){\n  Wb.request({\n    url: 'm?xwl=xc/ex/base/ex-ld-cat/DB/delete-ld-cat',\n    params: {\n      'ledgerId' : app.LEDGER_ID.getValue() ,\n      'reqParams' : Wb.encode(paramArray) \n    },\n    success: function(resp) {\n      processbar.hide() ;\n      app.grid1.getStore().reload() ;\n      Wb.info('删除成功') ;\n    }\n  });\n}) ;\n\n"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#rowNum#}","align":"center","width":"50","xtype":"rownumberer","itemId":"ROWNUM_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#exLdCatId#}","hidden":"true","dataIndex":"EX_LD_CAT_ID","titleAlign":"center","itemId":"EX_LD_CAT_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#ledgerId#}","hidden":"true","dataIndex":"LEDGER_ID","titleAlign":"center","itemId":"LEDGER_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#txt1#}","width":"100","dataIndex":"EX_CAT_CODE","titleAlign":"center","itemId":"EX_CAT_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#txt2#}","width":"200","dataIndex":"EX_CAT_NAME","titleAlign":"center","itemId":"EX_CAT_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#processId#}","hidden":"true","dataIndex":"PROCESS_ID","titleAlign":"center","itemId":"PROCESS_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#processName#}","width":"200","dataIndex":"PROCESS_NAME","titleAlign":"center","itemId":"PROCESS_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#ruleCode#}","hidden":"true","dataIndex":"RULE_CODE","titleAlign":"center","itemId":"RULE_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#rule#}","width":"200","dataIndex":"RULE_DESC","titleAlign":"center","itemId":"RULE_DESC_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#txt5#}","hidden":"true","dataIndex":"ATT_CAT_CODE","itemId":"ATT_CAT_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#txt3#}","width":"200","dataIndex":"ATT_CAT_NAME","titleAlign":"center","itemId":"ATT_CAT_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#txt6#}","align":"right","dataIndex":"EX_ITEM_ENABLED","titleAlign":"center","itemId":"EX_ITEM_ENABLED_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}