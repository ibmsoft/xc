{"inframe":false,"title":"查询已签单据","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","itemId":"module"},"children":[{"configs":{"oracle":"SELECT exdoc.LEDGER_ID,\n       exdoc.CANCEL_AMT,\n       exdoc.PAY_METHOD,\n       exdoc.V_HEAD_ID,\n       exdoc.CREATED_BY,\n       exdoc.EX_CAT_CODE,\n       pay.PAY_TYPE,\n       pay.EX_PAY_ID,\n       exdoc.EX_DOC_ID,\n       exdoc.EX_DOC_CODE,\n       exdoc.EX_REASON,\n       exdoc.AMOUNT,\n       excat.EX_CAT_NAME,\n       xipemp.EMP_NAME,\n       exdoc.DEPT_ID,\n       xipdept.DEPT_NAME,\n       exdoc.PROJECT_ID,\n       pmproject.PROJECT_NAME,\n       exdoc.SIGN_STATUS,\n       xpf.form_url PC_A_FORM_URL,\n       to_char(exdoc.CREATION_DATE, 'yyyy-mm-dd') AS CREATION_DATE\n\n FROM xip_pub_users xipuser ,\n      xip_pub_emps xipemp ,\n      xc_ex_cat excat \n      LEFT JOIN xip_wf_process_forms xpf = xpf.form_id = excat.pc_a_form_id,\n      xc_ex_docs exdoc\n      LEFT JOIN xip_pub_depts xipdept ON exdoc.DEPT_ID = xipdept.DEPT_ID \n      LEFT JOIN xc_pm_projects pmproject ON exdoc.PROJECT_ID = pmproject.PROJECT_ID\n      LEFT JOIN xc_ex_pay pay ON exdoc.EX_PAY_ID = pay.EX_PAY_ID\n\n WHERE exdoc.EX_CAT_CODE = excat.EX_CAT_CODE\n   AND exdoc.CREATED_BY = xipuser.USER_ID\n   AND xipuser.EMP_ID = xipemp.EMP_ID\n   AND exdoc.LEDGER_ID = {?ledger_id?}\n   AND (exdoc.AUDIT_STATUS = 'C' OR exdoc.AUDIT_STATUS = 'E')\n   AND excat.IS_SIGN = 'Y'\n   AND (exdoc.SIGN_STATUS = '2' OR exdoc.SIGN_STATUS = 2)\n   AND (nvl(exdoc.EX_DOC_CODE,'%') like '%{#doccode#}%' OR nvl(exdoc.EX_REASON,'%') like '%{#doccode#}%')\n   AND nvl(xipemp.EMP_NAME,'%') like '%{#empname#}%' \n   AND nvl(xipdept.DEPT_NAME,'%') like '%{#deptId#}%'\n   AND nvl(pmproject.PROJECT_NAME,'%') like '%{#projectId#}%' \nORDER BY exdoc.CREATION_DATE DESC","itemId":"sqlswitcher1","mysql":"SELECT exdoc.LEDGER_ID,\n       exdoc.CANCEL_AMT,\n       exdoc.PAY_METHOD,\n       exdoc.V_HEAD_ID,\n       exdoc.CREATED_BY,\n       exdoc.EX_CAT_CODE,\n       pay.PAY_TYPE,\n       pay.EX_PAY_ID,\n       exdoc.EX_DOC_ID,\n       exdoc.EX_DOC_CODE,\n       exdoc.EX_REASON,\n       exdoc.AMOUNT,\n       excat.EX_CAT_NAME,\n       xipemp.EMP_NAME,\n       exdoc.DEPT_ID,\n       xipdept.DEPT_NAME, \n       exdoc.PROJECT_ID,\n       pmproject.PROJECT_NAME,\n       exdoc.SIGN_STATUS,\n       xpf.form_url PC_A_FORM_URL,\n       DATE_FORMAT(exdoc.CREATION_DATE, '%Y-%m-%d') AS CREATION_DATE\n\n FROM xip_pub_users xipuser,\n      xip_pub_emps xipemp ,\n      xc_ex_cat excat\n      LEFT JOIN xip_wf_process_forms xpf on excat.pc_a_form_id = xpf.form_id ,\n      xc_ex_docs exdoc\n      LEFT JOIN xip_pub_depts xipdept ON exdoc.DEPT_ID = xipdept.DEPT_ID \n      LEFT JOIN xc_pm_projects pmproject ON exdoc.PROJECT_ID = pmproject.PROJECT_ID\n      LEFT JOIN xc_ex_pay pay ON exdoc.EX_PAY_ID = pay.EX_PAY_ID\n\nWHERE exdoc.EX_CAT_CODE = excat.EX_CAT_CODE\n  AND exdoc.CREATED_BY = xipuser.USER_ID\n  AND xipuser.EMP_ID = xipemp.EMP_ID\n  AND exdoc.LEDGER_ID = {?ledger_id?}\n  AND (exdoc.AUDIT_STATUS = 'C' OR exdoc.AUDIT_STATUS = 'E')\n  AND excat.IS_SIGN = 'Y'\n  AND (exdoc.SIGN_STATUS = '2' OR exdoc.SIGN_STATUS = 2)\n  AND (IFNULL(exdoc.EX_DOC_CODE,'%') like '%{#doccode#}%' OR IFNULL(exdoc.EX_REASON,'%') like '%{#doccode#}%')\n  AND IFNULL(xipemp.EMP_NAME,'%') like '%{#empname#}%' \n  AND IFNULL(xipdept.DEPT_NAME,'%') like '%{#deptId#}%'\n  AND IFNULL(pmproject.PROJECT_NAME,'%') like '%{#projectId#}%' \nORDER BY exdoc.CREATION_DATE DESC"},"children":[],"expanded":false,"type":"sqlswitcher"},{"configs":{"sql":"{#sqlswitcher1#}","itemId":"dataprovider1"},"children":[],"expanded":false,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":"seek_icon"}