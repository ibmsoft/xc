{"inframe":false,"title":"删除账簿费用分配表","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"var datas = Wb.decode(request.getParameter('datas'));\nWb.each(datas,function(data){\n  var ledger_id = data.LEDGER_ID;\n  var ex_item_id = data.EX_ITEM_ID;\n  var ex_item_name = data.EX_ITEM_NAME;\n//验证费用项目在单据类型中是否被引用\napp.run('select * from xc_ex_ld_cat_items where EX_ITEM_ID = \\''+ex_item_id+'\\' and LEDGER_ID = \\''+ledger_id+'\\'',\n        {errorText: '\"'+ex_item_name+'\"已被引用'}\n       );\n//验证费用项目在费用申请单中是否被引用\napp.run('select * from xc_ex_docs where  EX_ITEM_ID = \\''+ex_item_id+'\\' and LEDGER_ID = \\''+ledger_id+'\\'',\n    {errorText:'\"'+ex_item_name+'\"已被引用'}\n   );\n//验证费用项目在差旅、报销中是否被引用\napp.run('select t1.EX_ITEM_ID from xc_ex_doc_dtl t1,xc_ex_docs t2 where t1.EX_DOC_ID = t2.EX_DOC_ID and t1.EX_ITEM_ID = \\''+ex_item_id+'\\' and t2.LEDGER_ID = \\''+ledger_id+'\\'',\n        {errorText:'\"'+ex_item_name+'\"已被引用'}\n       );\n});","itemId":"module"},"children":[{"configs":{"sql":"DELETE t.*\nFROM\n\txc_ex_ld_items t\nWHERE\n\tt.EX_LD_ITEM_ID = {?EX_LD_ITEM_ID?}","arrayName":"datas","itemId":"query1"},"children":[],"expanded":false,"type":"query"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}