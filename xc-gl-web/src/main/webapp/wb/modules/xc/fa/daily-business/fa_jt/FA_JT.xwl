{"inframe":false,"title":"计提折旧","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/fa/daily-business/fa_jt/FA_JT\");","itemId":"module"},"children":[{"configs":{"layout":"fit","itemId":"viewport"},"events":{"afterrender":"app.LEDGER.getStore().load(function(){\n  if(app.LEDGER.getStore().getCount()>0){\n    app.LEDGER.setValue(app.LEDGER.getStore().getAt(0).get('ID'));\n  }\n});"},"children":[{"configs":{"layout":"column","bodyPadding":"20 20 20 20","itemId":"panel"},"children":[{"configs":{"labelWidth":"50","displayField":"NAME","width":"180","valueField":"ID","labelAlign":"right","itemId":"LEDGER","fieldLabel":"{#ledger#}"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/com-qry/gl-ledgers/select-sec-ledger"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"},{"configs":{"labelWidth":"50","displayField":"PERIOD_CODE","width":"180","valueField":"PERIOD_CODE","labelAlign":"right","itemId":"PERIODS","fieldLabel":"{#period#}"},"children":[{"configs":{"pageSize":"-1","autoLoad":"false","itemId":"store","url":"m?xwl=xc/fa/common/FA_INFO_PANEL/data/getPeriods"},"events":{"beforeload":"if(Ext.isEmpty(app.LEDGER.getValue())){\n  Wb.toast('{#selectLedgerMsg#}');\n  return;\n}\n\nstore.getProxy().extraParams.ledger = app.LEDGER.getValue();"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"},{"configs":{"text":"{#ensureBtn#}","width":"60","itemId":"ensureBtn","x":"10"},"events":{"click":"if(Ext.isEmpty(app.LEDGER.getValue())){\n  Wb.toast('{#selectLedgerMsg#}');\n  return;\n}\n\nif(Ext.isEmpty(app.PERIODS.getValue())){\n  Wb.toast('{#selectPeriodMsg#}');\n  return;\n}\n\nExt.Msg.wait('{#waitMsg#}');\nExt.Ajax.request({\n  url: 'faDepreciationAction.do?method=calcDepr',\n  method: 'POST',\n  timeout: 300000,\n  params: {ledgerId: app.LEDGER.getValue(), periodCode:app.PERIODS.getValue()},\n  success: function(res, opts) {\n    Ext.Msg.hide();\n    var temp = res.responseText;\n    var resp = Ext.JSON.decode(temp);\n\n    Wb.toast(resp.msg);\n  },\n  failure: function(res, opts) {\n    Ext.Msg.hide();\n    Wb.error('{#failureMsg#}');\n  }\n});"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}