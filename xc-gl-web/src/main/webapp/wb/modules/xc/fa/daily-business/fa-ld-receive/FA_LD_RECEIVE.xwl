{"inframe":false,"title":"接收资产","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/fa/daily-business/fa-ld-receive/FA_LD_RECEIVE\");","itemId":"module"},"children":[{"configs":{"title":"{#faCatsWinTitle#}","height":"400","layout":"border","width":"550","closeAction":"hide","itemId":"faRecevieWin","modal":"true"},"events":{"beforeshow":"app.faCatsGrid.getStore().load();","close":"app.grid.getStore().load();"},"children":[{"configs":{"region":"center","multiSelect":"true","itemId":"faRecevieGrid","simpleSelect":"true"},"children":[{"configs":{"itemId":"columns"},"children":[{"configs":{"width":"40","align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"rowCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"hidden":"true","dataIndex":"CAT_ID","itemId":"catIdCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#catCodeCol#}","width":"120","dataIndex":"CAT_CODE","itemId":"catCodeCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#catNameCol#}","width":"120","dataIndex":"CAT_NAME","itemId":"catNameCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#upCatNameCol#}","width":"120","dataIndex":"UP_CODE","itemId":"upCatNameCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#faPropertyCol#}","width":"120","dataIndex":"FA_PROPERTY","itemId":"faPropertyCol"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"itemId":"store","url":"m?xwl=xc/fa/daily-business/fa-ld-receive/data/getApInvGl"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"grid"},{"configs":{"itemId":"buttons"},"children":[{"configs":{"text":"{#ensureBtn#}","itemId":"ensureBtn"},"events":{"click":"var recs = app.faCatsGrid.getSelection();\nif (!recs.length) {\n  Wb.warn('{#ensureCheckMsg#}');\n  return;\n}\n\nvar syncArray = new Array();\nfor(var i=0; i<recs.length; i++){\n  var record = {};\n  Ext.apply(record, recs[i].data);\n  record.LEDGER_ID = app.ledgerCombox.getValue();\n  syncArray.push(record);\n}\n\nExt.Msg.wait('{#syncWaitMsg#}');\nExt.Ajax.request({\n  url : 'm?xwl=xc/fa/ld-base/fa-ld-cat-setting/data/syncFaCat',\n  method: 'POST',\n  params: {syncArray: Ext.JSON.encode(syncArray)},\n  success: function(response,options){\n    Ext.Msg.hide();\n    Wb.toast('{#syncSuccessMsg#}');\n    app.faCatsWin.close();\n  },\n  failure: function(response,options){\n    Ext.Msg.hide();\n    Wb.error('{#syncFailureMsg#}');\n  }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#cancelBtn#}","itemId":"cancelBtn"},"events":{"click":"app.faCatsWin.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"array"}],"expanded":false,"type":"window"},{"configs":{"layout":"border","itemId":"viewport"},"children":[{"configs":{"region":"north","height":"45","layout":"column","itemId":"queryPanel","bodyPadding":"10 0 0 20"},"children":[{"configs":{"labelWidth":"60","displayField":"LEDGER_NAME","width":"200","valueField":"LEDGER_ID","labelAlign":"right","itemId":"queryLedger","fieldLabel":"{#queryLedger#}"},"events":{"select":"app.queryBtn.fireEvent('click');"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/com-qry/gl-ledgers/select-sec-fd-ledgers"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"},{"configs":{"labelWidth":"130","displayField":"PERIOD_CODE","width":"250","valueField":"PERIOD_CODE","labelAlign":"right","itemId":"queryPeriods","fieldLabel":"{#queryPeriods#}"},"events":{"select":"app.queryBtn.fireEvent('click');"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/fa/daily-business/fa-ld-receive/data/getPeridos"},"events":{"beforeload":"if(Ext.isEmpty(app.queryLedger.getValue())){\n  Wb.toast('{#selectLedgerMsgTips#}');\n  return;\n}\nstore.getProxy().extraParams.ledger = app.queryLedger.getValue();"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"},{"configs":{"labelWidth":"100","width":"220","labelAlign":"right","itemId":"queryFaName","fieldLabel":"{#queryFaName#}"},"events":{"specialkey":"if(e.getKey() == 13){\n  app.queryBtn.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#queryBtn#}","itemId":"queryBtn","iconCls":"seek_icon","x":"20"},"events":{"click":"if(Ext.isEmpty(app.queryLedger.getValue())){\n  Wb.toast('{#selectLedgerMsgTips#}');\n  return;\n}\napp.grid.store.load();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#resetBtn#}","itemId":"resetBtn","iconCls":"refresh_icon","x":"40"},"events":{"click":"Wb.reset(app.queryPanel);\napp.queryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"},{"configs":{"region":"center","selType":"checkboxmodel","itemId":"grid"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#receiveBtn#}","itemId":"receiveBtn","iconCls":"last_icon"},"events":{"click":"Wb.addEdit(app.grid);"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"-","itemId":"sp1"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#delBtn#}","itemId":"delBtn","iconCls":"file_delete_icon"},"events":{"click":"Wb.remove(app.grid);\n\napp.saveBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"},{"configs":{"autoLoad":"false","itemId":"store","url":"m?xwl=xc/fa/daily-business/fa-ld-receive/data/getFaLdReceive"},"events":{"beforeload":"var whereSql = \" 1=1 \";\n\nif(!Ext.isEmpty(app.queryLedger.getValue())){\n  whereSql = whereSql + \" AND a.LEDGER_ID = '\" + app.queryLedger.getValue() + \"' \";\n}\n\nif(!Ext.isEmpty(app.queryPeriods.getValue())){\n  whereSql = whereSql + \" AND a.PERIOD_CODE = '\" + app.queryPeriods.getValue() + \"' \";\n}\n\nif(!Ext.isEmpty(app.queryFaName.getValue())){\n  whereSql = whereSql + \" AND a.ZCMC like '%\" + app.queryFaName.getValue() + \"%' \";\n}\n\nstore.getProxy().extraParams.whereSql = whereSql;"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"xtype":"rownumberer","align":"center","width":"40","titleAlign":"center","itemId":"rowCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#faNameCol#}","width":"180","dataIndex":"ZCMC","itemId":"faNameCol"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#periodsCol#}","width":"120","dataIndex":"PERIOD_CODE","itemId":"periodsCol"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#vendorNameCol#}","width":"180","dataIndex":"VENDOR_NAME","itemId":"vendorNameCol"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#cgfpCol#}","width":"180","dataIndex":"CGFP","itemId":"cgfpCol"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#slCol#}","width":"120","align":"right","dataIndex":"SL","titleAlign":"left","itemId":"slCol"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#dwCol#}","width":"100","dataIndex":"DW","itemId":"dwCol"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#wsjeCol#}","width":"180","align":"right","titleAlign":"left","itemId":"wsjeCol"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#ywrqCol#}","width":"180","itemId":"ywrqCol"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#zckmCol#}","width":"180","dataIndex":"ZCKM_VIEW","itemId":"zckmCol"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#cbzxCol#}","width":"180","dataIndex":"CBZX_NAME","itemId":"cbzxCol"},"children":[],"expanded":true,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}