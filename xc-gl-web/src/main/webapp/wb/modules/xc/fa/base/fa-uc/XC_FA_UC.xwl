{"inframe":false,"title":"资产使用情况","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"request.setAttribute('contextPath',request.getContextPath());\n//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/fa/base/fa-uc/XC_FA_UC\");","itemId":"module"},"events":{"finalize":"var opType = '';//操作类型"},"children":[{"configs":{"itemId":"windows"},"children":[{"configs":{"height":"180","width":"600","closeAction":"destroy","buttonAlign":"center","itemId":"win","dialog":"true"},"events":{"beforeshow":"\n","show":"if(opType == 'create'){\n  app.USE_CODE.setReadOnly(false);\n}else{\n  app.USE_CODE.setReadOnly(true);\n}\n"},"children":[{"configs":{"tagConfigs":"{\nbaseCls: 'my-panel-no-border'\n}","layout":"column","margin":"10 0 0 0","itemId":"p1"},"children":[{"configs":{"tagConfigs":"{\n  columnWidth:0.49\n}","labelWidth":"90","allowBlank":"false","labelAlign":"right","itemId":"USE_CODE","fieldLabel":"<font color='red'>*<\/font>{#useCode#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"tagConfigs":"{\n  columnWidth:0.49\n}","labelWidth":"100","allowBlank":"false","labelAlign":"right","itemId":"USE_NAME","fieldLabel":"<font color='red'>*<\/font>{#useName#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\nbaseCls: 'my-panel-no-border'\n}","layout":"column","margin":"10 0 0 0","itemId":"p2"},"children":[{"configs":{"tagConfigs":"{\n  columnWidth:0.98\n}","labelWidth":"90","labelAlign":"right","itemId":"USE_DESC","fieldLabel":"{#useDesc#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\nbaseCls: 'my-panel-no-border'\n}","layout":"column","margin":"10 0 10 0","itemId":"p3"},"children":[{"configs":{"itemId":"USE_ID"},"children":[],"expanded":false,"type":"hidden"},{"configs":{"tagConfigs":"{\n  columnWidth:0.98\n}","labelWidth":"90","allowBlank":"false","displayField":"VAL_NAME","valueField":"VAL_CODE","emptyText":"{#please#}","labelAlign":"right","itemId":"FA_PROPERTY","fieldLabel":"<font color='red'>*<\/font>{#fa_property#}","editable":"false"},"events":{"select":"\n"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xc/fa/base/fa-uc/data/SELECT_XC_FA_PROPERTY"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"window"}],"expanded":true,"type":"folder"},{"configs":{"layout":"border","itemId":"viewport1"},"children":[{"configs":{"region":"north","itemId":"form1"},"children":[{"configs":{"layout":"column","itemId":"panel1"},"children":[{"configs":{"labelWidth":"120","displayField":"VAL_NAME","width":"300","valueField":"VAL_CODE","emptyText":"{#please#}","labelAlign":"right","itemId":"fa_attr","padding":"10 10 10 0","fieldLabel":"{#fa_property#}"},"events":{"select":"app.queryBtn.fireEvent('click');\n"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/fa/base/fa-uc/data/SELECT_XC_FA_PROPERTY"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"},{"configs":{"labelWidth":"120","width":"300","labelAlign":"right","padding":"10 10 10 0","itemId":"useName","fieldLabel":"{#useName#}"},"events":{"specialkey":"if(e.getKey() == 13){\n  app.queryBtn.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#query#}","margin":"10 10 10 0","itemId":"queryBtn","iconCls":"seek_icon"},"events":{"click":"var fa_attr = app.fa_attr.getValue();\napp.grid1.store.load({\n  params:{queryBy:fa_attr}\n});\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#reset#}","margin":"10 10 10 0","itemId":"resetBtn","iconCls":"refresh_icon"},"events":{"click":"app.fa_attr.setValue();\napp.useName.setValue('');\n\napp.queryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","multiSelect":"true","selType":"checkboxmodel","itemId":"grid1"},"events":{"itemdblclick":"app.editBtn.fireEvent('click');"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xc/fa/base/fa-uc/data/SELECT_XC_FA_UC"},"events":{"beforeload":"var queryCondition = \"\";\n\nif(!Ext.isEmpty(app.fa_attr.getValue())){\n  queryCondition = queryCondition + \" and a.FA_PROPERTY = '\"+app.fa_attr.getValue()+\"' \";\n}\n\nif(!Ext.isEmpty(app.useName.getValue())){\n  queryCondition = queryCondition + \" and a.USE_NAME like '%\"+app.useName.getValue()+\"%' \";\n}\n\nstore.getProxy().extraParams.queryCondition = queryCondition;"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#add#}","itemId":"addbtn","iconCls":"file_add_icon"},"events":{"click":"// if(app.bg_hrcy_id.getValue()===null){\n//   Wb.toast('请选择预算项目体系');\n//   return false;\n// }\nopType = 'create';//操作类型\n\nvar win = new Ext.window.Window(app._win); //app._win指向配置对象而非实例\nwin.show();\n\napp.FA_PROPERTY.setReadOnly(false);\n\nwin.setIconCls('record_add_icon');\napp.FA_PROPERTY.setValue(app.fa_attr.getValue());\nWb.setTitle(win, '{#add#}');\n// 窗口每次动态生成,方法在窗口销毁时自动销毁\nwin.mon(win, 'ok', function() {\n \n  var USE_CODE = app.USE_CODE.getValue();\n  var USE_NAME = app.USE_NAME.getValue();\n  var USE_DESC = app.USE_DESC.getValue();\n  var FA_PROPERTY= app.FA_PROPERTY.getValue();\n\n \n  var params = {USE_CODE:USE_CODE,\n                USE_NAME:USE_NAME,\n                USE_DESC:USE_DESC,\n                FA_PROPERTY:FA_PROPERTY\n};\n  \n  Wb.request({\n    url: 'm?xwl=xc/fa/base/fa-uc/data/INSERT_XC_FA_UC',\n    params: params,\n    success: function(resp) {\n      app.queryBtn.fireEvent('click');\n      win.close(); //根据closeAction属性，默认为销毁\n    }\n  });\n});\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#edit#}","itemId":"editBtn","iconCls":"file_edit_icon"},"events":{"click":"var rec = app.grid1.getSelection()[0];\nif (!rec) {\n  Wb.toast('{#selRecord#}');\n  return;\n}\nopType = 'update';\n\nvar win = new Ext.window.Window(app._win); //app._win指向配置对象而非实例\nwin.show();\n\napp.FA_PROPERTY.setReadOnly(true);\n\nwin.setIconCls('record_edit_icon');\nWb.setTitle(win, '{#edit#}');\nWb.setValue(win, rec.data); //把记录数据应用到窗口\n//窗口每次动态生成,方法在窗口销毁时自动销毁\nwin.mon(win, 'ok', function() {\n  var USE_ID = rec.data.USE_ID;\nvar USE_CODE = app.USE_CODE.getValue();\n  var USE_NAME = app.USE_NAME.getValue();\n  var USE_DESC = app.USE_DESC.getValue();\n  var FA_PROPERTY= app.FA_PROPERTY.getValue();\n\n  var params = {\n                USE_ID : USE_ID,\n               USE_CODE:USE_CODE,\n                USE_NAME:USE_NAME,\n                USE_DESC:USE_DESC,\n                FA_PROPERTY:FA_PROPERTY\n               };\n  \n  Wb.request({\n    url: 'm?xwl=xc/fa/base/fa-uc/data/UPDATE_XC_FA_UC',\n    params: params,\n    success: function(resp) {\n      app.queryBtn.fireEvent('click');\n      win.close(); \n    }\n  });\n});\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#delete#}","itemId":"delBtn","iconCls":"file_delete_icon"},"events":{"click":"\n//使用下面方法用于演示完整的步骤\nvar recs = app.grid1.getSelection();\nif (!recs.length) {\n  Wb.toast('{#selRecord#}');\n  return;\n}\nWb.confirm('{#confirm#}', function() {\n  Wb.request({\n    url: 'm?xwl=xc/fa/base/fa-uc/data/DELETE_XC_FA_UC',\n    params: {data:Wb.getData(recs)},\n    success: function(resp) {\n      app.queryBtn.fireEvent('click');\n    }\n  });\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#import#}","itemId":"importBtn","iconCls":"import_icon"},"events":{"click":"\nXip.importExcel('XC_FA_USES', null);\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#export#}","itemId":"exportBtn","iconCls":"export_icon"},"events":{"click":"var queryBy=app.fa_attr.getValue();\nif (queryBy == null){\nqueryBy='';\n}\nXip.exportExcel('XC_FA_USES', {queryBy:queryBy}, '资产用途');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#rowNo#}","xtype":"rownumberer","width":"50","align":"center","titleAlign":"center","itemId":"ROW_NUM_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"用途ID","hidden":"true","dataIndex":"USE_ID","titleAlign":"center","itemId":"USE_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#fa_property#}","width":"160","dataIndex":"PROPERTY_NAME","itemId":"FA_PROPERTY_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#useCode#}","width":"160","dataIndex":"USE_CODE","itemId":"USE_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#useName#}","width":"160","dataIndex":"USE_NAME","itemId":"USE_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#useDesc#}","dataIndex":"USE_DESC","itemId":"USE_DESC_COL","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#useCode#}","hidden":"true","width":"200","dataIndex":"FA_PROPERTY","itemId":"FA_PROPERTY_CODE_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}