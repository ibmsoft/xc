{"inframe":false,"title":"根据头id查询资产调整行记录","hidden":false,"roles":{"default":1},"children":[{"configs":{"itemId":"module"},"children":[{"configs":{"sql":"select j.*,\n       '' VOUCHER_FLAG,\n       xfa.ZCBM,\n       xfa.ZCMC,\n       CASE WHEN j.ADJ_TYPE = 'ZJFF' THEN (SELECT m.METHOD_NAME FROM xc_fa_depr_methods m WHERE m.METHOD_CODE = j.OLD_VAL)\n            WHEN j.ADJ_TYPE = 'ZCYT' THEN (SELECT u.USE_NAME FROM xc_fa_uses u WHERE u.USE_CODE = j.OLD_VAL)\n            WHEN j.ADJ_TYPE = 'CAT_CODE' THEN (SELECT c.CAT_NAME FROM xc_fa_cats c WHERE c.CAT_CODE = j.OLD_VAL)\n            WHEN j.ADJ_TYPE = 'ZCKM' THEN (SELECT acc.ACC_NAME \n                                              FROM xc_gl_accounts acc \n                                             WHERE acc.ACC_CODE = j.OLD_VAL \n                                               AND acc.ACC_HRCY_ID = (SELECT l.ACC_HRCY_ID \n                                                                        FROM xc_gl_ledgers l \n                                                                       WHERE l.ACC_HRCY_ID = acc.ACC_HRCY_ID \n                                                                         AND l.LEDGER_ID = xfa.LEDGER_ID))\n            WHEN j.ADJ_TYPE = 'YZ' THEN j.OLD_VAL\n            WHEN j.ADJ_TYPE = 'SYNX' THEN j.OLD_VAL\n            WHEN j.ADJ_TYPE = 'SFZJ' THEN (CASE WHEN j.OLD_VAL = 'Y' THEN '是' ELSE '否' END)\n            WHEN j.ADJ_TYPE = 'JZZBKM' THEN (SELECT acc.ACC_NAME \n                                                FROM xc_gl_accounts acc \n                                               WHERE acc.ACC_CODE = j.OLD_VAL \n                                                 AND acc.ACC_HRCY_ID = (SELECT l.ACC_HRCY_ID \n                                                                          FROM xc_gl_ledgers l \n                                                                         WHERE l.ACC_HRCY_ID = acc.ACC_HRCY_ID \n                                                                           AND l.LEDGER_ID = xfa.LEDGER_ID))\n            WHEN j.ADJ_TYPE = 'LJZJTXKM' THEN (SELECT acc.ACC_NAME \n                                               FROM xc_gl_accounts acc \n                                              WHERE acc.ACC_CODE = j.OLD_VAL \n                                                AND acc.ACC_HRCY_ID = (SELECT l.ACC_HRCY_ID \n\t\t                                                         FROM xc_gl_ledgers l \n\t\t                                                        WHERE l.ACC_HRCY_ID = acc.ACC_HRCY_ID \n\t\t                                                          AND l.LEDGER_ID = xfa.LEDGER_ID))\n            WHEN j.ADJ_TYPE = 'CZL' THEN j.OLD_VAL\n            WHEN j.ADJ_TYPE = 'LJZJ_LJTX' THEN j.OLD_VAL\n            WHEN j.ADJ_TYPE = 'CBZX' THEN (SELECT d.DEPT_NAME FROM xip_pub_depts d WHERE d.DEPT_ID = j.OLD_VAL)\n            WHEN j.ADJ_TYPE = 'JZZB' THEN j.OLD_VAL END OLD_VAL_VIEW,\n       CASE WHEN j.ADJ_TYPE = 'ZJFF' THEN (SELECT m.METHOD_NAME FROM xc_fa_depr_methods m WHERE m.METHOD_CODE = j.NEW_VAL)\n            WHEN j.ADJ_TYPE = 'ZCYT' THEN (SELECT u.USE_NAME FROM xc_fa_uses u WHERE u.USE_CODE = j.NEW_VAL)\n            WHEN j.ADJ_TYPE = 'CAT_CODE' THEN (SELECT c.CAT_NAME FROM xc_fa_cats c WHERE c.CAT_CODE = j.NEW_VAL)\n            WHEN j.ADJ_TYPE = 'ZCKM' THEN (SELECT acc.ACC_NAME \n                                              FROM xc_gl_accounts acc \n                                             WHERE acc.ACC_CODE = j.NEW_VAL \n                                               AND acc.ACC_HRCY_ID = (SELECT l.ACC_HRCY_ID \n                                                                        FROM xc_gl_ledgers l \n                                                                       WHERE l.ACC_HRCY_ID = acc.ACC_HRCY_ID \n                                                                         AND l.LEDGER_ID = xfa.LEDGER_ID))\n            WHEN j.ADJ_TYPE = 'YZ' THEN j.NEW_VAL\n            WHEN j.ADJ_TYPE = 'SYNX' THEN j.NEW_VAL\n            WHEN j.ADJ_TYPE = 'SFZJ' THEN (CASE WHEN j.NEW_VAL = 'Y' THEN '是' ELSE '否' END)\n            WHEN j.ADJ_TYPE = 'JZZBKM' THEN (SELECT acc.ACC_NAME \n                                                FROM xc_gl_accounts acc \n                                               WHERE acc.ACC_CODE = j.NEW_VAL \n                                                 AND acc.ACC_HRCY_ID = (SELECT l.ACC_HRCY_ID \n                                                                          FROM xc_gl_ledgers l \n                                                                         WHERE l.ACC_HRCY_ID = acc.ACC_HRCY_ID \n                                                                           AND l.LEDGER_ID = xfa.LEDGER_ID))\n            WHEN j.ADJ_TYPE = 'LJZJTXKM' THEN (SELECT acc.ACC_NAME \n                                               FROM xc_gl_accounts acc \n                                              WHERE acc.ACC_CODE = j.NEW_VAL \n                                                AND acc.ACC_HRCY_ID = (SELECT l.ACC_HRCY_ID \n\t\t                                                         FROM xc_gl_ledgers l \n\t\t                                                        WHERE l.ACC_HRCY_ID = acc.ACC_HRCY_ID \n\t\t                                                          AND l.LEDGER_ID = xfa.LEDGER_ID))\n            WHEN j.ADJ_TYPE = 'CZL' THEN j.NEW_VAL\n            WHEN j.ADJ_TYPE = 'LJZJ_LJTX' THEN j.NEW_VAL\n            WHEN j.ADJ_TYPE = 'CBZX' THEN (SELECT d.DEPT_NAME FROM xip_pub_depts d WHERE d.DEPT_ID = j.NEW_VAL)\n            WHEN j.ADJ_TYPE = 'JZZB' THEN j.NEW_VAL END NEW_VAL_VIEW,\n       (SELECT t.TRANS_DESC \n          FROM xc_fa_trans_type t\n         WHERE t.TRANS_CODE = j.ADJ_TYPE) ADJ_TYPE_VIEW,\n       (SELECT a.ACC_NAME \n          FROM xc_gl_accounts a \n         WHERE a.ACC_CODE = j.DFKM \n           AND a.ACC_HRCY_ID = (SELECT l.ACC_HRCY_ID \n                                  FROM xc_gl_ledgers l \n                                 WHERE l.ACC_HRCY_ID = a.ACC_HRCY_ID \n                                   AND l.LEDGER_ID = (SELECT h.LEDGER_ID \n                                                        FROM xc_fa_adj_h h\n                                                        WHERE h.ADJ_H_ID = j.ADJ_H_ID))) DFKM_VIEW\n  from xc_fa_adj_l j\n  left join xc_fa_additions xfa on xfa.ASSET_ID = j.ASSET_ID\n where j.ADJ_D_ID = {?adjLid?}\n ","type":"object","itemId":"dataprovider"},"children":[],"expanded":false,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}