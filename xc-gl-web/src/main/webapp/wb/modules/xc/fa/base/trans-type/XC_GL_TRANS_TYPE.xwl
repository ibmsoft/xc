{"inframe":false,"title":"事务类型","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/fa/base/trans-type/XC_GL_TRANS_TYPE\");","itemId":"module"},"children":[{"configs":{"layout":"border","itemId":"viewport"},"children":[{"configs":{"region":"north","height":"45","layout":"column","itemId":"queryPanel","bodyPadding":"10 0 0 20"},"children":[{"configs":{"labelWidth":"120","width":"300","labelAlign":"right","itemId":"transCode","fieldLabel":"{#transCode#}"},"events":{"specialkey":"app.queryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#queryBtn#}","width":"60","itemId":"queryBtn","iconCls":"seek_icon","x":"20"},"events":{"click":"app.store.load();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#resetBtn#}","width":"60","itemId":"resetBtn","iconCls":"refresh_icon","x":"40"},"events":{"click":"app.transCode.setValue('');\napp.queryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"},{"configs":{"region":"center","selType":"checkboxmodel","itemId":"grid","editable":"true"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#addBtn#}","itemId":"addBtn","iconCls":"file_add_icon"},"events":{"click":"Wb.addEdit(app.grid);"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"-","itemId":"sp1"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#delBtn#}","itemId":"delBtn","iconCls":"file_delete_icon"},"events":{"click":"Wb.remove(app.grid);\n\napp.saveBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"-","itemId":"sp2"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#saveBtn#}","itemId":"saveBtn","iconCls":"save_icon"},"events":{"click":"if (!Wb.verifyGrid(app.grid)){return;} //验证数据是否合法\n  \n//判断编码是否存在\nvar modifiedRecords = app.store.getModifiedRecords();\nfor(var i=0; i<modifiedRecords.length; i++){\n  var record = modifiedRecords[i];\n  \n  for(var j=0; j<app.store.getCount(); j++){\n    var compareRecord = app.store.getAt(j);\n    if(record!=compareRecord){\n      if(record.get('TRANS_CODE') == compareRecord.get('TRANS_CODE')){\n        app.grid.getSelectionModel().deselectAll();\n        app.grid.getSelectionModel().select(record);\n        Wb.info('{#codeExistBeforeMsg#}' + record.get('TRANS_CODE') + '{#codeExistAfterMsg#}');\n        return;\n      }\n    }\n  }\n}\n\nWb.sync({\n  grid: app.grid,\n  url: 'm?xwl=xc/fa/base/trans-type/data/save',\n  message: '{#saveWaitMsg#}',\n  success: function(resp) {\n    Wb.info('{#successMsg#}');\n    //ID_FIELD值在后台生成，把返回的ID_FIELD值列表同步到表格中\n    Wb.syncCreate(app.grid, Wb.decode(resp.responseText));\n  }\n});"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"},{"configs":{"pageSize":"-1","itemId":"store","autoLoad":"true","url":"m?xwl=xc/fa/base/trans-type/data/getFaTransType"},"events":{"beforeload":"store.getProxy().extraParams.transCode = app.transCode.getValue();"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"xtype":"rownumberer","align":"center","width":"40","titleAlign":"center","itemId":"rowCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#transCode#}<font color=\"red\">*<\/font>","width":"180","dataIndex":"TRANS_CODE","itemId":"transCodeCol"},"children":[{"configs":{"allowBlank":"false","itemId":"editor"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"column"},{"configs":{"text":"{#moduleCol#}","width":"150","dataIndex":"MODULE","itemId":"moduleCol","renderer":"if(value=='FA'){\n  return '资产模块';\n}else{\n  return value;\n}"},"children":[{"configs":{"pickList":"[['FA','资产模块']]","itemId":"editor"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"column"},{"configs":{"text":"{#transDescCol#}","width":"300","dataIndex":"TRANS_DESC","itemId":"transDescCol"},"children":[{"configs":{"itemId":"editor"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"column"},{"configs":{"text":"{#linkUrlCol#}","width":"180","dataIndex":"LINK_URL","itemId":"linkUrlCol"},"children":[{"configs":{"itemId":"editor"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"column"},{"configs":{"text":"{#canEditColsCol#}","width":"300","dataIndex":"CAN_EDIT_COLS","itemId":"canEditColsCol","renderer":"if(!Ext.isEmpty(value)){\n  var rendererValue = value;\n  if(value.indexOf('DEPT_ID')!=-1){\n    rendererValue = rendererValue.replace('DEPT_ID', '成本中心');\n  }\n  \n  if(value.indexOf('PROJECT_ID')!=-1){\n    rendererValue = rendererValue.replace('PROJECT_ID', '项目');\n  }\n  \n  if(value.indexOf('DR_ACCT')!=-1){\n    rendererValue = rendererValue.replace('DR_ACCT', '借方科目');\n  }\n  \n  if(value.indexOf('DR_CCID')!=-1){\n    rendererValue = rendererValue.replace('DR_CCID', '借方科目组合');\n  }\n  \n  if(value.indexOf('CR_ACCT')!=-1){\n    rendererValue = rendererValue.replace('CR_ACCT', '贷方科目');\n  }\n  \n  if(value.indexOf('CR_CCID')!=-1){\n    rendererValue = rendererValue.replace('CR_CCID', '贷方科目组合');\n  }\n  \n  if(value.indexOf('SUMMARY')!=-1){\n    rendererValue = rendererValue.replace('SUMMARY', '摘要');\n  }\n  \n  return rendererValue;\n}else{\n  return value;\n}"},"children":[{"configs":{"multiSelect":"true","pickList":"[['DEPT_ID','成本中心'],['PROJECT_ID','项目'],['DR_ACCT','借方科目'],['DR_CCID','借方科目组合'],['CR_ACCT','贷方科目'],['CR_CCID','贷方科目组合'],['SUMMARY','摘要']]","itemId":"editor"},"children":[],"expanded":false,"type":"combo"}],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}