{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"request.setAttribute(\"contextPath\", request.getContextPath());\n\nvar lang = request.getSession().getAttribute(\"XzSessionVars\").get('language');\nrequest.setAttribute(\"language\",lang);","serverScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/fa/ld-base/fa-ld-cat-setting/fa-ld-cat-setting\");","itemId":"module"},"events":{"initialize":"function returnRowFn(record, type){\n  if(type == 'acc_ld'){\n  \n  }\n}"},"children":[{"configs":{"height":"350","layout":"fit","width":"800","closeAction":"hide","buttonAlign":"center","itemId":"ldCastWin","modal":"true","maximizable":"true"},"events":{"beforeshow":"app.YZKM_XWL.ACC_NAME.fieldLabel = '{#yzkmCol#}';\napp.FYKM_XWL.ACC_NAME.fieldLabel = '{#fykmCol#}';\napp.QLKM_XWL.ACC_NAME.fieldLabel = '{#qlkmCol#}';\napp.LJZJTXKM_XWL.ACC_NAME.fieldLabel = '{#ljzktxkmCol#}';\napp.JZZBKM_XWL.ACC_NAME.fieldLabel = '{#jzzbkmCol#}';\napp.JZSSKM_XWL.ACC_NAME.fieldLabel = '{#jzsskmCol#}';\n\napp.YZKM_XWL.ACC_NAME.labelWidth = 120;\napp.FYKM_XWL.ACC_NAME.labelWidth = 120;\n//app.QLKM_XWL.ACC_NAME.labelWidth = 100;\n//app.LJZJTXKM_XWL.ACC_NAME.labelWidth = 100;\napp.JZZBKM_XWL.ACC_NAME.labelWidth = 120;\n//app.JZSSKM_XWL.ACC_NAME.labelWidth = 100;","close":"app.grid.getStore().load();"},"children":[{"configs":{"style":"border-width:0px","bodyPadding":"20 20 20 10","itemId":"ldCastForm"},"children":[{"configs":{"hidden":"true","itemId":"hidePanel"},"children":[{"configs":{"itemId":"SETTING_ID"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"height":"30","style":"border-width:0px","layout":"column","border":"false","itemId":"r1"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"d1"},"children":[{"configs":{"labelWidth":"120","hidden":"true","labelAlign":"right","itemId":"LEDGER_ID","fieldLabel":"{#ledgerCombox#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"120","readOnly":"true","labelAlign":"right","itemId":"LEDGER_NAME","fieldLabel":"{#ledgerCombox#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"d2"},"children":[{"configs":{"labelWidth":"120","readOnly":"true","labelAlign":"right","itemId":"FA_PROPERTY","fieldLabel":"{#faPropertyCol#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"height":"30","style":"border-width:0px","layout":"column","border":"false","itemId":"r2"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"d1"},"children":[{"configs":{"labelWidth":"120","readOnly":"true","labelAlign":"right","itemId":"CAT_NAME","fieldLabel":"{#catName#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"d2"},"children":[{"configs":{"labelWidth":"120","readOnly":"true","labelAlign":"right","itemId":"UP_CAT_NAME","fieldLabel":"{#upcatName#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"height":"30","style":"border-width:0px","layout":"column","border":"false","itemId":"r3"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"d1"},"children":[{"configs":{"labelWidth":"120","labelAlign":"right","itemId":"SFZJ","fieldLabel":"{#sfzj#}"},"events":{"change":"if(check.getValue()==true){\n  app.ZJFF.setReadOnly(false);\n  app.TXGZ.setReadOnly(false);\n  app.FYKM_XWL.ACC_CODE.setReadOnly(false);\n  app.FYKM_XWL.ACC_NAME.setReadOnly(false);\n  app.LJZJTXKM_XWL.ACC_CODE.setReadOnly(false);\n  app.LJZJTXKM_XWL.ACC_NAME.setReadOnly(false);\n}else{\n  app.ZJFF.setReadOnly(true);\n  app.ZJFF.clearValue();\n  \n  app.TXGZ.setReadOnly(true);\n  app.TXGZ.clearValue();\n  \n  app.FYKM_XWL.ACC_CODE.setReadOnly(true);\n  app.FYKM_XWL.ACC_NAME.setReadOnly(true);\n  app.FYKM_XWL.ACC_CODE.setValue('');\n  app.FYKM_XWL.ACC_NAME.setValue('');\n  \n  app.LJZJTXKM_XWL.ACC_CODE.setReadOnly(true);\n  app.LJZJTXKM_XWL.ACC_NAME.setReadOnly(true);\n  app.LJZJTXKM_XWL.ACC_CODE.setValue('');\n  app.LJZJTXKM_XWL.ACC_NAME.setValue('');\n}"},"children":[],"expanded":false,"type":"check"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"d2"},"children":[{"configs":{"labelWidth":"120","displayField":"METHOD_NAME","valueField":"METHOD_CODE","labelAlign":"right","itemId":"ZJFF","fieldLabel":"{#zjff#}"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/fa/ld-base/fa-ld-cat-setting/data/getZjff"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"height":"30","style":"border-width:0px","layout":"column","border":"false","itemId":"r4"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":"1","border":"false","itemId":"d1"},"children":[{"configs":{"labelWidth":"120","displayField":"VAL_NAME","valueField":"VAL_CODE","labelAlign":"right","itemId":"TXGZ","fieldLabel":"{#txgz#}"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/fa/ld-base/fa-ld-cat-setting/data/getTxgz"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"height":"30","style":"border-width:0px","layout":"column","border":"false","itemId":"r5"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"d1"},"children":[{"configs":{"labelWidth":"120","minValue":"0","labelAlign":"right","itemId":"CZL","fieldLabel":"{#czlCol#}","maxValue":"100"},"children":[],"expanded":false,"type":"number"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"column","columnWidth":".5","border":"false","itemId":"d2"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".75","border":"false","itemId":"d1"},"children":[{"configs":{"labelWidth":"120","minValue":"0","labelAlign":"right","allowDecimals":"false","itemId":"SYNX_Y","fieldLabel":"{#synx#}"},"children":[],"expanded":false,"type":"number"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","width":"30","layout":"form","border":"false","itemId":"d3"},"children":[{"configs":{"text":"{#synxN#}","width":"30","labelAlign":"center","itemId":"YEAR"},"children":[],"expanded":false,"type":"label"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".25","border":"false","itemId":"d2"},"children":[{"configs":{"labelWidth":"30","minValue":"0","labelAlign":"right","allowDecimals":"false","itemId":"SYNX_M"},"children":[],"expanded":false,"type":"number"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","width":"30","layout":"form","border":"false","itemId":"d4"},"children":[{"configs":{"text":"{#synxY#}","width":"30","labelAlign":"center","itemId":"MONTH"},"children":[],"expanded":false,"type":"label"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"column","border":"false","itemId":"r6"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"d1"},"children":[{"configs":{"file":"m?xwl=xc/fa/common/ACC_PICK/ACC_LD","itemId":"YZKM_XWL"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"d2"},"children":[{"configs":{"file":"m?xwl=xc/fa/common/ACC_PICK/ACC_LD","itemId":"LJZJTXKM_XWL"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"column","border":"false","itemId":"r7"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"d1"},"children":[{"configs":{"file":"m?xwl=xc/fa/common/ACC_PICK/ACC_LD","itemId":"FYKM_XWL"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"d2"},"children":[{"configs":{"file":"m?xwl=xc/fa/common/ACC_PICK/ACC_LD","itemId":"QLKM_XWL"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"column","border":"false","itemId":"r8"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"d1"},"children":[{"configs":{"file":"m?xwl=xc/fa/common/ACC_PICK/ACC_LD","itemId":"JZZBKM_XWL"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"d2"},"children":[{"configs":{"file":"m?xwl=xc/fa/common/ACC_PICK/ACC_LD","itemId":"JZSSKM_XWL"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"itemId":"buttons"},"children":[{"configs":{"text":"{#saveBtn#}","itemId":"saveBtn","iconCls":"save_icon"},"events":{"click":"if(!app.ldCastForm.getForm().isValid()){\n  Wb.toast('{#saveCheckMsg#}');\n  return;\n}\n\n//折旧时，摊销规则不能为空\nif(app.SFZJ.getValue()==true){\n  if(Ext.isEmpty(app.TXGZ.getValue())){\n    Wb.toast('{#zjAndTxgzNotNull#}');\n    return;\n  }\n  \n  if(Ext.isEmpty(app.ZJFF.getValue())){\n    Wb.toast('{#zjAndJzffNotNull#}');\n    return;\n  }\n}\n\nvar saveJson = {};\nsaveJson.SETTING_ID = app.SETTING_ID.getValue();\nsaveJson.LEDGER_ID = app.LEDGER_ID.getValue();\nsaveJson.SFZJ = app.SFZJ.getValue()==true?'Y':'N';\nsaveJson.ZJFF = app.ZJFF.getValue();\nsaveJson.TXGZ = app.TXGZ.getValue();\nsaveJson.CZL = app.CZL.getValue();\nvar _month = 0;\nif(!Ext.isEmpty(app.SYNX_Y.getValue())){\n  _month = _month + app.SYNX_Y.getValue() * 12; \n}\nif(!Ext.isEmpty(app.SYNX_M.getValue())){\n  _month = _month + app.SYNX_M.getValue();\n}\nsaveJson.SYNX = _month;\nsaveJson.YZKM = app.YZKM_XWL.ACC_CODE.getValue();\nsaveJson.FYKM = app.FYKM_XWL.ACC_CODE.getValue();\nsaveJson.QLKM = app.QLKM_XWL.ACC_CODE.getValue();\nsaveJson.LJZJTXKM = app.LJZJTXKM_XWL.ACC_CODE.getValue();\nsaveJson.JZZBKM = app.JZZBKM_XWL.ACC_CODE.getValue();\nsaveJson.JZSSKM = app.JZSSKM_XWL.ACC_CODE.getValue();\n\nExt.Msg.wait('{#saveWaitMsg#}');\nExt.Ajax.request({\n  url : 'm?xwl=xc/fa/ld-base/fa-ld-cat-setting/data/saveFaLdCatSetting',\n  method: 'POST',\n  params: saveJson,\n  success: function(response,options){\n    Ext.Msg.hide();\n    Wb.toast('{#saveSuccessMsg#}');\n  },\n  failure: function(response,options){\n    Ext.Msg.hide();\n    Wb.error('{#saveFailureMsg#}');\n  }\n});"},"children":[],"expanded":true,"type":"button"},{"configs":{"text":"{#cancelBtn#}","itemId":"cancelBtn","iconCls":"cancel_icon"},"events":{"click":"app.ldCastWin.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"array"}],"expanded":false,"type":"window"},{"configs":{"maximized":"false","title":"{#faCatsWinTitle#}","height":"550","layout":"border","width":"700","closeAction":"hide","itemId":"faCatsWin","modal":"true","maximizable":"true"},"events":{"beforeshow":"app.faCatsGrid.getStore().load();","close":"app.grid.getStore().load();"},"children":[{"configs":{"region":"north","height":"45","layout":"column","bodyPadding":"10 0 0 0","itemId":"queryPanel"},"children":[{"configs":{"labelWidth":"80","width":"200","labelAlign":"right","itemId":"catName4CatWin","fieldLabel":"{#catName#}"},"events":{"specialkey":"app.queryBtn4CatWin.fireEvent('click');"},"children":[],"expanded":true,"type":"text"},{"configs":{"labelWidth":"100","width":"220","labelAlign":"right","itemId":"upCatName4CatWin","fieldLabel":"{#upCatNameCol#}"},"events":{"specialkey":"app.queryBtn4CatWin.fireEvent('click');"},"children":[],"expanded":true,"type":"text"},{"configs":{"labelWidth":"80","displayField":"VAL_NAME","width":"200","valueField":"VAL_CODE","labelAlign":"right","itemId":"faPropertyCombox4CatWin","fieldLabel":"{#faProperty4CatWin#}"},"events":{"select":"app.queryBtn4CatWin.fireEvent('click');"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/fa/base/fa-ccf/data/getFaProperty"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"},{"configs":{"itemId":"queryBtn4CatWin","iconCls":"seek_icon","x":"5"},"events":{"click":"app.faCatsGrid.store.load();"},"children":[],"expanded":false,"type":"button"},{"configs":{"itemId":"resetBtn4CatWin","iconCls":"refresh_icon","x":"10"},"events":{"click":"app.upCatName4CatWin.setValue('');\napp.catName4CatWin.setValue('');\napp.faPropertyCombox4CatWin.clearValue();\napp.queryBtn4CatWin.fireEvent('click');"},"children":[],"expanded":false,"type":"button"}],"expanded":false,"type":"panel"},{"configs":{"region":"center","multiSelect":"true","selType":"checkboxmodel","itemId":"faCatsGrid","simpleSelect":"true"},"children":[{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#rowCol#}","width":"40","align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"rowCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"hidden":"true","dataIndex":"CAT_ID","itemId":"catIdCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#catCodeCol#}","width":"120","dataIndex":"CAT_CODE","itemId":"catCodeCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#catNameCol#}","width":"150","dataIndex":"CAT_NAME","itemId":"catNameCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#upCatNameCol#}","width":"150","dataIndex":"UP_NAME","itemId":"upCatNameCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#faPropertyCol#}","width":"120","dataIndex":"FA_PROPERTY_NAME","itemId":"faPropertyCol","flex":"1"},"children":[],"expanded":false,"type":"column"}],"expanded":false,"type":"array"},{"configs":{"autoLoad":"false","itemId":"store","url":"m?xwl=xc/fa/ld-base/fa-ld-cat-setting/data/getAllNotSyncCats"},"events":{"beforeload":"store.getProxy().extraParams.ledger = app.ledgerCombox.getValue();\n\nvar whereSql = \" and 1=1 \";\n\nif(!Ext.isEmpty(app.catName4CatWin.getValue())){\n  whereSql = whereSql + \" and c.cat_name like '%\"+app.catName4CatWin.getValue()+\"%' \";\n}\n\nif(!Ext.isEmpty(app.upCatName4CatWin.getValue())){\n  whereSql = whereSql + \" and c1.cat_name like '%\"+app.upCatName4CatWin.getValue()+\"%' \";\n}\n\nif(!Ext.isEmpty(app.faPropertyCombox4CatWin.getValue())){\n  whereSql = whereSql + \" and c.fa_property = '\"+app.faPropertyCombox4CatWin.getValue()+\"' \";\n}\n\nstore.getProxy().extraParams.whereSql = whereSql;"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"grid"},{"configs":{"itemId":"buttons"},"children":[{"configs":{"text":"{#ensureBtn#}","itemId":"ensureBtn"},"events":{"click":"var recs = app.faCatsGrid.getSelection();\nif (!recs.length) {\n  Wb.warn('{#ensureCheckMsg#}');\n  return;\n}\n\nvar syncArray = new Array();\nfor(var i=0; i<recs.length; i++){\n  var record = {};\n  Ext.apply(record, recs[i].data);\n  record.LEDGER_ID = app.ledgerCombox.getValue();\n  syncArray.push(record);\n}\n\nExt.Msg.wait('{#syncWaitMsg#}');\nExt.Ajax.request({\n  url : 'm?xwl=xc/fa/ld-base/fa-ld-cat-setting/data/syncFaCat',\n  method: 'POST',\n  params: {syncArray: Ext.JSON.encode(syncArray)},\n  success: function(response,options){\n    Ext.Msg.hide();\n    Wb.toast('{#syncSuccessMsg#}');\n    app.faCatsWin.close();\n  },\n  failure: function(response,options){\n    Ext.Msg.hide();\n    Wb.error('{#syncFailureMsg#}');\n  }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#cancelBtn#}","itemId":"cancelBtn"},"events":{"click":"app.faCatsWin.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"array"}],"expanded":false,"type":"window"},{"configs":{"layout":"border","itemId":"viewport"},"events":{"afterrender":"app.ledgerCombox.getStore().load(function(){\n  if(app.ledgerCombox.getStore().getCount()>0){\n    app.ledgerCombox.setValue(app.ledgerCombox.getStore().getAt(0).get('ID'));\n    app.queryBtn.fireEvent('click');\n  }\n});"},"children":[{"configs":{"region":"north","height":"45","layout":"column","bodyPadding":"10 0 0 20","itemId":"queryPanel"},"children":[{"configs":{"labelWidth":"60","displayField":"NAME","width":"200","valueField":"ID","labelAlign":"right","itemId":"ledgerCombox","fieldLabel":"{#ledgerCombox#}"},"events":{"select":"app.queryBtn.fireEvent('click');"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/com-qry/gl-ledgers/select-sec-ledger"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"},{"configs":{"labelWidth":"100","width":"240","labelAlign":"right","itemId":"catName","fieldLabel":"{#catName#}"},"events":{"specialkey":"app.queryBtn.fireEvent('click');"},"children":[],"expanded":true,"type":"text"},{"configs":{"labelWidth":"100","displayField":"VAL_NAME","width":"240","valueField":"VAL_CODE","labelAlign":"right","itemId":"faPropertyCombox","fieldLabel":"{#faProperty#}"},"events":{"select":"app.queryBtn.fireEvent('click');"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/fa/base/fa-ccf/data/getFaProperty"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"},{"configs":{"text":"{#queryBtn#}","width":"60","itemId":"queryBtn","iconCls":"seek_icon","x":"20"},"events":{"click":"app.grid.store.load();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#resetBtn#}","width":"60","itemId":"resetBtn","iconCls":"refresh_icon","x":"40"},"events":{"click":"app.ledgerCombox.clearValue();\napp.catName.setValue('');\napp.faPropertyCombox.clearValue();\napp.queryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"},{"configs":{"region":"center","multiSelect":"true","selType":"checkboxmodel","itemId":"grid","simpleSelect":"false"},"events":{"itemdblclick":"app.editBtn.fireEvent('click');"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#syncBtn#}","itemId":"syncBtn","iconCls":"check_in_icon"},"events":{"click":"if(Ext.isEmpty(app.ledgerCombox.getValue())){\n  Wb.toast('{#syncCheckMsg#}');\n  return;\n}\n\napp.faCatsWin.show();\n\n/*Ext.Msg.wait('{#syncWaitMsg#}');\nExt.Ajax.request({\n  url : '{#contextPath#}' +'/ledgerCatSettingAction.do?method=syncLedgerCatSetting',\n  method: 'POST',\n  params:{\"ledgerId\": app.ledgerCombox.getValue()},\n  success: function(response,options){\n    Ext.Msg.hide();\n    var temp = response.responseText;\n    var resp = Ext.JSON.decode(temp);\n    if(resp.flag=='0'){\n      Wb.toast('{#syncSuccessMsg#}');\n      app.grid.getStore().load();\n    }else{\n      if(!Ext.isEmpty(resp.Msg)){\n        Wb.error('{#syncErrorMsg#}' + '{#errorMsgLeft#}' + resp.Msg + '{#errorMsgRight#}');\n      }else{\n        Wb.error('{#syncErrorMsg#}');\n      }\n    }\n  },\n  failure: function(response,options){\n    Ext.Msg.hide();\n    Wb.error('{#syncFailureMsg#}');\n  }\n});*/"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"-","itemId":"sp1"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#editBtn#}","itemId":"editBtn","iconCls":"file_edit_icon"},"events":{"click":"var rec = app.grid.getSelection()[0];\nif (!rec) {\n  Wb.warn('{#editCheckMsg#}');\n  return;\n}\n\napp.ldCastWin.show();\napp.ldCastWin.setIconCls('record_edit_icon');\nWb.setTitle(app.ldCastWin, '{#editBtn#}'+\"【\"+rec.get('CAT_NAME')+\"】\");\n\nWb.reset(app.ldCastForm);\n\n//Wb.setValue(app.ldCastWin, rec.data); //把记录数据应用到窗口\n\n//赋值\napp.SETTING_ID.setValue(rec.get('SETTING_ID'));\napp.LEDGER_ID.setValue(rec.get('LEDGER_ID'));\napp.LEDGER_NAME.setValue(rec.get('LEDGER_NAME'));\napp.CAT_NAME.setValue(rec.get('CAT_NAME'));\napp.UP_CAT_NAME.setValue(rec.get('UP_CAT_NAME'));\napp.FA_PROPERTY.setValue(rec.get('FA_PROPERTY_VIEW'));\nif(rec.get('SFZJ')=='Y'){\n  app.SFZJ.setValue(true);\n  app.ZJFF.setReadOnly(false);\n  app.TXGZ.setReadOnly(false);\n  app.FYKM_XWL.ACC_CODE.setReadOnly(false);\n  app.FYKM_XWL.ACC_NAME.setReadOnly(false);\n  app.LJZJTXKM_XWL.ACC_CODE.setReadOnly(false);\n  app.LJZJTXKM_XWL.ACC_NAME.setReadOnly(false);\n\n}else{\n  app.SFZJ.setValue(false);\n  app.ZJFF.setReadOnly(true);\n  app.TXGZ.setReadOnly(true);\n  app.FYKM_XWL.ACC_CODE.setReadOnly(true);\n  app.FYKM_XWL.ACC_NAME.setReadOnly(true);\n  app.LJZJTXKM_XWL.ACC_CODE.setReadOnly(true);\n  app.LJZJTXKM_XWL.ACC_NAME.setReadOnly(true);\n}\nif(!Ext.isEmpty(rec.get('CZL'))){\n  app.CZL.setValue(rec.get('CZL'));\n}\nif(!Ext.isEmpty(rec.get('SYNX'))){\n  var _allMonth = Number(rec.get('SYNX'));\n  if(_allMonth < 12){\n    app.SYNX_M.setValue(_allMonth);\n  }else{\n    app.SYNX_Y.setValue(parseInt(_allMonth/12));\n    app.SYNX_M.setValue(_allMonth%12);\n  }\n}\n\napp.ZJFF.getStore().load(function(){\n  app.ZJFF.setValue(rec.get('ZJFF'));\n});\napp.TXGZ.getStore().load(function(){\n  app.TXGZ.setValue(rec.get('TXGZ'));\n});\n\napp.YZKM_XWL.QUERY_LEDGER_ID.setValue(rec.get('LEDGER_ID'));\napp.YZKM_XWL.ACC_CODE.setValue(rec.get('YZKM'));\napp.YZKM_XWL.ACC_NAME.setValue(rec.get('YZKM_VIEW'));\n\napp.FYKM_XWL.QUERY_LEDGER_ID.setValue(rec.get('LEDGER_ID'));\napp.FYKM_XWL.ACC_CODE.setValue(rec.get('FYKM'));\napp.FYKM_XWL.ACC_NAME.setValue(rec.get('FYKM_VIEW'));\n\napp.QLKM_XWL.QUERY_LEDGER_ID.setValue(rec.get('LEDGER_ID'));\napp.QLKM_XWL.ACC_CODE.setValue(rec.get('QLKM'));\napp.QLKM_XWL.ACC_NAME.setValue(rec.get('QLKM_VIEW'));\n\napp.YZKM_XWL.QUERY_LEDGER_ID.setValue(rec.get('LEDGER_ID'));\napp.YZKM_XWL.ACC_CODE.setValue(rec.get('YZKM'));\napp.YZKM_XWL.ACC_NAME.setValue(rec.get('YZKM_VIEW'));\n\napp.LJZJTXKM_XWL.QUERY_LEDGER_ID.setValue(rec.get('LEDGER_ID'));\napp.LJZJTXKM_XWL.ACC_CODE.setValue(rec.get('LJZJTXKM'));\napp.LJZJTXKM_XWL.ACC_NAME.setValue(rec.get('LJZJTXKM_VIEW'));\n\napp.JZZBKM_XWL.QUERY_LEDGER_ID.setValue(rec.get('LEDGER_ID'));\napp.JZZBKM_XWL.ACC_CODE.setValue(rec.get('JZZBKM'));\napp.JZZBKM_XWL.ACC_NAME.setValue(rec.get('JZZBKM_VIEW'));\n\napp.JZSSKM_XWL.QUERY_LEDGER_ID.setValue(rec.get('LEDGER_ID'));\napp.JZSSKM_XWL.ACC_CODE.setValue(rec.get('JZSSKM'));\napp.JZSSKM_XWL.ACC_NAME.setValue(rec.get('JZSSKM_VIEW'));\n"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"-","itemId":"sp3"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#delBtn#}","itemId":"delBtn","iconCls":"file_delete_icon"},"events":{"click":"//使用下面方法用于演示完整的步骤\nvar recs = app.grid.getSelection();\nif (!recs.length) {\n  Wb.warn('{#delCheckMsg#}');\n  return;\n}\nWb.confirm('{#delMsg#}', function() {\n  Wb.request({\n    url: 'm?xwl=xc/fa/ld-base/fa-ld-cat-setting/data/delFaLdCatSetting', \n    params: {\n      destroy: Wb.getData(recs, true)\n    },\n    success: function() {\n      Wb.remove(app.grid, recs);\n      Wb.toast('{#delSeccessMsg#}');\n    }\n  });\n});"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"-","itemId":"sp2"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#impBtn#}","itemId":"impBtn","iconCls":"db_import_icon"},"events":{"click":"Xip.importExcel('XC_FA_LD_CAT_SETTINGS',function(){\n  app.grid.getStore().load();\n});"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"-","itemId":"sp4"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#expBtn#}","itemId":"expBtn","iconCls":"db_export_icon"},"events":{"click":"if(Ext.isEmpty(app.ledgerCombox.getValue())){\n  Wb.toast('{#syncCheckMsg#}');\n  return;\n}\n\nvar _ledgerValue = app.ledgerCombox.getValue();\nvar _catNameValue = app.catName.getValue();\nvar _faPropertyValue = app.faPropertyCombox.getValue()==null?\"\":app.faPropertyCombox.getValue();\n\nvar expJson = {\n  language: '{#language#}',\n  ledgerId: _ledgerValue,\n  catName: _catNameValue,\n  faProperty: _faPropertyValue\n};\n\n\nXip.exportExcel('XC_FA_LD_CAT_SETTINGS', expJson, '{#expFileName#}');"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"},{"configs":{"autoLoad":"false","itemId":"store","url":"m?xwl=xc/fa/ld-base/fa-ld-cat-setting/data/getFaLdCatSettings"},"events":{"beforeload":"var _ledgerId = app.ledgerCombox.getValue();\nvar _catName = app.catName.getValue();\nvar _faProperty = app.faPropertyCombox.getValue();\n\nstore.getProxy().extraParams.ledgerId = _ledgerId;\nstore.getProxy().extraParams.catName = _catName;\nstore.getProxy().extraParams.faProperty = _faProperty;"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#rowCol#}","width":"45","align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"rowCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#catNameCol#}","width":"150","dataIndex":"CAT_NAME","itemId":"catNameCol"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#upCatNameCol#}","width":"150","dataIndex":"UP_CAT_NAME","itemId":"upCatNameCol"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#faPropertyCol#}","width":"150","dataIndex":"FA_PROPERTY_VIEW","itemId":"faPropertyCol"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#zjff#}","width":"150","dataIndex":"ZJFF_VIEW","itemId":"zjffCol"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#synxCol#}","align":"right","width":"120","dataIndex":"SYNX","titleAlign":"center","itemId":"synxCol","renderer":"if(!Ext.isEmpty(value)){\n  var _allMonth = Number(value);\n  if(_allMonth < 12){\n    return _allMonth+\"{#synxY#}\";\n  }else{\n    if(_allMonth%12==0){\n      return parseInt(_allMonth/12)+\"{#synxN#}\";\n    }else{\n      return parseInt(_allMonth/12)+\"{#synxN#}\"+_allMonth%12+\"{#synxY#}\";\n    }\n  }\n}"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#czlCol#}","align":"right","width":"120","dataIndex":"CZL","titleAlign":"center","itemId":"czlCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#yzkmCol#}","width":"180","dataIndex":"YZKM_VIEW","itemId":"yzkmCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#ljzktxkmCol#}","width":"180","dataIndex":"LJZJTXKM_VIEW","itemId":"ljzktxkmCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#jzzbkmCol#}","hidden":"true","width":"180","dataIndex":"JZZBKM_VIEW","itemId":"jzzbkmCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#qlkmCol#}","hidden":"true","width":"180","dataIndex":"QLKM_VIEW","itemId":"qlkmCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#fykmCol#}","width":"180","dataIndex":"FYKM_VIEW","itemId":"fykmCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#jzsskmCol#}","hidden":"true","width":"180","dataIndex":"JZSSKM_VIEW","itemId":"jzsskmCol"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}