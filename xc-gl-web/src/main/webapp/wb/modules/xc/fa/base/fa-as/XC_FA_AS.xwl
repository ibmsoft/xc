{"inframe":false,"title":"资产增加方式","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"request.setAttribute('contextPath',request.getContextPath());\n//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/fa/base/fa-as/XC_FA_AS\");","itemId":"module"},"events":{"finalize":"var opType = '';//操作类型"},"children":[{"configs":{"itemId":"windows"},"children":[{"configs":{"height":"150","width":"600","closeAction":"destroy","buttonAlign":"center","dialog":"true","itemId":"win"},"events":{"beforeshow":"\n","show":"//上级\n// app.BG_ITEM_UP_ID.getStore().load({\n//   params:{BG_HRCY_ID:app.bg_hrcy_id.getValue()}\n// });\nif(opType == 'create'){\n  app.ADDING_CODE.setReadOnly(false);\n}else{\n  app.ADDING_CODE.setReadOnly(true);\n}\n"},"children":[{"configs":{"tagConfigs":"{\nbaseCls: 'my-panel-no-border'\n}","layout":"column","margin":"10 0 0 0","itemId":"p1"},"children":[{"configs":{"tagConfigs":"{\n  columnWidth:0.49\n}","labelWidth":"90","allowBlank":"false","labelAlign":"right","itemId":"ADDING_CODE","fieldLabel":"<font color='red'>*<\/font>{#code#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"tagConfigs":"{\n  columnWidth:0.49\n}","labelWidth":"90","allowBlank":"false","labelAlign":"right","itemId":"ADDING_NAME","fieldLabel":"<font color='red'>*<\/font>{#name#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\nbaseCls: 'my-panel-no-border'\n}","layout":"column","margin":"10 0 0 0","itemId":"p2"},"children":[{"configs":{"tagConfigs":"{\n  columnWidth:0.98\n}","labelWidth":"90","labelAlign":"right","itemId":"ADDING_DESC","fieldLabel":"{#desc#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"itemId":"ADDING_ID"},"children":[],"expanded":false,"type":"hidden"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"window"}],"expanded":true,"type":"folder"},{"configs":{"layout":"border","itemId":"viewport1"},"children":[{"configs":{"region":"north","itemId":"form1"},"children":[{"configs":{"layout":"column","itemId":"panel1"},"children":[{"configs":{"labelWidth":"120","labelAlign":"right","padding":"10 10 10 0","itemId":"queryName","fieldLabel":"{#name#}"},"events":{"specialkey":"if(e.getKey()==13){\n  app.queryBtn.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#query#}","margin":"10 10 10 0","itemId":"queryBtn","iconCls":"seek_icon"},"events":{"click":"var queryName = app.queryName.getValue();\napp.grid1.store.load({\n  params:{queryBy:queryName}\n});\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#reset#}","margin":"10 10 10 0","itemId":"resetBtn","iconCls":"refresh_icon"},"events":{"click":"app.queryName.setValue();\n\napp.grid1.store.load();\n"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","multiSelect":"true","selType":"checkboxmodel","itemId":"grid1"},"events":{"itemdblclick":"app.editBtn.fireEvent('click');"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xc/fa/base/fa-as/data/SELECT_XC_FA_AS"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#add#}","itemId":"addbtn","iconCls":"file_add_icon"},"events":{"click":"// if(app.bg_hrcy_id.getValue()===null){\n//   Wb.toast('请选择预算项目体系');\n//   return false;\n// }\nopType = 'create';//操作类型\n\nvar win = new Ext.window.Window(app._win); //app._win指向配置对象而非实例\nwin.show();\nwin.setIconCls('record_add_icon');\nWb.setTitle(win, '{#add#}');\n//窗口每次动态生成,方法在窗口销毁时自动销毁\nwin.mon(win, 'ok', function() {\n\n  var ADDING_CODE = app.ADDING_CODE.getValue();\n  var ADDING_NAME = app.ADDING_NAME.getValue();\n  var ADDING_DESC = app.ADDING_DESC.getValue();\n \n  var params = {ADDING_CODE:ADDING_CODE,\n                ADDING_NAME:ADDING_NAME,\n                ADDING_DESC:ADDING_DESC\n               };\n \n  Wb.request({\n    url: 'm?xwl=xc/fa/base/fa-as/data/INSERT_XC_FA_AS',\n    params: params,\n    success: function(resp) {\n      app.grid1.store.load();\n      win.close(); //根据closeAction属性，默认为销毁\n    }\n  });\n});\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#edit#}","itemId":"editBtn","iconCls":"file_edit_icon"},"events":{"click":"var rec = app.grid1.getSelection()[0];\nif (!rec) {\n  Wb.toast('{#selRecord#}');\n  return;\n}\n\nopType = 'update';\n\nvar win = new Ext.window.Window(app._win); //app._win指向配置对象而非实例\nwin.show();\nwin.setIconCls('record_edit_icon');\nWb.setTitle(win, '{#add#}');\nWb.setValue(win, rec.data); //把记录数据应用到窗口\n//窗口每次动态生成,方法在窗口销毁时自动销毁\nwin.mon(win, 'ok', function() {\n  \n  var ADDING_ID   = app.ADDING_ID.getValue();\n  var ADDING_CODE = app.ADDING_CODE.getValue();\n  var ADDING_NAME = app.ADDING_NAME.getValue();\n  var ADDING_DESC = app.ADDING_DESC.getValue();\n \n  var params = {ADDING_ID:ADDING_ID,\n                ADDING_CODE:ADDING_CODE,\n                ADDING_NAME:ADDING_NAME,\n                ADDING_DESC:ADDING_DESC\n               };\n  Wb.request({\n    url: 'm?xwl=xc/fa/base/fa-as/data/UPDATE_XC_FA_AS',\n    params: params,\n    success: function(resp) {\n     app.grid1.store.load();\n      win.close(); \n    }\n  });\n});\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#delete#}","itemId":"delBtn","iconCls":"file_delete_icon"},"events":{"click":"\n//使用下面方法用于演示完整的步骤\nvar recs = app.grid1.getSelection();\nif (!recs.length) {\n  Wb.toast('{#selRecord#}');\n  return;\n}\nWb.confirm('{#confirm#}', function() {\n  Wb.request({\n    url: 'm?xwl=xc/fa/base/fa-as/data/DELETE_XC_FA_AS',\n    params: {data:Wb.getData(recs)},\n    success: function(resp) {\n      app.grid1.store.load();\n    }\n  });\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#import#}","itemId":"importBtn","iconCls":"import_icon"},"events":{"click":"Xip.importExcel('XC_FA_ADDING_METHOD', null);\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#export#}","itemId":"exportBtn","iconCls":"export_icon"},"events":{"click":"Xip.exportExcel('XC_FA_ADDING_METHOD',{},'增加方式');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"序号","align":"center","width":"50","xtype":"rownumberer","titleAlign":"center","itemId":"ROW_NUM_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"ID","hidden":"true","dataIndex":"ADDING_ID","titleAlign":"center","itemId":"ADDING_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#code#}","width":"150","dataIndex":"ADDING_CODE","titleAlign":"center","itemId":"ADDING_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#name#}","width":"200","dataIndex":"ADDING_NAME","titleAlign":"center","itemId":"ADDING_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#desc#}","width":"300","dataIndex":"ADDING_DESC","titleAlign":"center","itemId":"ADDING_DESC_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}