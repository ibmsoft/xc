{"inframe":false,"title":"资产","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/fa/common/FA_INFO_PANEL/FA_INFO_PANEL\");\n\nrequest.setAttribute(\"contextPath\", request.getContextPath());","itemId":"module"},"events":{"initialize":"//启用折旧\napp.enableZj = function(){\n  app.ZJFF.setReadOnly(false);\n  app.TXGZ.setReadOnly(false);\n  /*app.FYKM_XWL.ACC_CODE.setReadOnly(false);\n  app.FYKM_XWL.ACC_NAME.setReadOnly(false);*/\n  app.LJZJTXKM_XWL.ACC_CODE.setReadOnly(false);\n  app.LJZJTXKM_XWL.ACC_NAME.setReadOnly(false);\n};\n\n//禁用折旧\napp.disableZj = function(){\n  //app.ZJFF.clearValue();\n  app.ZJFF.setReadOnly(true);\n\n  //app.TXGZ.clearValue();\n  app.TXGZ.setReadOnly(true);\n\n  //app.FYKM_XWL.ACC_CODE.setValue('');\n  //app.FYKM_XWL.ACC_NAME.setValue('');\n  /*app.FYKM_XWL.ACC_CODE.setReadOnly(true);\n  app.FYKM_XWL.ACC_NAME.setReadOnly(true);*/\n\n  //app.LJZJTXKM_XWL.ACC_CODE.setValue('');\n  //app.LJZJTXKM_XWL.ACC_NAME.setValue('');\n  app.LJZJTXKM_XWL.ACC_CODE.setReadOnly(true);\n  app.LJZJTXKM_XWL.ACC_NAME.setReadOnly(true);\n};\n\n//未计提折旧\napp.operateJt = function(flag, type){\n  //basePanel\n  if(app.LRFS.getValue()=='I' || type=='I'){\n    app.QYRQ.setReadOnly(flag);\n  }\n  app.SYNX_Y.setReadOnly(flag);\n  app.SYNX_M.setReadOnly(flag);\n  app.ZCYT.setReadOnly(flag);\n  app.ZJFS.setReadOnly(flag);\n  app.CBZX_NAME.setReadOnly(flag);\n\n  //finPanel\n  app.YZ.setReadOnly(flag);\n  app.SL.setReadOnly(flag);\n  app.DW.setReadOnly(flag);\n  \n  if(app.LRFS.getValue()=='I' || type=='I'){\n    app.JZZB.setReadOnly(flag);\n    app.LJZJ_LJTX.setReadOnly(flag);\n  }\n  \n  app.CZL.setReadOnly(flag);\n  //app.CZ.setReadOnly(flag);\n  /*app.SFZJ.setReadOnly(flag);*/\n  if(flag==true){\n    app.SFZJ.disable();\n  }else if(flag==false){\n    app.SFZJ.enable();\n  }\n  app.ZJFF.setReadOnly(flag);\n  app.TXGZ.setReadOnly(flag);\n  app.ZCKM_XWL.ACC_NAME.setReadOnly(flag);\n  app.LJZJTXKM_XWL.ACC_NAME.setReadOnly(flag);\n  app.JZZBKM_XWL.ACC_NAME.setReadOnly(flag);\n  /*app.FYKM_XWL.ACC_NAME.setReadOnly(flag);*/\n};\n\n//加载数据\napp.loadFaData = function (assSetId, periodCode){\n  var tableName = \"\";\n  if(Ext.isEmpty(periodCode)){\n    tableName = \"xc_fa_additions\";\n  }else{\n    tableName = \"xc_fa_history\";\n  }\n  \n  Ext.Msg.wait('{#loadWaitMsg#}');\n  Ext.Ajax.request({\n    url : 'm?xwl=xc/fa/common/FA_INFO_PANEL/data/getFaById',\n    method: 'POST',\n    params:{\"tableName\":tableName, \"assSetId\":assSetId, periodCode:periodCode},\n    success: function(response,options){\n      Ext.Msg.hide();\n      var temp = response.responseText;\n      var resp = Ext.JSON.decode(temp);\n      \n      //commonPanel\n      app.ASSET_ID.setValue(resp.ASSET_ID);\n      app.LEDGER.getStore().load(function(){\n        app.LEDGER.setValue(resp.LEDGER_ID);\n        \n        app.PERIODS.getStore().load(function(){\n          app.PERIODS.setValue(resp.PERIOD_CODE);\n          app.PERIODS.setRawValue(resp.PERIOD_CODE);\n\n          var pRecord = app.PERIODS.getStore().getAt(0);\n          if(!Ext.isEmpty(pRecord) && pRecord.get('PERIOD_CODE')==resp.PERIOD_CODE){\n            if(resp.LRFS=='I'){\n              app.QYRQ.setMinValue();\n              app.QYRQ.setMaxValue(pRecord.get('LAST_DATE'));\n            }else if(resp.LRFS=='M'){\n              app.QYRQ.setMinValue(pRecord.get('START_DATE'));\n              app.QYRQ.setMaxValue(pRecord.get('END_DATE'));\n            }\n          }else{\n            app.QYRQ.setMinValue();\n            app.QYRQ.setMaxValue();\n          }\n          \n          app.QYRQ.setValue(resp.QYRQ);\n        });\n        \n        app.FA_PROPERTY.getStore().load(function(){\n          app.FA_PROPERTY.setValue(resp.FA_PROPERTY);\n\n          app.CAT_CODE.getStore().load(function(){\n            app.CAT_CODE.setValue(resp.CAT_CODE);\n          });\n\n          app.ZCYT.getStore().load(function(){\n            app.ZCYT.setValue(resp.ZCYT);\n          });\n        });\n\n        app.ZJFS.getStore().load(function(){\n          app.ZJFS.setValue(resp.ZJFS);\n        });\n        \n      });\n      \n      app.ZCBM.setValue(resp.ZCBM);\n      app.ZCMC.setValue(resp.ZCMC);\n      app.CREATED_BY.setValue(resp.CREATED_BY);\n      app.CREATED_BY_VIEW.setRawValue(resp.CREATED_BY_VIEW);\n      app.LAST_UPDATED_BY.setValue(resp.LAST_UPDATED_BY);\n      app.LAST_UPDATED_BY_VIEW.setRawValue(resp.LAST_UPDATED_BY_VIEW);\n      \n      //baseInfoPanel\n      app.GGXH.setValue(resp.GGXH);\n      app.XLH.setValue(resp.XLH);\n      app.VENDOR_ID.setValue(resp.VENDOR_ID);\n      app.VENDOR_NAME.setValue(resp.VENDOR_NAME);\n      app.ZZS.setValue(resp.ZZS);\n      \n      if(!Ext.isEmpty(resp.SYNX)){\n        var _allMonth = Number(resp.SYNX);\n        if(_allMonth < 12){\n          app.SYNX_M.setValue(_allMonth);\n        }else{\n          app.SYNX_Y.setValue(parseInt(_allMonth/12));\n          app.SYNX_M.setValue(_allMonth%12);\n        }\n      }\n      app.CBZX.setValue(resp.CBZX);\n      app.CBZX_NAME.setValue(resp.CBZX_NAME);\n      app.PROJECT_ID.setValue(resp.PROJECT_ID);\n      app.PROJECT_NAME.setValue(resp.PROJECT_NAME);\n      \n      app.CGFP.setValue(resp.CGFP);\n      \n      app.LRFS.setValue(resp.LRFS);\n      if(resp.LRFS=='I'){\n        app.LRFS_VIEW.setValue('{#LRFS_I#}');\n      }else if(resp.LRFS=='M'){\n        app.LRFS_VIEW.setValue('{#LRFS_M#}');\n      }else if(resp.LRFS=='AP'){\n        app.LRFS_VIEW.setValue('{#LRFS_AP#}');\n      }\n      \n      app.CFDD.setValue(resp.CFDD);\n      /*app.BGR.getStore().load(function(){\n        app.BGR.setValue(resp.BGR);\n      });*/\n      app.BGR.setValue(resp.BGR);\n      app.BGR_NAME.setValue(resp.BGR_NAME);\n      app.ZCSM.setValue(resp.ZCSM);\n      \n      //financeInfoPanel\n      app.YZ.setValue(resp.YZ);\n      app.LJZJ_LJTX.setValue(resp.LJZJ_LJTX);\n      app.SL.setValue(resp.SL);\n      app.DW.setValue(resp.DW);\n      app.JZZB.setValue(resp.JZZB);\n      app.CZL.setValue(resp.CZL);\n      if(!Ext.isEmpty(resp.YZ) && !Ext.isEmpty(resp.CZL)){\n        app.CZ.setValue(resp.YZ * resp.CZL * 0.01);\n      }\n      \n      if(resp.SFZJ=='Y'){\n        app.SFZJ.setValue(true);\n        \n        app.ZJFF.setReadOnly(false);\n        app.TXGZ.setReadOnly(false);\n        /*app.FYKM_XWL.ACC_CODE.setReadOnly(false);\n        app.FYKM_XWL.ACC_NAME.setReadOnly(false);*/\n        app.LJZJTXKM_XWL.ACC_CODE.setReadOnly(false);\n        app.LJZJTXKM_XWL.ACC_NAME.setReadOnly(false);\n      }else{\n        app.SFZJ.setValue(false);\n        \n        app.ZJFF.setReadOnly(true);\n        app.ZJFF.clearValue();\n\n        app.TXGZ.setReadOnly(true);\n        app.TXGZ.clearValue();\n\n        /*app.FYKM_XWL.ACC_CODE.setReadOnly(true);\n        app.FYKM_XWL.ACC_NAME.setReadOnly(true);\n        app.FYKM_XWL.ACC_CODE.setValue('');\n        app.FYKM_XWL.ACC_NAME.setValue('');*/\n\n        app.LJZJTXKM_XWL.ACC_CODE.setReadOnly(true);\n        app.LJZJTXKM_XWL.ACC_NAME.setReadOnly(true);\n        app.LJZJTXKM_XWL.ACC_CODE.setValue('');\n        app.LJZJTXKM_XWL.ACC_NAME.setValue('');\n      }\n      \n      app.ZJFF.getStore().load(function(){\n        app.ZJFF.setValue(resp.ZJFF);\n      });\n      app.TXGZ.getStore().load(function(){\n        app.TXGZ.setValue(resp.TXGZ);\n      });\n      \n      app.ZCKM_XWL.QUERY_LEDGER_ID.setValue(resp.LEDGER_ID);\n      app.ZCKM_XWL.ACC_CODE.setValue(resp.ZCKM);\n      app.ZCKM_XWL.ACC_NAME.setValue(resp.ZCKM_VIEW);\n      \n      app.LJZJTXKM_XWL.QUERY_LEDGER_ID.setValue(resp.LEDGER_ID);\n      app.LJZJTXKM_XWL.ACC_CODE.setValue(resp.LJZJTXKM);\n      app.LJZJTXKM_XWL.ACC_NAME.setValue(resp.LJZJTXKM_VIEW);\n      \n      app.JZZBKM_XWL.QUERY_LEDGER_ID.setValue(resp.LEDGER_ID);\n      app.JZZBKM_XWL.ACC_CODE.setValue(resp.JZZBKM);\n      app.JZZBKM_XWL.ACC_NAME.setValue(resp.JZZBKM_VIEW);\n      \n      app.FYKM_XWL.QUERY_LEDGER_ID.setValue(resp.LEDGER_ID);\n      app.FYKM_XWL.ACC_CODE.setValue(resp.FYKM);\n      app.FYKM_XWL.ACC_NAME.setValue(resp.FYKM_VIEW);\n      \n    },\n    failure: function(response,options){\n      Ext.Msg.hide();\n      Wb.error('{#syncFailureMsg#}');\n    }\n  });\n  \n  app.businessTrackingPanelGrid.getStore().getProxy().extraParams.assetId = assSetId;\n  app.businessTrackingPanelGrid.getStore().load();\n};\n\n//保存数据 operate:_added, _modified\napp.saveFaData = function (operate, callback){\n  try{\n    var validResult = {flag:true, msg:''};\n    \n    if(validFaForm){\n      validResult = validFaForm();\n    }\n    \n    if(validResult.flag==true){\n    }else{\n      Wb.info(validResult.msg);\n      return;\n    }\n  }catch (e){\n  }\n  //必填项检验\n  if(!app.faPanel.getForm().isValid()){\n    Wb.toast('{#infoNotComplete#}');\n    return;\n  }\n  if(Ext.isEmpty(app.ZCKM_XWL.ACC_CODE.getValue())){\n    Wb.toast('{#infoNotComplete#}');\n    return;\n  }\n  \n  //7、财务信息中的其他校验：\n  //  a、勾选是否折旧后，折旧方法、摊销规则、累积摊销科目、费用科目为必填项\n  //  b、减值准备不为0时，减值准备科目必填\n  if(app.SFZJ.getValue()==true){\n    if(Ext.isEmpty(app.ZJFF.getValue())){\n      Wb.toast('{#zjffNotNull#}');\n      return;\n    }\n    \n    if(Ext.isEmpty(app.TXGZ.getValue())){\n      Wb.toast('{#txgzNotNull#}');\n      return;\n    }\n    \n    if(Ext.isEmpty(app.LJZJTXKM_XWL.ACC_CODE.getValue())){\n      Wb.toast('{#ljtxKmNotNull#}');\n      return;\n    }\n    \n    if(Ext.isEmpty(app.FYKM_XWL.ACC_CODE.getValue())){\n      Wb.toast('{#fykmNotNull#}');\n      return;\n    }\n  }\n  if(!Ext.isEmpty(app.JZZB.getValue()) && Number(app.JZZB.getValue())>0){\n    if(Ext.isEmpty(app.JZZBKM_XWL.ACC_CODE.getValue())){\n      Wb.toast('{#jzzbKmNotNull#}');\n      return;\n    }\n  }\n  \n  /**var saveJson = {};\n  saveJson.OPERATE = operate;\n  \n  saveJson.ASSET_ID = app.ASSET_ID.getValue();\n  saveJson.LEDGER = app.LEDGER.getValue();\n  saveJson.PERIOD_CODE = app.PERIODS.getValue();\n  saveJson.ZCBM = app.ZCBM.getValue();\n  saveJson.ZCMC = app.ZCMC.getValue();\n  saveJson.CREATED_BY = app.CREATED_BY.getValue();\n  saveJson.LAST_UPDATED_BY = app.LAST_UPDATED_BY.getValue();\n  \n  saveJson.GGXH = app.GGXH.getValue();\n  saveJson.XLH = app.XLH.getValue();\n  saveJson.VENDOR_ID = app.VENDOR_ID.getValue();\n  saveJson.ZZS = app.ZZS.getValue();\n  saveJson.FA_PROPERTY = app.FA_PROPERTY.getValue();\n  saveJson.CAT_CODE = app.CAT_CODE.getValue();\n  saveJson.QYRQ = app.QYRQ.getValue();\n  var _month = 0;\n  if(!Ext.isEmpty(app.SYNX_Y.getValue())){\n    _month = _month + app.SYNX_Y.getValue() * 12; \n  }\n  if(!Ext.isEmpty(app.SYNX_M.getValue())){\n    _month = _month + app.SYNX_M.getValue();\n  }\n  saveJson.SYNX = _month;\n  saveJson.CBZX = app.CBZX.getValue();\n  saveJson.PROJECT_ID = app.PROJECT_ID.getValue();\n  saveJson.ZCYT = app.ZCYT.getValue();\n  saveJson.CGFP = app.CGFP.getValue();\n  saveJson.ZJFS = app.ZJFS.getValue();\n  saveJson.LRFS = app.LRFS.getValue();\n  saveJson.CFDD = app.CFDD.getValue();\n  saveJson.BGR = app.BGR.getValue();\n  saveJson.ZCSM = app.ZCSM.getValue();\n  \n  saveJson.YZ = app.YZ.getValue();\n  saveJson.LJZJ_LJTX = app.LJZJ_LJTX.getValue();\n  saveJson.SL = app.SL.getValue();\n  saveJson.DW = app.DW.getValue();\n  saveJson.JZZB = app.JZZB.getValue();\n  saveJson.CZL = app.CZL.getValue();\n  saveJson.SFZJ = app.SFZJ.getValue()==true?'Y':'N';\n  saveJson.ZJFF = app.ZJFF.getValue();\n  saveJson.TXGZ = app.TXGZ.getValue();\n  saveJson.ZCKM = app.ZCKM_XWL.ACC_CODE.getValue();\n  saveJson.LJZJTXKM = app.LJZJTXKM_XWL.ACC_CODE.getValue();\n  saveJson.JZZBKM = app.JZZBKM_XWL.ACC_CODE.getValue();\n  saveJson.FYKM = app.FYKM_XWL.ACC_CODE.getValue();**/\n  \n  var saveJson = {};\n  saveJson.operate = operate;\n  if(operate=='_added'){\n    saveJson.jtqj = '0000-00';\n  }\n  \n  saveJson.assetId = app.ASSET_ID.getValue();\n  saveJson.ledgerId = app.LEDGER.getValue();\n  saveJson.periodCode = Ext.isEmpty(app.PERIODS.getValue())?app.PERIODS.getRawValue():app.PERIODS.getValue();\n  saveJson.zcbm = app.ZCBM.getValue();\n  saveJson.zcmc = app.ZCMC.getValue();\n  saveJson.createdBy = app.CREATED_BY.getValue();\n  saveJson.lastUpdatedBy = app.LAST_UPDATED_BY.getValue();\n  \n  saveJson.ggxh = app.GGXH.getValue();\n  saveJson.xlh = app.XLH.getValue();\n  saveJson.vendorId = app.VENDOR_ID.getValue();\n  saveJson.zzs = app.ZZS.getValue();\n  saveJson.faProperty = app.FA_PROPERTY.getValue();\n  saveJson.catCode = app.CAT_CODE.getValue();\n  saveJson.qyrq = app.QYRQ.getValue();\n  var _month = 0;\n  if(!Ext.isEmpty(app.SYNX_Y.getValue())){\n    _month = _month + app.SYNX_Y.getValue() * 12; \n  }\n  if(!Ext.isEmpty(app.SYNX_M.getValue())){\n    _month = _month + app.SYNX_M.getValue();\n  }\n  saveJson.synx = _month;\n  saveJson.cbzx = app.CBZX.getValue();\n  saveJson.projectId = app.PROJECT_ID.getValue();\n  saveJson.zcyt = app.ZCYT.getValue();\n  saveJson.cgfp = app.CGFP.getValue();\n  saveJson.zjfs = app.ZJFS.getValue();\n  saveJson.lrfs = app.LRFS.getValue();\n  saveJson.cfdd = app.CFDD.getValue();\n  saveJson.bgr = app.BGR.getValue();\n  saveJson.zcsm = app.ZCSM.getValue();\n  \n  saveJson.yz = app.YZ.getValue();\n  saveJson.ljzjLjtx = app.LJZJ_LJTX.getValue();\n  saveJson.sl = app.SL.getValue();\n  saveJson.dw = app.DW.getValue();\n  saveJson.jzzb = app.JZZB.getValue();\n  saveJson.czl = app.CZL.getValue();\n  saveJson.sfzj = app.SFZJ.getValue()==true?'Y':'N';\n  saveJson.zjff = app.ZJFF.getValue();\n  saveJson.txgz = app.TXGZ.getValue();\n  saveJson.zckm = app.ZCKM_XWL.ACC_CODE.getValue();\n  saveJson.ljzjtxkm = app.LJZJTXKM_XWL.ACC_CODE.getValue();\n  saveJson.jzzbkm = app.JZZBKM_XWL.ACC_CODE.getValue();\n  saveJson.fykm = app.FYKM_XWL.ACC_CODE.getValue();\n  \n  var _yzVal = Ext.isEmpty(app.YZ.getValue()) ? 0 : app.YZ.getValue();\n  var _czVal = Ext.isEmpty(app.CZ.getValue()) ? 0 : app.CZ.getValue();\n  var _jzzbVal = Ext.isEmpty(app.JZZB.getValue()) ? 0 : app.JZZB.getValue();\n  var _ljzjtxVal = Ext.isEmpty(app.LJZJ_LJTX.getValue()) ? 0 : app.LJZJ_LJTX.getValue();\n  \n  var _jzVal = _yzVal - _czVal - _jzzbVal - _ljzjtxVal;\n  saveJson.jz = _jzVal;\n  \n  //【初始化资产】录入累计折旧时需要控制净值>=残值\n  if(!Ext.isEmpty(app.LJZJ_LJTX.getValue()) && app.LJZJ_LJTX.getValue()!=0){\n    if((_yzVal - _jzzbVal - _ljzjtxVal) < _czVal){\n      Wb.toast('{#jzMoreThanCz4Init#}');\n      return;\n    }\n  }\n  \n  var jsonData = Ext.JSON.encode(saveJson);\n\n  // 提交ajax请求\n  Ext.Msg.wait('{#saveWaitMsg#}');\n  Ext.Ajax.request({\n    url: '{#contextPath#}' + '/faAdditionAction.do?method=saveFaAddition',\n    method: 'POST',\n    sync: false,\n    timeout: 300000,\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    jsonData: jsonData,\n    success: function(res, opts) {\n      Ext.Msg.hide();\n      \n      var temp = res.responseText;\n      var respon = Ext.JSON.decode(temp);\n      \n      if(respon.flag == 0){\n        Wb.toast('{#saveSuccessMsg#}');\n        \n        Ext.Ajax.request({\n          url : 'm?xwl=xc/fa/common/FA_INFO_PANEL/data/getFaById',\n          method: 'POST',\n          async:false,\n          params:{\"tableName\":\"xc_fa_additions\", \"assSetId\":respon.assetId},\n          success: function(response,options){\n            Ext.Msg.hide();\n            var resp = Ext.JSON.decode(response.responseText);\n\n            app.ASSET_ID.setValue(respon.assetId);\n            app.ZCBM.setValue(resp.ZCBM);\n\n            app.CREATED_BY.setValue(resp.CREATED_BY);\n            app.CREATED_BY_VIEW.setRawValue(resp.CREATED_BY_VIEW);\n            app.LAST_UPDATED_BY.setValue(resp.LAST_UPDATED_BY);\n            app.LAST_UPDATED_BY_VIEW.setRawValue(resp.LAST_UPDATED_BY_VIEW);\n            \n            app.businessTrackingPanelGrid.getStore().getProxy().extraParams.assetId = respon.assetId;\n            app.businessTrackingPanelGrid.getStore().load();\n\n          },\n          failure: function(response,options){\n            Ext.Msg.hide();\n            Wb.error('{#syncFailureMsg#}');\n          }\n        });\n        \n        try{\n          if(callback){\n            callback();\n          }\n        }catch (e){\n        }\n        \n      }else{\n        Wb.error(respon.msg);\n      }\n    },\n    failure: function(res, opts) {\n      Ext.Msg.hide();\n      Wb.error('{#saveFailureMsg#}');\n    }\n  });\n  \n  /**var saveUrl = '';\n  if(operate=='_added'){\n    saveUrl = 'm?xwl=xc/fa/common/FA_INFO_PANEL/data/insertFa';\n  }else{\n    saveUrl = 'm?xwl=xc/fa/common/FA_INFO_PANEL/data/updateFa';\n  }\n  \n  Ext.Msg.wait('{#saveWaitMsg#}');\n  Ext.Ajax.request({\n    url : saveUrl,\n    method: 'POST',\n    params: saveJson,\n    success: function(response,options){\n      Ext.Msg.hide();\n      Wb.toast('{#saveSuccessMsg#}');\n    },\n    failure: function(response,options){\n      Ext.Msg.hide();\n      Wb.error('{#saveFailureMsg#}');\n    }\n  });**/\n  \n};"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"查询","itemId":"queryBtn"},"events":{"click":"loadFaData('531d6d3a-5d00-4dd2-ac38-85cbcb162a23');"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"新增保存","itemId":"saveBtn"},"events":{"click":"saveFaData(\"_added\");"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"修改保存","itemId":"modifiedSaveBtn"},"events":{"click":"saveFaData(\"_modified\");"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"修改保存","itemId":"setActiveTab"},"events":{"click":"app.tabPanel.setActiveTab(app.baseInfoPanel);"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"layout":"border","itemId":"faPanel"},"events":{"afterrender":"app.ZCKM_XWL.ACC_NAME.fieldLabel = '{#ZCKM#}<font color=\"red\">*<\/font>';\napp.LJZJTXKM_XWL.ACC_NAME.fieldLabel = '{#LJZJTXKM#}';\napp.JZZBKM_XWL.ACC_NAME.fieldLabel = '{#JZZBKM#}';\napp.FYKM_XWL.ACC_NAME.fieldLabel = '{#FYKM#}';\n\napp.ZCKM_XWL.ACC_NAME.labelWidth = 120;\napp.LJZJTXKM_XWL.ACC_NAME.labelWidth = 120;\napp.JZZBKM_XWL.ACC_NAME.labelWidth = 120;\napp.FYKM_XWL.ACC_NAME.labelWidth = 120;\n\napp.ZCKM_XWL.ACC_NAME.allowBlank = false;\n\ntry{\n  if(initComponent!=undefined){\n    initComponent(app);\n  }\n}catch (e){\n}"},"children":[{"configs":{"region":"north","height":"105","bodyPadding":"5 50 10 0","itemId":"commonPanel"},"children":[{"configs":{"hidden":"true","itemId":"IS_JTZJ"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"ASSET_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"height":"31","style":"border-width:0px","layout":"column","border":"false","itemId":"t1"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r1"},"children":[{"configs":{"labelWidth":"120","allowBlank":"false","displayField":"NAME","valueField":"ID","labelAlign":"right","itemId":"LEDGER","forceSelection":"true","fieldLabel":"{#LEDGER#}<font color=\"red\">*<\/font>"},"events":{"select":"app.ZCKM_XWL.QUERY_LEDGER_ID.setValue(combo.getValue());\napp.LJZJTXKM_XWL.QUERY_LEDGER_ID.setValue(combo.getValue());\napp.JZZBKM_XWL.QUERY_LEDGER_ID.setValue(combo.getValue());\napp.FYKM_XWL.QUERY_LEDGER_ID.setValue(combo.getValue());\n\napp.ZCKM_XWL.ACC_CODE.setValue('');\napp.LJZJTXKM_XWL.ACC_CODE.setValue('');\napp.JZZBKM_XWL.ACC_CODE.setValue('');\napp.FYKM_XWL.ACC_CODE.setValue('');\n\napp.ZCKM_XWL.ACC_NAME.setValue('');\napp.LJZJTXKM_XWL.ACC_NAME.setValue('');\napp.JZZBKM_XWL.ACC_NAME.setValue('');\napp.FYKM_XWL.ACC_NAME.setValue('');\n\napp.PROJECT_ID.setValue() ;\napp.PROJECT_NAME.setValue() ;\n\napp.CAT_CODE.getStore().load();"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/com-qry/gl-ledgers/select-sec-ledger"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r2"},"children":[{"configs":{"labelWidth":"120","displayField":"PERIOD_CODE","valueField":"PERIOD_CODE","labelAlign":"right","itemId":"PERIODS","fieldLabel":"{#PERIODS#}<font color=\"red\">*<\/font>"},"children":[{"configs":{"pageSize":"-1","autoLoad":"false","itemId":"store","url":"m?xwl=xc/fa/common/FA_INFO_PANEL/data/getPeriods"},"events":{"beforeload":"if(Ext.isEmpty(app.LEDGER.getValue())){\n  Wb.toast('{#selectLedgerMsgTips#}');\n  return;\n}\n\nstore.getProxy().extraParams.ledger = app.LEDGER.getValue();"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"height":"31","style":"border-width:0px","layout":"column","border":"false","itemId":"t2"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r1"},"children":[{"configs":{"labelWidth":"120","readOnly":"true","labelAlign":"right","itemId":"ZCBM","fieldLabel":"{#ZCBM#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r2"},"children":[{"configs":{"labelWidth":"120","allowBlank":"false","labelAlign":"right","itemId":"ZCMC","fieldLabel":"{#ZCMC#}<font color=\"red\">*<\/font>"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"height":"31","style":"border-width:0px","layout":"column","border":"false","itemId":"t3"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r1"},"children":[{"configs":{"labelWidth":"120","readOnly":"true","labelAlign":"right","itemId":"CREATED_BY_VIEW","fieldLabel":"{#CREATED_BY#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"120","readOnly":"true","hidden":"true","labelAlign":"right","itemId":"CREATED_BY","fieldLabel":"{#CREATED_BY#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r2"},"children":[{"configs":{"labelWidth":"120","readOnly":"true","labelAlign":"right","itemId":"LAST_UPDATED_BY_VIEW","fieldLabel":"{#LAST_UPDATED_BY#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"120","readOnly":"true","hidden":"true","labelAlign":"right","itemId":"LAST_UPDATED_BY","fieldLabel":"{#LAST_UPDATED_BY#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"region":"center","itemId":"tabPanel"},"events":{"tabchange":"if(app.tabPanel.getActiveTab() == app.financeInfoPanel){\n  if(app.IS_JTZJ.getValue()==true || app.IS_JTZJ.getValue()==\"true\"){\n    app.operateJt(true);\n  }else{\n    app.operateJt(false);\n\n    if(app.SFZJ.getValue()==false){\n      app.disableZj();\n    }\n  }\n  \n  //新增资产不能录入累计折旧和减值准备\n  if(app.LRFS.getValue()=='M'){\n    app.LJZJ_LJTX.setReadOnly(true);\n    app.JZZB.setReadOnly(true);\n  }\n}"},"children":[{"configs":{"title":"{#baseInfoPanel#}","bodyPadding":"10 50 10 0","itemId":"baseInfoPanel"},"children":[{"configs":{"height":"31","style":"border-width:0px","layout":"column","border":"false","itemId":"t1"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r1"},"children":[{"configs":{"labelWidth":"120","allowBlank":"false","displayField":"VAL_NAME","valueField":"VAL_CODE","labelAlign":"right","itemId":"FA_PROPERTY","forceSelection":"true","fieldLabel":"{#FA_PROPERTY#}<font color=\"red\">*<\/font>"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/fa/common/FA_INFO_PANEL/data/getFaProperty"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r2"},"children":[{"configs":{"labelWidth":"120","allowBlank":"false","displayField":"CAT_NAME","valueField":"CAT_CODE","labelAlign":"right","itemId":"CAT_CODE","forceSelection":"true","fieldLabel":"{#CAT_CODE#}<font color=\"red\">*<\/font>"},"events":{"select":"var record = records[0];\n\nif(!Ext.isEmpty(record.get('SFZJ'))){\n  if(record.get('SFZJ')=='Y'){\n    app.SFZJ.setValue(true);\n  }else{\n    app.SFZJ.setValue(false);\n  }\n}else{\n  app.SFZJ.setValue(false);\n}\n\nif(!Ext.isEmpty(record.get('ZJFF'))){\n  app.ZJFF.getStore().load(function(){\n    app.ZJFF.setValue(record.get('ZJFF'));\n  });\n}else{\n  app.SFZJ.setValue('');\n  app.SFZJ.setRawValue('');\n}\n\nif(!Ext.isEmpty(record.get('TXGZ'))){\n  app.TXGZ.getStore().load(function(){\n    app.TXGZ.setValue(record.get('TXGZ'));\n  });\n}else{\n  app.TXGZ.setValue('');\n  app.TXGZ.setRawValue('');\n}\n\nif(!Ext.isEmpty(record.get('CZL'))){\n  app.CZL.setValue(record.get('CZL'));\n}else{\n  app.CZL.setValue(0);\n}\n\nif(!Ext.isEmpty(record.get('SYNX'))){\n  var _allMonth = Number(record.get('SYNX'));\n  if(_allMonth < 12){\n    app.SYNX_M.setValue(_allMonth);\n  }else{\n    app.SYNX_Y.setValue(parseInt(_allMonth/12));\n    app.SYNX_M.setValue(_allMonth%12);\n  }\n}else{\n  app.SYNX_Y.setValue('');\n  app.SYNX_M.setValue('');\n}\n\napp.ZCKM_XWL.QUERY_LEDGER_ID.setValue(record.get('LEDGER_ID'));\nif(!Ext.isEmpty(record.get('YZKM')) && !Ext.isEmpty(record.get('YZKM_VIEW'))){\n  app.ZCKM_XWL.ACC_CODE.setValue(record.get('YZKM'));\n  app.ZCKM_XWL.ACC_NAME.setValue(record.get('YZKM_VIEW'));\n}else{\n  app.ZCKM_XWL.ACC_CODE.setValue('');\n  app.ZCKM_XWL.ACC_NAME.setValue('');\n}\n\n\napp.LJZJTXKM_XWL.QUERY_LEDGER_ID.setValue(record.get('LEDGER_ID'));\nif(!Ext.isEmpty(record.get('LJZJTXKM')) && !Ext.isEmpty(record.get('LJZJTXKM_VIEW'))){\n  app.LJZJTXKM_XWL.ACC_CODE.setValue(record.get('LJZJTXKM'));\n  app.LJZJTXKM_XWL.ACC_NAME.setValue(record.get('LJZJTXKM_VIEW'));\n}else{\n  app.LJZJTXKM_XWL.ACC_CODE.setValue('');\n  app.LJZJTXKM_XWL.ACC_NAME.setValue('');\n}\n\napp.JZZBKM_XWL.QUERY_LEDGER_ID.setValue(record.get('LEDGER_ID'));\nif(!Ext.isEmpty(record.get('JZZBKM')) && !Ext.isEmpty(record.get('JZZBKM_VIEW'))){\n  app.JZZBKM_XWL.ACC_CODE.setValue(record.get('JZZBKM'));\n  app.JZZBKM_XWL.ACC_NAME.setValue(record.get('JZZBKM_VIEW'));\n}else{\n  app.JZZBKM_XWL.ACC_CODE.setValue('');\n  app.JZZBKM_XWL.ACC_NAME.setValue('');\n}\n\napp.FYKM_XWL.QUERY_LEDGER_ID.setValue(record.get('LEDGER_ID'));\nif(!Ext.isEmpty(record.get('FYKM')) && !Ext.isEmpty(record.get('FYKM_VIEW'))){\n  app.FYKM_XWL.ACC_CODE.setValue(record.get('FYKM'));\n  app.FYKM_XWL.ACC_NAME.setValue(record.get('FYKM_VIEW'));\n}else{\n  app.FYKM_XWL.ACC_CODE.setValue('');\n  app.FYKM_XWL.ACC_NAME.setValue('');\n}\n"},"children":[{"configs":{"pageSize":"-1","autoLoad":"false","itemId":"store","url":"m?xwl=xc/fa/common/FA_INFO_PANEL/data/getFaCats"},"events":{"beforeload":"if(Ext.isEmpty(app.LEDGER.getValue())){\n  Wb.toast('{#selectLedgerMsgTips#}');\n  return false;\n}\n\nif(Ext.isEmpty(app.FA_PROPERTY.getValue())){\n  Wb.toast('{#selectFaPropertyMsgTis#}');\n  return false;\n}\n\nstore.getProxy().extraParams.ledgerId = app.LEDGER.getValue();\nstore.getProxy().extraParams.faProperty = app.FA_PROPERTY.getValue();"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"height":"31","style":"border-width:0px","layout":"column","border":"false","itemId":"t2"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r1"},"children":[{"configs":{"labelWidth":"120","allowOnlyWhitespace":"false","labelAlign":"right","itemId":"QYRQ","fieldLabel":"{#QYRQ#}<font color=\"red\">*<\/font>"},"children":[],"expanded":false,"type":"date"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"column","columnWidth":".5","border":"false","itemId":"r2"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".75","border":"false","itemId":"r1"},"children":[{"configs":{"labelWidth":"120","allowBlank":"false","minValue":"0","labelAlign":"right","allowDecimals":"false","itemId":"SYNX_Y","fieldLabel":"{#SYNX_Y#}<font color=\"red\">*<\/font>"},"children":[],"expanded":false,"type":"number"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","width":"30","layout":"form","border":"false","itemId":"r11"},"children":[{"configs":{"text":"{#YEAR#}","width":"30","labelAlign":"center","itemId":"YEAR"},"children":[],"expanded":false,"type":"label"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".25","border":"false","itemId":"r2"},"children":[{"configs":{"labelWidth":"30","allowBlank":"false","minValue":"0","labelAlign":"right","allowDecimals":"false","itemId":"SYNX_M","maxValue":"11"},"children":[],"expanded":false,"type":"number"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","width":"30","layout":"form","border":"false","itemId":"r21"},"children":[{"configs":{"text":"{#MONTH#}","width":"30","labelAlign":"center","itemId":"MONTH"},"children":[],"expanded":false,"type":"label"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"height":"31","style":"border-width:0px","layout":"column","border":"false","itemId":"t3"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r1"},"children":[{"configs":{"labelWidth":"120","allowBlank":"false","displayField":"USE_NAME","valueField":"USE_CODE","labelAlign":"right","itemId":"ZCYT","forceSelection":"true","fieldLabel":"{#ZCYT#}<font color=\"red\">*<\/font>"},"children":[{"configs":{"pageSize":"-1","autoLoad":"false","itemId":"store","url":"m?xwl=xc/fa/common/FA_INFO_PANEL/data/getZcyt"},"events":{"beforeload":"if(Ext.isEmpty(app.FA_PROPERTY.getValue())){\n  Wb.toast('{#selectFaPropertyMsgTis#}');\n  return;\n}\n\nstore.getProxy().extraParams.faProperty = app.FA_PROPERTY.getValue();"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r2"},"children":[{"configs":{"labelWidth":"120","allowBlank":"false","displayField":"ADDING_NAME","valueField":"ADDING_CODE","labelAlign":"right","itemId":"ZJFS","forceSelection":"true","fieldLabel":"{#ZJFS#}<font color=\"red\">*<\/font>"},"children":[{"configs":{"pageSize":"-1","autoLoad":"false","itemId":"store","url":"m?xwl=xc/fa/common/FA_INFO_PANEL/data/getZjfs"},"events":{"beforeload":"if(Ext.isEmpty(app.LEDGER.getValue())){\n  Wb.toast('{#selectLedgerMsgTips#}');\n  return false;\n}\n\nstore.getProxy().extraParams.ledger = app.LEDGER.getValue();"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"height":"31","style":"border-width:0px","layout":"column","border":"false","itemId":"t4"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r1"},"children":[{"configs":{"hidden":"true","itemId":"BGR"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"120","allowBlank":"false","triggerCls":"x-form-search-trigger","labelAlign":"right","itemId":"BGR_NAME","fieldLabel":"{#BGR#}<font color=\"red\">*<\/font>","editable":"false"},"events":{"expand":"app.findEmp.fireEvent('click') ;"},"children":[{"configs":{"tagConfigs":"minWidth:420,\nid:'empPickComp'","height":"240","barExportAllButtons":"false","barExportButtons":"false","itemId":"pickComp","forceFit":"true"},"events":{"itemclick":"var userId = record.get('USER_ID');\nvar empName = record.get('EMP_NAME');\n\napp.BGR.setValue(userId);\napp.BGR_NAME.setValue(empName);\n\n// app.pickComp.hide() ;\nvar picker = this.ownerCmp;\npicker.collapse();"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/fa/common/FA_INFO_PANEL/data/getBgr"},"events":{"beforeload":"store.proxy.extraParams.empCodeName = app.empCodeName.getValue() ;\nstore.proxy.extraParams.ledger = app.LEDGER.getValue() ;"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"hidden":"true","width":"50","dataIndex":"USER_ID","titleAlign":"center","itemId":"USER_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#USER_NAME#}","hidden":"true","width":"100","dataIndex":"USER_NAME","titleAlign":"center","itemId":"USER_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#EMP_CODE#}","width":"100","dataIndex":"EMP_CODE","titleAlign":"center","itemId":"EMP_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#EMP_NAME#}","dataIndex":"EMP_NAME","titleAlign":"center","itemId":"EMP_NAME_COL","flex":"1"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"itemId":"empCodeName"},"events":{"specialkey":"if(Ext.EventObject.getKey() == 13){\n  app.findEmp.fireEvent('click') ;\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"itemId":"findEmp","iconCls":"seek_icon"},"events":{"click":"Ext.getCmp('empPickComp').getStore().load(function(){\n  app.empCodeName.focus();\n}) ;"},"children":[],"expanded":false,"type":"button"},{"configs":{"itemId":"clearEmp","iconCls":"cancel_icon"},"events":{"click":"app.BGR.setValue();\napp.BGR_NAME.setValue() ;\napp.empCodeName.setValue() ;\napp.findEmp.fireEvent('click') ;"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"picker"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r2"},"children":[{"configs":{"hidden":"true","itemId":"CBZX"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"120","allowBlank":"false","triggerCls":"x-form-search-trigger","labelAlign":"right","itemId":"CBZX_NAME","fieldLabel":"{#CBZX_NAME#}<font color=\"red\">*<\/font>","editable":"false"},"events":{"expand":"app.findLdDepts.fireEvent('click') ;"},"children":[{"configs":{"tagConfigs":"minWidth:420,\nid:'cbzxPickComp'","height":"240","barExportAllButtons":"false","barExportButtons":"false","itemId":"pickComp","forceFit":"true"},"events":{"itemclick":"// 选择成本中心\nvar deptId = record.get('DEPT_ID');\nvar deptName = record.get('DEPT_NAME');\n\napp.CBZX_NAME.setValue(deptName);\napp.CBZX.setValue(deptId);\n\n// 清空项目\napp.PROJECT_ID.setValue();\napp.PROJECT_NAME.setValue();\n\n// app.pickComp.hide() ;\nvar picker = this.ownerCmp;\npicker.collapse();"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/fa/common/FA_INFO_PANEL/data/getDepts"},"events":{"beforeload":"store.proxy.extraParams.textStr = app.deptCodeOrName.getValue() ;\n\nstore.proxy.extraParams.ledger = app.LEDGER.getValue() ;"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"hidden":"true","width":"50","dataIndex":"DEPT_ID","titleAlign":"center","itemId":"DEPT_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#DEPT_CODE#}","width":"100","dataIndex":"DEPT_CODE","titleAlign":"center","itemId":"DEPT_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#DEPT_NAME#}","width":"200","dataIndex":"DEPT_NAME","titleAlign":"center","itemId":"DEPT_NAME_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"itemId":"deptCodeOrName"},"events":{"specialkey":"if(Ext.EventObject.getKey() == 13){\n  app.findLdDepts.fireEvent('click') ;\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"itemId":"findLdDepts","iconCls":"seek_icon"},"events":{"click":"Ext.getCmp('cbzxPickComp').getStore().load(function(){\n  app.deptCodeOrName.focus();\n}) ;"},"children":[],"expanded":false,"type":"button"},{"configs":{"itemId":"clearLdDepts","iconCls":"cancel_icon"},"events":{"click":"app.CBZX.setValue();\napp.CBZX_NAME.setValue() ;\napp.deptCodeOrName.setValue() ;\napp.findLdDepts.fireEvent('click') ;"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"picker"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"height":"31","style":"border-width:0px","layout":"column","border":"false","itemId":"t5"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r1"},"children":[{"configs":{"hidden":"true","itemId":"PROJECT_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"tagConfigs":"columnWidth:0.3","labelWidth":"120","triggerCls":"x-form-search-trigger","labelAlign":"right","itemId":"PROJECT_NAME","fieldLabel":"{#PROJECT_NAME#}"},"events":{"expand":"app.findLdExItems.fireEvent('click') ;\n"},"children":[{"configs":{"tagConfigs":"minWidth:420,\nid:'projectPickComp'","height":"240","barExportAllButtons":"false","barExportButtons":"false","itemId":"pickComp","forceFit":"true"},"events":{"itemclick":"var projectId = record.get('PROJECT_ID') ;\nvar projectName = record.get('PROJECT_NAME') ;\n\napp.PROJECT_ID.setValue(projectId) ;\napp.PROJECT_NAME.setValue(projectName) ;\n\nvar picker = this.ownerCmp;\npicker.collapse();"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/fa/common/FA_INFO_PANEL/data/getProject"},"events":{"beforeload":"store.proxy.extraParams.LEDGER_ID = app.LEDGER.getValue();\nstore.proxy.extraParams.textStr = app.exItemCodeOrName.getValue() ;"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"hidden":"true","width":"50","dataIndex":"PROJECT_ID","itemId":"PROJECT_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#PROJECT_CODE#}","width":"100","dataIndex":"PROJECT_CODE","titleAlign":"center","itemId":"PROJECT_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#PROJECT_NAME#}","width":"200","dataIndex":"PROJECT_NAME","titleAlign":"center","itemId":"PROJECT_NAME_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"itemId":"exItemCodeOrName"},"events":{"specialkey":"if(Ext.EventObject.getKey() == 13){\n  app.findLdExItems.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"itemId":"findLdExItems","iconCls":"seek_icon"},"events":{"click":"Ext.getCmp('projectPickComp').getStore().load(function(){\n  app.exItemCodeOrName.focus();\n}) ;"},"children":[],"expanded":false,"type":"button"},{"configs":{"itemId":"clearLdExItems","iconCls":"cancel_icon"},"events":{"click":"// TODO: 清空费用项目\napp.PROJECT_ID.setValue() ;\napp.PROJECT_NAME.setValue() ;\napp.exItemCodeOrName.setValue('');\napp.findLdExItems.fireEvent('click') ;"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"picker"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r2"},"children":[{"configs":{"labelWidth":"120","labelAlign":"right","itemId":"CGFP","fieldLabel":"{#CGFP#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"height":"31","style":"border-width:0px","layout":"column","border":"false","itemId":"t6"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r1"},"children":[{"configs":{"labelWidth":"120","labelAlign":"right","itemId":"GGXH","fieldLabel":"{#GGXH#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r2"},"children":[{"configs":{"labelWidth":"120","labelAlign":"right","itemId":"XLH","fieldLabel":"{#XLH#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"height":"31","style":"border-width:0px","layout":"column","border":"false","itemId":"t7"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r1"},"children":[{"configs":{"labelWidth":"120","readOnly":"true","hidden":"true","labelAlign":"right","itemId":"VENDOR_ID","fieldLabel":"{#VENDOR_ID#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"120","readOnly":"true","labelAlign":"right","itemId":"VENDOR_NAME","fieldLabel":"{#VENDOR_NAME#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r2"},"children":[{"configs":{"labelWidth":"120","labelAlign":"right","itemId":"ZZS","fieldLabel":"{#ZZS#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"120","readOnly":"true","hidden":"true","labelAlign":"right","itemId":"LRFS","fieldLabel":"{#LRFS#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"height":"31","style":"border-width:0px","layout":"column","border":"false","itemId":"t8"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r1"},"children":[{"configs":{"labelWidth":"120","labelAlign":"right","itemId":"CFDD","fieldLabel":"{#CFDD#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r2"},"children":[{"configs":{"labelWidth":"120","readOnly":"true","labelAlign":"right","itemId":"LRFS_VIEW","fieldLabel":"{#LRFS#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"height":"31","style":"border-width:0px","layout":"column","border":"false","itemId":"t9"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":"1","border":"false","itemId":"r1"},"children":[{"configs":{"labelWidth":"120","labelAlign":"right","itemId":"ZCSM","fieldLabel":"{#ZCSM#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"title":"{#financeInfoPanel#}","bodyPadding":"10 50 10 0","itemId":"financeInfoPanel"},"children":[{"configs":{"height":"31","style":"border-width:0px","layout":"column","border":"false","itemId":"t1"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r1"},"children":[{"configs":{"labelWidth":"120","allowBlank":"false","minValue":"0","labelAlign":"right","itemId":"YZ","fieldLabel":"{#YZ#}<font color=\"red\">*<\/font>"},"events":{"blur":"var yzVal = app.YZ.getValue();\nvar czlVal = app.CZL.getValue();\n\nif(!Ext.isEmpty(yzVal) && !Ext.isEmpty(czlVal) ){\n  var czVal = Number(yzVal) * Number(czlVal) / 100;\n  app.CZ.setValue(czVal);\n}"},"children":[],"expanded":false,"type":"number"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r2"},"children":[{"configs":{"labelWidth":"120","allowBlank":"false","minValue":"0","value":"0","labelAlign":"right","itemId":"LJZJ_LJTX","fieldLabel":"{#LJZJ_LJTX#}<font color=\"red\">*<\/font>"},"children":[],"expanded":false,"type":"number"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"height":"31","style":"border-width:0px","layout":"column","border":"false","itemId":"t2"},"children":[{"configs":{"style":"border-width:0px","layout":"column","columnWidth":".5","border":"false","itemId":"r1"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".7","border":"false","itemId":"r1"},"children":[{"configs":{"labelWidth":"120","allowBlank":"false","minValue":"0","value":"1","labelAlign":"right","itemId":"SL","fieldLabel":"{#SL#}<font color=\"red\">*<\/font>"},"children":[],"expanded":false,"type":"number"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".3","border":"false","itemId":"r2"},"children":[{"configs":{"labelWidth":"0","allowBlank":"false","queryMode":"local","displayField":"DIM_NAME","valueField":"DIM_CODE","itemId":"DW","forceSelection":"true"},"children":[{"configs":{"pageSize":"-1","autoLoad":"true","itemId":"store","url":"m?xwl=xc/fa/common/FA_INFO_PANEL/data/getDw"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r2"},"children":[{"configs":{"labelWidth":"120","allowBlank":"false","minValue":"0","value":"0","labelAlign":"right","itemId":"JZZB","fieldLabel":"{#JZZB#}<font color=\"red\">*<\/font>"},"children":[],"expanded":false,"type":"number"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"height":"31","style":"border-width:0px","layout":"column","border":"false","itemId":"t3"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r1"},"children":[{"configs":{"labelWidth":"120","allowBlank":"false","minValue":"0","value":"0","labelAlign":"right","itemId":"CZL","fieldLabel":"{#CZL#}<font color=\"red\">*<\/font>"},"events":{"blur":"var yzVal = app.YZ.getValue();\nvar czlVal = app.CZL.getValue();\n\nif(!Ext.isEmpty(yzVal) && !Ext.isEmpty(czlVal) ){\n  var czVal = Number(yzVal) * Number(czlVal) / 100;\n  app.CZ.setValue(czVal);\n}"},"children":[],"expanded":false,"type":"number"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r2"},"children":[{"configs":{"labelWidth":"120","readOnly":"true","minValue":"0","value":"0","labelAlign":"right","itemId":"CZ","fieldLabel":"{#CZ#}<font color=\"red\">*<\/font>"},"children":[],"expanded":false,"type":"number"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"height":"31","style":"border-width:0px","layout":"column","border":"false","itemId":"t4"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r1"},"children":[{"configs":{"labelWidth":"120","labelAlign":"right","itemId":"SFZJ","fieldLabel":"{#SFZJ#}"},"events":{"change":"if(check.getValue()==true){\n  app.ZJFF.setReadOnly(false);\n  app.TXGZ.setReadOnly(false);\n  /*app.FYKM_XWL.ACC_CODE.setReadOnly(false);\n  app.FYKM_XWL.ACC_NAME.setReadOnly(false);*/\n  app.LJZJTXKM_XWL.ACC_CODE.setReadOnly(false);\n  app.LJZJTXKM_XWL.ACC_NAME.setReadOnly(false);\n}else{\n  app.ZJFF.setReadOnly(true);\n  app.ZJFF.clearValue();\n  \n  app.TXGZ.setReadOnly(true);\n  app.TXGZ.clearValue();\n  \n  /*app.FYKM_XWL.ACC_CODE.setReadOnly(true);\n  app.FYKM_XWL.ACC_NAME.setReadOnly(true);\n  app.FYKM_XWL.ACC_CODE.setValue('');\n  app.FYKM_XWL.ACC_NAME.setValue('');*/\n  \n  app.LJZJTXKM_XWL.ACC_CODE.setReadOnly(true);\n  app.LJZJTXKM_XWL.ACC_NAME.setReadOnly(true);\n  app.LJZJTXKM_XWL.ACC_CODE.setValue('');\n  app.LJZJTXKM_XWL.ACC_NAME.setValue('');\n}"},"children":[],"expanded":false,"type":"check"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r2"},"children":[{"configs":{"labelWidth":"120","displayField":"METHOD_NAME","valueField":"METHOD_CODE","labelAlign":"right","itemId":"ZJFF","forceSelection":"true","fieldLabel":"{#ZJFF#}"},"children":[{"configs":{"autoLoad":"false","itemId":"store","url":"m?xwl=xc/fa/common/FA_INFO_PANEL/data/getZjff"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"column","border":"false","itemId":"t5"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":"1","border":"false","itemId":"r1"},"children":[{"configs":{"labelWidth":"120","displayField":"VAL_NAME","valueField":"VAL_CODE","labelAlign":"right","itemId":"TXGZ","forceSelection":"true","fieldLabel":"{#TXGZ#}"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/fa/common/FA_INFO_PANEL/data/getTxgz"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"column","border":"false","itemId":"t6"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r1"},"children":[{"configs":{"file":"m?xwl=xc/fa/common/ACC_PICK/ACC_LD","itemId":"ZCKM_XWL"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r2"},"children":[{"configs":{"file":"m?xwl=xc/fa/common/ACC_PICK/ACC_LD","itemId":"LJZJTXKM_XWL"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"column","border":"false","itemId":"t7"},"children":[{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r1"},"children":[{"configs":{"file":"m?xwl=xc/fa/common/ACC_PICK/ACC_LD","itemId":"JZZBKM_XWL"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px","layout":"form","columnWidth":".5","border":"false","itemId":"r2"},"children":[{"configs":{"file":"m?xwl=xc/fa/common/ACC_PICK/ACC_LD","itemId":"FYKM_XWL"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"title":"{#businessTrackingPanel#}","layout":"border","itemId":"businessTrackingPanel"},"children":[{"configs":{"region":"center","selType":"checkboxmodel","itemId":"businessTrackingPanelGrid"},"events":{"itemdblclick":"var tranCode = record.get('TRANS_CODE');\n\nif(tranCode=='CSHZC' || tranCode=='XZZC'){\n  Wb.run({\n    url    : 'm?xwl=xc/fa/common/FA_INFO_PANEL/FA_INFO_WIN',\n    params : {},\n    success:function(appObj){\n      appObj.initWindow({\n\t\tassetId: record.get('ASSET_ID')\n      });\n    }\n  });\n}else if(tranCode=='JTZJ'){\n  Wb.run({\n    url    : 'm?xwl=xc/fa/daily-business/fa_depr/FA_DEPR_WIN',\n    params : {},\n    success:function(appObj){\n      appObj.initWindow({\n        deprId: record.get('SRC_ID')\n      });\n    }\n  });\n}else{\n  Wb.run({\n    url    : 'm?xwl=xc/fa/daily-business/fa-adj/ADJ_WIN',\n    params : {},\n    success:function(appObj){\n      appObj.initWindow({\n        adjLid: record.get('SRC_DTL_ID')\n      });\n    }\n  });\n}"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/fa/common/FA_INFO_PANEL/data/getBusinessTracking"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"width":"40","align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"rowCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#periodCodeCol#}","align":"center","width":"80","dataIndex":"PERIOD_CODE","titleAlign":"center","itemId":"periodCodeCol"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#transCodeCol#}","hidden":"true","width":"180","dataIndex":"TRANS_CODE","itemId":"transCodeCol"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#transDateCol#}","align":"center","width":"120","dataIndex":"TRANS_DATE","titleAlign":"center","itemId":"transDateCol"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#transDescCol#}","align":"center","width":"100","dataIndex":"TRANS_DESC","titleAlign":"center","itemId":"transDescCol"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#bzsmCol#}","width":"800","dataIndex":"BZSM","itemId":"bzsmCol"},"children":[],"expanded":true,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"panel"}],"expanded":true,"type":"tab"}],"expanded":true,"type":"form"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}