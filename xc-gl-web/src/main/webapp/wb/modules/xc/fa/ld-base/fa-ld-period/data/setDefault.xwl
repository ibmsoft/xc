{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/fa/ld-base/fa-ld-period/XC_FA_LD_PERIOD\");\n\nvar ldPeriodId = request.getParameter('LD_PERIOD_ID');\nvar ledgerId = request.getParameter('LEDGER_ID');\nvar period = request.getParameter('PERIOD');\n\napp.run(\"SELECT 1 FROM xc_fa_ld_periods WHERE LEDGER_ID = '\"+ledgerId+\"' AND STATUS ='1'\",\n  {errorText:request.getAttribute('openCheckRecord')}\n);\n\napp.run(\"SELECT 1 FROM xc_fa_ld_periods WHERE LEDGER_ID = '\"+ledgerId+\"' AND STATUS = '0' and PERIOD_CODE < '\"+period+\"'\",\n  {errorText:request.getAttribute('openPeriodMustByOrder')}\n);","itemId":"module"},"children":[{"configs":{"sql":"update xc_fa_ld_periods set STATUS='2' where LD_PERIOD_ID<>{?LD_PERIOD_ID?} and LEDGER_ID={?LEDGER_ID?} and STATUS='1'","transaction":"start","itemId":"query1"},"children":[],"expanded":false,"type":"query"},{"configs":{"sql":"update xc_fa_ld_periods set STATUS='1' where LD_PERIOD_ID={?LD_PERIOD_ID?}","transaction":"commit","itemId":"query2"},"children":[],"expanded":false,"type":"query"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}