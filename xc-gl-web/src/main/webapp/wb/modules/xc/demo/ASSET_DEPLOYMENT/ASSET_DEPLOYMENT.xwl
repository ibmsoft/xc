{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"itemId":"module"},"children":[{"configs":{"height":"190","width":"850","layout":"border","closeAction":"hide","buttonAlign":"center","itemId":"win","modal":"true"},"events":{"close":"app.grid.getStore().load();"},"children":[{"configs":{"region":"center","height":"105","bodyPadding":"10 20 0 10","itemId":"mainForm"},"children":[{"configs":{"hidden":"true","itemId":"hiddenPanel"},"children":[{"configs":{"itemId":"ASSET_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"itemId":"OP_TYPE"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px;","layout":"column","border":"false","itemId":"t1"},"children":[{"configs":{"style":"border-width:0px;","layout":"form","columnWidth":".33","border":"false","itemId":"d1"},"children":[{"configs":{"labelWidth":"120","readOnly":"true","labelAlign":"right","itemId":"ASSET_CODE","fieldLabel":"Asset Code"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px;","layout":"form","columnWidth":".33","border":"false","itemId":"d2"},"children":[{"configs":{"labelWidth":"120","readOnly":"true","labelAlign":"right","itemId":"ASSET_NAME","fieldLabel":"Asset Name"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px;","layout":"form","columnWidth":".33","border":"false","itemId":"d3"},"children":[{"configs":{"labelWidth":"120","readOnly":"true","labelAlign":"right","itemId":"SPEC","fieldLabel":"Spec."},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px;","layout":"column","border":"false","itemId":"t2"},"children":[{"configs":{"style":"border-width:0px;","layout":"form","columnWidth":".33","border":"false","itemId":"d1"},"children":[{"configs":{"labelWidth":"120","readOnly":"true","pickList":"[['Box','Box'],['Dozen','Dozen'],['Set','Set']]","labelAlign":"right","itemId":"UNIT","forceSelection":"true","fieldLabel":"Unit","editable":"false"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px;","layout":"form","columnWidth":".33","border":"false","itemId":"d2"},"children":[{"configs":{"labelWidth":"120","readOnly":"true","pickList":"[['Vehicle','Vehicle'],['Computer','Computer']]","labelAlign":"right","itemId":"CATEGORY","forceSelection":"true","fieldLabel":"Category","editable":"false"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px;","layout":"form","columnWidth":".33","border":"false","itemId":"d3"},"children":[{"configs":{"labelWidth":"120","readOnly":"true","labelAlign":"right","itemId":"SERIAL_NUMBER","fieldLabel":"Serial Number"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px;","layout":"column","border":"false","itemId":"t3"},"children":[{"configs":{"style":"border-width:0px;","layout":"form","columnWidth":".33","border":"false","itemId":"d1"},"children":[{"configs":{"labelWidth":"120","pickList":"[['Jakarta','Jakarta'],['Medan','Medan']]","labelAlign":"right","itemId":"OWNER_STATION","forceSelection":"true","fieldLabel":"Owner Station","editable":"false"},"events":{"select":"if(combo.getValue() == 'Jakarta'){\n  app.OWNER_PROVINCE.setValue('Jakarta');\n  app.OWNER_CITY.setValue('Jakarta');\n}else{\n  app.OWNER_PROVINCE.setValue('North Sumatra');\n  app.OWNER_CITY.setValue('Medan');\n}"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px;","layout":"form","columnWidth":".33","border":"false","itemId":"d2"},"children":[{"configs":{"labelWidth":"120","readOnly":"true","labelAlign":"right","itemId":"OWNER_PROVINCE","fieldLabel":"Owner Province"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px;","layout":"form","columnWidth":".33","border":"false","itemId":"d3"},"children":[{"configs":{"labelWidth":"120","readOnly":"true","labelAlign":"right","itemId":"OWNER_CITY","fieldLabel":"Owner City"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px;","layout":"column","border":"false","itemId":"t4"},"children":[{"configs":{"style":"border-width:0px;","layout":"form","columnWidth":".33","border":"false","itemId":"d1"},"children":[{"configs":{"labelWidth":"120","labelAlign":"right","itemId":"OWNER_NAME","fieldLabel":"Owner Name"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px;","layout":"form","columnWidth":".33","border":"false","itemId":"d2"},"children":[{"configs":{"labelWidth":"120","pickList":"[['Finance','Finance'],['IT','IT']]","labelAlign":"right","itemId":"OWNER_DEPARTMENT","forceSelection":"true","fieldLabel":"Owner DepartMent","editable":"false"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"style":"border-width:0px;","layout":"form","columnWidth":".33","border":"false","itemId":"d3"},"children":[{"configs":{"labelWidth":"120","pickList":"[['In Service','In Service'],['Out Of Service','Out Of Service'],['Retirement','Retirement']]","labelAlign":"right","itemId":"STATUS","forceSelection":"true","fieldLabel":"Status","editable":"false"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"itemId":"buttons"},"children":[{"configs":{"text":"Save","itemId":"saveBtn","iconCls":"save_icon"},"events":{"click":"var mainJson = {};\n\nmainJson = Wb.getValue(app.mainForm);\n\nvar url = '';\nif(app.OP_TYPE.getValue() == '_added'){\n  url = 'm?xwl=xc/demo/ASSET_DEPLOYMENT/DATA/insert_asset_deployment';\n}else{\n  url = 'm?xwl=xc/demo/ASSET_DEPLOYMENT/DATA/update_asset_deployment';\n}\n\n// 提交ajax请求\nExt.Msg.wait('Saving...');\nExt.Ajax.request({\n  url: url,\n  method: 'POST',\n  params: mainJson,\n  success: function(res, opts) {\n    Ext.Msg.hide();\n    Wb.toast('success');\n  },\n  failure: function(res, opts) {\n    Ext.Msg.hide();\n    Wb.error('failure');\n  }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"Cancel","itemId":"cancelBtn","iconCls":"cancel_icon"},"events":{"click":"app.win.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"array"}],"expanded":true,"type":"window"},{"configs":{"layout":"border","itemId":"viewport"},"children":[{"configs":{"region":"north","height":"45","layout":"column","bodyPadding":"10 0 0 20","itemId":"queryPanel"},"children":[{"configs":{"labelWidth":"100","pickList":"[['Jakarta','Jakarta'],['Medan','Medan']]","labelAlign":"right","itemId":"queryPoliceStation","fieldLabel":"Police Station"},"events":{"select":"app.queryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"combo"},{"configs":{"labelWidth":"100","pickList":"[['Vehicle','Vehicle'],['Computer','Computer']]","labelAlign":"right","itemId":"queryCategory","fieldLabel":"Category"},"events":{"select":"app.queryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"combo"},{"configs":{"labelWidth":"100","width":"240","labelAlign":"right","itemId":"queryCode","fieldLabel":"Asset Code"},"events":{"specialkey":"if(e.getKey() == 13){\n  app.queryBtn.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"100","width":"240","labelAlign":"right","itemId":"queryName","fieldLabel":"Asset Name"},"events":{"specialkey":"if(e.getKey() == 13){\n  app.queryBtn.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"Query","width":"60","itemId":"queryBtn","iconCls":"seek_icon","x":"20"},"events":{"click":"app.grid.store.load();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"Reset","width":"60","itemId":"resetBtn","iconCls":"refresh_icon","x":"40"},"events":{"click":"Wb.reset(app.queryPanel);\napp.queryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"},{"configs":{"region":"center","selType":"checkboxmodel","itemId":"grid"},"events":{"itemdblclick":"app.editBtn.fireEvent('click');"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"Add","hidden":"true","itemId":"addBtn","iconCls":"file_add_icon"},"events":{"click":"app.win.setTitle('Add');\n\nWb.reset(app.mainForm);\napp.ASSET_ID.setValue(Xip.getId());\napp.OP_TYPE.setValue('_added');\n\napp.win.show();"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"-","itemId":"sp1"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"Deployment","itemId":"editBtn","iconCls":"file_edit_icon"},"events":{"click":"var record = app.grid.getSelection()[0];\nif (!record) {\n  Wb.warn('Please select one record');\n  return;\n}\n\napp.win.show();\napp.win.setTitle('Edit');\napp.OP_TYPE.setValue(\"_modified\");\nWb.setValue(app.win, record.data);"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"-","itemId":"sp2"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"Delete","hidden":"true","itemId":"delBtn","iconCls":"file_delete_icon"},"events":{"click":"var records = app.grid.getSelection();\n\nif(records.length==0){\n  Wb.warn('Please select one record');\n  return;\n}\n\nvar delIds = \"\";\n\nfor(var i=0; i<records.length; i++){\n  delIds = delIds + \"'\" + records[i].get('ASSET_ID') + \"',\";\n}\n\ndelIds = delIds.substring(0, delIds.length-1);\n\n// 提交ajax请求\nExt.Msg.wait('Please wait ...');\nExt.Ajax.request({\n  url: 'm?xwl=xc/demo/ASSET_DEPLOYMENT/DATA/delete_asset_deployment',\n  method: 'POST',\n  timeout: 300000,\n  params: {delIds: delIds},\n  success: function(res, opts) {\n    Ext.Msg.hide();\n    Wb.toast('success');\n    app.grid.getStore().load();\n  },\n  failure: function(res, opts) {\n    Ext.Msg.hide();\n    Wb.error('failure');\n  }\n});"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"},{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xc/demo/ASSET_DEPLOYMENT/DATA/get_asset_deployment"},"events":{"beforeload":"var whereSql = ' 1=1 ';\n\nif(!Ext.isEmpty(app.queryPoliceStation.getValue())){\n  whereSql = whereSql + \" and d.OWNER_STATION = '\"+app.queryPoliceStation.getValue()+\"'\";\n}\n\nif(!Ext.isEmpty(app.queryCategory.getValue())){\n  whereSql = whereSql + \" and d.CATEGORY = '\"+app.queryCategory.getValue()+\"'\";\n}\n\nif(!Ext.isEmpty(app.queryCode.getValue())){\n  whereSql = whereSql + \" and d.ASSET_CODE like '%\"+app.queryCode.getValue()+\"%'\";\n}\nif(!Ext.isEmpty(app.queryName.getValue())){\n  whereSql = whereSql + \" and d.ASSET_NAME like '%\"+app.queryName.getValue()+\"%'\";\n}\n\nstore.getProxy().extraParams.whereSql = whereSql;"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"No.","width":"40","align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"rowCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"Asset Code","width":"180","dataIndex":"ASSET_CODE","itemId":"ASSET_CODE_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"Asset Name","width":"180","dataIndex":"ASSET_NAME","itemId":"ASSET_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"Spec.","width":"180","dataIndex":"SPEC","itemId":"SPEC_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"Unit","width":"180","dataIndex":"UNIT","itemId":"UNIT_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"Category","width":"180","dataIndex":"CATEGORY","itemId":"CATEGORY_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"Serial Number","width":"180","dataIndex":"SERIAL_NUMBER","itemId":"SERIAL_NUMBER_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"Owner","width":"180","dataIndex":"OWNER_NAME","itemId":"OWNER_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"Station","width":"180","dataIndex":"OWNER_STATION","itemId":"OWNER_STATION_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"Department","width":"180","dataIndex":"OWNER_DEPARTMENT","itemId":"OWNER_DEPARTMENT_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"Status","width":"120","dataIndex":"STATUS","itemId":"STATUS_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"ASSET_ID","hidden":"true","dataIndex":"ASSET_ID","itemId":"ASSET_ID_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}