{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"request.setAttribute(\"contextPath\", request.getContextPath());","itemId":"module"},"children":[{"configs":{"maximized":"true","height":"500","width":"700","closeAction":"hide","html":"<div id=\"Layer1\" style=\"position:absolute; width:100%; height:100%;\">    \n  <img src=\"{#contextPath#}/home/images/10012.png\" height=\"100%\" width=\"100%\"/>    \n<\/div>","itemId":"glWin","modal":"true","maximizable":"true"},"children":[],"expanded":false,"type":"window"},{"configs":{"layout":"border","itemId":"viewport"},"children":[{"configs":{"region":"north","height":"45","layout":"column","bodyPadding":"10 0 0 20","itemId":"queryPanel"},"children":[{"configs":{"labelWidth":"60","width":"200","labelAlign":"right","itemId":"queryDate","fieldLabel":"Date"},"events":{"select":"if(e.getKey() == 13){\n  app.queryBtn.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"date"},{"configs":{"labelWidth":"120","width":"260","labelAlign":"right","itemId":"queryType","fieldLabel":"Charge Type"},"events":{"specialkey":"if(e.getKey() == 13){\n  app.queryBtn.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"Query","width":"60","itemId":"queryBtn","iconCls":"seek_icon","x":"20"},"events":{"click":"app.grid.store.load();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"Reset","width":"60","itemId":"resetBtn","iconCls":"refresh_icon","x":"40"},"events":{"click":"Wb.reset(app.queryPanel);\napp.queryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"},{"configs":{"region":"center","selType":"checkboxmodel","itemId":"grid"},"events":{"itemdblclick":"app.editBtn.fireEvent('click');"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"Refresh","itemId":"refreshBtn","iconCls":"refresh_icon"},"events":{"click":"var insertBankArrays = [];\ninsertBankArrays.push({\n  C_ID:Wb.getId(), \n  LICENSE_ID:'100000001', \n  CLASS:'A', \n  CHARGE_TYPE:'type01', \n  AMOUNT:'4500', \n  DATE:'2016-09-05', \n  BANK_NAME:'CMBC', \n  OPERATOR:'append'\n});\n\ninsertBankArrays.push({\n  C_ID:Wb.getId(), \n  LICENSE_ID:'100000001', \n  CLASS:'B', \n  CHARGE_TYPE:'type01', \n  AMOUNT:'5500', \n  DATE:'2016-09-06', \n  BANK_NAME:'CMBC', \n  OPERATOR:'append'\n});\n\nvar insertLicenseArray = [];\ninsertLicenseArray.push({\n  L_ID:Wb.getId(), \n  LICENSE_ID:'100000001', \n  DATE:'2016-09-05', \n  OPERATION:'append', \n  CLASS:'C', \n  AMOUNT:'4500', \n  NOTE:''\n});\n\ninsertLicenseArray.push({\n  L_ID:Wb.getId(), \n  LICENSE_ID:'100000001', \n  DATE:'2016-09-06', \n  OPERATION:'append', \n  CLASS:'D', \n  AMOUNT:'5500', \n  NOTE:''\n});\n\n// 提交ajax请求\nExt.Msg.wait('Please wait ...');\nExt.Ajax.request({\n  url: 'm?xwl=xc/demo/DEMO_BANK_CHARGE/DATA/refresh_bank_charge',\n  method: 'POST',\n  timeout: 300000,\n  params:{insertBankArrays: insertBankArrays, insertLicenseArray: insertLicenseArray},\n  success: function(res, opts) {\n    Ext.Msg.hide();\n    Wb.toast('success');\n    app.grid.getStore().load();\n  },\n  failure: function(res, opts) {\n    Ext.Msg.hide();\n    Wb.error('failure');\n  }\n});"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"-","hidden":"true","itemId":"sp1"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"Generate Gl","itemId":"generateBtn","iconCls":"check_icon"},"events":{"click":"Wb.info('Generate success');"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"-","itemId":"sp2"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"View Gl","itemId":"viewBtn","iconCls":"dataview_icon"},"events":{"click":"if(app.grid.getSelection().length==0){\n  Wb.info('Please select one record');\n  return;\n}\n\napp.glWin.show();"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"},{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xc/demo/DEMO_BANK_CHARGE/DATA/get_bank_charge"},"events":{"beforeload":"var whereSql = ' 1=1 ';\n\nif(!Ext.isEmpty(app.queryDate.getRawValue())){\n  whereSql = whereSql + \" and DATE_FORMAT(c.DATE, '%Y-%m-%d') = '\"+app.queryDate.getRawValue()+\"' \";\n}\n\nif(!Ext.isEmpty(app.queryType.getValue())){\n  whereSql = whereSql + \" and c.CHARGE_TYPE = '\"+app.queryType.getValue()+\"'\";\n}\n\nstore.getProxy().extraParams.whereSql = whereSql;"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"No.","width":"40","align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"rowCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"Date","width":"180","dataIndex":"DATE","itemId":"DATE_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"Bank","width":"180","dataIndex":"BANK_NAME","itemId":"BANK_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"Charge Type","width":"180","dataIndex":"CHARGE_TYPE","itemId":"CHARGE_TYPE_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"Amount","width":"180","dataIndex":"AMOUNT","itemId":"AMOUNT_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"Operator","width":"180","dataIndex":"OPERATOR","itemId":"OPERATOR_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"ID","width":"180","dataIndex":"ID","itemId":"ID_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"Name","width":"180","dataIndex":"NAME","itemId":"NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"C_ID","hidden":"true","dataIndex":"C_ID","itemId":"C_ID_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}