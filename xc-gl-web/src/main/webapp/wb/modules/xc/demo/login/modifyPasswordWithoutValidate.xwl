{"inframe":true,"title":"重新配置密码","hidden":false,"roles":{"default":1},"children":[{"configs":{"loadJS":"ext+bootstrap","initScript":"var ctxPath = request.getContextPath() ;\nrequest.setAttribute(\"contextPath\",ctxPath);\nvar enUrl = request.getParameter('url');\nvar url = java.net.URLDecoder.decode(enUrl,'UTF-8');\n\nvar pwdLenLimit= com.xzsoft.xip.platform.util.PlatformUtil.getSystemParamVal(\"PW_LEN_LIMIT\");\nvar pwdIncludeChar =  com.xzsoft.xip.platform.util.PlatformUtil.getSystemParamVal(\"PW_INCLUDE_CHAR\");\nrequest.setAttribute(\"PW_LEN_LIMIT\",pwdLenLimit);\nrequest.setAttribute(\"PW_INCLUDE_CHAR\",pwdIncludeChar);\nrequest.setAttribute(\"url\",url);","loginRequired":"false","jsLinks":"[\"pub/uip/common/scripts/md5.js\"]","itemId":"module","head":"<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">"},"events":{"initialize":"//动态获取div高度设置垂直居中\nvar bodyHeight = document.getElementById(\"containerdiv\").offsetHeight;\nvar windowHeight = window.innerHeight;\n//var bodyHeight = document.getElementById(\"centerdiv\").offsetHeight;\n\nvar height = (windowHeight-bodyHeight)/2;\n\ndocument.getElementById(\"containerdiv\").style.margin=height+'px'+' 0px'+' 0px'+' 0px' ;\napp.demo=function(){\nvar np=document.getElementById('newpwd').value;\n  if(np === null || np === \"\" || np == \"undefined\"){\n  document.getElementById('msgspan').innerHTML='新密码不能为空';\n  return false;\n}\n\nvar cnp=document.getElementById('confirmNewPwd').value;\n  if(cnp === null || cnp === \"\" || cnp == \"undefined\"){\n   document.getElementById('msgspan').innerHTML='确认密码不能为空';\n  return false;\t\t\t\t\n}\n   if(np !=cnp){\n    document.getElementById('msgspan').innerHTML='两次密码不一致';\n  }\n \n  if('{#PW_INCLUDE_CHAR#}'==='Y'){\n  var re = new RegExp(\"[A-Za-z\\x21-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7e]\");\n  \n  if(!re.test(np)){\n    document.getElementById('msgspan').innerHTML='新密码必须要包含字母或者特殊字符!';\n    \n    return;\n  }\n}\n // 提交请求\nExt.Ajax.request({\n  url : '{#contextPath#}' + '/frameAction.do?method=modifyUserPassword',\n  params\t: {\n    'password' : hex_md5(cnp),\n    'isValidPassword' : 'N'\n  },\n  method : 'post',\n  timeout : 3600000,\n  success : function(response, options) {\n   \n    var resp = Ext.JSON.decode(response.responseText);\n\n    if(resp.flag == '1'){\n     window.location.href='{#url#}';\t\t\t\t\t\n    }\n   \n  },\n  failure : function(reponse, options) {\n   \n    var response = Ext.JSON.decode(response.responseText);\n    document.getElementById('msgspan').innerHTML='修改密码失败';\n  }\n});\n};"},"children":[{"configs":{"id":"containerdiv","class":"container-theme-showcase","itemId":"containerdiv"},"children":[{"configs":{"class":"row","itemId":"rowdiv"},"children":[{"configs":{"class":"col-sm-4","itemId":"leftdiv"},"children":[],"expanded":true,"type":"div"},{"configs":{"id":"centerdiv","text-align":"center","class":"col-sm-4","itemId":"centerdiv"},"children":[{"configs":{"class":"panel panel-primary","itemId":"paneldiv"},"children":[{"configs":{"class":"panel-heading","itemId":"headerdiv"},"children":[{"configs":{"text":"密码修改","tagType":"h1","itemId":"header1"},"children":[],"expanded":false,"type":"header"}],"expanded":true,"type":"div"},{"configs":{"class":"panel-body","itemId":"bodydiv"},"children":[{"configs":{"itemId":"div1"},"children":[{"configs":{"id":"msgspan","style":"color:red ;font-size:13px;font-family:NSimSun","itemId":"span1"},"children":[],"expanded":false,"type":"span"}],"expanded":true,"type":"div"},{"configs":{"itemId":"br1"},"children":[],"expanded":false,"type":"br"},{"configs":{"itemId":"inputdiv"},"children":[{"configs":{"id":"newpwd","placeholder":"新密码","itemId":"input1","type":"password"},"children":[],"expanded":false,"type":"input"}],"expanded":true,"type":"div"},{"configs":{"itemId":"br11"},"children":[],"expanded":false,"type":"br"},{"configs":{"itemId":"inputdiv1"},"children":[{"configs":{"id":"confirmNewPwd","placeholder":"确认新密码","itemId":"input1","type":"password"},"children":[],"expanded":false,"type":"input"}],"expanded":false,"type":"div"},{"configs":{"itemId":"br2"},"children":[],"expanded":false,"type":"br"},{"configs":{"text-align":"center","itemId":"div11"},"children":[{"configs":{"text":"确  定","class":"btn btn-success ","onclick":"app.demo();","itemId":"bbutton1","type":"btn-success"},"children":[],"expanded":true,"type":"bbutton"}],"expanded":true,"type":"div"}],"expanded":true,"type":"div"}],"expanded":true,"type":"div"}],"expanded":true,"type":"div"},{"configs":{"class":"col-sm-4","itemId":"rightdiv"},"children":[],"expanded":true,"type":"div"}],"expanded":true,"type":"div"}],"expanded":true,"type":"div"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}