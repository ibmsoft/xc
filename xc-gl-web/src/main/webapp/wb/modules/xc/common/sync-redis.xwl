{"inframe":false,"title":"将数据同步到redis","hidden":false,"roles":{"default":1},"children":[{"configs":{"title":"Redis数据同步处理","loginRequired":"false","serverScript":"// TODO: 获取参数信息\nvar type = request.getParameter(\"type\") ;\t// 操作类型: shared-共享辅助段, private-私有辅助段, ledger-账簿处理, hrcy-会计科目体系, vcategory-凭证分类\nvar segCode = request.getParameter(\"segCode\") ;\t// 辅助核算段信息\nvar ledgerId = request.getParameter(\"ledgerId\") ; // 账簿ID\nvar hrcyId = request.getParameter(\"hrcyId\") ;  // 科目体系ID\nvar hrcyOp = request.getParameter(\"hrcyOP\") ; // 科目体系处理类型: add-写入, clear-清除\n\nvar json ;\nif(type === 'shared'){\n  // TODO: 共享辅助核算段\n  json = com.xzsoft.xc.gl.util.XCGLWebBuilderUtil.syncSharedSegments2Redis(segCode) ;\n  \n}else if(type === 'private'){\n  // TODO: 私有辅助段\n  json = com.xzsoft.xc.gl.util.XCGLWebBuilderUtil.syncPrivateSegments2Redis(ledgerId,segCode) ;\n  \n}else if(type === 'ledger'){\n  // TODO: 账簿同步处理\n  if(hrcyOp == 'add'){\n     // 将账簿同步到Redis数据库\n    json = com.xzsoft.xc.gl.util.XCGLWebBuilderUtil.syncLedgers(\"ALL\") ;\n    \n  }else if(hrcyOP == 'clear'){\n     // 清除账簿的缓存数据\n    json = com.xzsoft.xc.gl.util.XCGLWebBuilderUtil.clearLedgerCachedData(ledgerId) ;\n    \n  }else{\n  }\n  \n}else if(type === 'vcategory'){ \n  // TODO: 凭证分类同步处理\n  json = com.xzsoft.xc.gl.util.XCGLWebBuilderUtil.syncVCat() ;\n  \n}else if(type === 'hrcy'){\n  // TODO: 会计科目体系处理\n  if(hrcyOp == 'add'){\n    // 将会计科目体系同步到Redis数据库\n    json = com.xzsoft.xc.gl.util.XCGLWebBuilderUtil.syncAccHrcy2Redis(hrcyId) ;\n    \n  }else if(hrcyOP == 'clear'){\n    // 清除会计科目体系缓存数据\n    json = com.xzsoft.xc.gl.util.XCGLWebBuilderUtil.clearHrcyCachedData(hrcyId) ;\n    \n  }else{\n  }\n  \n}else{\n}\n\n//提示信息\napp.send(json) ;","itemId":"module"},"children":[],"expanded":false,"type":"module"}],"pageLink":"","iconCls":""}