{"inframe":false,"title":"应付业务总账明细","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"// 获取模块语言对应的json文件\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/ar/report/ap_ywzzmx\");\nrequest.setAttribute('contextPath',request.getContextPath());\nvar pDbtype = com.xzsoft.xip.platform.util.PlatformUtil.getDbType() ;\nvar pLanguage = request.getSession().getAttribute(\"XzSessionVars\").get(\"language\");\nrequest.setAttribute('pDbtype',pDbtype);\nrequest.setAttribute('pLanguage',pLanguage);","itemId":"module"},"children":[{"configs":{"layout":"border","itemId":"viewport1"},"children":[{"configs":{"region":"north","itemId":"queryForm"},"children":[{"configs":{"layout":"column","itemId":"tr1","border":"false"},"children":[{"configs":{"layout":"form","columnWidth":".3","itemId":"td_1_1","border":"false"},"children":[{"configs":{"labelWidth":"40","displayField":"NAME","valueField":"CODE","labelAlign":"right","itemId":"QUERY_LEDGER_ID","fieldLabel":"账簿"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}","select":"\n//清空form中其他已经选择的条件\napp.QUERY_CUSTOMER_ID.clearValue();"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/ar/report/DB/getAllLedger"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".3","itemId":"td_1_2","border":"false"},"children":[{"configs":{"labelWidth":"60","displayField":"NAME","valueField":"CODE","labelAlign":"right","itemId":"QUERY_CUSTOMER_ID","fieldLabel":"客户"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/ar/report/DB/getCustomers"},"events":{"beforeload":"var v_ledgerId = app.QUERY_LEDGER_ID.getValue();\nif(Wb.isEmpty(v_ledgerId)){\n  Wb.toast('请先选择账簿！');\n  return;\n}\nstore.proxy.extraParams.ledgerId = v_ledgerId;"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".3","itemId":"td_1_3","border":"false"},"children":[{"configs":{"layout":"column","itemId":"tr_1_3","border":"false"},"children":[{"configs":{"layout":"form","columnWidth":".6","itemId":"td_1_3_1","border":"false"},"children":[{"configs":{"labelWidth":"80","displayField":"NAME","valueField":"CODE","labelAlign":"right","itemId":"QUERY_PERIOD_CODE_START","fieldLabel":"会计期"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/gl/report/ledger-balance/data/getLedgerPeriod"},"events":{"beforeload":"\nvar v_ledgerId = app.QUERY_LEDGER_ID.getValue();\nif(Wb.isEmpty(v_ledgerId)){\n  Wb.toast('请先选择账簿！');\n  return;\n}\nstore.proxy.extraParams.ledgerId = v_ledgerId;"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".4","itemId":"td_1_3_2","border":"false"},"children":[{"configs":{"labelWidth":"20","displayField":"NAME","valueField":"CODE","labelAlign":"right","itemId":"QUERY_PERIOD_CODE_END","fieldLabel":"至"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/gl/report/ledger-balance/data/getLedgerPeriod"},"events":{"beforeload":"var v_ledgerId = app.QUERY_LEDGER_ID.getValue();\nif(Wb.isEmpty(v_ledgerId)){\n  Wb.toast('请先选择账簿！');\n  return;\n}\nstore.proxy.extraParams.ledgerId = v_ledgerId;"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".1","itemId":"td_1_4","border":"false"},"children":[{"configs":{"layout":"column","itemId":"tr_1_4","border":"false","x":"10"},"children":[{"configs":{"layout":"form","columnWidth":".5","itemId":"td_1_4_1","border":"false"},"children":[{"configs":{"text":"查询","itemId":"queryBtn"},"events":{"click":"\nvar v_ledgerId = app.QUERY_LEDGER_ID.getValue();\nvar V_CUSTOMER_ID = app.QUERY_CUSTOMER_ID.getValue();\nvar v_periodCode_start = Wb.dateToStr(app.QUERY_PERIOD_CODE_START.getValue());\nvar v_periodCode_end = Wb.dateToStr(app.QUERY_PERIOD_CODE_END.getValue());\nif(Wb.isEmpty(v_ledgerId)){\n  Wb.toast('请先选择账簿！');\n  return;\n}\nif(Wb.isEmpty(v_periodCode_start) && Wb.isEmpty(periodCode)){\n  Wb.toast('请先选择会计期！');\n  return;\n}\nif(Wb.isEmpty(V_CUSTOMER_ID)){\n  Wb.toast('请选择供应商！');\n  return;\n}\nvar map = new Ext.util.HashMap();\n//账簿\nmap.add('ledgerId',app.QUERY_LEDGER_ID.getValue());\nmap.add('V_CUSTOMER_ID',app.QUERY_CUSTOMER_ID.getValue());\nmap.add('periodCodeStart',Wb.dateToStr(app.QUERY_PERIOD_CODE_START.getValue()));\nmap.add('periodCodeEnd',Wb.dateToStr(app.QUERY_PERIOD_CODE_END.getValue()));\nmap.add('pDbtype',\"{#pDbtype#}\");\nmap.add('pLanguage',\"{#pLanguage#}\");\n\nvar targetUrl = '{#contextPath#}/ReportServer?reportlet=xc_ar/AR_YWZZMX.cpt&__bypagesize__=false';\nvar reportFrame = document.getElementById('reportIframe');\nvar params = '';\nmap.each(function(key, value, length){\n    params +='&'+key+'='+value;\n});\nparams = targetUrl+params;\nreportFrame.src = params;"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".5","itemId":"td_1_4_2","border":"false"},"children":[{"configs":{"text":"重置","itemId":"clearBtn"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","html":"<iframe  scrolling=no  frameborder=0 width=100% height=100% id=reportIframe src='{#contextPath#}/ReportServer?reportlet=xc_ar/AR_YWZZMX.cpt&__bypagesize__=false'><\/iframe>\n","itemId":"reportForm"},"children":[],"expanded":false,"type":"panel"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}