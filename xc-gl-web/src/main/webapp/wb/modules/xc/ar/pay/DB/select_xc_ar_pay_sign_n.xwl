{"inframe":false,"title":"收款单查询","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"//   LEDGER_ID : app.LEDGER_XWL.LEDGER_ID.getValue(),\n//   AR_PAY_H_CODE : app.AR_PAY_H_CODE.getValue(),\n//   CUSTOM_NAME : app.CUSTOM_NAME.getValue(),\n//   PROJECT_NAME : app.PROJECT_NAME.getValue(),\n//   DESCRIPTION : app.DESCRIPTION.getValue()\nvar data = app.get();\nvar sql = \"\";\nif(!Wb.isEmpty(data.AR_DOC_CAT_CODE)){\n  sql += \"and h.AR_DOC_CAT_CODE like '%\"+data.AR_DOC_CAT_CODE+\"%'\";\n}\n//收款单编码\nif(!Wb.isEmpty(data.AR_PAY_H_CODE)){\n  sql += \"and h.AR_PAY_H_CODE like '%\"+data.AR_PAY_H_CODE+\"%'\";\n}\nif(!Wb.isEmpty(data.CUSTOMER_NAME)){\n  sql += \"and customer.CUSTOMER_NAME like '%\"+data.CUSTOMER_NAME+\"%'\";\n}\nif(!Wb.isEmpty(data.PROJECT_NAME)){\n  sql += \"and project.PROJECT_NAME like '%\"+data.PROJECT_NAME+\"%'\";\n}\nif(!Wb.isEmpty(data.DESCRIPTION)){\n  sql += \"and h.DESCRIPTION like '%\"+data.DESCRIPTION+\"%'\";\n}\n\nrequest.setAttribute(\"sql\",sql);","itemId":"module"},"children":[{"configs":{"sql":"select \n  h.AR_PAY_H_ID , -- id\n  h.AR_PAY_H_CODE , -- 编号\n  h.AR_DOC_CAT_CODE , -- 单据类型\n  h.LEDGER_ID , ledger.LEDGER_NAME, -- 账簿\n  h.GL_DATE , -- 业务日期\n  h.CUSTOMER_ID , customer.CUSTOMER_NAME, -- 客户\n  h.PROJECT_ID , project.PROJECT_NAME, -- 项目\n  h.DEPT_ID , dept.DEPT_NAME, -- 成本中心\n  h.AR_CONTRACT_ID , contract.AR_CONTRACT_NAME, -- 所属合同\n  h.AMOUNT , -- 收款金额\n  h.DESCRIPTION , -- 摘要\n  h.CREATED_BY , emp.EMP_NAME as CREATED_BY_NAME, -- 创建人\n  h.SIGNATORY_ID , h.SIGNATORY,  -- 签字人\n  h.VERIFIER_ID, h.VERFY_DATE,  -- 审核\n  h.V_HEAD_ID , h.V_STATUS -- 凭证\nfrom xc_ar_pay_h h\n  left join xc_gl_ledgers ledger on ledger.LEDGER_ID = h.LEDGER_ID\n  left join xc_ar_customers customer on customer.CUSTOMER_ID = h.CUSTOMER_ID\n  left join xc_pm_projects project on project.PROJECT_ID = h.PROJECT_ID\n  left join xip_pub_depts dept on dept.DEPT_ID = h.DEPT_ID\n  left join xc_ar_contract contract on contract.AR_CONTRACT_ID = h.AR_CONTRACT_ID\n  left join xip_pub_emps emp on emp.EMP_ID = (select EMP_ID from xip_pub_users where USER_ID=h.CREATED_BY)\nwhere h.LEDGER_ID = {?LEDGER_ID?}\n  and (h.VERIFIER_ID <> '' or h.VERIFIER_ID <> null)\n  and (h.SIGNATORY_ID = '' or h.SIGNATORY_ID is null)\n{#sql#}\norder by h.CREATION_DATE desc\n","itemId":"dataprovider1"},"children":[],"expanded":false,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":"seek_icon"}