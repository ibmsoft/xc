{"inframe":false,"title":"应收款单查询","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"var sql, data = app.get();\nvar cancel_type = app.get('QUERY_CANCEL_TYPE');\n\nsql = ' where 1=1 and AR_INV_GL_H_CODE is not null and AR_INV_GL_H_CODE !=\"\"';\n\nsql+=' and a.LEDGER_ID={?QUERY_LEDGER_ID?}';\n\nsql+=' and CUSTOMER_ID={?QUERY_CUSTOMER_ID?}';\n\nif (!Wb.isEmpty(data.QUERY_AR_DOC_CAT_CODE)) {\n  sql+=' and AR_DOC_CAT_CODE={?QUERY_AR_DOC_CAT_CODE?}';\n}\nif(cancel_type == 'YSHYUS'){//应收核预收（查询所有应收单）\n  sql += '';\n}else if(cancel_type == 'YSHLDC'){//应收红蓝对冲（查询应收单-红字）\n  sql += 'and AR_DOC_CAT_CODE LIKE \\'%-HZ\\'';\n}\nrequest.setAttribute('sql', sql);","itemId":"module"},"children":[{"configs":{"itemId":"select","oracle":"select \n\ta.*,\n  (SELECT ACC_NAME FROM xc_gl_accounts b WHERE b.acc_id=a.AR_ACC_ID_DEBT) AR_ACC_NAME_DEBT,\n  (SELECT AR_CAT_NAME FROM xc_ar_doc_cats b WHERE b.AR_CAT_CODE=a.AR_DOC_CAT_CODE) AR_DOC_CAT_NAME,\n  (SELECT LEDGER_NAME FROM xc_gl_ledgers b WHERE b.LEDGER_ID=a.LEDGER_ID) LEDGER_NAME,\n  (SELECT CUSTOMER_NAME FROM xc_ar_customers b WHERE b.CUSTOMER_ID=a.CUSTOMER_ID) CUSTOMER_NAME,\n  (SELECT PROJECT_NAME FROM xc_pm_projects b WHERE b.PROJECT_ID=a.PROJECT_ID) PROJECT_NAME,\n  (SELECT DEPT_NAME FROM xip_pub_depts b WHERE b.DEPT_ID=a.DEPT_ID) DEPT_NAME,\n  (SELECT AR_CONTRACT_NAME FROM xc_ar_contract b WHERE b.AR_CONTRACT_ID=a.AR_CONTRACT_ID) AR_CONTRACT_NAME,\n  (select emp_name from xip_pub_emps where emp_id=(SELECT EMP_ID FROM XIP_PUB_USERS b WHERE b.USER_ID=a.CREATED_BY)) CREATED_BY_NAME\nfrom xc_ar_inv_gl_h a left join xc_gl_ledgers led on led.LEDGER_ID = a.LEDGER_ID\n{#sql#}\nAND (AR_INV_GL_H_CODE like '%{#QUERY_CODE_NAME#}%' OR DESCRIPTION like '%{#QUERY_CODE_NAME#}%')\nAND\nV_STATUS>= '3' \nand \nNO_PAY_AMT<>0\nORDER BY AR_INV_GL_H_CODE desc","mysql":"select \n\ta.*,\n  (SELECT ACC_NAME FROM xc_gl_accounts b WHERE b.acc_id=a.AR_ACC_ID_DEBT) AR_ACC_NAME_DEBT,\n  (SELECT AR_CAT_NAME FROM xc_ar_doc_cats b WHERE b.AR_CAT_CODE=a.AR_DOC_CAT_CODE) AR_DOC_CAT_NAME,\n  (SELECT LEDGER_NAME FROM xc_gl_ledgers b WHERE b.LEDGER_ID=a.LEDGER_ID) LEDGER_NAME,\n  (SELECT CUSTOMER_NAME FROM xc_ar_customers b WHERE b.CUSTOMER_ID=a.CUSTOMER_ID) CUSTOMER_NAME,\n  (SELECT PROJECT_NAME FROM xc_pm_projects b WHERE b.PROJECT_ID=a.PROJECT_ID) PROJECT_NAME,\n  (SELECT DEPT_NAME FROM xip_pub_depts b WHERE b.DEPT_ID=a.DEPT_ID) DEPT_NAME,\n  (SELECT AR_CONTRACT_NAME FROM xc_ar_contract b WHERE b.AR_CONTRACT_ID=a.AR_CONTRACT_ID) AR_CONTRACT_NAME,\n  (select emp_name from xip_pub_emps where emp_id=(SELECT EMP_ID FROM XIP_PUB_USERS b WHERE b.USER_ID=a.CREATED_BY)) CREATED_BY_NAME\nfrom xc_ar_inv_gl_h a left join xc_gl_ledgers led on led.LEDGER_ID = a.LEDGER_ID\n{#sql#}\nAND (AR_INV_GL_H_CODE like '%{#QUERY_CODE_NAME#}%' OR DESCRIPTION like '%{#QUERY_CODE_NAME#}%')\nAND\nV_STATUS>= '3'\t\nand \nNO_PAY_AMT<>0\nORDER BY AR_INV_GL_H_CODE desc\nlimit {?bigint.start?},{?bigint.limit?}"},"children":[],"expanded":false,"type":"sqlswitcher"},{"configs":{"autoPage":"false","sql":"{#select#}","totalSql":"select count(*) from xc_ar_inv_gl_h a \n\t   {#sql#}","itemId":"dataprovider1"},"children":[],"expanded":false,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}