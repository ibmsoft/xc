{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"var sql, data = app.get();\nsql = ' where 1=1 and t.LEDGER_ID={?LEDGER_ID?} and t.CUSTOMER_ID=\\''+data.CUSTOMER_ID+'\\' and AR_PAY_H_CODE is not null and AR_PAY_H_CODE !=\"\"';\nif(!Wb.isEmpty(data.AR_DOC_CAT_CODE)){\n  sql+=data.AR_DOC_CAT_CODE;\n}\nif (!Wb.isEmpty(data.AR_CONTRACT_NAME)) {\n  sql+=' and (t.AR_CONTRACT_NAME like \\'%'+data.AR_CONTRACT_NAME+'%\\' or t.AR_CONTRACT_CODE like \\'%'+data.AR_CONTRACT_NAME+'%\\')';\n}\n\nif (!Wb.isEmpty(data.AR_INV_GL_H_ID)) {\n  result = app.run('SELECT  AR_CONTRACT_ID FROM xc_ar_inv_gl_h m where m.AR_INV_GL_H_ID = \\''+data.AR_INV_GL_H_ID+'\\' ');\n  while (result.next()) {\n    \n   \t/*if(Wb.isEmpty(result.getString('AR_CONTRACT_ID'))){\n      sql+=' and (t.AR_CONTRACT_ID  is null or t.AR_CONTRACT_ID = \\'\\')';\n    }else{\n      sql+=' and t.AR_CONTRACT_ID = \\''+result.getString('AR_CONTRACT_ID')+'\\'';\n    }*/\n  }\n}\n\nif (!Wb.isEmpty(data.CREATED_BY_NAME)) {\n  sql+=' and t.CREATED_BY_NAME like \\'%'+data.CREATED_BY_NAME+'%\\' ';\n}\n\n\n\nif (!Wb.isEmpty(data.AR_PAY_H_CODE)) {\n    sql+=' and (t.AR_PAY_H_CODE like \\'%'+data.AR_PAY_H_CODE+'%\\' ';\n    sql+=' or t.DESCRIPTION like \\'%'+data.AR_PAY_H_CODE+'%\\' )';\n}\n\n\nrequest.setAttribute('sql', sql);","itemId":"module"},"children":[{"configs":{"oracle":"select * from (\n  select t1.*, ROWNUM as \"RN\" from (\nSELECT \n   a.*,\n   (AMOUNT-ifnull((select sum(TARGET_AMT) from xc_ar_cancel_l where TARGET_ID=a.AR_PAY_H_ID),0)) NO_CANCEL_AMT,\n   (SELECT CUSTOMER_NAME FROM xc_ar_customers b WHERE b.CUSTOMER_ID=a.CUSTOMER_ID) CUSTOMER_NAME,\n   (SELECT AR_CONTRACT_CODE FROM xc_ar_contract b WHERE b.AR_CONTRACT_ID=a.AR_CONTRACT_ID) AR_CONTRACT_CODE,\n   (SELECT AR_CONTRACT_NAME FROM xc_ar_contract b WHERE b.AR_CONTRACT_ID=a.AR_CONTRACT_ID) AR_CONTRACT_NAME,\n   (SELECT DEPT_NAME FROM xip_pub_depts b WHERE b.DEPT_ID=a.DEPT_ID) DEPT_NAME,\n   (SELECT PROJECT_NAME FROM xc_pm_projects b WHERE b.PROJECT_ID=a.PROJECT_ID) PROJECT_NAME,\n   (select ACC_ID from xc_ar_pay_l c where c.AR_PAY_H_ID=a.AR_PAY_H_ID limit 0,1) ACC_ID,\n   (SELECT ACC_NAME FROM xc_gl_accounts b WHERE b.acc_id=\n   (select ACC_ID from xc_ar_pay_l c where c.AR_PAY_H_ID=a.AR_PAY_H_ID limit 0,1)) SALE_ACC_NAME,\n  (SELECT CCID_NAME FROM xc_gl_ccid b WHERE b.ccid=\n   (select CCID from xc_ar_pay_l c where c.AR_PAY_H_ID=a.AR_PAY_H_ID limit 0,1)) SALE_CCID_NAME,\n   (SELECT EMP_NAME FROM XIP_PUB_EMPS WHERE EMP_ID=(SELECT EMP_ID FROM XIP_PUB_USERS b WHERE b.USER_ID=a.CREATED_BY)) CREATED_BY_NAME\nFROM\n  xc_ar_pay_h  a left join xc_gl_ledgers led on led.LEDGER_ID = a.LEDGER_ID\n  where \n  V_STATUS>= '3' \n    ) t\n {#sql#}\n  and NO_CANCEL_AMT>0\norder by AR_PAY_H_CODE desc\n  ) t1 where ROWNUM<={?bigint.endIndex?}\n)\nwhere RN >= {?bigint.beginIndex?}","itemId":"select","mysql":"select * from (\nSELECT \n   a.*,\n   (SELECT NO_CANCEL_AMT FROM xc_ar_pay_l b where b.ar_pay_h_id = a.ar_pay_h_id limit 0,1) NO_CANCEL_AMT,\n   (SELECT CUSTOMER_NAME FROM xc_ar_customers b WHERE b.CUSTOMER_ID=a.CUSTOMER_ID) CUSTOMER_NAME,\n   (SELECT AR_CONTRACT_CODE FROM xc_ar_contract b WHERE b.AR_CONTRACT_ID=a.AR_CONTRACT_ID) AR_CONTRACT_CODE,\n   (SELECT AR_CONTRACT_NAME FROM xc_ar_contract b WHERE b.AR_CONTRACT_ID=a.AR_CONTRACT_ID) AR_CONTRACT_NAME,\n   (SELECT DEPT_NAME FROM xip_pub_depts b WHERE b.DEPT_ID=a.DEPT_ID) DEPT_NAME,\n   (SELECT PROJECT_NAME FROM xc_pm_projects b WHERE b.PROJECT_ID=a.PROJECT_ID) PROJECT_NAME,\n   (select ACC_ID from xc_ar_pay_l c where c.AR_PAY_H_ID=a.AR_PAY_H_ID limit 0,1) ACC_ID,\n   (SELECT ACC_NAME FROM xc_gl_accounts b WHERE b.acc_id=\n   (select ACC_ID from xc_ar_pay_l c where c.AR_PAY_H_ID=a.AR_PAY_H_ID limit 0,1)) SALE_ACC_NAME,\n   (SELECT CCID_NAME FROM xc_gl_ccid b WHERE b.ccid=\n   (select CCID from xc_ar_pay_l c where c.AR_PAY_H_ID=a.AR_PAY_H_ID limit 0,1)) SALE_CCID_NAME,\n   (SELECT EMP_NAME FROM XIP_PUB_EMPS WHERE EMP_ID=(SELECT EMP_ID FROM XIP_PUB_USERS b WHERE b.USER_ID=a.CREATED_BY)) CREATED_BY_NAME\nFROM\n  xc_ar_pay_h  a left join xc_gl_ledgers led on led.LEDGER_ID = a.LEDGER_ID\n  where\n  V_STATUS>= '3' \t\n) t {#sql#}\nand NO_CANCEL_AMT<>0\norder by AR_PAY_H_CODE desc\nlimit {?bigint.start?},{?bigint.limit?}"},"children":[],"expanded":false,"type":"sqlswitcher"},{"configs":{"sql":"{#select#}","itemId":"dataprovider1"},"children":[],"expanded":false,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}