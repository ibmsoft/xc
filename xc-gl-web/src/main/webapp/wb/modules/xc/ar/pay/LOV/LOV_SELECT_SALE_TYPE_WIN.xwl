{"inframe":false,"title":"查询销售类型","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/ar/pay/LOV/LOV_SELECT_SALE_TYPE_WIN\");","itemId":"module"},"events":{"initialize":"Ext.apply(app,{\n  initWin : function(params){\n    Ext.apply(app,params);\n    \n    app.win = new Ext.window.Window(app.window1);\n    app.win.show();\n    \n    app.LEDGER_ID.setValue(params.LEDGER_ID);//账簿\n    app.AR_DOC_CAT_CODE.setValue(params.AR_DOC_CAT_CODE);//单据类型\n    \n    app.queryBtn.fireEvent('click');\n  }\n});"},"children":[{"configs":{"maximized":"true","layout":"border","itemId":"window1","modal":"true"},"children":[{"configs":{"region":"north","itemId":"form1"},"children":[{"configs":{"itemId":"params"},"children":[{"configs":{"itemId":"LEDGER_ID"},"children":[],"expanded":false,"type":"hidden"},{"configs":{"itemId":"AR_DOC_CAT_CODE"},"children":[],"expanded":false,"type":"hidden"}],"expanded":true,"type":"panel"},{"configs":{"layout":"column","margin":"10 10 10 10","border":"false","itemId":"tr1"},"children":[{"configs":{"layout":"fit","columnWidth":".245","border":"false","itemId":"tr1_td1"},"children":[{"configs":{"labelWidth":"100","labelAlign":"right","itemId":"AR_SALE_TYPE_NAME","fieldLabel":"{#AR_SALE_TYPE_NAME#}"},"events":{"specialkey":"if(e.getKey()===13){app.queryBtn.fireEvent('click');}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"layout":"column","columnWidth":".25","border":"false","itemId":"tr1_td2"},"children":[{"configs":{"width":"50","itemId":"space"},"children":[],"expanded":false,"type":"label"},{"configs":{"text":"{#queryBtn#}","itemId":"queryBtn","iconCls":"seek_icon"},"events":{"click":"app.grid1.store.load();"},"children":[],"expanded":false,"type":"button"},{"configs":{"width":"20","itemId":"space1"},"children":[],"expanded":false,"type":"label"},{"configs":{"text":"{#clearBtn#}","itemId":"clearBtn","iconCls":"refresh_icon"},"events":{"click":"//app.form1.getForm().reset();\napp.AR_SALE_TYPE_NAME.setValue('');\napp.queryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","selType":"checkboxmodel","itemId":"grid1","editable":"true"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/ar/pay/LOV/DB/lov_select_ar_sale_type"},"events":{"beforeload":"operation.params = Wb.getValue(app.form1);\n"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#okBtn#}","itemId":"okBtn","iconCls":"check_icon"},"events":{"click":"var recs = app.grid1.getSelection();\nif (recs.length === 0) {\n  Wb.toast('{#qzsxzytjl#}');\n  return false;\n}\nvar rows = Wb.getData(recs);\n\nvar isContinue = false;\nWb.each(rows, function(row) {\n  if(Wb.isEmpty(row.PAY_AMT)){\n    Wb.toast('{#jebnwk#}');\n    isContinue = false;\n    return false;\n  }\n  if(row.PAY_AMT === 0){\n    Wb.toast('{#jebnwl#}');\n    isContinue = false;\n    return false;\n  }\n  isContinue = true;\n});\nif(isContinue){\n  app.hideFun(recs);\n  app.win.close();\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#cancelBtn#}","itemId":"cancelBtn","iconCls":"delete_icon"},"events":{"click":"app.lovWinN.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#ROWNUM_COL#}","align":"center","xtype":"rownumberer","width":"50","titleAlign":"center","itemId":"ROWNUM_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#AR_SALE_TYPE_NAME_COL#}","width":"150","dataIndex":"AR_SALE_TYPE_NAME","titleAlign":"center","itemId":"AR_SALE_TYPE_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#BG_ITEM_NAME_COL#}","width":"150","dataIndex":"PRODUCT_NAME","titleAlign":"center","itemId":"BG_ITEM_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#ACC_NAME_COL#}","width":"150","dataIndex":"ACC_NAME","titleAlign":"center","itemId":"ACC_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#PAY_AMT_COL#}","align":"right","width":"100","dataIndex":"PAY_AMT","format":"0,000.00","titleAlign":"center","itemId":"PAY_AMT_COL","renderer":"metaData.style='background-color:#ffffd0';\nreturn Ext.util.Format.number(value,'0,000.00');"},"children":[{"configs":{"itemId":"editor"},"events":{"change":"var ar_doc_cat_code = app.AR_DOC_CAT_CODE.getValue();//单据类型\n\nif( ar_doc_cat_code == 'SKD_QTSK' ){\n  if( newValue < 0 ){\n    Wb.toast('{#jeydyl#}');\n    number.setValue(); \n  }\n  return false;\n}\n\nif( ar_doc_cat_code == 'SKD_QTSK-H'){\n  if( newValue > 0 ){\n    Wb.toast('{#jeyxyl#}');\n    number.setValue(); \n  }\n  return false;\n}\n","focus":"if(number.getValue() === 0){\n  number.setValue();\n}"},"children":[],"expanded":false,"type":"number"}],"expanded":true,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"window"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}