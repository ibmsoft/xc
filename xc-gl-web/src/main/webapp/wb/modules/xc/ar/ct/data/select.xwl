{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"var lang = request.getSession().getAttribute(\"XzSessionVars\").get('language');\nrequest.setAttribute(\"language\",lang);","serverScript":"var sql, data = app.get();\nsql = ' WHERE 1=1 ';\nsql+=' and o.ORG_NAME={?ORG_NAME?}';\nif (!Wb.isEmpty(data.AR_CONTRACT_CODE_NAME)) {\n    sql+=' and a.AR_CONTRACT_CODE LIKE '+'\"%'+data.AR_CONTRACT_CODE_NAME+'%\" or a.AR_CONTRACT_NAME LIKE '+'\"%'+data.QUERY_AR_CONTRACT_NAME+'%\"';\n}\nif (!Wb.isEmpty(data.QUERY_STATUS)) {\n    if(data.QUERY_STATUS != 'ALL')\n        sql+=' and a.AUDIT_STATUS = {?QUERY_STATUS?}';\n}\nif (!Wb.isEmpty(data.SYS_STATUS)) {\n    if(data.SYS_STATUS != 'ALL')\n        sql+=' and a.SYS_AUDIT_STATUS = {?SYS_STATUS?}';\n}\nif (!Wb.isEmpty(data.QUERY_AR_CONTRACT_PRO)) {\n    sql+=' and a.AR_CONTRACT_TYPE LIKE '+'\"%'+data.QUERY_AR_CONTRACT_PRO+'%\"';\n}\nif(data.QUERY_IS_CLOSE == 'Y'){\n    sql+=' and IS_CLOSE =\"Y\" ';\n}\nelse if(data.QUERY_IS_CLOSE == 'N'){\n    sql+=' and IS_CLOSE =\"N\" ';\n}\nif (!Wb.isEmpty(data.QUERY_AR_CONTRACT_TYPE)) {\n    sql+=' and a.AR_CONTRACT_TYPE_ID LIKE '+'\"%'+data.QUERY_AR_CONTRACT_TYPE+'%\"';\n}\nif (!Wb.isEmpty(data.QUERY_START_DATE)) {\n    if (!Wb.isEmpty(data.QUERY_END_DATE)) {\n        sql+=' and a.START_DATE BETWEEN {?QUERY_START_DATE?} and {?QUERY_END_DATE?} ';\n    }else{\n        sql+=' and a.START_DATE >= {?QUERY_START_DATE?}';\n    }\n}\nelse{\n    if (!Wb.isEmpty(data.QUERY_END_DATE)) {\n        sql+=' and a.END_DATE <= {?QUERY_END_DATE?}';\n    }\n}\nrequest.setAttribute('sql', sql);","itemId":"module"},"children":[{"configs":{"sql":"SELECT\n\ta.AR_CONTRACT_ID,\n\ta.AR_CONTRACT_CODE,\n\ta.AR_CONTRACT_NAME,\n\ta.AR_CONTRACT_TYPE,\n\ta.LEDGER_ID,\n\ta.START_DATE,\n\ta.END_DATE,\n\ta.AMOUNT,\n\ta.TAX_AMT,\n\ta.INV_AMOUNT,\n\ta.VERSION,\n\ta.INS_CODE,\n\ta.AUDIT_STATUS,\n\ta.AUDIT_STATUS_DESC,\n\ta.SYS_AUDIT_STATUS,\n\ta.AUDIT_DATE,\n\ta.DEPT_ID,\n\ta.PROJECT_ID,\n\ta.CONTRACT_USER,\n\ta.IS_CLOSE,\n\ta.DESCRIPTION,\n\ta.ORG_ID,\n\to.ORG_NAME,\n\to.ORG_CODE,\n\to.ORG_SHORT_NAME,\n\tb.LEDGER_NAME,\n\tb.LEDGER_CODE,\n\ti.PROJECT_NAME,\n\tg.DEPT_NAME,\n\tm.EMP_NAME,\n\tc.CUSTOMER_NAME,\n\tc.CUSTOMER_ID,\n    a.AR_CONTRACT_TYPE_ID,\n    (SELECT\n       CASE WHEN l.VAL_NAME IS NULL OR l.VAL_NAME = '' THEN d.VAL_NAME ELSE l.VAL_NAME END DESCRIPTION\n     FROM\n       xip_pub_val_set_dtl d\n     LEFT JOIN XIP_PUB_VAL_SET_DTL_LANG l ON d.VAL_SET_CODE = l.VAL_SET_CODE\n     AND d.VAL_CODE = l.VAL_CODE\n     AND l.VAL_SET_LANG = '{#language#}'\n     WHERE\n       d.VAL_SET_CODE = 'XC_PO_CONTRACT_TYPE'\n     AND d.ENABLE_FLAG = 'Y'\n     AND d.VAL_CODE = a.AR_CONTRACT_TYPE_ID) AS CONTRACT_TYPE_NAME,\n\n    (SELECT\n       CASE WHEN l.VAL_NAME IS NULL OR l.VAL_NAME = '' THEN d.VAL_NAME ELSE l.VAL_NAME END DESCRIPTION\n     FROM\n       xip_pub_val_set_dtl d\n     LEFT JOIN XIP_PUB_VAL_SET_DTL_LANG l ON d.VAL_SET_CODE = l.VAL_SET_CODE\n     AND d.VAL_CODE = l.VAL_CODE\n     AND l.VAL_SET_LANG = '{#language#}'\n     WHERE\n       d.VAL_SET_CODE = 'XC_AP_CONTRACT_SYS_AUDIT_STATUS'\n     AND d.ENABLE_FLAG = 'Y'\n     AND d.VAL_CODE = a.SYS_AUDIT_STATUS) AS SYS_AUDIT_STATUS_DESC,\n\n    (SELECT\n       CASE WHEN l.VAL_NAME IS NULL OR l.VAL_NAME = '' THEN d.VAL_NAME ELSE l.VAL_NAME END DESCRIPTION\n     FROM\n       xip_pub_val_set_dtl d\n     LEFT JOIN XIP_PUB_VAL_SET_DTL_LANG l ON d.VAL_SET_CODE = l.VAL_SET_CODE\n     AND d.VAL_CODE = l.VAL_CODE\n     AND l.VAL_SET_LANG = '{#language#}'\n     WHERE\n       d.VAL_SET_CODE = 'XC_AR_CT_TYPE'\n     AND d.ENABLE_FLAG = 'Y'\n     AND d.VAL_CODE = a.AR_CONTRACT_TYPE) AS AR_CONTRACT_TYPE_NAME\nFROM\n\txc_ar_contract a\nLEFT JOIN xc_gl_ledgers b ON a.LEDGER_ID = b.LEDGER_ID\nLEFT JOIN xc_pm_projects i ON i.project_id = a.project_id\nLEFT JOIN xip_pub_depts g ON g.DEPT_ID = a.DEPT_ID\nLEFT JOIN xip_pub_emps m ON m.EMP_ID = a.CONTRACT_USER\nLEFT JOIN xc_ar_customers c ON c.CUSTOMER_ID = a.CUSTOMER_ID\nLEFT JOIN xip_pub_orgs o ON a.ORG_ID = o.ORG_ID\n{#sql#}\nORDER BY a.AR_CONTRACT_CODE\n    ","itemId":"dataprovider1"},"children":[],"expanded":false,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}