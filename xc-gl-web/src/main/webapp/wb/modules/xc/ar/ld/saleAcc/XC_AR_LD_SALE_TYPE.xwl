{"inframe":false,"title":"账簿采购科目设置","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"com.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/ar/ld/saleAcc/XC_AR_LD_SALE_TYPE\");","itemId":"module"},"events":{"finalize":"\nfunction returnRowFn(r,type){\n  var ledgerId = r.data.LEDGER_ID;\n  if(type==='xc_gl_ledgers'){\n    Wb.request({\n      url: 'm?xwl=xc/ar/ld/saleAcc/DB/XC_AR_LD_SALE_TYPE_EXISTS',\n      params: {LEDGER_ID:ledgerId},\n      success: function(resp) {\n        var r = Wb.decode(resp.responseText);\n        if(r.rowNum===0){\n          Wb.request({\n            url: 'm?xwl=xc/ar/ld/saleAcc/DB/XC_AR_LD_SALE_TYPE_INSERT',\n            params: {LEDGER_ID:ledgerId},\n            success: function(resp) {\n             app.grid1.getStore().reload({params:{\n                LEDGER_ID:app.LEDGER_XWL.LEDGER_ID.getValue()\n            }});\n            }\n          });\n        }else{\n          app.grid1.getStore().reload({params:{\n              LEDGER_ID:app.LEDGER_XWL.LEDGER_ID.getValue()\n          }});\n        }\n        \n      }\n    });\n    Wb.request({\n  url: 'm?xwl=xc/ar/ld/saleAcc/DB/SELECT_PRODUCT_EXIST',\n  params: {LEDGER_ID:ledgerId},\n  success: function(resp) {\n    var r = Wb.decode(resp.responseText);\n    if(r.rowNum===0){\n      app.PRODUCT_NAME_COL.hide();\n    }else{\n      app.PRODUCT_NAME_COL.show();\n    }\n\n  }\n});\n  }\n  \n}\nfunction clearOtherFn(type){\n  if(type=='xc_gl_ledgers'){\n  }\n}\n//设置账簿的输入框背景色，并且设置必输。\napp.LEDGER_XWL.LEDGER_NAME.setFieldStyle('background-color: #ffffd0; background-image: none;');\napp.LEDGER_XWL.LEDGER_NAME.allowBlank=false;"},"children":[{"configs":{"itemId":"request"},"children":[{"configs":{"autoLoad":"true","itemId":"ldInitStore","url":"m?xwl=xc/com-lov/LEDGER_ID_PICK/DB/XC_GL_LEDGERS_SELECT_SEC"},"events":{"load":"app.LEDGER_XWL.LEDGER_ID.setValue(store.getAt(0).get('LEDGER_ID'));\napp.LEDGER_XWL.LEDGER_NAME.setValue(store.getAt(0).get('LEDGER_NAME'));\n\nWb.request({\n  url: 'm?xwl=xc/ar/ld/saleAcc/DB/XC_AR_LD_SALE_TYPE_EXISTS',\n  params: {LEDGER_ID:store.getAt(0).get('LEDGER_ID')},\n  success: function(resp) {\n\n\n    var r = Wb.decode(resp.responseText);\n    if(r.rowNum===0){\n      Wb.request({\n        url: 'm?xwl=xc/ar/ld/saleAcc/DB/XC_AR_LD_SALE_TYPE_INSERT',\n        params: {LEDGER_ID:store.getAt(0).get('LEDGER_ID')},\n        success: function(resp) {\n          app.grid1.getStore().reload({params:{\n            LEDGER_ID:app.LEDGER_XWL.LEDGER_ID.getValue()\n          }});\n        }\n      });\n    }else{\n      app.grid1.getStore().reload({params:{\n        LEDGER_ID:app.LEDGER_XWL.LEDGER_ID.getValue()\n      }});\n    }\n\n  }\n});\n\nWb.request({\n  url: 'm?xwl=xc/ar/ld/saleAcc/DB/SELECT_PRODUCT_EXIST',\n  params: {LEDGER_ID:store.getAt(0).get('LEDGER_ID')},\n  success: function(resp) {\n    var r = Wb.decode(resp.responseText);\n    if(r.rowNum===0){\n      app.PRODUCT_NAME_COL.hide();\n    }else{\n      app.PRODUCT_NAME_COL.show();\n    }\n\n  }\n});"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"folder"},{"configs":{"title":"{#syncBtn#}","height":"400","layout":"border","width":"500","resizable":"false","closeAction":"hide","buttonAlign":"center","dialog":"true","itemId":"syncWindow","modal":"true","iconCls":"record_copy_icon"},"events":{"ok":"var rec = app.syncGrid.getSelection();\nvar ledgerId =  app.LEDGER_XWL.LEDGER_ID.getValue();\nif(rec.length===0){\n  Wb.toast('{#MSG3#}');\n  return;\n}\nvar ids = [];\nfor(var i=0;i<rec.length;i++){\n  var id = {id:rec[i].data.AR_SALE_TYPE_ID};\n  ids.push(id);\n}\nWb.request({\n\turl:'m?xwl=xc/ar/ld/saleAcc/DB/inserSync',\n    params:{'LEDGER_ID':ledgerId,'ids':ids},\n    success:function(resp){\n\t\tWb.toast('{#MSG4#}'+ids.length+'{#MSG5#}');\n        Wb.remove(app.syncGrid);\n        win.hide();\n        Wb.reload(app.grid1);\n\t}\n});\n"},"children":[{"configs":{"labelWidth":"80","hidden":"true","labelAlign":"right","itemId":"ledgerIdText","fieldLabel":"账簿ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"region":"center","selType":"checkboxmodel","barPageButton":"false","barExportButtons":"false","barExportAllButtons":"false","itemId":"syncGrid"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/ar/ld/saleAcc/DB/selectSync"},"events":{"beforeload":"store.getProxy().extraParams.LEDGER_ID =  app.LEDGER_XWL.LEDGER_ID.getValue();\nstore.getProxy().extraParams.selText = app.selectText.getValue();\n // Wb.getValue(app.form1);"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"<span style=\"color: rgb(255, 0, 0); padding-left: 2px;\">*<\/span>采购类型ID","hidden":"true","width":"200","dataIndex":"AR_SALE_TYPE_ID","itemId":"AR_SALE_TYPE_ID_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"<span style=\"color: rgb(255, 0, 0); padding-left: 2px;\">*<\/span>{#AR_SALE_TYPE_NAME_COL#}","width":"200","dataIndex":"AR_SALE_TYPE_NAME","titleAlign":"center","itemId":"AR_SALE_TYPE_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"<span style=\"color: rgb(255, 0, 0); padding-left: 2px;\">*<\/span>{#SALE_OBJECT_COL#}","width":"200","dataIndex":"SALE_OBJECT_NAME","titleAlign":"center","itemId":"SALE_OBJECT_COL"},"children":[],"expanded":true,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"emptyText":"{#emptyText#}","itemId":"selectText"},"events":{"specialkey":"if(Ext.EventObject.getKey() == 13){//响应回车事件\n  app.selBtn.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#selBtn#}","itemId":"selBtn","iconCls":"seek_icon"},"events":{"click":"var gridLength = app.grid1.getStore().getCount();//grid1中数据的个数\nvar record = app.grid1.getStore().getRange(0,gridLength);//获取store中的所有数据\nvar typeIdStr = '(\"';//采购类型ID拼接str\nif(record.length>0){\n  for(var i=0;i<record.length;i++){//拼接typeIdStr\n  if(i<record.length-1){\n    typeIdStr+=record[i].data.AR_SALE_TYPE_ID+'\"'+',\"';\n  }else{\n    typeIdStr+=record[i].data.AR_SALE_TYPE_ID+'\")';\n  }\n\t}\n}else{\n\ttypeIdStr+='\")';\n}\n\napp.syncGrid.store.load({params:{'typeIdStr':typeIdStr,'selText':app.selectText.getValue()}});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#clearBtn#}","itemId":"clearBtn","iconCls":"cancel_icon"},"events":{"click":"app.selectText.reset();\napp.selBtn.fireEvent('click');\n"},"children":[],"expanded":false,"type":"button"}],"expanded":false,"type":"toolbar"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"window"},{"configs":{"layout":"border","itemId":"viewport1"},"children":[{"configs":{"region":"north","itemId":"form1"},"children":[{"configs":{"tagConfigs":"baseCls : 'my-panel-no-border'","layout":"column","border":"false","itemId":"tr1"},"children":[{"configs":{"tagConfigs":"baseCls : 'my-panel-no-border'","layout":"form","columnWidth":".25","border":"false","itemId":"td_1_1"},"children":[{"configs":{"file":"m?xwl=xc/com-lov/LEDGER_ID_PICK/LEDGER_ID_PICK_SEC","itemId":"LEDGER_XWL"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","multiSelect":"true","selType":"checkboxmodel","itemId":"grid1","editable":"true"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/ar/ld/saleAcc/DB/XC_AR_LD_SALE_TYPE_SELECT"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#saveBtn#}","itemId":"saveBtn","iconCls":"save_icon"},"events":{"click":"if (!Wb.verifyGrid(app.grid1)) //验证数据是否合法\n  return;\nWb.sync({\n  grid: app.grid1,\n  url: 'm?xwl=xc/ar/ld/saleAcc/DB/XC_AR_LD_SALE_TYPE_GRID_UPDATE',\n  message: '{#message#}',\n  success: function(resp) {\n    Wb.reload(app.grid1);\n    Wb.toast('{#SAVETIP#}');\n  }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#syncBtn#}","itemId":"syncBtn","iconCls":"record_copy_icon"},"events":{"click":"var gridLength = app.grid1.getStore().getCount();//grid1中数据的个数\n\nvar record = app.grid1.getStore().getRange(0,gridLength);//获取store中的所有数据\n\nvar typeIdStr = '(\"';//销售类型ID拼接str\nif(record.length>0){\n  for(var i=0;i<record.length;i++){//拼接typeIdStr\n  if(i<record.length-1){\n    typeIdStr+=record[i].data.AR_SALE_TYPE_ID+'\"'+',\"';\n  }else{\n    typeIdStr+=record[i].data.AR_SALE_TYPE_ID+'\")';\n  }\n\t}\n}else{\n\ttypeIdStr+='\")';\n}\nvar win = new Ext.window.Window(app._syncWindow);\nwin.show();//窗口显示\napp.syncGrid.getStore().load({params:{'typeIdStr':typeIdStr}});//加载syncGrid\n//app.ledgerIdText.setValue(record[0].data.LEDGER_ID);//ledgerIdText赋值"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#delBtn#}","itemId":"delBtn","iconCls":"file_delete_icon"},"events":{"click":"var recs = app.grid1.getSelection();\nif (!recs.length) {\n\n   Wb.toast('{#DELTIP#}');\n  return;\n}\nWb.confirm('{#DELOKTIP#}', function() {\n  Wb.request({\n    url: 'm?xwl=xc/ar/ld/saleAcc/DB/XC_AR_LD_SALE_TYPE_DELETE', \n    params: Wb.apply({\n      destroy: Wb.getData(recs)\n    }),\n    success: function() {\n      Wb.remove(app.grid1, recs);\n      Wb.toast('{#DELTIP1#}');\n      app.grid1.store.reload();\n    }\n  });\n});"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#XH#}","align":"center","width":"50","xtype":"rownumberer","titleAlign":"center","itemId":"column1"},"events":{"afterrender":"\n\n"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#LEDGER_ID_COL#}","hidden":"true","width":"200","dataIndex":"LEDGER_ID","titleAlign":"center","itemId":"LEDGER_ID_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"<span style=\"color: rgb(255, 0, 0); padding-left: 2px;\">*<\/span>{#AR_SALE_TYPE_ID_COL#}","hidden":"true","width":"200","dataIndex":"AR_SALE_TYPE_ID","titleAlign":"center","itemId":"AR_SALE_TYPE_ID_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"<font color='red'>*<\/font>{#AR_SALE_TYPE_NAME_COL#}","width":"150","dataIndex":"AR_SALE_TYPE_NAME","titleAlign":"center","itemId":"AR_SALE_TYPE_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"<span style=\"color: rgb(255, 0, 0); padding-left: 2px;\">*<\/span>{#SALE_OBJECT_COL#}","hidden":"true","width":"100","dataIndex":"SALE_OBJECT","titleAlign":"center","itemId":"SALE_OBJECT_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"<span style=\"color: rgb(255, 0, 0); padding-left: 2px;\">*<\/span>{#SALE_OBJECT_COL#}","width":"100","dataIndex":"SALE_OBJECT_NAME","titleAlign":"center","itemId":"SALE_OBJECT_NAME"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#BG_ITEM_ID_COL#}","hidden":"true","width":"150","dataIndex":"BG_ITEM_ID","titleAlign":"center","itemId":"BG_ITEM_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#BG_ITEM_ID_COL#}","hidden":"true","width":"150","dataIndex":"BG_ITEM_NAME","titleAlign":"center","itemId":"BG_ITEM_NAME_COL"},"children":[{"configs":{"normalName":"BG_ITEM_NAME_PICK","itemId":"editor"},"children":[{"configs":{"tagConfigs":"minWidth:400","itemId":"pickComp"},"events":{"itemdblclick":"var r=app.grid1.getSelectionModel().getSelection()[0];\nr.set('BG_ITEM_ID',record.data.BG_ITEM_ID);\nr.set('BG_ITEM_NAME',record.data.BG_ITEM_NAME);\nr.dirty = true;\napp.BG_ITEM_NAME_PICK.setValue(record.data.BG_ITEM_NAME);\nvar picker = this.ownerCmp;\npicker.collapse();"},"children":[{"configs":{"pageSize":"5","autoLoad":"true","itemId":"store","url":"m?xwl=xc/com-lov/BG_ITEM_ID_PICK/DB/XC_BG_ITEMS_SELECT"},"events":{"beforeload":"operation.params = Wb.getValue(app.tbar);"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"hidden":"true","dataIndex":"BG_ITEM_ID","itemId":"BG_ITEM_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"账簿编码","dataIndex":"BG_ITEM_CODE","itemId":"BG_ITEM_CODE_COL","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"账簿名称","dataIndex":"BG_ITEM_NAME","itemId":"BG_ITEM_NAME_COL","flex":"1"},"children":[],"expanded":false,"type":"column"}],"expanded":false,"type":"array"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"labelWidth":"100","labelAlign":"right","itemId":"QUERY_CODE_NAME","fieldLabel":"{#QUERY_CODE_NAME#}"},"events":{"specialkey":"if(Ext.EventObject.getKey()==13){\n\tapp.pickComp.getStore().load();\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"itemId":"cancelBtn","iconCls":"delete_icon"},"events":{"click":"var rec = app.grid1.getSelection()[0];\n\nrec.set('BG_ITEM_ID',null);\nrec.set('BG_ITEM_NAME',null);\napp.BG_ITEM_NAME_PICK.setValue('');\n\n"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"picker"}],"expanded":false,"type":"column"},{"configs":{"text":"{#AR_ACC_ID_INV_COL#}","hidden":"true","width":"150","dataIndex":"AR_ACC_ID_INV","titleAlign":"center","itemId":"AR_ACC_ID_INV_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#AR_ACC_ID_INV_COL#}","width":"150","dataIndex":"AR_ACC_ID_INV_NAME","titleAlign":"center","itemId":"AR_ACC_ID_INV_NAME_COL"},"children":[{"configs":{"normalName":"AR_ACC_ID_INV_NAME_PICK","itemId":"editor"},"events":{"expand":"app.QUERY_CODE_NAME.setValue('');\nif(app.LEDGER_XWL.LEDGER_ID.getValue() !== null&&app.LEDGER_XWL.LEDGER_ID.getValue()!==''){\n\tapp.pickComp.getStore().load({params:{\n\t\tLEDGER_ID:app.LEDGER_XWL.LEDGER_ID.getValue()\n\t}});\n}"},"children":[{"configs":{"tagConfigs":"minWidth:400","itemId":"pickComp"},"events":{"itemdblclick":"\nvar r=app.grid1.getSelectionModel().getSelection()[0];\nr.set('AR_ACC_ID_INV',record.data.ACC_ID);\nr.set('AR_ACC_ID_INV_NAME',record.data.ACC_NAME);\nr.dirty = true;\napp.AR_ACC_ID_INV_NAME_PICK.setValue(record.data.ACC_NAME);\nvar picker = this.ownerCmp;\npicker.collapse();"},"children":[{"configs":{"pageSize":"5","autoLoad":"true","itemId":"store","url":"m?xwl=xc/ar/ld/saleAcc/DB/XC_BG_LD_ACCOUNTS_SELECT_LD"},"events":{"beforeload":"operation.params = Wb.getValue([app.form1,app.tbar]);"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"hidden":"true","dataIndex":"ACC_ID","itemId":"ACC_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"科目编码","dataIndex":"ACC_CODE","itemId":"ACC_CODE_COL","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"科目名称","dataIndex":"ACC_NAME","itemId":"ACC_NAME_COL","flex":"1"},"children":[],"expanded":false,"type":"column"}],"expanded":false,"type":"array"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"labelWidth":"100","labelAlign":"right","itemId":"QUERY_CODE_NAME","fieldLabel":"{#QUERY_CODE_NAME#}"},"events":{"specialkey":"if(Ext.EventObject.getKey()==13){\n\tapp.pickComp.getStore().load();\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"itemId":"cancelBtn","iconCls":"delete_icon"},"events":{"click":"var rec = app.grid1.getSelection()[0];\n\nrec.set('AR_ACC_ID_INV','');\nrec.set('AR_ACC_ID_INV_NAME','');\napp.QUERY_CODE_NAME.setValue('');\n\napp.AR_ACC_ID_INV_NAME_PICK.setValue('');\nrec.dirty = true;\n\napp.pickComp.hide();\n\n\n"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"picker"}],"expanded":true,"type":"column"},{"configs":{"text":"{#AR_ACC_ID_DEBT_COL#}","hidden":"true","width":"150","dataIndex":"AP_ACC_ID_DEBT","titleAlign":"center","itemId":"AR_ACC_ID_DEBT_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#AR_ACC_ID_DEBT_COL#}","hidden":"true","width":"150","dataIndex":"AR_ACC_ID_DEBT_NAME","titleAlign":"center","itemId":"AR_ACC_ID_DEBT_NAME_COL"},"children":[{"configs":{"labelWidth":"100","labelAlign":"right","normalName":"AR_ACC_ID_DEBT_NAME_PICK","itemId":"editor"},"children":[{"configs":{"tagConfigs":"minWidth:400","itemId":"pickComp"},"events":{"itemdblclick":"var r=app.grid1.getSelectionModel().getSelection()[0];\nr.set('AR_ACC_ID_DEBT',record.data.ACC_ID);\nr.set('AR_ACC_ID_DEBT_NAME',record.data.ACC_NAME);\nr.dirty = true;\napp.AR_ACC_ID_DEBT_NAME_PICK.setValue(record.data.ACC_NAME);\nvar picker = this.ownerCmp;\npicker.collapse();"},"children":[{"configs":{"pageSize":"5","autoLoad":"true","itemId":"store","url":"m?xwl=xc/ar/ld/saleAcc/DB/XC_BG_LD_ACCOUNTS_SELECT_LD"},"events":{"beforeload":"operation.params = Wb.getValue([app.form1,app.tbar]);"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"hidden":"true","dataIndex":"ACC_ID","itemId":"ACC_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"科目编码","dataIndex":"ACC_CODE","itemId":"ACC_CODE_COL","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"科目名称","dataIndex":"ACC_NAME","itemId":"ACC_NAME_COL","flex":"1"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"labelWidth":"100","labelAlign":"right","itemId":"QUERY_CODE_NAME","fieldLabel":"{#QUERY_CODE_NAME#}"},"events":{"specialkey":"if(Ext.EventObject.getKey()==13){\n\tapp.pickComp.getStore().load();\n}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"toolbar"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"picker"}],"expanded":false,"type":"column"},{"configs":{"text":"预收科目","hidden":"true","width":"150","dataIndex":"AR_ACC_ID_PRE","titleAlign":"center","itemId":"AR_ACC_ID_PRE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#AR_ACC_ID_PRE_NAME_COL#}","hidden":"true","width":"150","dataIndex":"AR_ACC_ID_PRE_NAME","titleAlign":"center","itemId":"AR_ACC_ID_PRE_NAME_COL"},"children":[{"configs":{"labelWidth":"100","labelAlign":"right","normalName":"AR_ACC_ID_PRE_NAME_PICK","itemId":"editor"},"children":[{"configs":{"tagConfigs":"minWidth:400","itemId":"pickComp"},"events":{"itemdblclick":"var r=app.grid1.getSelectionModel().getSelection()[0];\nr.set('AR_ACC_ID_PRE',record.data.ACC_ID);\nr.set('AR_ACC_ID_PRE_NAME',record.data.ACC_NAME);\nr.dirty = true;\napp.AR_ACC_ID_PRE_NAME_PICK.setValue(record.data.ACC_NAME);\nvar picker = this.ownerCmp;\npicker.collapse();"},"children":[{"configs":{"pageSize":"5","autoLoad":"true","itemId":"store","url":"m?xwl=xc/ar/ld/saleAcc/DB/XC_BG_LD_ACCOUNTS_SELECT_LD"},"events":{"beforeload":"operation.params = Wb.getValue([app.form1,app.tbar]);"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"hidden":"true","dataIndex":"ACC_ID","itemId":"ACC_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"科目编码","dataIndex":"ACC_CODE","itemId":"ACC_CODE_COL","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"科目名称","dataIndex":"ACC_NAME","itemId":"ACC_NAME_COL","flex":"1"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"labelWidth":"100","labelAlign":"right","itemId":"QUERY_CODE_NAME","fieldLabel":"{#QUERY_CODE_NAME#}"},"events":{"specialkey":"if(Ext.EventObject.getKey()==13){\n\tapp.pickComp.getStore().load();\n}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"toolbar"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"picker"}],"expanded":false,"type":"column"},{"configs":{"text":"{#AR_ACC_ID_TAX_COL#}","hidden":"true","width":"150","dataIndex":"AR_ACC_ID_TAX","titleAlign":"center","itemId":"AR_ACC_ID_TAX_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#AR_ACC_ID_TAX_COL#}","hidden":"true","width":"150","dataIndex":"AR_ACC_ID_TAX_NAME","titleAlign":"center","itemId":"AR_ACC_ID_TAX_NAME_COL"},"children":[{"configs":{"labelWidth":"100","labelAlign":"right","normalName":"AR_ACC_ID_TAX_NAME_PICK","itemId":"editor"},"children":[{"configs":{"tagConfigs":"minWidth:400","itemId":"pickComp"},"events":{"itemdblclick":"var r=app.grid1.getSelectionModel().getSelection()[0];\nr.set('AR_ACC_ID_TAX',record.data.ACC_ID);\nr.set('AR_ACC_ID_TAX_NAME',record.data.ACC_NAME);\nr.dirty = true;\napp.AR_ACC_ID_TAX_NAME_PICK.setValue(record.data.ACC_NAME);\nvar picker = this.ownerCmp;\npicker.collapse();"},"children":[{"configs":{"pageSize":"5","autoLoad":"true","itemId":"store","url":"m?xwl=xc/ar/ld/saleAcc/DB/XC_BG_LD_ACCOUNTS_SELECT_LD"},"events":{"beforeload":"operation.params = Wb.getValue([app.form1,app.tbar]);"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"hidden":"true","dataIndex":"ACC_ID","itemId":"ACC_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"科目编码","dataIndex":"ACC_CODE","itemId":"ACC_CODE_COL","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"科目名称","dataIndex":"ACC_NAME","itemId":"ACC_NAME_COL","flex":"1"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"labelWidth":"100","labelAlign":"right","itemId":"QUERY_CODE_NAME","fieldLabel":"{#QUERY_CODE_NAME#}"},"events":{"specialkey":"if(Ext.EventObject.getKey()==13){\n\tapp.pickComp.getStore().load();\n}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"toolbar"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"picker"}],"expanded":false,"type":"column"},{"configs":{"text":"{#PRODUCT_ID#}","hidden":"true","dataIndex":"PRODUCT_ID","titleAlign":"center","itemId":"PRODUCT_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#PRODUCT_NAME#}","width":"150","dataIndex":"PRODUCT_NAME","titleAlign":"center","itemId":"PRODUCT_NAME_COL"},"children":[{"configs":{"labelWidth":"80","labelAlign":"right","normalName":"PRODUCT_NAME_PICK","itemId":"editor"},"events":{"expand":"app.pickComp.getStore().load();"},"children":[{"configs":{"tagConfigs":"minWidth:400","height":"300","barExportButtons":"false","barExportAllButtons":"false","itemId":"pickComp"},"events":{"itemdblclick":"var r=app.grid1.getSelectionModel().getSelection()[0];\nr.set('PRODUCT_ID',record.data.PRODUCT_ID);\nr.set('PRODUCT_NAME',record.data.PRODUCT_NAME);\napp.PRODUCT_NAME_PICK.setValue(record.data.PRODUCT_NAME);\nvar picker = this.ownerCmp;\npicker.collapse();"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xc/ar/inv/DB/selectProductInfo"},"events":{"beforeload":"operation.params = Wb.getValue([app.form1,app.tbar]);"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"ID","hidden":"true","dataIndex":"PRODUCT_ID","itemId":"PRODUCT_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#PRODUCT_CODE_COL#}","dataIndex":"PRODUCT_CODE","itemId":"PRODUCT_CODE_COL","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#PRODUCT_NAME_COL#}","dataIndex":"PRODUCT_NAME","itemId":"PRODUCT_NAME_COL","flex":"1"},"children":[],"expanded":false,"type":"column"}],"expanded":false,"type":"array"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"labelWidth":"100","emptyText":"{#QUERY_CODE_NAME#}","labelAlign":"right","itemId":"QUERY_CODE_NAME"},"events":{"specialkey":"if(Ext.EventObject.getKey()==13){\n\tapp.pickComp.getStore().load();\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"itemId":"searchButton","iconCls":"seek_icon"},"events":{"click":"app.pickComp.getStore().load();"},"children":[],"expanded":false,"type":"button"},{"configs":{"itemId":"cancelBtn","iconCls":"delete_icon"},"events":{"click":"var r=app.grid1.getSelectionModel().getSelection()[0];\nr.set('PRODUCT_ID',null);\nr.set('PRODUCT_NAME',null);\napp.PRODUCT_NAME_PICK.setValue(null);\napp.PRODUCT_NAME_PICK.getPicker().hide();"},"children":[],"expanded":true,"type":"item"}],"expanded":true,"type":"toolbar"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"picker"}],"expanded":false,"type":"column"},{"configs":{"text":"{#DESCRIPTION_COL#}","width":"200","dataIndex":"DESCRIPTION","titleAlign":"center","itemId":"DESCRIPTION_COL"},"children":[{"configs":{"itemId":"editor"},"children":[],"expanded":false,"type":"text"}],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}