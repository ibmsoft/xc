{"inframe":false,"title":"客户信息","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"com.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/ar/base/customer_mange/XC_AR_CUSTOMERS\");","itemId":"module"},"events":{"finalize":"function returnRowFn(r,sorttype,type){\n\n  if(type==='xc_ap_sort'){\n  }\n}"},"children":[{"configs":{"itemId":"request"},"children":[{"configs":{"autoLoad":"true","itemId":"ldInitStore","url":"m?xwl=xc/ar/base/customer_type/data/selectType"},"events":{"load":"Wb.sort1Code= store.getAt(0).get('CSTM_TYPE_CODE');\nWb.sort1Name = store.getAt(0).get('CSTM_TYPE_NAME');\nWb.sort1Use = store.getAt(0).get('IS_USE');\n\nWb.sort2Code =  store.getAt(1).get('CSTM_TYPE_CODE');\nWb.sort2Name = store.getAt(1).get('CSTM_TYPE_NAME');\nWb.sort2Use = store.getAt(1).get('IS_USE');\n\nWb.sort3Code =  store.getAt(2).get('CSTM_TYPE_CODE');\nWb.sort3Name = store.getAt(2).get('CSTM_TYPE_NAME');\nWb.sort3Use = store.getAt(2).get('IS_USE');\n\nWb.colname = 'Y';\nvar array =app.Grid.columns;\nif(Wb.sort1Use!=1){\n  array[5].hide();\n}else{\n   array[5].show();\n}\nif(Wb.sort2Use!=1){\n  array[7].hide();\n}else{\n   array[7].show();\n}\nif(Wb.sort3Use!=1){\n  array[9].hide();\n}else{\n   array[9].show();\n}\n\n\narray[5].setText(Wb.sort1Name);\narray[7].setText(Wb.sort2Name);\narray[9].setText(Wb.sort3Name);\n\n\n\n\n\n"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"folder"},{"configs":{"region":"north","itemId":"customtbar"},"children":[{"configs":{"text":"-","itemId":"item1"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#saveBtn#}","itemId":"savenewBtn","iconCls":"ok_icon"},"events":{"click":"if(app.form1.getForm().isValid()===false){\n\n  Wb.warn('{#MSG1#}');\n  return;\n}\n\n\n\n\n\nvar MOBILE = app.MOBILE.getValue();\nvar phonePatrn= /^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/;\nif(!Ext.isEmpty(MOBILE)){\n  if(!phonePatrn.test(MOBILE)){\n    Wb.warn('{#MSG2#}');\n    return;\n  }\n}\n\nvar TEL = app.TEL.getValue();\nvar telPatrn=/^[+]{0,1}(\\d){1,3}[ ]?([-]?((\\d)|[ ]){1,12})+$/;\nif(!Ext.isEmpty(TEL)){\n  if(!telPatrn.test(TEL)){\n    Wb.warn('{#MSG3#}');\n    return;\n  }\n}\n\nvar EMAIL = app.EMAIL.getValue();\n\nvar emailPatrn= /^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/;\nif(!Ext.isEmpty(EMAIL)){\n  if(!emailPatrn.test(EMAIL)){\n    Wb.warn('{#MSG4#}');\n    return;\n  }\n}\n\n  var START_DATE=app.START_DATE.getValue();\n\n  var END_DATE=app.END_DATE.getValue();\nif(START_DATE>END_DATE){\n    Wb.warn('{#MSG5#}');\n    return;\n}\n\n//执行保存处理\nvar json = Wb.getValue(app.form1);\n\nvar sort1 = app.newSortxwl1.CSTM_SORT_CODE.getValue();\nvar sort2 = app.newSortxwl2.CSTM_SORT_CODE.getValue();\nvar sort3 = app.newSortxwl3.CSTM_SORT_CODE.getValue();\njson.SORT1 = sort1;\njson.SORT2 = sort2;\njson.SORT3= sort3;\n/**var json = {\n  VENDOR_ID:app.VENDOR_ID.getValue(),\n  VENDOR_CODE:app.VENDOR_CODE.getValue(),\n  VENDOR_NAME:app.VENDOR_NAME.getValue(),\n  TAX_NO:app.TAX_NO.getValue(),\n  ADDRESS:app.ADDRESS.getValue(),\n  VENDOR_TYPE:app.VENDOR_TYPE.getValue(),\n  CONTACT:app.CONTACT.getValue(),\n  TEL:app.TEL.getValue(),\n  MOBILE:app.MOBILE.getValue(),\n  QQ:app.QQ.getValue(),\n  WECHAT:app.WECHAT.getValue(),\n  EMAIL:app.EMAIL.getValue(), \n  CUSTOMER_ID:app.CUSTOMER_ID.getValue(), \n  START_DATE:app.START_DATE.getValue(), \n  END_DATE:app.END_DATE.getValue()\n};***/\n\nif(Wb.winState==\"add\"){\n  Wb.request({\n    url: 'm?xwl=xc/ar/base/customer_mange/data/insert', \n    params: json,\n    success: function() {\n\n       Wb.toast('{#SAVETIP#}');\n      var C_ID=app.CUSTOMER_ID.getValue();\n       app.xwl1.CUSTOMER_ID.setValue(C_ID); //设置ID\n       // app.addEditeWin.close();\t\n       // app.Grid.store.load();\n\t\tWb.winState = 'edite';\n\n    }\n  });\n}else{\n  Wb.request({\n    url: 'm?xwl=xc/ar/base/customer_mange/data/update', \n    params: json,\n    success: function() {\n\n      Wb.toast('{#SAVETIP#}');\n   //   app.addEditeWin.close();\t\n    //  app.Grid.store.load();\n\n\n    }\n  });\n\n}\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item11"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"},{"configs":{"title":"批量修改","height":"300","layout":"border","width":"500","closeAction":"hide","buttonAlign":"center","dialog":"false","itemId":"moerEditeWin","modal":"true"},"children":[{"configs":{"itemId":"buttons"},"children":[{"configs":{"text":"{#saveBtn#}","itemId":"saveBtn","iconCls":"ok_icon"},"events":{"click":"//var typeChange = app.typeChk.getValue();\n\nvar  sort1Change= app.sort1Chk.getValue();\nvar  sort2Change= app.sort2Chk.getValue();\nvar  sort3Change= app.sort3Chk.getValue();\n\n\n\nvar startChange = app.startChk.getValue();\n\nvar endChange = app.endChk.getValue();\n\nvar sort1Val = app.sortxwl1.CSTM_SORT_CODE.getValue(); \nvar sort2Val = app.sortxwl2.CSTM_SORT_CODE.getValue(); \nvar sort3Val = app.sortxwl3.CSTM_SORT_CODE.getValue(); \n\nvar startVal = app.startdate.getRawValue();\nvar endVal = app.enddate.getRawValue();\n\n\n if(sort1Change==false&&sort2Change==false&&sort3Change==false&&startChange==false&&endChange==false){\n \n     Wb.toast('{#MSG8#}');\n    return;\n}\n\n  \nif(startChange){\n  if(startVal==\"\"||startVal==null){\n      Wb.toast('{#MSG7#}');\n   \n    return;\n  }\n}\nif(endChange){\n  if(Ext.isEmpty(endVal)){\n   \n      Wb.toast('{#MSG6#}');\n    return;\n  }\n}\n\nif(startChange||endChange){\n  if(endVal<startVal){\n     Wb.toast('{#MSG5#}');\n     return;\n  }\n}\n  var rows=app.Grid.getSelectionModel().getSelection();\n  var idList = \"\" ;\n  Ext.each(rows,function(r){\n    var id = \"'\" + r.data.CUSTOMER_ID + \"'\";\n    if(idList === \"\"){\n      idList = id ;\n    }else{\n      idList = idList+\",\"+id ;\n    }\n  });\n // var json = {'ids' : idList} ;\n\n\n\nvar sql = \"UPDATE \"+\n   \" xc_ar_customers  \"+\n \"SET \";\n\n\n\nvar json = {};\nif(sort1Change){\n  sql+=\"  SORT1 ='\"+sort1Val+\"',\";\n  json.SORT1 = sort1Val;\n \n}\n\nif(sort2Change){\n  sql+=\"  SORT2 ='\"+sort2Val+\"',\";\n  json.SORT2 = sort2Val;\n \n}\n\nif(sort3Change){\n  sql+=\"  SORT3 ='\"+sort3Val+\"',\";\n  json.SORT3 = sort3Val;\n \n}\n\nif(startChange){\n   sql+=\"  START_DATE ='\"+startVal+\"',\";\n  json.START_DATE = startVal;\n   //json+=\" START_DATE:\"+startVal+\",\";\n  \n}\nif(endChange){\n  json.END_DATE = endVal;\n   \n   //json+=\" END_DATE:\"+endVal+\",\";\n   sql+=\"  END_DATE =' \"+endVal+\"',\";\n}\nsql+=\" LAST_UPDATE_DATE = {?timestamp.sys.date?},\"+\n  \"LAST_UPDATED_BY =   {?XIP.userId?}  where CUSTOMER_ID in(\"+idList+\")\";\n\n  Wb.request({\n           url: 'm?xwl=xc/ar/base/customer_mange/data/moreEdtie', \n           params:{sql: sql},\n           success: function() {\n            \n                Wb.toast('保存成功。');\n                app.Grid.store.load();\n                app.moerEditeWin.close();\n         \n             \n          }\n       });\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#cancelBtn#}","itemId":"closeBtn","iconCls":"cancel_icon"},"events":{"click":"app.moerEditeWin.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"array"},{"configs":{"region":"center","layout":"form","itemId":"panel1"},"children":[{"configs":{"frame":"false","style":"border-width:0px;padding-top:10px;padding-left:20px","layout":"column","border":"false","itemId":"panel2"},"children":[{"configs":{"style":"padding-left:20px","width":"80","labelAlign":"right","itemId":"sort1Chk"},"events":{"change":"if(newValue===true){\n\n\n   app.sortxwl1.CSTM_SORT_NAME.setReadOnly(false); \n}else{\n   app.sortxwl1.CSTM_SORT_NAME.setReadOnly(true); \n  \n}"},"children":[],"expanded":false,"type":"check"},{"configs":{"file":"m?xwl=xc/ar/base/customer_mange/sortPicker","itemId":"sortxwl1"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px;padding-top:10px;padding-left:20px","layout":"column","border":"false","itemId":"panel22"},"children":[{"configs":{"style":"padding-left:20px","width":"80","labelAlign":"right","itemId":"sort2Chk"},"events":{"change":"if(newValue===true){\n\n\n   app.sortxwl2.CSTM_SORT_NAME.setReadOnly(false); \n}else{\n   app.sortxwl2.CSTM_SORT_NAME.setReadOnly(true); \n  \n}"},"children":[],"expanded":false,"type":"check"},{"configs":{"file":"m?xwl=xc/ar/base/customer_mange/sortPicker","itemId":"sortxwl2"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px;padding-top:10px;padding-left:20px","layout":"column","border":"false","itemId":"panel23"},"children":[{"configs":{"style":"padding-left:20px","width":"80","labelAlign":"right","itemId":"sort3Chk"},"events":{"change":"if(newValue===true){\n\n\n   app.sortxwl3.CSTM_SORT_NAME.setReadOnly(false); \n}else{\n   app.sortxwl3.CSTM_SORT_NAME.setReadOnly(true); \n  \n}"},"children":[],"expanded":false,"type":"check"},{"configs":{"file":"m?xwl=xc/ar/base/customer_mange/sortPicker","itemId":"sortxwl3"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px;padding-top:10px;padding-left:20px","layout":"column","border":"false","itemId":"panel21"},"children":[{"configs":{"style":"padding-left:20px","width":"80","labelAlign":"right","itemId":"startChk","boxLabel":"{#START_DATE1#}&nbsp"},"events":{"change":"if(newValue===true){\n\n  app.startdate.setReadOnly(false);\n}else{\n  \n   app.startdate.setReadOnly(true);\n}"},"children":[],"expanded":false,"type":"check"},{"configs":{"readOnly":"true","width":"300","format":"Y-m-d","itemId":"startdate"},"children":[],"expanded":false,"type":"date"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px;padding-top:10px;padding-left:20px","layout":"column","border":"false","itemId":"panel211"},"children":[{"configs":{"style":"padding-left:20px","width":"80","labelAlign":"right","itemId":"endChk","boxLabel":"{#END_DATE1#}&nbsp"},"events":{"change":"if(newValue===true){\n\n  app.enddate.setReadOnly(false);\n}else{\n  \n   app.enddate.setReadOnly(true);\n}"},"children":[],"expanded":false,"type":"check"},{"configs":{"readOnly":"true","width":"300","format":"Y-m-d","itemId":"enddate"},"children":[],"expanded":false,"type":"date"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"window"},{"configs":{"maximized":"true","height":"550","width":"600","layout":"border","closeAction":"hide","buttonAlign":"center","border":"false","dialog":"false","itemId":"addEditeWin","modal":"true","maximizable":"false"},"events":{"close":"   app.Grid.store.reload();"},"children":[{"configs":{"region":"center","itemId":"tab1"},"children":[{"configs":{"tbar":"app.customtbar","title":"{#BASE#}","layout":"border","itemId":"basePanel"},"children":[{"configs":{"region":"center","frame":"false","border":"false","bodyPadding":"0 0 0 0","itemId":"form1"},"children":[{"configs":{"frame":"false","layout":"column","border":"false","itemId":"tr_1"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".45","border":"false","itemId":"td_1"},"children":[{"configs":{"labelWidth":"100","allowBlank":"false","labelAlign":"right","itemId":"CUSTOMER_CODE","fieldLabel":"<font color='red'>*<\/font>{#CODE_COL#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".45","border":"false","itemId":"td_2"},"children":[{"configs":{"labelWidth":"100","allowBlank":"false","labelAlign":"right","itemId":"CUSTOMER_NAME","fieldLabel":"<font color='red'>*<\/font>{#NAME_COL#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"padding-top:10px","layout":"column","border":"false","itemId":"tr_2"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".45","border":"false","itemId":"td_1"},"children":[{"configs":{"file":"m?xwl=xc/ar/base/customer_mange/sortPicker","itemId":"newSortxwl1"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".45","border":"false","itemId":"td_2"},"children":[{"configs":{"file":"m?xwl=xc/ar/base/customer_mange/sortPicker","itemId":"newSortxwl2"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"padding-top:10px","layout":"column","border":"false","itemId":"tr_21"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".45","border":"false","itemId":"td_1"},"children":[{"configs":{"file":"m?xwl=xc/ar/base/customer_mange/sortPicker","itemId":"newSortxwl3"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".45","border":"false","itemId":"td_2"},"children":[{"configs":{"labelWidth":"100","width":"300","labelAlign":"right","itemId":"TAX_NO","fieldLabel":"{#TAX_NO1#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"padding-top:10px","layout":"column","border":"false","itemId":"tr_3"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".45","border":"false","itemId":"td_1"},"children":[{"configs":{"labelWidth":"100","width":"300","labelAlign":"right","itemId":"ADDRESS","fieldLabel":"{#ADDRESS1#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".45","border":"false","itemId":"td_2"},"children":[{"configs":{"labelWidth":"100","width":"300","labelAlign":"right","itemId":"CONTACT","fieldLabel":"{#CONTACT1#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"padding-top:10px","layout":"column","border":"false","itemId":"tr_4"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".45","border":"false","itemId":"td_1"},"children":[{"configs":{"labelWidth":"100","width":"300","labelAlign":"right","itemId":"TEL","fieldLabel":"{#TEL1#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".45","border":"false","itemId":"td_2"},"children":[{"configs":{"labelWidth":"100","width":"300","labelAlign":"right","itemId":"MOBILE","fieldLabel":"{#MOBILE1#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"padding-top:10px","layout":"column","border":"false","itemId":"tr_5"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".45","border":"false","itemId":"td_1"},"children":[{"configs":{"labelWidth":"100","width":"300","labelAlign":"right","itemId":"QQ","fieldLabel":"{#QQ1#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".45","border":"false","itemId":"td_2"},"children":[{"configs":{"labelWidth":"100","width":"300","labelAlign":"right","itemId":"EMAIL","fieldLabel":"{#EMAIL1#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"padding-top:10px","layout":"column","border":"false","itemId":"tr_61"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".45","border":"false","itemId":"td_1"},"children":[{"configs":{"labelWidth":"100","width":"300","labelAlign":"right","itemId":"WECHAT","fieldLabel":"{#WECHAT1#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".45","border":"false","itemId":"td_2"},"children":[{"configs":{"file":"m?xwl=xc/ar/base/customer_mange/vendorPicker","itemId":"vendorxwl"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"padding-top:10px","layout":"column","border":"false","itemId":"tr_6"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".45","border":"false","itemId":"td_1"},"children":[{"configs":{"labelWidth":"100","allowBlank":"false","width":"300","format":"Y-m-d","labelAlign":"right","itemId":"START_DATE","fieldLabel":"<font color='red'>*<\/font>{#START_DATE1#}"},"children":[],"expanded":false,"type":"date"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".45","border":"false","itemId":"td_2"},"children":[{"configs":{"labelWidth":"100","allowBlank":"false","format":"Y-m-d","labelAlign":"right","itemId":"END_DATE","fieldLabel":"<font color='red'>*<\/font>{#END_DATE1#}"},"children":[],"expanded":false,"type":"date"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","hidden":"true","layout":"column","border":"false","itemId":"tr_8"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".4","border":"false","itemId":"td_1"},"children":[{"configs":{"labelWidth":"100","labelAlign":"right","itemId":"CUSTOMER_ID","fieldLabel":"ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"value":"add","itemId":"opType","fieldLabel":"操作类型"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"panel"}],"expanded":true,"type":"form"}],"expanded":true,"type":"panel"},{"configs":{"file":"m?xwl=xc/ar/base/vBanks/XC_AR_CSTM_BANKS","itemId":"xwl1"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"tab"}],"expanded":false,"type":"window"},{"configs":{"layout":"border","itemId":"viewport1"},"children":[{"configs":{"region":"north","frame":"true","height":"40","style":"border-width:0px;padding-top:10px","layout":"column","itemId":"queryForm"},"children":[{"configs":{"labelWidth":"100","labelAlign":"right","itemId":"codeName","fieldLabel":"{#CODE_NAME#}"},"events":{"specialkey":"app.Grid.store.load( {  params:{codeName:app.codeName.getValue()}} );"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#queryBtn#}","itemId":"queryBtn","iconCls":"seek_icon","x":"10"},"events":{"click":"app.Grid.store.load( {  params:{codeName:app.codeName.getValue()}} );"},"children":[],"expanded":true,"type":"button"},{"configs":{"text":"{#resetBtn#}","itemId":"resetBtn","iconCls":"refresh_icon","x":"20"},"events":{"click":"app.queryForm.getForm().reset();\napp.Grid.store.load();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"form"},{"configs":{"region":"center","selType":"checkboxmodel","border":"true","itemId":"Grid"},"events":{"itemdblclick":"app.editBtn.fireEvent('click');\n\n/**\nvar rows = app.Grid.getSelection();\nif (rows.length != 1) {\n  Wb.toast('请选择一条数据!');\n\n  return;\n} else {\n   var record = rows[0];\n  Wb.winState=\"edite\";\n   var vid = rows[0].data.CUSTOMER_ID; \n\n\n\n  \n  Wb.reset(app.addEditeWin);\n  app.tab1.setActiveTab(app.basePanel);\n  app.newSortxwl1.CSTM_SORT_NAME.fieldLabel=Wb.sort1Name;\n  app.newSortxwl2.CSTM_SORT_NAME.fieldLabel=Wb.sort2Name;\n\n  app.newSortxwl3.CSTM_SORT_NAME.fieldLabel=Wb.sort3Name;\n  app.newSortxwl1.CSTM_TYPE_CODE.setValue(Wb.sort1Code);\n  app.newSortxwl2.CSTM_TYPE_CODE.setValue(Wb.sort2Code);\n  app.newSortxwl3.CSTM_TYPE_CODE.setValue(Wb.sort3Code);\n\n\n  app.newSortxwl1.type='sort1';\n  app.newSortxwl2.type='sort2';\n  app.newSortxwl3.type='sort3';\n   app.customtbar.show();\n  app.xwl1.tbar.show();\n  \n    app.addEditeWin.show();\n\n \n  app.addEditeWin.setTitle(\"修改\");\n  app.xwl1.grid.store.load({params:{CUSTOMER_ID:vid}} );\n app.CUSTOMER_ID.setValue( vid); //设置ID\n  app.xwl1.CUSTOMER_ID.setValue(vid); //设置ID\n  app.xwl1.optype.setValue('edit'); \n  app.opType.setValue('edit') ;\n  \n  \n    app.CUSTOMER_CODE.setReadOnly(true);\n  app.CUSTOMER_CODE.setValue(record.data.CUSTOMER_CODE);\n\n   app.CUSTOMER_NAME.setValue(record.data.CUSTOMER_NAME);\n  \n   app.newSortxwl1.CSTM_SORT_NAME.setValue(record.data.SORT1_NAME);\n   app.newSortxwl1.CSTM_SORT_CODE.setValue(record.data.SORT1);\n  \n app.newSortxwl2.CSTM_SORT_NAME.setValue(record.data.SORT2_NAME);\n   app.newSortxwl2.CSTM_SORT_CODE.setValue(record.data.SORT2);\n  \n   app.newSortxwl3.CSTM_SORT_NAME.setValue(record.data.SORT3_NAME);\n   app.newSortxwl3.CSTM_SORT_CODE.setValue(record.data.SORT3);\n  \n   app.TAX_NO.setValue(record.data.TAX_NO);\n   app.ADDRESS.setValue(record.data.ADDRESS);\n   app.CONTACT.setValue(record.data.CONTACT);\n  app.TEL.setValue(record.data.TEL);\n   app.MOBILE.setValue(record.data.MOBILE);\n   app.QQ.setValue(record.data.QQ);\n   app.WECHAT.setValue(record.data.WECHAT);\n   app.EMAIL.setValue(record.data.EMAIL);\n    app.vendorxwl.VENDOR_ID.setValue(record.data.VENDOR_ID);\n    app.vendorxwl.VENDOR_NAME.setValue(record.data.VENDOR_NAME);\n    app.START_DATE.setValue(record.data.START_DATE);\n    app.END_DATE.setValue(record.data.END_DATE);\n\n\n\n  \n\n\n\n\n\n}**/\n"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xc/ar/base/customer_mange/data/selectCodeName"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"-","itemId":"item1"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#addBtn#}","itemId":"addBtn","iconCls":"new_icon"},"events":{"click":"\n\n Wb.reset(app.addEditeWin);\n  Wb.winState = 'add';\napp.tab1.setActiveTab(app.basePanel);\nvar uid = Xip.getId();\napp.CUSTOMER_ID.setValue(uid); //设置ID\napp.xwl1.CUSTOMER_ID.setValue(uid); //设置ID\napp.addEditeWin.setTitle('{#addBtn#}');\napp.CUSTOMER_CODE.setReadOnly(false);\n\n  app.newSortxwl1.CSTM_TYPE_CODE.setValue(Wb.sort1Code);\n  app.newSortxwl2.CSTM_TYPE_CODE.setValue(Wb.sort2Code);\n  app.newSortxwl3.CSTM_TYPE_CODE.setValue(Wb.sort3Code);\n\n\n \n  app.newSortxwl1.type='sort1';\n  app.newSortxwl2.type='sort2';\n  app.newSortxwl3.type='sort3';\n \nvar myDate = new  Date();\n\nvar time = Ext.Date.parseDate(\"2099-12-31\", \"Y-m-d\"); \nvar mytime=Ext.Date.format(myDate, \"Y-m-d\"); \nvar curdtate = Ext.Date.parseDate(mytime, \"Y-m-d\"); \n\napp.START_DATE.setValue(curdtate); \napp.END_DATE.setValue(time); \n\n\n   app.customtbar.show();\n   app.xwl1.tbar.show();\n\n   app.newSortxwl1.CSTM_SORT_NAME.fieldLabel=Wb.sort1Name;\n app.newSortxwl2.CSTM_SORT_NAME.fieldLabel=Wb.sort2Name;\n \n app.newSortxwl3.CSTM_SORT_NAME.fieldLabel=Wb.sort3Name;\n\n\napp.addEditeWin.show();\n\nif(Wb.sort1Use!=1){\n \n   app.newSortxwl1.CSTM_SORT_NAME.setReadOnly(true);\n }else{\n    app.newSortxwl1.CSTM_SORT_NAME.setReadOnly(false);\n }\n \n  if(Wb.sort2Use!=1){\n \n   app.newSortxwl2.CSTM_SORT_NAME.setReadOnly(true);\n }else{\n    app.newSortxwl2.CSTM_SORT_NAME.setReadOnly(false);\n }\n if(Wb.sort3Use!=1){\n \n   app.newSortxwl3.CSTM_SORT_NAME.setReadOnly(true);\n }else{\n    app.newSortxwl3.CSTM_SORT_NAME.setReadOnly(false);\n }\n\n app.xwl1.grid.store.removeAll();\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item11"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#editBtn#}","itemId":"editBtn","iconCls":"table_edit_icon"},"events":{"click":"var rows = app.Grid.getSelection();\nif (rows.length != 1) {\n  Wb.toast('请选择一条数据!');\n\n  return;\n} else {\n  var record = rows[0];\n  Wb.winState=\"edite\";\n  var vid = rows[0].data.CUSTOMER_ID; \n \n\n\n\n  Wb.reset(app.addEditeWin);\n  app.tab1.setActiveTab(app.basePanel);\n  app.newSortxwl1.CSTM_SORT_NAME.fieldLabel=Wb.sort1Name;\n  app.newSortxwl2.CSTM_SORT_NAME.fieldLabel=Wb.sort2Name;\n\n  app.newSortxwl3.CSTM_SORT_NAME.fieldLabel=Wb.sort3Name;\n  app.newSortxwl1.CSTM_TYPE_CODE.setValue(Wb.sort1Code);\n  app.newSortxwl2.CSTM_TYPE_CODE.setValue(Wb.sort2Code);\n  app.newSortxwl3.CSTM_TYPE_CODE.setValue(Wb.sort3Code);\n\n\n  app.newSortxwl1.type='sort1';\n  app.newSortxwl2.type='sort2';\n  app.newSortxwl3.type='sort3';\n\n\n\n\n  app.customtbar.show();\n  app.xwl1.tbar.show();\n\n  app.addEditeWin.show();\n\n\n\n\n\n  app.addEditeWin.setTitle('{#editBtn#}');\n  app.xwl1.grid.store.load({params:{CUSTOMER_ID:vid}} );\n  app.CUSTOMER_ID.setValue( vid); //设置ID\n  app.xwl1.CUSTOMER_ID.setValue(vid); //设置ID\n  app.xwl1.optype.setValue('edit'); \n  app.opType.setValue('edit') ;\n\n\n  app.CUSTOMER_CODE.setReadOnly(true);\n  app.CUSTOMER_CODE.setValue(record.data.CUSTOMER_CODE);\n\n  app.CUSTOMER_NAME.setValue(record.data.CUSTOMER_NAME);\n\n  app.newSortxwl1.CSTM_SORT_NAME.setValue(record.data.SORT1_NAME);\n  app.newSortxwl1.CSTM_SORT_CODE.setValue(record.data.SORT1);\n\n  app.newSortxwl2.CSTM_SORT_NAME.setValue(record.data.SORT2_NAME);\n  app.newSortxwl2.CSTM_SORT_CODE.setValue(record.data.SORT2);\n\n  app.newSortxwl3.CSTM_SORT_NAME.setValue(record.data.SORT3_NAME);\n  app.newSortxwl3.CSTM_SORT_CODE.setValue(record.data.SORT3);\n\n  \n\n  if(Wb.sort1Use!=1){\n\n    app.newSortxwl1.CSTM_SORT_NAME.setReadOnly(true);\n  }else{\n  app.newSortxwl1.CSTM_SORT_NAME.setReadOnly(false);\n       }\n\n  if(Wb.sort2Use!=1){\n\n    app.newSortxwl2.CSTM_SORT_NAME.setReadOnly(true);\n  }else{\n    app.newSortxwl2.CSTM_SORT_NAME.setReadOnly(false);\n  }\n  if(Wb.sort3Use!=1){\n\n    app.newSortxwl3.CSTM_SORT_NAME.setReadOnly(true);\n  }else{\n    app.newSortxwl3.CSTM_SORT_NAME.setReadOnly(false);\n  }\n\n  app.TAX_NO.setValue(record.data.TAX_NO);\n  app.ADDRESS.setValue(record.data.ADDRESS);\n  app.CONTACT.setValue(record.data.CONTACT);\n  app.TEL.setValue(record.data.TEL);\n  app.MOBILE.setValue(record.data.MOBILE);\n  app.QQ.setValue(record.data.QQ);\n  app.WECHAT.setValue(record.data.WECHAT);\n  app.EMAIL.setValue(record.data.EMAIL);\n  app.vendorxwl.VENDOR_ID.setValue(record.data.VENDOR_ID);\n  app.vendorxwl.VENDOR_NAME.setValue(record.data.VENDOR_NAME);\n  app.START_DATE.setValue(record.data.START_DATE);\n  app.END_DATE.setValue(record.data.END_DATE);\n\n\n\n\n\n\n\n\n\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item12"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#editmoreBtn#}","itemId":"editmoreBtn","iconCls":"table_edit_icon"},"events":{"click":"var rows=app.Grid.getSelectionModel().getSelection();\nif(rows.length===0){\n  Wb.toast('请选择要批量修改的记录!');\n  return;\n}\nelse{\n\n  var idList = \"\" ;\n  Ext.each(rows,function(r){\n    var id = \"'\" + r.data.CUSTOMER_ID + \"'\";\n    if(idList === \"\"){\n      idList = id ;\n    }else{\n      idList = idList+\",\"+id ;\n    }\n  });\n  var json = {'ids' : idList} ;\n\n  var win = new Ext.window.Window(app.moerEditeWin);\n  Wb.reset(win);\n  Wb.winState = 'more';\n  app.sort1Chk.boxLabel= Wb.sort1Name;\n  app.sort2Chk.boxLabel= Wb.sort2Name;\n  app.sort3Chk.boxLabel= Wb.sort3Name;\n  app.sortxwl1.CSTM_TYPE_CODE.setValue(Wb.sort1Code);\n  app.sortxwl2.CSTM_TYPE_CODE.setValue(Wb.sort2Code);\n  app.sortxwl3.CSTM_TYPE_CODE.setValue(Wb.sort3Code);\n  app.sortxwl1.type='sort1';\n  app.sortxwl2.type='sort2';\n  app.sortxwl3.type='sort3';\n \n  win.show();\n   app.sortxwl1.CSTM_SORT_NAME.width=300; \n    app.sortxwl2.CSTM_SORT_NAME.width=300; \n     app.sortxwl3.CSTM_SORT_NAME.width=300; \n  app.sortxwl1.CSTM_SORT_NAME.setReadOnly(true); \n  app.sortxwl2.CSTM_SORT_NAME.setReadOnly(true);\n  app.sortxwl3.CSTM_SORT_NAME.setReadOnly(true);\n\n\n}\n\n\n\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item121"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#browseBtn#}","itemId":"browseBtn"},"events":{"click":"var rows = app.Grid.getSelection();\nif (rows.length != 1) {\n  Ext.MessageBox.alert('提示', '请选择一条数据!');\n  return;\n} else {\n\n  \n  \n     var record = rows[0];\n  Wb.winState=\"browse\";\n   var vid = rows[0].data.CUSTOMER_ID; \n\n\n\n  \n  Wb.reset(app.addEditeWin);\n   \n  app.tab1.setActiveTab(app.basePanel);\n  app.newSortxwl1.CSTM_SORT_NAME.fieldLabel=Wb.sort1Name;\n  app.newSortxwl2.CSTM_SORT_NAME.fieldLabel=Wb.sort2Name;\n\n  app.newSortxwl3.CSTM_SORT_NAME.fieldLabel=Wb.sort3Name;\n  app.newSortxwl1.CSTM_TYPE_CODE.setValue(Wb.sort1Code);\n  app.newSortxwl2.CSTM_TYPE_CODE.setValue(Wb.sort2Code);\n  app.newSortxwl3.CSTM_TYPE_CODE.setValue(Wb.sort3Code);\n\n\n  app.newSortxwl1.type='sort1';\n  app.newSortxwl2.type='sort2';\n  app.newSortxwl3.type='sort3';\n\n   \n \tapp.customtbar.hide();\n    app.xwl1.tbar.hide();\n  \napp.addEditeWin.show();\n \n  app.addEditeWin.setTitle(\"查看\");\n  app.xwl1.grid.store.load({params:{CUSTOMER_ID:vid}} );\n app.CUSTOMER_ID.setValue( vid); //设置ID\n  app.xwl1.CUSTOMER_ID.setValue(vid); //设置ID\n  \n     app.xwl1.optype.setValue('browse'); \n  app.opType.setValue('browse') ;\n  \n  \n   \n  app.CUSTOMER_CODE.setValue(record.data.CUSTOMER_CODE);\n\n   app.CUSTOMER_NAME.setValue(record.data.CUSTOMER_NAME);\n  \n   app.newSortxwl1.CSTM_SORT_NAME.setValue(record.data.SORT1_NAME);\n   app.newSortxwl1.CSTM_SORT_CODE.setValue(record.data.SORT1);\n  \n app.newSortxwl2.CSTM_SORT_NAME.setValue(record.data.SORT2_NAME);\n   app.newSortxwl2.CSTM_SORT_CODE.setValue(record.data.SORT2);\n  \n   app.newSortxwl3.CSTM_SORT_NAME.setValue(record.data.SORT3_NAME);\n   app.newSortxwl3.CSTM_SORT_CODE.setValue(record.data.SORT3);\n  \n   app.TAX_NO.setValue(record.data.TAX_NO);\n   app.ADDRESS.setValue(record.data.ADDRESS);\n   app.CONTACT.setValue(record.data.CONTACT);\n  app.TEL.setValue(record.data.TEL);\n   app.MOBILE.setValue(record.data.MOBILE);\n   app.QQ.setValue(record.data.QQ);\n   app.WECHAT.setValue(record.data.WECHAT);\n   app.EMAIL.setValue(record.data.EMAIL);\n    app.vendorxwl.VENDOR_ID.setValue(record.data.VENDOR_ID);\n    app.vendorxwl.VENDOR_NAME.setValue(record.data.VENDOR_NAME);\n    app.START_DATE.setValue(record.data.START_DATE);\n    app.END_DATE.setValue(record.data.END_DATE);\n  \n\n\n/**  \n  var vid = rows[0].data.VENDOR_ID; \n  edtiewin.setTitle(\"查看\");\n  app.xwl1.grid.store.load({params:{VENDOR_ID:vid}} );\n  \n  app.xwl1.VENDOR_ID.setValue(vid); //设置ID\n  app.xwl1.optype.setValue('browse'); \n  app.opType.setValue('browse') ;\n  // app.saveBtn.disabled = true;\n\tapp.vendortbar.hide();\n    app.xwl1.tbar.hide();\n  // app.savenewBtn.hide();\n  \n  \n  // app.xwl1.addBtn.hide();\n   //app.xwl1.delBtn.hide();\n   //app.xwl1.saveBtn.hide();**/\n}\n\n\n\n\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item1211"},"children":[],"expanded":true,"type":"item"},{"configs":{"text":"{#delBtn#}","itemId":"delBtn","iconCls":"application_delete_icon"},"events":{"click":"var rows=app.Grid.getSelectionModel().getSelection();\nif(rows.length===0){\n   Wb.toast('请选择要删除的记录!');\n \n  return;\n}\nelse{\n   Ext.Msg.confirm('提示','您确定要删除？',function(a){\n      if(a=='yes'){\n      var idList = \"\" ;\n      Ext.each(rows,function(r){\n        var id = \"'\" + r.data.CUSTOMER_ID + \"'\";\n        if(idList === \"\"){\n          idList = id ;\n        }else{\n          idList = idList+\",\"+id ;\n        }\n      });\n      var json = {'ids' : idList} ;\n        Wb.request({\n         url : 'm?xwl=xc/ar/base/customer_mange/data/delete',\n         params : json,\n         success :function(response){\n           Wb.toast('删除成功');\n           app.Grid.store.load();\n           \n         }\n      });\n     \n    }else{\n      return false ;\n    }\n  });\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item12111"},"children":[],"expanded":true,"type":"item"},{"configs":{"text":"{#importBtn#}","itemId":"importBtn"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item13"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#exportBtn#}","itemId":"exportBtn"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item14"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#XH#}","align":"center","width":"50","xtype":"rownumberer","titleAlign":"center","itemId":"column1"},"events":{"afterrender":"\n\n"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#CUSTOM_ID#}","hidden":"true","dataIndex":"CUSTOMER_ID","itemId":"CUSTOMER_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#CODE_COL#}","dataIndex":"CUSTOMER_CODE","itemId":"CUSTOMER_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#NAME_COL#}","width":"250","dataIndex":"CUSTOMER_NAME","itemId":"CUSTOMER_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"SORT1","hidden":"true","dataIndex":"SORT1","itemId":"SORT1_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"dataIndex":"SORT1_NAME","itemId":"SORT1_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"SORT2","hidden":"true","dataIndex":"SORT2","itemId":"SORT2_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"dataIndex":"SORT2_NAME","itemId":"SORT2_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"SORT3","hidden":"true","dataIndex":"SORT3","itemId":"SORT3_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"dataIndex":"SORT3_NAME","itemId":"SORT3_NAEM_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#TAX_NO1#}","dataIndex":"TAX_NO","itemId":"TAX_NO_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#ADDRESS1#}","dataIndex":"ADDRESS","itemId":"ADDRESS_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#CONTACT1#}","dataIndex":"CONTACT","itemId":"CONTACT_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#TEL1#}","hidden":"true","dataIndex":"TEL","itemId":"TEL_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#MOBILE1#}","hidden":"true","dataIndex":"MOBILE","itemId":"MOBILE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#QQ1#}","hidden":"true","dataIndex":"QQ","itemId":"QQ_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#EMAIL1#}","hidden":"true","dataIndex":"EMAIL","itemId":"EMAIL_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"hidden":"true","dataIndex":"VENDOR_ID","itemId":"VENDOR_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#VENDOR_NAME#}","width":"250","dataIndex":"VENDOR_NAME","itemId":"VENDOR_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#START_DATE1#}","dataIndex":"START_DATE","itemId":"START_DATE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#END_DATE1#}","dataIndex":"END_DATE","itemId":"END_DATE_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}