{"inframe":false,"title":"保存","hidden":false,"roles":{"dev":1},"children":[{"configs":{"initScript":"com.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/ar/base/customer_type/CUSTOMER_TYPE_TYPE\");","serverScript":"\n\nvar delRec = Wb.decode(request.getParameter('destroy'));\ndelRec = [];\nrequest.setAttribute('destroy',Wb.encode(delRec));\n/**\nWb.each(delRec,function(rr){\n  \n  app.run('select 1 from xc_ar_customers where SORT1=\\''+rr.CSTM_SORT_CODE+'\\' or SORT2=\\''+rr.CSTM_SORT_CODE+'\\' or SORT3=\\''+rr.CSTM_SORT_CODE+'\\'', {\n  errorText: '\"' + rr.CSTM_SORT_CODE + '已经被关联'\n});\n});**/\n\n\nvar recs = Wb.decode(request.getParameter('create'));\nWb.each(recs,function(rec){\n  \n  app.run('select 1 from xc_ar_customer_sort where CSTM_SORT_CODE=\\''+rec.CSTM_SORT_CODE+'\\'', {\n  errorText: '\"' + rec.CSTM_SORT_CODE + '{#CODEMSG#}'\n});\n  \n  \n  \n  \n  rec.CREATION_DATE = new Date();\n  rec.CREATED_BY = '{#XIP.userId#}';\n  rec.LAST_UPDATE_DATE = new Date();\n  rec.LAST_UPDATED_BY = '{#XIP.userId#}';\n});\n\nrequest.setAttribute('create',Wb.encode(recs));\n\nvar recs1 = Wb.decode(request.getParameter('update'));\nWb.each(recs1,function(rec){\n  rec.LAST_UPDATE_DATE = new Date();\n  rec.LAST_UPDATED_BY = '{#XIP.userId#}';\n});\nrequest.setAttribute('update',Wb.encode(recs1));\n\n\n\n//request.removeAttribute('destroy');\n\napp.update({\n  tableName: 'xc_ar_customer_sort'\n});\n","itemId":"module"},"children":[],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}