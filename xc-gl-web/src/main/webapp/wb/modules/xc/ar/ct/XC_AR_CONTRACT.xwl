{"inframe":false,"title":"合同管理（扩展）","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,'xc/ar/ct/json/XC_AR_CONTRACT');\nvar userId = request.getSession().getAttribute(\"XzSessionVars\").get('userId');\n\nvar protocol = request.getProtocol() ;\nvar ipAddr = request.getServerName();\nvar port = request.getServerPort() ;\nvar ctxPath = request.getContextPath() ;\n\nvar pp = protocol.substr(0,5) ;\nprotocol = (pp.indexOf(\"https\") == -1 ? \"http\" : \"https\") ;\nvar url = protocol + \"://\" + ipAddr +\":\" + port + ctxPath ;\n\nrequest.setAttribute('contextPath',ctxPath);\nrequest.setAttribute(\"userId\",userId);\nrequest.setAttribute(\"appIP\",url);\nvar appId = request.getSession().getAttribute(\"XzSessionVars\").get('appId');\nrequest.setAttribute(\"funId\",request.getParameter('funId'));\nrequest.setAttribute(\"appId\",request.getParameter('appId'));","itemId":"module"},"events":{"finalize":"var tableValue = '';//窗口中的所有信息\nfunction returnRowFn(r,type){\n    if(type==='xip_pub_orgs'){\n        var ledgerId = r.data.LEDGER_ID;\n        //新增或是修改窗口的pick改变\n        var isInwin = app.isWin.getValue(); //\n    \n        if(isInwin==\"Y\"){\n            setQueryCondition(ledgerId);\n            setReset();\n        }\n        else{\n            app.queryBtn.fireEvent('click');\n        }\n    }\n    if(type==='xip_pub_depts'){\n        app.PROJECT_NAME.QUERY_DEPT_ID.setValue(r.get('DEPT_ID'));\n    }\n}\nfunction clearOtherFn(type){\n    //清空账薄时清空面板中所有信息\n    if(type=='xip_pub_orgs'){\n        //新增或是修改窗口的pick改变\n        var isInwin = app.isWin.getValue(); //\n        if(isInwin==\"Y\"){\n            setQueryCondition(\"\");\n            setReset();\n        }\n        else{\n            app.queryBtn.fireEvent('click');\n            app.ORG_XWL.LEDGER_ID.setValue('');\n            app.ORG_XWL.LEDGER_NAME.setValue('');\n            app.ORG_XWL.ORG_ID.setValue('');\n            app.ORG_XWL.ORG_NAME.setValue('');\n        }\n    }\n}\nfunction setQueryCondition(ledgerId){\n    app.DEPT_NAME.QUERY_LEDGER_ID.setValue(ledgerId);//成本中心\n    app.PROJECT_NAME.QUERY_LEDGER_ID.setValue(ledgerId);//项目\n    app.CONTRACT_USER.QUERY_LEDGER_ID.setValue(ledgerId);//负责人\n    app.CUSTOMER_ID_XWL.QUERY_LEDGER_ID.setValue(ledgerId);//客户\n    app.LEDGER_ID.setValue(ledgerId);//账簿\n}\nfunction setReset(){\n    app.DEPT_NAME.DEPT_ID.setValue('');\n    app.DEPT_NAME.DEPT_NAME.setValue('');\n    app.PROJECT_NAME.PROJECT_ID.setValue('');\n    app.PROJECT_NAME.PROJECT_NAME.setValue('');\n    app.CUSTOMER_ID_XWL.CUSTOMER_ID.setValue('');\n    app.CUSTOMER_ID_XWL.CUSTOMER_NAME.setValue('');\n    app.CONTRACT_USER.EMP_NAME.setValue('');\n    app.CONTRACT_USER.EMP_ID.setValue('');\n}\nfunction setSomeReadOnly(flag){\n\tapp.ORG_NAME.ORG_NAME.setReadOnly(flag);\n\tapp.CUSTOMER_ID_XWL.CUSTOMER_NAME.setReadOnly(flag);\n\tapp.AR_CONTRACT_TYPE.setReadOnly(flag);\n\tapp.AR_CONTRACT_CODE.setReadOnly(flag);\n}\nfunction setAllReadOnly(flag){\n\tapp.AR_CONTRACT_NAME.setReadOnly(flag);\n\tapp.AR_CONTRACT_TYPE_ID.setReadOnly(flag);\n\tapp.START_DATE.setReadOnly(flag);\n\tapp.END_DATE.setReadOnly(flag);\n\tapp.DEPT_NAME.DEPT_NAME.setReadOnly(flag);\n\tapp.PROJECT_NAME.PROJECT_NAME.setReadOnly(flag);\n\tapp.CONTRACT_USER.EMP_NAME.setReadOnly(flag);\n\tapp.DESCRIPTION.setReadOnly(flag);\n\tapp.AMOUNT.setReadOnly(flag);\n\tapp.TAX_AMT.setReadOnly(flag);\n    app.saveBtn.setDisabled(flag);\n    app.submitsButton.setDisabled(flag);\n}\nfunction setBtnDisabled(flag){\n    app.withdrawsBtn.setDisabled(flag);\n}\nfunction setBtnDisableds(flag,auditDesc,auditStatus,sysAuditDesc){\n    app.queryBtn.fireEvent('click');\n    app.saveBtn.setDisabled(flag);\n    app.submitsButton.setDisabled(flag);\n    app.AUDIT_STATUS.setValue(auditStatus);\n    app.AUDIT_STATUS_DESC.setValue(auditDesc);\n    app.SYS_AUDIT_STATUS_DESC.setValue(sysAuditDesc);\n    setAllReadOnly(flag);\n}\nfunction setDeptInfo(orgId){\n    Wb.request({\n        url : 'm?xwl=xc/ar/ct/data/selectDeptInfoByUserId',\n        params : {USER_ID : '{#userId#}',ORG_ID : orgId},\n        success : function(resp){\n            var temp = Wb.decode(resp.responseText);\n            app.DEPT_NAME.DEPT_ID.setValue(temp.DEPT_ID);\n            app.DEPT_NAME.DEPT_NAME.setValue(temp.DEPT_NAME);\n        }\n    });\n}"},"children":[{"configs":{"itemId":"tools"},"children":[{"configs":{"itemId":"orgInitStore","autoLoad":"true","url":"m?xwl=xc/com-lov/ORG_PICK/DB/ORG_SELECT_BY_LEDGER"},"events":{"load":"if(Wb.isEmpty(app.ORG_NAME.ORG_NAME.getValue())){\n    app.LEDGER_ID.setValue(store.getAt(0).get('LEDGER_ID'));\n\n    app.ORG_XWL.LEDGER_ID.setValue(store.getAt(0).get('LEDGER_ID'));\n    app.ORG_NAME.LEDGER_ID.setValue(store.getAt(0).get('LEDGER_ID'));\n    app.ORG_XWL.ORG_ID.setValue(store.getAt(0).get('ORG_ID'));\n    app.ORG_XWL.ORG_NAME.setValue(store.getAt(0).get('ORG_NAME'));\n    app.ORG_NAME.ORG_ID.setValue(store.getAt(0).get('ORG_ID'));\n    app.ORG_NAME.ORG_NAME.setValue(store.getAt(0).get('ORG_NAME'));\n    app.queryBtn.fireEvent('click');\n    setQueryCondition(store.getAt(0).get('LEDGER_ID'));\n    setDeptInfo(store.getAt(0).get('ORG_ID'));\n}"},"children":[],"expanded":false,"type":"store"},{"configs":{"maximized":"true","height":"400","layout":"border","width":"700","closeAction":"hide","buttonAlign":"center","itemId":"addEditewin","modal":"true","maximizable":"true"},"events":{"hide":"app.isWin.setValue(\"N\");\nsetAllReadOnly(false);\nsetSomeReadOnly(false);\nsetBtnDisabled(false);\napp.submitsButton.show();\napp.withdrawsBtn.show();\napp.monitorsBtn.show();\napp.changeText.setValue(null);//为了区别提交流程的时候窗口的差别","show":"var srcId = null;\nif(app.optype.getValue() === 'change')\n    srcId = app.AR_CONTRACT_HIS_ID.getValue();\nelse\n    srcId = app.AR_CONTRACT_ID.getValue();\ndocument.getElementById('enclosurePanel').src = '{#contextPath#}/m?xwl=xip/tools/att/attrManage/attrManage' + '&userId=' + '{#userId#}' + '&srcId=' + srcId + '&attCat=' + 'XC_AR_CAT';"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#saveBtn#}","itemId":"saveBtn","iconCls":"ok_icon"},"events":{"click":"if(!Wb.verify(app.form1)){\n    Wb.toast('{#saveMsg1#}');\n    return;\n}\n\nvar startDate = app.START_DATE.getValue();\nvar endDate = app.END_DATE.getValue();\nif(startDate > endDate){\n    Wb.toast('{#saveMsg2#}');\n    return;\n}\napp.INV_AMOUNT.setValue(app.AMOUNT.getValue() + app.TAX_AMT.getValue());\nvar json = {\n    AR_CONTRACT_ID : app.AR_CONTRACT_ID.getValue(),\n    AR_CONTRACT_HIS_ID : app.AR_CONTRACT_HIS_ID.getValue(),\n    AR_CONTRACT_CODE : app.AR_CONTRACT_CODE.getValue(),\n    AR_CONTRACT_NAME : app.AR_CONTRACT_NAME.getValue(),\n    AR_CONTRACT_TYPE : app.AR_CONTRACT_TYPE.getValue(),\n    AR_CONTRACT_TYPE_ID : app.AR_CONTRACT_TYPE_ID.getValue(),\n    LEDGER_ID : app.LEDGER_ID.getValue(),\n    ORG_ID : app.ORG_NAME.ORG_ID.getValue(),\n    CUSTOMER_ID : app.CUSTOMER_ID_XWL.CUSTOMER_ID.getValue(),\n    AMOUNT : Wb.isEmpty(app.AMOUNT.getValue()) ? '0' : app.AMOUNT.getValue(),\n    TAX_AMT : Wb.isEmpty(app.TAX_AMT.getValue()) ? '0' : app.TAX_AMT.getValue(),\n    INV_AMOUNT : app.INV_AMOUNT.getValue(),\n    VERSION : Wb.isEmpty(app.VERSION.getValue()) ? '0' : app.VERSION.getValue(),\n    DEPT_ID : app.DEPT_NAME.DEPT_ID.getValue(),\n    PROJECT_ID : app.PROJECT_NAME.PROJECT_ID.getValue(),\n    CONTRACT_USER : app.CONTRACT_USER.EMP_ID.getValue(),\n    DESCRIPTION : app.DESCRIPTION.getValue(),\n    START_DATE : app.START_DATE.getValue(), \n    END_DATE : app.END_DATE.getValue(),\n    SYS_AUDIT_STATUS : app.SYS_AUDIT_STATUS.getValue(), \n    SYS_AUDIT_STATUS_DESC : app.SYS_AUDIT_STATUS_DESC.getValue()\n};\n\n//变更处理\nif(app.optype.getValue() == \"change\"){\n    saveArContractInfo('change','{#saveMsg5#}');\n}\nelse{\n    //判断是否有相同的编码或名称\n    Wb.request({\n        url:'m?xwl=xc/ar/ct/data/getCodeName',\n        params:{'ledgerId':app.LEDGER_ID.getValue(),'code':app.AR_CONTRACT_CODE.getValue(),'name':app.AR_CONTRACT_NAME.getValue(),'contractId':app.AR_CONTRACT_ID.getValue()},\n        success:function(resp){\n            var rec = Wb.decode(resp.responseText);\n            if(rec.total > 0){\n                Wb.toast('{#saveMsg4#}');\n                return;\n            }\n            else{\n                //新增处理\n                if(app.optype.getValue() == \"add\"){\n                    saveArContractInfo('add','{#saveMsg3#}');\n                }\n                if(app.optype.getValue() == \"edit\"){\n                    saveArContractInfo('edit','{#saveMsg3#}');\n                }\n            }\n        }\n    });\n}\nfunction saveArContractInfo(opType,msgs){\n    Wb.request({\n        url: '{#contextPath#}'+'/arContractAction.do?method=saveArContractInfo', \n        params: {'json':json,'opType':opType},\n        success: function(resp) {\n            var record = Wb.decode(resp.responseText);\n            var msg = record.msg;\n            if(record.flag === '0'){\n                Wb.toast(msgs);\n                if(opType == \"add\"){\n                    app.optype.setValue('edit');\n                }\n                setSomeReadOnly(true);\n                tableValue = Wb.encode(Wb.getValue(app.form1));\n                app.queryBtn.fireEvent('click');\n            }\n            else\n                Wb.toast(msg);\n        }\n    });\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#submitButton#}","itemId":"submitsButton","iconCls":"check_icon"},"events":{"click":"var url = null;\nvar params = null;\nif(app.optype.getValue() == \"add\" || tableValue !== Wb.encode(Wb.getValue(app.form1))){\n    Wb.toast('{#submitWarn1#}');\n    return false;\n}\nelse {\n    var arCatCode = null;\n    var e_business_id = null;\n    if(app.optype.getValue() === 'change'){\n        arCatCode = 'XSHTBG';\n        e_business_id = app.AR_CONTRACT_HIS_ID.getValue();\n        url = 'm?xwl=xc/ar/ct/data/selectContractHisByHisId';\n        params = {AR_CONTRACT_HIS_ID : e_business_id};\n    }\n    else{\n        arCatCode = 'XSHT';\n        e_business_id = app.AR_CONTRACT_ID.getValue();\n        url = 'm?xwl=xc/ar/ct/data/selectById';\n        params = {AR_CONTRACT_ID : e_business_id};\n    }\n    Wb.request({\n        url : '{#contextPath#}' + '/arInvoiceAction.do?method=getArInvoiceProcAndForms',\n        params : {LEDGER_ID : app.LEDGER_ID.getValue(),AR_DOC_CAT_CODE : 'XSHT'},\n        success : function(resp){\n            var temp = Wb.decode(resp.responseText);\n            if(temp.flag === '0'){\n                //取得流程编码、电脑端审批表单和移动端审批表单\n                var processCODE = temp.PROCESS_CODE;\n                var pcApproveForm = temp.PC_A_FORM_URL;\n                var mobileApproveForm = temp.M_A_FORM_URL;\n                var orgId = temp.ORG_ID;\n                //电脑端和移动端审批表单为变量需要设置为全路径\n                pcApproveForm = '{#appIP#}' +  '/' + pcApproveForm;\n                mobileApproveForm = '{#appIP#}' +  mobileApproveForm;\n                //如果流程编码存在, 则提交流程审批处理\n                if(processCODE !== \"\" && processCODE !== null && processCODE !== undefined){\n                    //如果项目未指定，则设置默认值为 \"-1\"\n                    var prjId = app.PROJECT_NAME.PROJECT_ID.getValue();\n                    if(prjId === null || prjId === \"\" || prjId === undefined){\n                        prjId = \"-1\" ;\n                    }\n                    var auditStatus = app.AUDIT_STATUS.getValue();\n                    var json = {\n                        'APP_IP'\t\t\t: '{#appIP#}',\n                        'EMP_ID'\t\t\t: '{#XIP.empId#}',\n                        'loginName'\t\t\t: '{#XIP.userName#}',\n                        'arCatCode'\t\t\t: arCatCode,\n                        'M_A_FORM'\t\t\t: mobileApproveForm,\n                        'PC_A_FORM'\t\t\t: pcApproveForm,\n                        'PROJECT_ID'\t\t: prjId,\n                        'ORG_ID'\t\t\t: orgId,\n                        'billType'\t\t\t: 'XSHT',\n                        'DEPT_ID'\t\t\t: app.DEPT_NAME.DEPT_ID.getValue(),\n                        'DEPT_NAME'\t\t\t: app.DEPT_NAME.DEPT_NAME.getValue(),\n                        'ledgerId'\t\t\t: app.LEDGER_ID.getValue(),\n                        'AMT'\t\t\t\t: app.INV_AMOUNT.getValue(),\n                        'ABSAMT'\t\t\t: Math.abs(app.INV_AMOUNT.getValue()),//金额绝对值\n                        'e_business_id'\t\t: e_business_id\n                    };\n                    if(auditStatus === 'A'){//起草状态\n                        XipWf.startAndSubmitByProcess(processCODE,json,function(e){//提交流程\n                            if(e.flag === 0){\n                                app.INS_CODE.setValue(e.instanceCode);\n                                submitSuccess();\n                            }\n                            else if(e.flag === 1){\n                                Wb.toast(e.msg) ;\n                            }\n                        });\n                    }\n                    else if(auditStatus === 'D'){//驳回状态\n                        XipWf.submitInstance(app.INS_CODE.getValue(),json,function(e){//提交流程\n                            if(e.flag === 0){\n                                submitSuccess();\n                            }\n                            else if(e.flag === 1){\n                                Wb.toast(e.msg) ;\n                            }\n                        });\n                    }\n                    else if(auditStatus === 'R'){//撤回状态\n                        XipWf.restartAndSubmitByProcess(app.INS_CODE.getValue(),processCODE,json,function(e){//提交流程\n                            if(e.flag === 0){\n                                submitSuccess();\n                            }\n                            else if(e.flag === 1){\n                                Wb.toast(e.msg) ;\n                            }\n                        });\n                    }\n                    else if(auditStatus === 'E' || auditStatus === 'C'){//运行中、结束状态\n                        Wb.toast('{#submitWarn#}');\n                        return false;\n                    }\n                    else{\n                        Wb.toast('{#submitWarns#}');\n                        return false;\n                    }\n                }\n            }\n            else{\n                Wb.toast(temp.msg);\n            }\n        }\n    });\n}\nfunction submitSuccess(){\n    Wb.request({\n        url : url,\n        params : params,\n        success : function(resp){\n            var auditDesc = null;\n            var auditStatus = null;\n            var sysAuditDesc = null;\n            var r = Wb.decode(resp.responseText).rows[0];\n            if(r.SYS_AUDIT_STATUS == 'E'){\n                app.SYS_AUDIT_STATUS.setValue('E');\n                app.AUDIT_STATUS.setValue('E');\n                app.SYS_AUDIT_STATUS_DESC.setValue('{#E_STATUS#}');\n                auditDesc = '{#E_STATUS#}';\n                auditStatus = 'E';\n                sysAuditDesc = '{#E_STATUS#}';\n            }\n            else{\n                app.SYS_AUDIT_STATUS.setValue('C');\n                app.AUDIT_STATUS.setValue('C');\n                app.SYS_AUDIT_STATUS_DESC.setValue('{#SYS_C_STATUS#}');\n                auditDesc = '{#C_STATUS#}';\n                auditStatus = 'C';\n                sysAuditDesc = '{#SYS_C_STATUS#}';\n            }\n            tableValue = Wb.encode(Wb.getValue(app.form1));\n            Wb.toast('{#successSubmit#}');\n            setBtnDisableds(true,auditDesc,auditStatus,sysAuditDesc);\n        }\n    });\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#withdrawBtn#}","itemId":"withdrawsBtn","iconCls":"cancel_icon"},"events":{"click":"if(app.INS_CODE.getValue() === null || app.INS_CODE.getValue() === '') {\n    Wb.toast('{#withdrawWarn1#}');\n\treturn;\n}\nelse if(app.AUDIT_STATUS.getValue() === 'E') {\n    Wb.toast('{#withdrawWarn3#}');\n\treturn;\n}\nelse if(app.AUDIT_STATUS.getValue() === 'R'){\n    Wb.toast('{#withdrawWarn4#}');\n    return;\n}\nelse if(app.AUDIT_STATUS.getValue() === 'D'){\n\tWb.toast('{#withdrawWarn5#}');\n    return;\n}\nelse {\n\t//撤回流程\n\tXipWf.revokeByInstance(app.INS_CODE.getValue(),function(e){\n        if(e.flag === '0'){\n            setBtnDisableds(false,'{#A_STATUS#}','R','{#SYS_A_STATUS#}');\n        }\n        Wb.toast(e.msg);\n        tableValue = Wb.encode(Wb.getValue(app.form1));\n\t});\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#monitorBtn#}","itemId":"monitorsBtn","iconCls":"viewport_icon"},"events":{"click":"if(app.INS_CODE.getValue() === null || app.INS_CODE.getValue() === ''){\n    Wb.toast('{#monitorWarn1#}');\n    return;\n}\nelse{\n    XipWf.showMonitorPage(app.INS_CODE.getValue());\n}"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"array"},{"configs":{"region":"north","frame":"false","itemId":"form1","bodyPadding":"0 0 0 0","border":"false"},"children":[{"configs":{"frame":"false","layout":"column","margin":"5 0 0 0","itemId":"tr_1","border":"false"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".33","itemId":"td_1_1","border":"false"},"children":[{"configs":{"file":"m?xwl=xc/com-lov/ORG_PICK/ORG_ALL_PICK","itemId":"ORG_NAME"},"children":[],"expanded":false,"type":"xwl"},{"configs":{"hidden":"true","itemId":"LEDGER_ID"},"children":[],"expanded":false,"type":"text"}],"expanded":false,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".33","itemId":"td_1_2","border":"false"},"children":[{"configs":{"labelWidth":"80","allowBlank":"false","displayField":"VAL_NAME","valueField":"VAL_CODE","labelAlign":"right","itemId":"AR_CONTRACT_TYPE","fieldLabel":"<font color='red'>*<\/font>{#AR_CONTRACT_PRO#}","editable":"false"},"children":[{"configs":{"itemId":"store","autoLoad":"true","url":"m?xwl=xc/ar/ct/data/selectValueset"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".33","itemId":"td_1_3","border":"false"},"children":[{"configs":{"labelWidth":"80","allowBlank":"false","displayField":"CONTRACT_TYPE_NAME","valueField":"CONTRACT_TYPE_ID","labelAlign":"right","itemId":"AR_CONTRACT_TYPE_ID","fieldLabel":"<font color='red'>*<\/font>{#AR_CONTRACT_TYPE#}","editable":"false"},"children":[{"configs":{"itemId":"store","autoLoad":"true","url":"m?xwl=xc/ar/ct/data/selectPoContractType"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","layout":"column","margin":"5 0 0 0","itemId":"tr_2","border":"false"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".33","itemId":"td_2_1","border":"false"},"children":[{"configs":{"labelWidth":"80","allowBlank":"false","labelAlign":"right","itemId":"AR_CONTRACT_CODE","fieldLabel":"<font color='red'>*<\/font>{#AR_CONTRACT_CODE#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".33","itemId":"td_2_2","border":"false"},"children":[{"configs":{"labelWidth":"80","allowBlank":"false","labelAlign":"right","itemId":"AR_CONTRACT_NAME","fieldLabel":"<font color='red'>*<\/font>{#AR_CONTRACT_NAME#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".33","itemId":"td_2_3","border":"false"},"children":[{"configs":{"file":"m?xwl=xc/ar/ar-com-lov/AR_CUSTOMER_ID_PICK/AR_CUSTOMER_ID_PICK","itemId":"CUSTOMER_ID_XWL"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"panel"},{"configs":{"frame":"false","layout":"column","margin":"5 0 0 0","itemId":"tr_3","border":"false"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".33","itemId":"td_3_1","border":"false"},"children":[{"configs":{"labelWidth":"80","labelAlign":"right","itemId":"AMOUNT","fieldLabel":"{#AMOUNT#}"},"children":[],"expanded":false,"type":"number"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".33","itemId":"td_3_2","border":"false"},"children":[{"configs":{"labelWidth":"80","labelAlign":"right","itemId":"TAX_AMT","fieldLabel":"{#TAX_AMT#}"},"children":[],"expanded":false,"type":"number"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".33","itemId":"td_3_3","border":"false"},"children":[{"configs":{"labelWidth":"80","readOnly":"true","labelAlign":"right","itemId":"INV_AMOUNT","fieldLabel":"<font color='red'>*<\/font>{#INV_AMOUNT#}"},"children":[],"expanded":false,"type":"number"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","layout":"column","margin":"5 0 0 0","itemId":"tr_4","border":"false"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".33","itemId":"td_4_1","border":"false"},"children":[{"configs":{"labelWidth":"80","allowBlank":"false","labelAlign":"right","itemId":"START_DATE","fieldLabel":"<font color='red'>*<\/font>{#START_DATE#}"},"children":[],"expanded":true,"type":"date"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".33","itemId":"td_4_2","border":"false"},"children":[{"configs":{"labelWidth":"80","allowBlank":"false","labelAlign":"right","itemId":"END_DATE","fieldLabel":"<font color='red'>*<\/font>{#END_DATE#}"},"children":[],"expanded":false,"type":"date"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".33","itemId":"td_4_3","border":"false"},"children":[{"configs":{"labelWidth":"80","readOnly":"true","hidden":"true","labelAlign":"right","itemId":"AUDIT_STATUS_DESC","fieldLabel":"{#STATUS#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"80","readOnly":"true","labelAlign":"right","itemId":"SYS_AUDIT_STATUS_DESC","fieldLabel":"{#SYS_STATUS#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","layout":"column","margin":"5 0 0 0","itemId":"tr_5","border":"false"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".33","itemId":"td_5_1","border":"false"},"children":[{"configs":{"file":"m?xwl=xc/com-lov/DEPT_ID_PICK/DEPT_ID_LD","itemId":"DEPT_NAME"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".33","itemId":"td_5_2","border":"false"},"children":[{"configs":{"file":"m?xwl=xc/com-lov/PROJECT_ID_PICK/PROJECT_ID_LD","itemId":"PROJECT_NAME"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".33","itemId":"td_5_3","border":"false"},"children":[{"configs":{"labelWidth":"80","readOnly":"true","labelAlign":"right","itemId":"VERSION","fieldLabel":"{#VERSION#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","layout":"column","margin":"5 0 5 0","itemId":"tr_6","border":"false"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".33","itemId":"td_6_1","border":"false"},"children":[{"configs":{"file":"m?xwl=xc/com-lov/EMP_ID_PICK/EMP_ID_LD","itemId":"CONTRACT_USER"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".66","itemId":"td_6_2","border":"false"},"children":[{"configs":{"labelWidth":"80","labelAlign":"right","itemId":"DESCRIPTION","fieldLabel":"{#DESCRIPTION#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","hidden":"true","layout":"column","itemId":"tr_7","border":"false"},"children":[{"configs":{"hidden":"true","itemId":"AR_CONTRACT_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"AR_CONTRACT_HIS_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"INS_CODE"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"AUDIT_STATUS"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"SYS_AUDIT_STATUS"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","value":"add","itemId":"optype"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"isWin"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"changeText"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"form"},{"configs":{"region":"center","itemId":"lookTab"},"children":[{"configs":{"title":"{#Enclosure#}","html":"<iframe width=\"100%\" height=\"100%\" id='enclosurePanel' src=\"\"><\/iframe>","itemId":"tab01"},"children":[],"expanded":false,"type":"panel"},{"configs":{"title":"{#PurchaseOrder#}","html":"<iframe width=\"100%\" height=\"100%\" src=\"\"><\/iframe>","itemId":"tab02"},"children":[],"expanded":false,"type":"panel"},{"configs":{"title":"{#ToOrder#}","html":"<iframe width=\"100%\" height=\"100%\" src=\"\"><\/iframe>","itemId":"tab03"},"children":[],"expanded":false,"type":"panel"},{"configs":{"title":"{#StorageList#}","html":"<iframe width=\"100%\" height=\"100%\" src=\"\"><\/iframe>","itemId":"tab04"},"children":[],"expanded":false,"type":"panel"}],"expanded":false,"type":"tab"}],"expanded":false,"type":"window"},{"configs":{"maximized":"true","height":"500","layout":"border","width":"800","closeAction":"hide","buttonAlign":"center","itemId":"historyWin","modal":"true","maximizable":"true"},"children":[{"configs":{"region":"center","selType":"checkboxmodel","itemId":"historyGrid"},"events":{"itemdblclick":"app.lookHistoryBtn.fireEvent('click');"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#lookBtn#}","itemId":"lookHistoryBtn","iconCls":"seek_icon"},"events":{"click":"var curGrid = app.historyGrid;\napp.lookTab.setActiveTab(app.tab01);\nvar recs = curGrid.getSelection();\nif (recs.length > 1 || recs.length === 0) {//大于一条或没选择会警告\n    Wb.toast('{#lookRec#}');\n    return;\n}\napp.addEditewin.show();\napp.addEditewin.setTitle('{#lookTitle#}');\nsetAllReadOnly(true);\nsetSomeReadOnly(true);\nsetBtnDisabled(true);\nWb.setValue(app.addEditewin,recs[0].data);//把记录数据应用到窗口"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#returnBtn#}","itemId":"returnBtn","iconCls":"first_icon"},"events":{"click":"app.historyWin.hide();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"store","url":"m?xwl=xc/ar/ct/data/selectContractHisById"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#ORDERBY#}","width":"50","xtype":"rownumberer","align":"center","titleAlign":"center","itemId":"ORDERBY"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#VERSION#}","width":"80","dataIndex":"VERSION","titleAlign":"center","itemId":"VERSION_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#LEDGER_NAME#}","hidden":"true","width":"150","dataIndex":"LEDGER_NAME","titleAlign":"center","itemId":"LEDGER_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#AR_CONTRACT_CODE#}","width":"150","dataIndex":"AR_CONTRACT_CODE","titleAlign":"center","itemId":"AR_CONTRACT_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#AR_CONTRACT_NAME#}","width":"160","dataIndex":"AR_CONTRACT_NAME","titleAlign":"center","itemId":"AR_CONTRACT_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#CUSTOMER_NAME#}","width":"200","dataIndex":"CUSTOMER_NAME","titleAlign":"center","itemId":"CUSTOMER_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#DEPT_NAME#}","width":"150","dataIndex":"DEPT_NAME","titleAlign":"center","itemId":"DEPT_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#PROJECT_NAME#}","width":"150","dataIndex":"PROJECT_NAME","titleAlign":"center","itemId":"PROJECT_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#AR_CONTRACT_PRO#}","width":"150","dataIndex":"AR_CONTRACT_TYPE_NAME","titleAlign":"center","itemId":"AR_CONTRACT_TYPE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#AR_CONTRACT_TYPE#}","width":"150","dataIndex":"CONTRACT_TYPE_NAME","titleAlign":"center","itemId":"AR_CONTRACT_TYPE_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#STATUS#}","hidden":"true","width":"150","dataIndex":"AUDIT_STATUS_DESC","titleAlign":"center","itemId":"AUDIT_STATUS_DESC_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#SYS_STATUS#}","width":"150","dataIndex":"SYS_AUDIT_STATUS_DESC","titleAlign":"center","itemId":"SYS_AUDIT_STATUS_DESC_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#AMOUNT#}","align":"right","width":"120","dataIndex":"AMOUNT","titleAlign":"center","format":"0,000.00","itemId":"AMOUNT_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#TAX_AMT#}","align":"right","width":"120","dataIndex":"TAX_AMT","titleAlign":"center","format":"0,000.00","itemId":"TAX_AMT_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#INV_AMOUNT#}","align":"right","width":"120","dataIndex":"INV_AMOUNT","titleAlign":"center","format":"0,000.00","itemId":"INV_AMOUNT_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#START_DATE#}","width":"100","dataIndex":"START_DATE","titleAlign":"center","itemId":"START_DATE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#END_DATE#}","width":"100","dataIndex":"END_DATE","titleAlign":"center","itemId":"END_DATE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#isClose#}","hidden":"true","width":"80","dataIndex":"IS_CLOSE","titleAlign":"center","itemId":"IS_CLOSE_COL","renderer":"if(value==\"Y\"){\n  return '{#Y#}';\n}else{\n  return '{#N#}';\n}\n  "},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#ORG_NAME#}","hidden":"true","width":"100","dataIndex":"ORG_NAME","titleAlign":"center","itemId":"ORG_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#DESCRIPTION#}","width":"200","dataIndex":"DESCRIPTION","titleAlign":"center","itemId":"DESCRIPTION_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#principal#}","width":"100","dataIndex":"EMP_NAME","titleAlign":"center","itemId":"EMP_NAME_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"window"},{"configs":{"title":"{#mx#}","height":"500","layout":"border","width":"800","closeAction":"hide","itemId":"mxWin","modal":"true"},"children":[{"configs":{"region":"north","height":"130","style":"border-width:0px","layout":"form","itemId":"form2","border":"false"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","itemId":"panel1","border":"true"},"children":[{"configs":{"frame":"false","style":"border-width:0px;padding-top:10px","layout":"column","itemId":"tr1","border":"false"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".44","itemId":"td_1","border":"false"},"children":[{"configs":{"labelWidth":"80","readOnly":"true","labelAlign":"right","itemId":"AR_CONTRACT_CODE_MX","fieldLabel":"{#AR_CONTRACT_CODE#}"},"children":[],"expanded":false,"type":"text"}],"expanded":false,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".44","itemId":"td_2","border":"false"},"children":[{"configs":{"labelWidth":"80","readOnly":"true","allowBlank":"false","width":"280","labelAlign":"right","itemId":"AR_CONTRACT_NAME_MX","fieldLabel":"{#AR_CONTRACT_NAME#}"},"children":[],"expanded":false,"type":"text"}],"expanded":false,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px;padding-top:0px","layout":"column","itemId":"tr2","border":"false"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".44","itemId":"td_1","border":"false"},"children":[{"configs":{"labelWidth":"80","readOnly":"true","labelAlign":"right","itemId":"CUSTOMER_NAME","fieldLabel":"{#CUSTOMER_NAME#}"},"children":[],"expanded":false,"type":"text"}],"expanded":false,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".44","itemId":"td_2","border":"false"},"children":[{"configs":{"labelWidth":"80","readOnly":"true","labelAlign":"right","itemId":"AMOUNT_MX","fieldLabel":"{#INV_AMOUNT#}"},"children":[],"expanded":false,"type":"text"}],"expanded":false,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px;padding-top:0px","layout":"column","itemId":"tr3","border":"false"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".44","itemId":"td_1","border":"false"},"children":[{"configs":{"labelWidth":"80","readOnly":"true","allowBlank":"false","labelAlign":"right","format":"Y-m-d","itemId":"START_DATE_MX","fieldLabel":"{#START_DATE#}"},"children":[],"expanded":true,"type":"date"}],"expanded":false,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".44","itemId":"td_2","border":"false"},"children":[{"configs":{"labelWidth":"80","readOnly":"true","labelAlign":"right","format":"Y-m-d","itemId":"END_DATE_MX","fieldLabel":"{#END_DATE#}"},"children":[],"expanded":true,"type":"date"},{"configs":{"hidden":"true","itemId":"AR_CONTRACT_ID_TXT"},"children":[],"expanded":false,"type":"text"}],"expanded":false,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","style":"padding-top:20px","buttonAlign":"center","itemId":"mxGrid"},"children":[{"configs":{"itemId":"buttons"},"children":[{"configs":{"text":"{#okBtn#}","itemId":"okBtn","iconCls":"ok_icon"},"events":{"click":"app.mxWin.hide();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#cancelBtn#}","itemId":"closeBtn","iconCls":"cancel_icon"},"events":{"click":"app.mxWin.hide();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"array"},{"configs":{"itemId":"store","url":"m?xwl=xc/ar/ct/data/selectMX"},"children":[],"expanded":true,"type":"store"},{"configs":{"itemId":"features"},"children":[{"configs":{"itemId":"features","ftype":"summary"},"children":[],"expanded":false,"type":"feature"}],"expanded":true,"type":"array"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#ORDERBY#}","width":"50","xtype":"rownumberer","align":"center","titleAlign":"center","itemId":"ORDERBY"},"children":[],"expanded":false,"type":"column"},{"configs":{"summaryRenderer":"return '{#summary#}';","text":"{#T_DATE#}","xtype":"datecolumn","width":"100","dataIndex":"T_DATE","itemId":"T_DATE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"summaryRenderer":"\n\nreturn value.toFixed(2);\n","text":"{#YS_AMOUNT#}","align":"right","xtype":"numbercolumn","width":"120","dataIndex":"YS_AMOUNT","itemId":"AMOUNT_YS_COL","summaryType":"sum"},"children":[],"expanded":false,"type":"column"},{"configs":{"summaryRenderer":"return value.toFixed(2);","text":"{#JS_AMOUNT#}","align":"right","xtype":"numbercolumn","width":"120","dataIndex":"JS_AMOUNT","itemId":"AMOUNT_JS_COL","summaryType":"sum"},"children":[],"expanded":false,"type":"column"},{"configs":{"summaryRenderer":"return value.toFixed(2);","text":"{#KP_AMOUNT#}","align":"right","xtype":"numbercolumn","width":"120","dataIndex":"KP_AMOUNT","itemId":"AMOUNT_KP_COL","summaryType":"sum"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"window"}],"expanded":true,"type":"folder"},{"configs":{"layout":"border","itemId":"viewport1"},"children":[{"configs":{"region":"north","buttonAlign":"center","itemId":"queryForm"},"children":[{"configs":{"layout":"column","margin":"10 0 0 0","itemId":"tr1","border":"false"},"children":[{"configs":{"layout":"form","columnWidth":".245","itemId":"td_1_1","border":"false"},"children":[{"configs":{"file":"m?xwl=xc/com-lov/ORG_PICK/ORG_ALL_PICK","itemId":"ORG_XWL"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".245","itemId":"td_1_2","border":"false"},"children":[{"configs":{"labelWidth":"80","labelAlign":"right","itemId":"QUERY_AR_CONTRACT_CODE","fieldLabel":"{#AR_CONTRACT_CODE_NAME#}"},"events":{"specialkey":"if(e.getKey()===13) {\n  app.queryBtn.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".245","itemId":"td_1_3","border":"false"},"children":[{"configs":{"labelWidth":"80","displayField":"VAL_NAME","valueField":"VAL_CODE","labelAlign":"right","itemId":"QUERY_AR_CONTRACT_PRO","fieldLabel":"{#AR_CONTRACT_PRO#}"},"events":{"select":"app.queryBtn.fireEvent('click');","specialkey":"if(e.getKey()===13) {\n  app.queryBtn.fireEvent('click');\n}"},"children":[{"configs":{"itemId":"store","autoLoad":"true","url":"m?xwl=xc/ar/ct/data/selectValueset"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".245","itemId":"td_1_4","border":"false"},"children":[{"configs":{"labelWidth":"80","displayField":"CONTRACT_TYPE_NAME","valueField":"CONTRACT_TYPE_ID","labelAlign":"right","itemId":"QUERY_AR_CONTRACT_TYPE","fieldLabel":"{#AR_CONTRACT_TYPE#}"},"events":{"select":"app.queryBtn.fireEvent('click');","specialkey":"if(e.getKey()===13) {\n  app.queryBtn.fireEvent('click');\n}"},"children":[{"configs":{"itemId":"store","autoLoad":"true","url":"m?xwl=xc/ar/ct/data/selectPoContractType"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"layout":"column","margin":"10 0 0 0","itemId":"tr2","border":"false"},"children":[{"configs":{"layout":"form","columnWidth":".245","itemId":"td_2_1","border":"false"},"children":[{"configs":{"labelWidth":"80","displayField":"VAL_NAME","valueField":"VAL_CODE","labelAlign":"right","itemId":"SYS_STATUS","fieldLabel":"{#SYS_STATUS#}"},"events":{"select":"app.queryBtn.fireEvent('click');","specialkey":"if(e.getKey()===13) {\n  app.queryBtn.fireEvent('click');\n}"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/ar/ct/data/selectContractStatus"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".245","itemId":"td_2_2","border":"false"},"children":[{"configs":{"labelWidth":"80","value":"ALL","labelAlign":"right","pickList":"[\n  ['ALL','{#all#}'],\n  ['A','{#A_STATUS#}'],\n  ['C','{#C_STATUS#}'],\n  ['D','{#D_STATUS#}'],\n  ['E','{#E_STATUS#}'],\n  ['R','{#R_STATUS#}']\n]","itemId":"QUERY_STATUS","fieldLabel":"{#STATUS#}"},"events":{"select":"app.queryBtn.fireEvent('click');","specialkey":"if(e.getKey()===13) {\n  app.queryBtn.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".245","itemId":"td_2_3","border":"false"},"children":[{"configs":{"labelWidth":"80","labelAlign":"right","format":"Y-m-d","itemId":"QUERY_START_DATE","fieldLabel":"{#SIGN_DATE#}"},"events":{"select":"app.queryBtn.fireEvent('click');","specialkey":"if(e.getKey()===13) {\n  app.queryBtn.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"date"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".245","itemId":"td_2_4","border":"false"},"children":[{"configs":{"labelWidth":"80","labelAlign":"right","itemId":"QUERY_END_DATE","fieldLabel":"{#TO#}"},"events":{"select":"app.queryBtn.fireEvent('click');","specialkey":"if(e.getKey()===13) {\n  app.queryBtn.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"date"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"layout":"column","margin":"10 0 10 0","border":"false","itemId":"tr3"},"children":[{"configs":{"layout":"column","columnWidth":".33","border":"false","itemId":"td3_3"},"children":[{"configs":{"labelWidth":"80","hidden":"true","boxLabelAlign":"before","margin":"0 20 0 20","labelAlign":"right","itemId":"QUERY_IS_CLOSE1","boxLabel":"{#isClose#}："},"events":{"change":"app.queryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"check"},{"configs":{"labelWidth":"80","value":"N","pickList":"[['Y','{#Y#}'],['N','{#N#}']]","labelAlign":"right","itemId":"QUERY_IS_CLOSE","fieldLabel":"{#isClose#}"},"events":{"select":"app.queryBtn.fireEvent('click');","specialkey":"if(Ext.EventObject.getKey()==13){\n  app.queryBtn.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"combo"},{"configs":{"text":"{#queryBtn#}","itemId":"queryBtn","iconCls":"seek_icon"},"events":{"click":"app.grid1.store.load({params : Wb.getValue(app.queryForm)});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#clearBtn#}","itemId":"clearBtn","iconCls":"refresh_icon"},"events":{"click":"app.queryForm.getForm().reset();\napp.queryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","selType":"checkboxmodel","itemId":"grid1"},"events":{"itemdblclick":"app.updateBtn.fireEvent('click');"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#addBtn#}","itemId":"addBtn","iconCls":"file_add_icon"},"events":{"click":"app.form1.getForm().reset();\napp.lookTab.setActiveTab(app.tab01);\nvar uid = Xip.getId();\napp.AR_CONTRACT_ID.setValue(uid);\n\napp.optype.setValue(\"add\");\napp.isWin.setValue(\"Y\"); //\napp.orgInitStore.load();\napp.addEditewin.show();\n//为窗口设值\napp.ORG_NAME.ORG_ID.setValue(app.ORG_XWL.ORG_ID.getValue());\napp.ORG_NAME.ORG_NAME.setValue(app.ORG_XWL.ORG_NAME.getValue());\napp.LEDGER_ID.setValue(app.ORG_XWL.LEDGER_ID.getValue());\nsetQueryCondition(app.ORG_XWL.LEDGER_ID.getValue());\nsetDeptInfo(app.ORG_XWL.ORG_ID.getValue());\napp.AUDIT_STATUS.setValue('A');\napp.AUDIT_STATUS_DESC.setValue('{#A_STATUS#}');\napp.SYS_AUDIT_STATUS_DESC.setValue('{#SYS_A_STATUS#}');\napp.addEditewin.setTitle('{#addTitle#}');"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#updateBtn#}","itemId":"updateBtn","iconCls":"file_edit_icon"},"events":{"click":"var curGrid = app.grid1;\napp.lookTab.setActiveTab(app.tab01);\nvar recs = curGrid.getSelection();\nif (recs.length > 1 || recs.length === 0) {//大于一条或没选择会警告\n    Wb.toast('{#editMsg1#}');\n    return;\n}\nWb.request({\n\turl : 'm?xwl=xc/ar/ct/data/selectById',\n    params : {AR_CONTRACT_ID : recs[0].data.AR_CONTRACT_ID},\n    success : function(resp){\n        var r = Wb.decode(resp.responseText).rows[0];\n        app.addEditewin.setTitle('{#editTitle#}');\n        app.optype.setValue(\"edit\");\n        app.isWin.setValue(\"Y\"); //\n        setQueryCondition(recs[0].data.LEDGER_ID);\n        r.START_DATE = Wb.strToDate(r.START_DATE);\n        r.END_DATE = Wb.strToDate(r.END_DATE);\n        Wb.setValue(app.addEditewin, r);\n        app.addEditewin.show();\n        //判断合同是否被引用，引用的话不能修改某些项\n        Wb.request({\n            url: 'm?xwl=xc/ar/ct/data/mxExist',\n            params:{AR_CONTRACT_ID : recs[0].data.AR_CONTRACT_ID},\n            async: false,\n            method: 'POST',\n            success:function(response){\n                var rep = Wb.decode(response.responseText);\n                setSomeReadOnly(true);\n                if(rep.NUM > 0){\n                    setAllReadOnly(true);\n                    app.DESCRIPTION.setReadOnly(false);\n                    app.CONTRACT_USER.EMP_NAME.setReadOnly(false);\n                }\n                else{\n                    //审批通过设为只读（不可撤回）\n                    if(r.AUDIT_STATUS == 'E'){\n                        setAllReadOnly(true);\n                        setBtnDisabled(true);\n                    }\n                    //审批通过设为只读（可撤回）\n                    if(r.AUDIT_STATUS == 'C'){\n                        setAllReadOnly(true);\n                    }\n                }\n            }\n        });\n        tableValue = Wb.encode(Wb.getValue(app.form1));\n    }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#delBtn#}","itemId":"delBtn","iconCls":"file_delete_icon"},"events":{"click":"var rows=app.grid1.getSelectionModel().getSelection();\nif(rows.length===0){\n    Wb.toast('{#deleteMsg1#}');\n    return;\n}\nvar deleteArray = [] ;\nfor(var i = 0;i < rows.length;i++){\n    if(rows[i].data.AUDIT_STATUS == 'A' || rows[i].data.AUDIT_STATUS === null || rows[i].data.AUDIT_STATUS === ''){\n        var deleteData =  {'id' : rows[i].data.AR_CONTRACT_ID};\n        deleteArray.push(deleteData);\n    }\n}\nif(deleteArray.length === 0){\n    Wb.toast('{#deleteMsg4#}');\n}\nelse{\n    Ext.Msg.confirm('{#prompt#}','{#deleteMsg2#}',function(a){\n        if(a=='yes'){\n            Wb.request({\n                url : '{#contextPath#}'+'/arContractAction.do?method=delContractInfo',\n                params : {'ids':deleteArray},\n                success :function(resp){\n                    var rec = Wb.decode(resp.responseText);\n                    if(rec.flag=='0'){\n                        Wb.toast('{#deleteMsg3#}');\n                        Wb.remove(app.grid1,rows);\n                    }else if(rec.flag=='1'){\n                        Wb.toast(rec.msg);\n                    }\n                }\n            });\n        }else{\n          return false ;\n        }\n    });\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#lookBtn#}","itemId":"lookBtn","iconCls":"seek_icon"},"events":{"click":"var curGrid = app.grid1;\napp.lookTab.setActiveTab(app.tab01);\nvar recs = curGrid.getSelection();\nif (recs.length > 1 || recs.length === 0) {//大于一条或没选择会警告\n    Wb.toast('{#lookRec#}');\n    return;\n}\nWb.request({\n\turl : 'm?xwl=xc/ar/ct/data/selectById',\n    params : {AR_CONTRACT_ID : recs[0].data.AR_CONTRACT_ID},\n    success : function(resp){\n        var r = Wb.decode(resp.responseText).rows[0];\n        app.addEditewin.show();\n        app.addEditewin.setTitle('{#lookTitle#}');\n        setAllReadOnly(true);\n        setSomeReadOnly(true);\n        setBtnDisabled(true);\n        r.START_DATE = Wb.strToDate(r.START_DATE);\n        r.END_DATE = Wb.strToDate(r.END_DATE);\n        Wb.setValue(app.addEditewin, r);\n    }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#changeBtn#}","itemId":"changeBtn"},"events":{"click":"var curGrid = app.grid1;\napp.lookTab.setActiveTab(app.tab01);\nvar recs = curGrid.getSelection();\nif (recs.length > 1 || recs.length === 0) {//大于一条或没选择会警告\n    Wb.toast('{#changeRec#}');\n    return;\n}\nif(recs[0].data.AUDIT_STATUS !== 'E'){\n    Wb.toast('{#changeRec1#}');\n    return;\n}\nif(recs[0].data.IS_CLOSE !== 'N'){\n    Wb.toast('{#changeRec4#}');\n    return;\n}\nvar url = null;\nvar params = null;\nWb.request({\n    url : 'm?xwl=xc/ar/ct/data/selectContractHisById',\n    params : {AR_CONTRACT_ID : recs[0].data.AR_CONTRACT_ID},\n    success : function(resps){\n        var rep = Wb.decode(resps.responseText);\n        var r = rep.rows[0];\n        //最新的变更版本没有审批通过不能进行变更\n        if(rep.total > 0 && r.AUDIT_STATUS !== 'E'){\n            url = 'm?xwl=xc/ar/ct/data/selectContractHisByHisId';\n            params = {AR_CONTRACT_HIS_ID : r.AR_CONTRACT_HIS_ID};\n            setChangeValue();\n        }\n        else{\n            url = 'm?xwl=xc/ar/ct/data/selectById';\n            params = {AR_CONTRACT_ID : recs[0].data.AR_CONTRACT_ID};\n            setChangeValue();\n        }\n    }  \n});\nfunction setChangeValue(){\n    Wb.request({\n        url : url,\n        params : params,\n        success : function(resp){\n            var r = Wb.decode(resp.responseText).rows[0];\n            app.addEditewin.setTitle('{#changeTitle#}');\n            app.optype.setValue(\"change\");\n            app.isWin.setValue(\"Y\");\n            setQueryCondition(recs[0].data.LEDGER_ID);\n            r.START_DATE = Wb.strToDate(r.START_DATE);\n            r.END_DATE = Wb.strToDate(r.END_DATE);\n            setSomeReadOnly(true);\n            Wb.setValue(app.addEditewin, r);\n            app.addEditewin.show();\n            if(r.AUDIT_STATUS == 'E'){\n                app.AUDIT_STATUS.setValue('A');\n                app.AUDIT_STATUS_DESC.setValue('{#A_STATUS#}');\n                app.SYS_AUDIT_STATUS.setValue('A');\n                app.SYS_AUDIT_STATUS_DESC.setValue('{#SYS_A_STATUS#}');\n                app.AR_CONTRACT_HIS_ID.setValue(Xip.getId());\n                app.INS_CODE.setValue(null);\n            }\n            //审批中设为只读（可撤回）\n            if(r.AUDIT_STATUS == 'C'){\n                setAllReadOnly(true);\n            }\n            tableValue = Wb.encode(Wb.getValue(app.form1));\n            app.changeText.setValue(\"change\");//为了区别提交流程的时候窗口的差别\n        }\n    });\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#historyBtn#}","itemId":"historyBtn"},"events":{"click":"var curGrid = app.grid1;\napp.lookTab.setActiveTab(app.tab01);\nvar recs = curGrid.getSelection();\nif (recs.length > 1 || recs.length === 0) {//大于一条或没选择会警告\n    Wb.toast('{#historyRec1#}');\n    return;\n}\napp.historyGrid.store.load({params : {AR_CONTRACT_ID : recs[0].data.AR_CONTRACT_ID}});\napp.historyWin.show();\napp.historyWin.setTitle('{#historyTitle#}');"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#mx#}","itemId":"mxBtn","iconCls":"seek_icon"},"events":{"click":"var rows = app.grid1.getSelection();\nif (rows.length != 1) {\n    Wb.toast('{#editMsg1#}');\n    return;\n} else {\n    var vid = rows[0].data.AR_CONTRACT_ID; \n    app.AR_CONTRACT_CODE_MX.setValue(rows[0].data.AR_CONTRACT_CODE); \n    app.AR_CONTRACT_NAME_MX.setValue(rows[0].data.AR_CONTRACT_NAME);   \n    app.CUSTOMER_NAME.setValue(rows[0].data.CUSTOMER_NAME);\n    app.AMOUNT_MX.setValue(rows[0].data.INV_AMOUNT); \n    app.START_DATE_MX.setValue(rows[0].data.START_DATE); \n\tapp.END_DATE_MX.setValue(rows[0].data.END_DATE); \n    app.mxWin.show();\n    app.AR_CONTRACT_ID_TXT.setValue(vid); //设置ID\n    app.mxGrid.store.load({params:{'AR_CONTRACT_ID':vid}});\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#close#}","itemId":"closeBtn","iconCls":"cancel_icon"},"events":{"click":"var rows=app.grid1.getSelectionModel().getSelection();\nif(rows.length===0){\n    Wb.toast('{#closeMsg1#}');\n    return;\n}\nelse{\n    var idList = \"\" ;\n    Ext.each(rows,function(r){\n        if(r.data.IS_CLOSE == 'N'){\n            var id = \"'\" + r.data.AR_CONTRACT_ID + \"'\";\n            if(idList === \"\"){\n                idList = id ;\n            }else{\n                idList = idList+\",\"+id ;\n            }\n        }\n    });\n    if(idList === null || idList === ''){\n        Wb.toast('{#closeMsg5#}');\n        return;\n    }\n    var json = {'ids' : idList} ;\n    Wb.request({\n        url:'m?xwl=xc/ar/ct/data/checkIfUse',\n        params:json,\n        success:function(resp){\n            var rec = Wb.decode(resp.responseText);\n            if(rec.total !== 0){\n                Wb.toast('{#closeMsg4#}');\n            }else{\n                Ext.Msg.confirm('{#prompt#}','{#closeMsg2#}',function(a){\n                    if(a=='yes'){\n                        Wb.request({\n                            url : 'm?xwl=xc/ar/ct/data/close',\n                            params : json,\n                            success :function(response){\n                                Wb.toast('{#closeMsg3#}');\n                                app.queryBtn.fireEvent(\"click\");\n                            }\n                        });\n                    }else{\n                        return false ;\n                    }\n                });\n            }\n        }\n    });\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#reopen#}","itemId":"openBtn","iconCls":"accept_icon"},"events":{"click":"var rows=app.grid1.getSelectionModel().getSelection();\nif(rows.length===0){\n    Wb.toast('{#openMsg1#}');\n    return;\n}\nelse{\n    var idList = \"\" ;\n    Ext.each(rows,function(r){\n        if(r.data.IS_CLOSE == 'Y'){\n            var id = \"'\" + r.data.AR_CONTRACT_ID + \"'\";\n            if(idList === \"\"){\n                idList = id ;\n            }else{\n                idList = idList+\",\"+id ;\n            }\n        }\n    });\n    if(idList === null || idList === ''){\n        Wb.toast('{#openMsg4#}');\n        return;\n    }\n    var json = {'ids' : idList} ;\n    Ext.Msg.confirm('{#prompt#}','{#openMsg2#}',function(a){\n        if(a=='yes'){\n            Wb.request({\n                url : 'm?xwl=xc/ar/ct/data/open',\n                params : json,\n                success :function(response){\n                    Wb.toast('{#openMsg3#}');\n                    app.queryBtn.fireEvent(\"click\");\n                }\n            });\n        }else{\n            return false ;\n        }\n    });\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#submitButton#}","itemId":"submitButton","iconCls":"check_icon"},"events":{"click":"var rows = app.grid1.getSelection();//获得选中数据\nif (rows.length > 1 || rows.length === 0) {//大于一条或没选择会警告\n    Wb.toast('{#submitRec#}');\n\treturn;\n}\nelse {\n    Wb.request({\n        url : '{#contextPath#}' + '/arInvoiceAction.do?method=getArInvoiceProcAndForms',\n        params : {LEDGER_ID : rows[0].data.LEDGER_ID,AR_DOC_CAT_CODE : 'XSHT'},\n        success : function(resp){\n            var temp = Wb.decode(resp.responseText);\n            if(temp.flag === '0'){\n                //取得流程编码、电脑端审批表单和移动端审批表单\n                var processCODE = temp.PROCESS_CODE;\n                var pcApproveForm = temp.PC_A_FORM_URL;\n                var mobileApproveForm = temp.M_A_FORM_URL;\n                var orgId = temp.ORG_ID;\n                //电脑端和移动端审批表单为变量需要设置为全路径\n                pcApproveForm = '{#appIP#}' +  '/' + pcApproveForm;\n                mobileApproveForm = '{#appIP#}' +  mobileApproveForm;\n                //如果流程编码存在, 则提交流程审批处理\n                if(processCODE !== \"\" && processCODE !== null && processCODE !== undefined){\n                    //如果项目未指定，则设置默认值为 \"-1\"\n                    var prjId = rows[0].data.PROJECT_ID;\n                    if(prjId === null || prjId === \"\" || prjId === undefined){\n                        prjId = \"-1\" ;\n                    }\n                    var auditStatus = rows[0].data.AUDIT_STATUS;\n                    var json = {\n                        'APP_IP'\t\t\t: '{#appIP#}',\n                        'EMP_ID'\t\t\t: '{#XIP.empId#}',\n                        'loginName'\t\t\t: '{#XIP.userName#}',\n                        'arCatCode'\t\t\t: 'XSHT',\n                        'M_A_FORM'\t\t\t: mobileApproveForm,\n                        'PC_A_FORM'\t\t\t: pcApproveForm,\n                        'PROJECT_ID'\t\t: prjId,\n                        'ORG_ID'\t\t\t: orgId,\n                        'billType'\t\t\t: 'XSHT',\n                        'DEPT_ID'\t\t\t: rows[0].data.DEPT_ID,\n                        'DEPT_NAME'\t\t\t: rows[0].data.DEPT_NAME,\n                        'ledgerId'\t\t\t: rows[0].data.LEDGER_ID,\n                        'AMT'\t\t\t\t: rows[0].data.INV_AMOUNT,\n                        'ABSAMT'\t\t\t: Math.abs(rows[0].data.INV_AMOUNT),//金额绝对值\n                        'e_business_id'\t\t: rows[0].data.AR_CONTRACT_ID\n                    };\n                    if(auditStatus === 'A'){//起草状态\n                        XipWf.startAndSubmitByProcess(processCODE,json,function(e){//提交流程\n                            if(e.flag === 0){\n                                app.queryBtn.fireEvent('click');\n                                Wb.toast('{#successSubmit#}');\n                            }\n                            else if(e.flag === 1){\n                                Wb.toast(e.msg) ;\n                            }\n                        });\n                    }\n                    else if(auditStatus === 'D'){//驳回状态\n                        XipWf.submitInstance(rows[0].data.INS_CODE,json,function(e){//提交流程\n                          if(e.flag === 0){\n                              app.queryBtn.fireEvent('click');\n                              Wb.toast('{#successSubmit#}');\n                          }\n                          else if(e.flag === 1){\n                              Wb.toast(e.msg) ;\n                          }\n                        });\n                    }\n                    else if(auditStatus === 'R'){//撤回状态\n                        XipWf.restartAndSubmitByProcess(rows[0].data.INS_CODE,processCODE,json,function(e){//提交流程\n                            if(e.flag === 0){\n                                app.queryBtn.fireEvent('click');\n                                Wb.toast('{#successSubmit#}');\n                            }\n                            else if(e.flag === 1){\n                                Wb.toast(e.msg) ;\n                            }\n                        });\n                    }\n                    else if(auditStatus === 'E' || auditStatus === 'C'){//运行中、结束状态\n                        Wb.toast('{#submitWarn#}');\n                        return false;\n                    }\n                    else{\n                        Wb.toast('{#submitWarns#}');\n                        return false;\n                    }\n                }\n            }\n            else{\n                Wb.toast(temp.msg);\n            }\n        }\n    });\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#withdrawBtn#}","itemId":"withdrawBtn","iconCls":"cancel_icon"},"events":{"click":"var rows = app.grid1.getSelection();\nif(rows.length != 1){\n    Wb.toast('{#withdrawRec#}');\n\treturn;\n}\nif(rows[0].data.INS_CODE === null || rows[0].data.INS_CODE === '') {\n    Wb.toast('{#withdrawWarn1#}');\n\treturn;\n}\nelse if(rows[0].data.AUDIT_STATUS === 'E') {\n    Wb.toast('{#withdrawWarn3#}');\n\treturn;\n}\nelse if(rows[0].data.AUDIT_STATUS === 'R'){\n    Wb.toast('{#withdrawWarn4#}');\n    return false;\n}\nelse if(rows[0].data.AUDIT_STATUS === 'D'){\n\tWb.toast('{#withdrawWarn5#}');\n    return false;\n}\nelse {\n    Wb.confirm('{#confirm1#} ' + rows.length + ' {#confirms#}', function() {\n        //撤回流程\n        XipWf.revokeByInstance(rows[0].data.INS_CODE,function(e){\n            Wb.toast(e.msg);\n            app.queryBtn.fireEvent('click');\n        });\n    });\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#monitorBtn#}","itemId":"monitorBtn","iconCls":"viewport_icon"},"events":{"click":"var rows = app.grid1.getSelection();\nif (rows.length > 1 || rows.length === 0) {\n    Wb.toast('{#monitorRec#}');\n    return;\n}\nif(rows[0].data.INS_CODE === null || rows[0].data.INS_CODE === ''){\n    Wb.toast('{#monitorWarn#}');\n    return;\n}\nelse{\n    XipWf.showMonitorPage(rows[0].data.INS_CODE);\n}   "},"children":[],"expanded":false,"type":"button"}],"expanded":false,"type":"toolbar"},{"configs":{"itemId":"store","url":"m?xwl=xc/ar/ct/data/select"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#ORDERBY#}","width":"50","xtype":"rownumberer","align":"center","titleAlign":"center","itemId":"ORDERBY"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#LEDGER_NAME#}","hidden":"true","width":"150","dataIndex":"LEDGER_NAME","titleAlign":"center","itemId":"LEDGER_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#AR_CONTRACT_CODE#}","width":"150","dataIndex":"AR_CONTRACT_CODE","titleAlign":"center","itemId":"AR_CONTRACT_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#AR_CONTRACT_NAME#}","width":"160","dataIndex":"AR_CONTRACT_NAME","titleAlign":"center","itemId":"AR_CONTRACT_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#CUSTOMER_NAME#}","width":"200","dataIndex":"CUSTOMER_NAME","titleAlign":"center","itemId":"CUSTOMER_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#DEPT_NAME#}","width":"150","dataIndex":"DEPT_NAME","titleAlign":"center","itemId":"DEPT_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#PROJECT_NAME#}","width":"150","dataIndex":"PROJECT_NAME","titleAlign":"center","itemId":"PROJECT_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#AR_CONTRACT_PRO#}","width":"150","dataIndex":"AR_CONTRACT_TYPE_NAME","titleAlign":"center","itemId":"AR_CONTRACT_TYPE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#AR_CONTRACT_TYPE#}","width":"150","dataIndex":"CONTRACT_TYPE_NAME","titleAlign":"center","itemId":"AR_CONTRACT_TYPE_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#STATUS#}","hidden":"true","width":"150","dataIndex":"AUDIT_STATUS_DESC","titleAlign":"center","itemId":"AUDIT_STATUS_DESC_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#SYS_STATUS#}","width":"150","dataIndex":"SYS_AUDIT_STATUS_DESC","titleAlign":"center","itemId":"SYS_AUDIT_STATUS_DESC_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#AMOUNT#}","align":"right","width":"120","dataIndex":"AMOUNT","titleAlign":"center","format":"0,000.00","itemId":"AMOUNT_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#TAX_AMT#}","align":"right","width":"120","dataIndex":"TAX_AMT","titleAlign":"center","format":"0,000.00","itemId":"TAX_AMT_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#INV_AMOUNT#}","align":"right","width":"120","dataIndex":"INV_AMOUNT","titleAlign":"center","format":"0,000.00","itemId":"INV_AMOUNT_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#START_DATE#}","width":"100","dataIndex":"START_DATE","titleAlign":"center","itemId":"START_DATE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#END_DATE#}","width":"100","dataIndex":"END_DATE","titleAlign":"center","itemId":"END_DATE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#isClose#}","width":"80","dataIndex":"IS_CLOSE","titleAlign":"center","itemId":"IS_CLOSE_COL","renderer":"if(value==\"Y\"){\n  return '{#Y#}';\n}else{\n  return '{#N#}';\n}\n  "},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#ORG_NAME#}","hidden":"true","width":"100","dataIndex":"ORG_NAME","titleAlign":"center","itemId":"ORG_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#DESCRIPTION#}","width":"200","dataIndex":"DESCRIPTION","titleAlign":"center","itemId":"DESCRIPTION_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#principal#}","width":"100","dataIndex":"EMP_NAME","titleAlign":"center","itemId":"EMP_NAME_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":false,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}