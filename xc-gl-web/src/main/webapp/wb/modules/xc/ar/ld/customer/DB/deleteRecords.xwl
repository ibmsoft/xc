{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"com.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/ar/ld/customer/XC_GL_LD_CUSTOMERS\");","loginRequired":"false","serverScript":"//验证是否可以删除，合同和应付使用后不可以删除\nvar deleteRecords = Wb.decode(request.getParameter('deleteRecords'));\n\nWb.each(deleteRecords,function(rec){\n  //验证应收单是否使用\n  app.run('SELECT 1 FROM XC_AR_INV_GL_H A WHERE A.LEDGER_ID=\\''+rec.LEDGER_ID+'\\' AND A.CUSTOMER_ID=\\''+rec.CUSTOMER_ID+'\\'',\n          {errorText:rec.VAL_NAME+'{#MSG3#}'}\n         );\n\n  //验证发票是否使用\n  app.run('SELECT 1 FROM XC_AR_INVOICE_H A WHERE A.LEDGER_ID=\\''+rec.LEDGER_ID+'\\' AND A.CUSTOMER_ID=\\''+rec.CUSTOMER_ID+'\\'',\n          {errorText:rec.VAL_NAME+'{#MSG3#}'}\n         );\n    //验证收款单是否使用\n   app.run('SELECT 1 FROM XC_AR_PAY_H A WHERE A.LEDGER_ID=\\''+rec.LEDGER_ID+'\\' AND A.CUSTOMER_ID=\\''+rec.CUSTOMER_ID+'\\'',\n          {errorText:rec.VAL_NAME+'{#MSG3#}'}\n         );\n  \n   app.run('SELECT 1 FROM XC_AR_CONTRACT A WHERE A.LEDGER_ID=\\''+rec.LEDGER_ID+'\\' AND A.CUSTOMER_ID=\\''+rec.CUSTOMER_ID+'\\'',\n          {errorText:rec.VAL_NAME+'{#MSG3#}'}\n         );\n});\n\n","itemId":"module"},"children":[{"configs":{"sql":"delete from {#ld_seg#}\nwhere {#ld_seg_id#} = {?id?}","arrayName":"ids","itemId":"query1"},"children":[],"expanded":false,"type":"query"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}