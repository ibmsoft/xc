{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/ar/inv/json/LOV_XC_AR_INVOICE\");","itemId":"module"},"events":{"initialize":"Ext.apply(app, {\n    initWin: function(params) {\n        Ext.apply(app, params);\n        app.lovWinN = new Ext.window.Window(app.lovWinN);\n        app.AR_INV_H_ID.setValue(params.AR_INV_H_ID);\n        app.LEDGER_ID.setValue(params.LEDGER_ID);\n        app.AR_DOC_CAT_CODE.setValue(params.AR_DOC_CAT_CODE);\n        app.CUSTOMER_ID.setValue(params.CUSTOMER_ID);\n        app.AR_CONTRACT_ID.setValue(params.AR_CONTRACT_ID);\n        app.lovWinN.show();\n        app.grid1.getStore().load();\n    }\n});"},"children":[{"configs":{"maximized":"true","layout":"border","itemId":"lovWinN"},"events":{"close":"var store = app.grid1.getStore();\nvar cancelAmount = 0;\nfor(var i = 0;i < store.getCount();i++){\n\tcancelAmount = cancelAmount + store.getAt(i).get('CANCEL_AMT');\n}\napp.hideFun(cancelAmount);"},"children":[{"configs":{"region":"north","hidden":"true","itemId":"form1"},"children":[{"configs":{"hidden":"true","itemId":"LEDGER_ID","fieldLabel":"账簿ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"CUSTOMER_ID","fieldLabel":"客户ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"AR_CONTRACT_ID","fieldLabel":"合同ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"AR_INV_H_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"AR_DOC_CAT_CODE"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"form"},{"configs":{"region":"center","selType":"checkboxmodel","itemId":"grid1"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/ar/inv/LOV/DB/XC_AR_INV_PRE_SELECT"},"events":{"beforeload":"operation.params = Wb.getValue(app.form1);"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#selectPayBtn#}","itemId":"selectPayBtn","iconCls":"add_icon"},"events":{"click":"var ar_inv_h_id = app.AR_INV_H_ID.getValue();\nvar ledger_id = app.LEDGER_ID.getValue();\nvar ar_doc_cat_code = app.AR_DOC_CAT_CODE.getValue();\nvar ar_customer_id = app.CUSTOMER_ID.getValue();\nvar contract_id = app.AR_CONTRACT_ID.getValue();\nvar curGrid = app.grid1;\nWb.run({\n    url: 'm?xwl=xc/ar/inv/LOV/LOV_XC_AR_PAY_H', \n    success: function(app) {\n        app.initWin({\n            AR_INV_H_ID : ar_inv_h_id,\n            LEDGER_ID : ledger_id, \n            AR_DOC_CAT_CODE : ar_doc_cat_code,\n            CUSTOMER_ID : ar_customer_id,\n            AR_CONTRACT_ID : contract_id,\n            curData : curGrid.getStore(),\n            hideFun:function(){   \n                Wb.reload(curGrid.getStore());\n            }\n        });\n    }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#delBtn#}","itemId":"delBtn","iconCls":"file_delete_icon"},"events":{"click":"var recs = app.grid1.getSelection();\nif (!recs.length) {\n    Wb.warn('{#deleteRec#}');\n    return;\n}\nWb.confirm('{#confirm1#} ' + recs.length + ' {#confirm3#}', function() {\n    Wb.request({\n        url: 'm?xwl=xc/ar/inv/DB/XC_AR_INV_PRE_DELETE',\n        params: Wb.apply({destroy: Wb.getData(recs)}),\n        success: function() {\n            Wb.remove(app.grid1, recs);\n        }\n    });\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#closeBtn#}","itemId":"closeBtn","iconCls":"delete_icon"},"events":{"click":"app.lovWinN.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#order#}","align":"center","xtype":"rownumberer","width":"50","titleAlign":"center","itemId":"ORDERBY"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#GL_DATE#}","hidden":"true","width":"100","dataIndex":"GL_DATE","titleAlign":"center","itemId":"GL_DATE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#DESCRIPTION#}","width":"200","dataIndex":"DESCRIPTION","titleAlign":"center","itemId":"DESCRIPTION_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"AP_PAY_H_ID","hidden":"true","width":"100","dataIndex":"AP_PAY_H_ID","titleAlign":"center","itemId":"AR_PAY_H_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#AMOUNT#}","hidden":"true","align":"right","width":"100","dataIndex":"AMOUNT","format":"0,000.00","titleAlign":"right","itemId":"AMOUNT_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#NO_CANCEL_AMT#}","align":"right","width":"100","dataIndex":"NO_CANCEL_AMT","format":"0,000.00","titleAlign":"center","itemId":"NO_CANCEL_AMT_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#CANCEL_AMT#}","align":"right","width":"100","dataIndex":"CANCEL_AMT","format":"0,000.00","titleAlign":"center","itemId":"CANCEL_AMT_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#DEPT_NAME#}","width":"150","dataIndex":"DEPT_NAME","titleAlign":"center","itemId":"DEPT_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#PROJECT_NAME#}","width":"150","dataIndex":"PROJECT_NAME","titleAlign":"center","itemId":"PROJECT_NAME_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"window"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}