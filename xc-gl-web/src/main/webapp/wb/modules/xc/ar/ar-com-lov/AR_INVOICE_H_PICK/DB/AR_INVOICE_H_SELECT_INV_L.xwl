{"inframe":false,"title":"销售发票蓝单查询","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"var sql, data = app.get();\nsql = ' where 1=1 ';\nsql += ' and LEDGER_ID = {?QUERY_LEDGER_ID?}';\nif (!Wb.isEmpty(data.QUERY_AR_DOC_CAT_CODE)) {\n    sql += ' and AR_DOC_CAT_CODE={?QUERY_AR_DOC_CAT_CODE?}';\n}\nif (!Wb.isEmpty(data.QUERY_CUSTOMER_ID)) {\n    sql += ' and CUSTOMER_ID={?QUERY_CUSTOMER_ID?}';\n}\nrequest.setAttribute('sql', sql);","itemId":"module"},"children":[{"configs":{"sql":"SELECT * FROM (\n  SELECT\n    arih.*,\n    (SELECT ardc.AR_CAT_NAME FROM xc_ar_doc_cats ardc WHERE arih.AR_DOC_CAT_CODE = ardc.AR_CAT_CODE) AR_CAT_NAME,\n    (SELECT pp.PROJECT_NAME FROM xc_pm_projects pp WHERE arih.PROJECT_ID = pp.PROJECT_ID) PROJECT_NAME,\n    (SELECT pd.DEPT_NAME FROM xip_pub_depts pd WHERE arih.DEPT_ID = pd.DEPT_ID ) DEPT_NAME,\n    (SELECT gl.LEDGER_NAME FROM xc_gl_ledgers gl WHERE arih.LEDGER_ID = gl.LEDGER_ID) LEDGER_NAME,\n    (SELECT arcu.CUSTOMER_NAME FROM xc_ar_customers arcu WHERE arih.CUSTOMER_ID = arcu.CUSTOMER_ID) CUSTOMER_NAME,\n    (select arco.AR_CONTRACT_NAME FROM xc_ar_contract arco WHERE arih.AR_CONTRACT_ID = arco.AR_CONTRACT_ID) AR_CONTRACT_NAME,\n    (SELECT EMP_NAME FROM xip_pub_emps WHERE EMP_ID=(SELECT EMP_ID FROM xip_pub_users b WHERE b.USER_ID = arih.FIN_USER_ID)) FIN_USER_NAME,\n    (SELECT EMP_NAME FROM xip_pub_emps WHERE EMP_ID=(SELECT EMP_ID FROM xip_pub_users b WHERE b.USER_ID = arih.PRINT_USER_ID)) PRINT_USER_NAME,\n    (SELECT EMP_NAME FROM xip_pub_emps WHERE EMP_ID=(SELECT EMP_ID FROM xip_pub_users b WHERE b.USER_ID = arih.CREATED_BY)) CREATED_BY_NAME,\n    aigh.NO_PAY_AMT\n  FROM\n    xc_ar_invoice_h arih,\n    xc_ar_inv_gl_h aigh\n  WHERE arih.AR_INV_H_ID = aigh.AR_INV_H_ID AND arih.FIN_USER_ID IS NOT NULL and aigh.V_STATUS >= 3 AND aigh.NO_PAY_AMT > 0 AND arih.PRINT_STATUS<>'2'\n) t\n  {#sql#}\nand (AR_INV_H_CODE like '%{#QUERY_CODE_NAME#}' or DESCRIPTION like '%{#QUERY_CODE_NAME#}')\n  ORDER BY t.AR_INV_H_CODE DESC","itemId":"dataprovider1"},"children":[],"expanded":false,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}