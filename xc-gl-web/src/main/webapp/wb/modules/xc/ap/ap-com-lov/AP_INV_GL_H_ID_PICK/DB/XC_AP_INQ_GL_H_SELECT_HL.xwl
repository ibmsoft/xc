{"inframe":false,"title":"应付款单查询","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"var sql = '';\nvar data = app.get();\nvar cancel_type = app.get('QUERY_CANCEL_TYPE');\n\n// sql = ' where 1=1 and V_STATUS>=\\'3\\' and NO_PAY_AMT<>0 ';\n\n// sql+=' and LEDGER_ID={?QUERY_LEDGER_ID?}';\n\n// sql+=' and VENDOR_ID={?QUERY_VENDOR_ID?}';\n\nif (!Wb.isEmpty(data.QUERY_AP_DOC_CAT_CODE)) {\n  sql+=' and AP_DOC_CAT_CODE={?QUERY_AP_DOC_CAT_CODE?}';\n}\nif(cancel_type == 'YFHYUF'){//应付核预付（查询所有应付单）\n  sql += '';\n}else if(cancel_type == 'YFHLDC'){//应付红蓝对冲（查询应付单-红字）\n  sql += \" AND AP_DOC_CAT_CODE = 'YFD-H'\";\n}else if(cancel_type == 'YFHYS'){\n  sql += \" AND AP_DOC_CAT_CODE = 'YFD'\";\n}\nrequest.setAttribute('sql', sql);","itemId":"module"},"children":[{"configs":{"autoPage":"false","sql":"select \n\th.AP_INV_GL_H_ID,\n    h.AP_INV_GL_H_CODE,\n    h.DESCRIPTION,\n    h.NO_PAY_AMT\nfrom \n\txc_ap_inv_gl_h h,\n\txc_gl_ledgers ledger\nwhere \n\th.LEDGER_ID = ledger.LEDGER_ID\nAND h.LEDGER_ID = {?QUERY_LEDGER_ID?}\nAND h.VENDOR_ID = {?QUERY_VENDOR_ID?}\nAND h.NO_PAY_AMT <> 0\nAND h.V_STATUS >= 3\nAND h.AP_INV_GL_H_CODE IS NOT NULL\nAND h.AP_INV_GL_H_CODE <> ''\n {#sql#}\nAND (AP_INV_GL_H_CODE like '%{#QUERY_CODE_NAME#}%' OR DESCRIPTION like '%{#QUERY_CODE_NAME#}%')\n\nORDER BY h.CREATION_DATE DESC","itemId":"dataprovider1"},"children":[],"expanded":false,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}