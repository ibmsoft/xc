{"inframe":false,"title":"付款单查询","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"var sql, data = app.get();\n// sql = ' where 1=1 and AMOUNT<>0 and AP_DOC_CAT_CODE = \\'FKD_YUFK-H\\' and V_STATUS>=\\'3\\'';\n\n// sql+=' and LEDGER_ID={?QUERY_LEDGER_ID?}';\n\n// sql+=' and VENDOR_ID={?QUERY_VENDOR_ID?}';\n\n// if (!Wb.isEmpty(data.QUERY_AP_DOC_CAT_CODE)) {\n//   sql+=' and AP_DOC_CAT_CODE={?QUERY_AP_DOC_CAT_CODE?}';\n// }\n\nrequest.setAttribute('sql', sql);","itemId":"module"},"children":[{"configs":{"autoPage":"false","sql":"SELECT\n\th.AP_PAY_H_ID,\n\th.AP_PAY_H_CODE,\n\th.DESCRIPTION,\n\tIFNULL(l.AMOUNT,0) AS AMOUNT,\n\tIFNULL(l.CANCEL_AMT,0) AS CANCEL_AMT,\n\tIFNULL(l.NO_CANCEL_AMT,0) AS NO_CANCEL_AMT\nFROM\n\txc_ap_pay_h h\n      \tLEFT JOIN xc_gl_ledgers ledger ON ledger.LEDGER_ID = h.LEDGER_ID,\n\txc_ap_pay_l l\nWHERE\n\th.AP_PAY_H_ID = l.AP_PAY_H_ID\nAND h.AP_DOC_CAT_CODE = 'FKD_YUFK-H'\nAND h.SOURCE = 'TEMP'\nAND l.NO_CANCEL_AMT < 0\nAND h.V_STATUS >= 3\nAND h.AP_PAY_H_CODE IS NOT NULL\nAND h.AP_PAY_H_CODE <> ''\nAND h.LEDGER_ID = {?QUERY_LEDGER_ID?}\nAND h.VENDOR_ID = {?QUERY_VENDOR_ID?}\nAND (h.AP_PAY_H_CODE like '%{#QUERY_CODE_NAME#}%' OR h.DESCRIPTION like '%{#QUERY_CODE_NAME#}%')\nORDER BY \n\th.CREATION_DATE DESC","itemId":"dataprovider1"},"children":[],"expanded":false,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}