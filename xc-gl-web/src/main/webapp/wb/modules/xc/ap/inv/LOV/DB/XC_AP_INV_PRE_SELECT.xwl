{"inframe":false,"title":"查询发票核销","hidden":false,"roles":{"default":1},"children":[{"configs":{"itemId":"module"},"children":[{"configs":{"oracle":"select * from (\n  select t1.*, ROWNUM as \"RN\" from (\nSELECT \n  a.*,\n  b.AP_PAY_H_CODE,\n  b.GL_DATE,\n  b.DESCRIPTION,\n  (SELECT \n    LEDGER_NAME \n  FROM\n    xc_gl_ledgers c \n  WHERE c.LEDGER_ID = b.LEDGER_ID) LEDGER_NAME,\n  (SELECT \n    VENDOR_NAME \n  FROM\n    xc_ap_vendors c \n  WHERE c.VENDOR_ID = b.VENDOR_ID) VENDOR_NAME,\n  (SELECT \n    PROJECT_NAME \n  FROM\n    xc_pm_projects c \n  WHERE c.PROJECT_ID = b.PROJECT_ID) PROJECT_NAME,\n  (SELECT \n    DEPT_NAME \n  FROM\n    xip_pub_depts c \n  WHERE c.DEPT_ID = b.DEPT_ID) DEPT_NAME,\n  (SELECT \n    AP_CONTRACT_NAME \n  FROM\n    xc_ap_contract c \n  WHERE c.AP_CONTRACT_ID = b.AP_CONTRACT_ID) AP_CONTRACT_NAME,\n  b.AMOUNT,\n((SELECT SUM(TARGET_AMT) FROM xc_ap_cancel_l c WHERE c.target_id = b.AP_PAY_H_ID)+\n    (SELECT SUM(CANCEL_AMT) FROM xc_ap_inv_pre c WHERE c.AP_PAY_H_ID = b.AP_PAY_H_ID))\n    TARGET_AMT,\n  (b.AMOUNT-(SELECT IFNULL(SUM(TARGET_AMT),0) FROM xc_ap_cancel_l c WHERE c.target_id = b.AP_PAY_H_ID)-\n   (SELECT IFNULL(SUM(CANCEL_AMT),0) FROM xc_ap_inv_pre c WHERE c.AP_PAY_H_ID = b.AP_PAY_H_ID)) NO_CANCEL_AMT\nFROM\n  xc_ap_inv_pre a,\n  xc_ap_pay_h b \nWHERE a.AP_PAY_H_ID = b.AP_PAY_H_ID and a.AP_INV_H_ID = {?AP_INV_H_ID?}\nORDER BY b.AP_PAY_H_CODE DESC\n  ) t1 where ROWNUM<={?bigint.endIndex?}\n)\nwhere RN >= {?bigint.beginIndex?}","itemId":"select","mysql":"SELECT \n  a.*,\n  b.AP_PAY_H_CODE,\n  b.GL_DATE,\n  b.DESCRIPTION,\n  (SELECT \n    LEDGER_NAME \n  FROM\n    xc_gl_ledgers c \n  WHERE c.LEDGER_ID = b.LEDGER_ID) LEDGER_NAME,\n  (SELECT \n    VENDOR_NAME \n  FROM\n    xc_ap_vendors c \n  WHERE c.VENDOR_ID = b.VENDOR_ID) VENDOR_NAME,\n  (SELECT \n    PROJECT_NAME \n  FROM\n    xc_pm_projects c \n  WHERE c.PROJECT_ID = b.PROJECT_ID) PROJECT_NAME,\n  (SELECT \n    DEPT_NAME \n  FROM\n    xip_pub_depts c \n  WHERE c.DEPT_ID = b.DEPT_ID) DEPT_NAME,\n  (SELECT  \n    AP_CONTRACT_NAME \n  FROM\n    xc_ap_contract c \n  WHERE c.AP_CONTRACT_ID = b.AP_CONTRACT_ID) AP_CONTRACT_NAME,\n  b.AMOUNT,\n((SELECT SUM(TARGET_AMT) FROM xc_ap_cancel_l c WHERE c.target_id = b.AP_PAY_H_ID)+\n    (SELECT SUM(CANCEL_AMT) FROM xc_ap_inv_pre c WHERE c.AP_PAY_H_ID = b.AP_PAY_H_ID))\n    TARGET_AMT,\n  (b.AMOUNT-(SELECT IFNULL(SUM(TARGET_AMT),0) FROM xc_ap_cancel_l c WHERE c.target_id = b.AP_PAY_H_ID)-\n   (SELECT IFNULL(SUM(CANCEL_AMT),0) FROM xc_ap_inv_pre c WHERE c.AP_PAY_H_ID = b.AP_PAY_H_ID)) NO_CANCEL_AMT\nFROM\n  xc_ap_inv_pre a,\n  xc_ap_pay_h b \nWHERE a.AP_PAY_H_ID = b.AP_PAY_H_ID    \n\tand a.AP_INV_H_ID = {?AP_INV_H_ID?} \nORDER BY b.AP_PAY_H_CODE DESC\nlimit {?bigint.start?},{?bigint.limit?}"},"children":[],"expanded":false,"type":"sqlswitcher"},{"configs":{"sql":"{#select#}","totalSql":"SELECT \n  count(*)\nFROM\n  xc_ap_inv_pre a,\n  xc_ap_pay_h b \nWHERE a.AP_PAY_H_ID = b.AP_PAY_H_ID and a.AP_INV_H_ID = {?AP_INV_H_ID?}","itemId":"dataprovider1"},"children":[],"expanded":false,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}