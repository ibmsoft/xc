{"inframe":false,"title":"科目期初余额查询","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"var sql, data = app.get();\nsql = ' where 1=1 ';\nrequest.setAttribute('sql', sql);","itemId":"module"},"children":[{"configs":{"oracle":"  select * from (SELECT xb.LEDGER_ID,\n         xb.CURRENCY_CODE,\n         xb.PERIOD_CODE,\n         xc.ACC_ID,\n         xa.ACC_NAME,\n         xc.CCID,\n         xc.CCID_NAME,\n         (select b.VAL_NAME from xip_pub_val_set_dtl b where b.VAL_SET_CODE = 'XC_GL_DR_CR' and b.VAL_CODE =  xa.balance_direction) BD_NAME,\n         (CASE xa.balance_direction\n           WHEN '1' THEN\n            SUM(xb.pjtd_dr - xb.pjtd_cr)\n           ELSE\n            SUM(xb.pjtd_cr - xb.pjtd_dr)\n         END) YEAR_OR_BALANCE\n  FROM xc_gl_balance xb, xc_gl_ccid xc, xc_gl_accounts XA\n  WHERE xb.ccid = xc.ccid\n\tAND xb.ccid not in (select ifnull(PAY_ACC_ID,'') FROM xc_ap_pay_h where AP_PAY_H_CODE is null or AP_PAY_H_CODE = '')\n    AND xc.acc_id = xa.acc_id\n    AND xc.ledger_id = {?LEDGER_ID?}\n    AND xb.period_code = {?PERIOD_CODE?}\n    AND xc.acc_id = {?ACC_ID?}\n    AND xb.CURRENCY_CODE = {?CURRENCY_CODE?}\n GROUP BY xb.ledger_id,\n         xb.period_code,\n         xc.acc_id,\n         xa.acc_name,\n         xc.CCID,\n         xc.CCID_NAME,\n         xa.balance_direction\n                 ) t where t.YEAR_OR_BALANCE>0\n","itemId":"select","mysql":"  select * from (SELECT xb.LEDGER_ID,\n         xb.CURRENCY_CODE,\n         xb.PERIOD_CODE,\n         xc.ACC_ID,\n         xa.ACC_NAME,\n         xc.CCID,\n         xc.CCID_NAME,\n         (select b.VAL_NAME from xip_pub_val_set_dtl b where b.VAL_SET_CODE = 'XC_GL_DR_CR' and b.VAL_CODE =  xa.balance_direction) BD_NAME,\n         (CASE xa.balance_direction\n           WHEN '1' THEN\n            SUM(xb.b_dr - xb.b_cr)\n           ELSE\n            SUM(xb.b_cr - xb.b_dr)\n         END) YEAR_OR_BALANCE\n  FROM xc_gl_balance xb, xc_gl_ccid xc, xc_gl_accounts XA\n  WHERE xb.ccid = xc.ccid\n\tAND xb.ccid not in (select ifnull(PAY_CCID,'') FROM xc_ap_pay_h where AP_PAY_H_CODE is null or AP_PAY_H_CODE = '')\n    AND xc.acc_id = xa.acc_id\n    AND xc.ledger_id = {?LEDGER_ID?}\n    AND xb.period_code = {?PERIOD_CODE?}\n    AND xc.acc_id = {?ACC_ID?}\n    AND xb.CURRENCY_CODE = {?CURRENCY_CODE?}\n GROUP BY xb.ledger_id,\n         xb.period_code,\n         xc.acc_id,\n         xa.acc_name,\n         xc.CCID,\n         xc.CCID_NAME,\n         xa.balance_direction\n                 ) t where t.YEAR_OR_BALANCE>0\n"},"children":[],"expanded":false,"type":"sqlswitcher"},{"configs":{"autoPage":"false","sql":"{#select#}","totalSql":"select count(*) from (\n  SELECT xb.LEDGER_ID,\n         xb.CURRENCY_CODE,\n         xb.PERIOD_CODE,\n         xc.ACC_ID,\n         xa.ACC_NAME,\n         xc.CCID,\n         xc.CCID_NAME,\n         (CASE xa.balance_direction\n           WHEN '1' THEN\n           '借'\n         ELSE\n           '贷'\n         END) BD_NAME,\n         (CASE xa.balance_direction\n           WHEN '1' THEN\n            SUM(xb.pjtd_dr - xb.pjtd_cr)\n           ELSE\n            SUM(xb.pjtd_cr - xb.pjtd_dr)\n         END) YEAR_OR_BALANCE\n  FROM xc_gl_balance xb, xc_gl_ccid xc, xc_gl_accounts XA\n  WHERE xb.ccid = xc.ccid\n    AND xc.acc_id = xa.acc_id\n    AND xc.ledger_id = {?LEDGER_ID?}\n    AND xb.period_code = {?PERIOD_CODE?}\n    AND xc.acc_id = {?ACC_ID?}\n    AND xb.CURRENCY_CODE = {?CURRENCY_CODE?}\n    AND NOT EXISTS (SELECT 1 FROM xc_ap_inv_gl_h gl \n                    WHERE gl.`LEDGER_ID`={?LEDGER_ID?}\n     AND gl.AP_ACC_ID_DEBT={?ACC_ID?}\n     AND gl.`AP_CCID_DEBT`=xc.ccid)\n GROUP BY xb.ledger_id,\n         xb.period_code,\n         xc.acc_id,\n         xa.acc_name,\n         xc.CCID,\n         xc.CCID_NAME,\n         xa.balance_direction\n\n  \n) t {#sql#}","itemId":"dataprovider1"},"children":[],"expanded":false,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}