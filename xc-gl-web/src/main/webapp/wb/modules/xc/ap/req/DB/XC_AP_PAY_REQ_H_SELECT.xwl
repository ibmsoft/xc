{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"var lang = request.getSession().getAttribute(\"XzSessionVars\").get(\"language\");\nrequest.setAttribute(\"language\",lang);  \nvar sql, data = app.get();\nsql = ' where 1=1 and LEDGER_ID={?LEDGER_ID?}';\nif (!Wb.isEmpty(data.VENDOR_NAME)) {\n  sql+=' and VENDOR_NAME like \\'%'+data.VENDOR_NAME+'%\\' ';\n}\nif (!Wb.isEmpty(data.AP_CONTRACT_NAME)) {\n  sql+=' and AP_CONTRACT_NAME like \\'%'+data.AP_CONTRACT_NAME+'%\\' ';\n}\nif (!Wb.isEmpty(data.PROJECT_NAME)) {\n  sql+=' and PROJECT_NAME like \\'%'+data.PROJECT_NAME+'%\\' ';\n}\nif (!Wb.isEmpty(data.AMOUNT_START)) {\n  sql+=' and AMOUNT >='+data.AMOUNT_START;\n}\nif (!Wb.isEmpty(data.AMOUNT_END)) {\n  sql+=' and AMOUNT <='+data.AMOUNT_END;\n}\nif (!Wb.isEmpty(data.CREATED_BY)) {\n  sql+=' and CREATED_BY = \\''+data.CREATED_BY+'\\' ';\n}\nif (!Wb.isEmpty(data.CREATED_BY_NAME)) {\n  sql+=' and CREATED_BY_NAME like \\'%'+data.CREATED_BY_NAME+'%\\' ';\n}\nif (!Wb.isEmpty(data.DESCRIPTION)) {\n  sql+=' and DESCRIPTION like \\'%'+data.DESCRIPTION+'%\\' ';\n}\nif (!Wb.isEmpty(data.BIZ_DATE_START)&&!Wb.isEmpty(data.BIZ_DATE_END)) {\n  sql+=' and BIZ_DATE BETWEEN {?BIZ_DATE_START?} and {?BIZ_DATE_END?}';\n}\nif (!Wb.isEmpty(data.BIZ_DATE_START)&&Wb.isEmpty(data.BIZ_DATE_END)) {\n  sql+=' and BIZ_DATE >= date_format({?BIZ_DATE_START?},\\'%Y-%m-%d\\')';\n}\nif (Wb.isEmpty(data.BIZ_DATE_START)&&!Wb.isEmpty(data.BIZ_DATE_END)) {\n  sql+=' and BIZ_DATE <= date_format({?BIZ_DATE_END?},\\'%Y-%m-%d\\')';\n}\nif (!Wb.isEmpty(data.SYS_AUDIT_STATUS)) {\n  if(data.SYS_AUDIT_STATUS=='A'||data.SYS_AUDIT_STATUS=='C'||data.SYS_AUDIT_STATUS=='E'){\n      sql+=' and SYS_AUDIT_STATUS =\\''+data.SYS_AUDIT_STATUS+'\\' ';\n  }\n}\nif (!Wb.isEmpty(data.AP_DOC_CAT_CODE)) {\n  if(data.AP_DOC_CAT_CODE=='CGJS'||data.AP_DOC_CAT_CODE=='YUFK'||data.AP_DOC_CAT_CODE=='QTFK'){\n    sql+=' and AP_DOC_CAT_CODE =\\''+data.AP_DOC_CAT_CODE+'\\' ';\n  }\n  \n}\n/**if (!Wb.isEmpty(data.AUDIT_STATUS)) {\n  sql+=' and AUDIT_STATUS like \\'%'+data.AUDIT_STATUS+'%\\' ';\n}*/\nif (!Wb.isEmpty(data.IS_CLOSE)) {\n \tif(data.IS_CLOSE=='Y'||data.IS_CLOSE=='N'){\n      sql+=' and IS_CLOSE like \\'%'+data.IS_CLOSE+'%\\' ';\n    }\n  \n}\nif (!Wb.isEmpty(data.IS_PAY_ALL)) {\n  if(data.IS_PAY_ALL=='Y'){\n    sql+=' and AMOUNT = PAID_AMT ';\n  }else if(data.IS_PAY_ALL=='N'){\n    sql+=' and AMOUNT <> PAID_AMT ';\n  }\n}\nrequest.setAttribute('sql', sql);","itemId":"module"},"children":[{"configs":{"itemId":"select","oracle":"select * from (\nSELECT \n  a.* ,\n  (SELECT VAL_NAME FROM xip_pub_val_set_dtl_lang b WHERE b.VAL_CODE=a.SYS_AUDIT_STATUS and b.VAL_SET_CODE = 'XC_AP_SYS_AUDIT_STATUS' and b.VAL_SET_LANG = '{#language#}') SYS_AUDIT_STATUS_NAME,\n  (SELECT AP_CAT_NAME FROM xc_ap_doc_cats b WHERE b.AP_CAT_CODE=a.AP_DOC_CAT_CODE) AP_DOC_CAT_NAME,\n  (SELECT LEDGER_NAME FROM xc_gl_ledgers b WHERE b.LEDGER_ID=a.LEDGER_ID) LEDGER_NAME,\n  (SELECT VENDOR_NAME FROM xc_ap_vendors b WHERE b.VENDOR_ID=a.VENDOR_ID) VENDOR_NAME,\n  (SELECT PROJECT_NAME FROM xc_pm_projects b WHERE b.PROJECT_ID=a.PROJECT_ID) PROJECT_NAME,\n  (SELECT DEPT_NAME FROM xip_pub_depts b WHERE b.DEPT_ID=a.DEPT_ID) DEPT_NAME,\n  (SELECT AP_CONTRACT_NAME FROM xc_ap_contract b WHERE b.AP_CONTRACT_ID=a.AP_CONTRACT_ID) AP_CONTRACT_NAME,\n  (SELECT EMP_NAME FROM XIP_PUB_EMPS WHERE EMP_ID=(SELECT EMP_ID FROM XIP_PUB_USERS b WHERE b.USER_ID=a.CREATED_BY)) CREATED_BY_NAME\nFROM\n  xc_ap_pay_req_h a ) t\n\t{#sql#}\norder by ap_pay_req_h_code desc\n\n","mysql":"select * from (\nSELECT \n  a.* ,\n  (SELECT VAL_NAME FROM xip_pub_val_set_dtl_lang b WHERE b.VAL_CODE=a.SYS_AUDIT_STATUS and b.VAL_SET_CODE = 'XC_AP_SYS_AUDIT_STATUS' and b.VAL_SET_LANG = '{#language#}') SYS_AUDIT_STATUS_NAME,\n  (SELECT AP_CAT_NAME FROM xc_ap_doc_cats b WHERE b.AP_CAT_CODE=a.AP_DOC_CAT_CODE) AP_DOC_CAT_NAME,\n  (SELECT LEDGER_NAME FROM xc_gl_ledgers b WHERE b.LEDGER_ID=a.LEDGER_ID) LEDGER_NAME,\n  (SELECT VENDOR_NAME FROM xc_ap_vendors b WHERE b.VENDOR_ID=a.VENDOR_ID) VENDOR_NAME,\n  (SELECT PROJECT_NAME FROM xc_pm_projects b WHERE b.PROJECT_ID=a.PROJECT_ID) PROJECT_NAME,\n  (SELECT DEPT_NAME FROM xip_pub_depts b WHERE b.DEPT_ID=a.DEPT_ID) DEPT_NAME,\n  (SELECT AP_CONTRACT_NAME FROM xc_ap_contract b WHERE b.AP_CONTRACT_ID=a.AP_CONTRACT_ID) AP_CONTRACT_NAME,\n  (SELECT EMP_NAME FROM XIP_PUB_EMPS WHERE EMP_ID=(SELECT EMP_ID FROM XIP_PUB_USERS b WHERE b.USER_ID=a.CREATED_BY)) CREATED_BY_NAME\nFROM\n  xc_ap_pay_req_h a ) t\n\t{#sql#}\norder by ap_pay_req_h_code desc\nlimit {?bigint.start?},{?bigint.limit?}\n\n"},"children":[],"expanded":false,"type":"sqlswitcher"},{"configs":{"sql":"{#select#}","totalSql":"select count(*) from (\nSELECT \n  a.* ,\n  (SELECT AP_CAT_NAME FROM xc_ap_doc_cats b WHERE b.AP_CAT_CODE=a.AP_DOC_CAT_CODE) AP_DOC_CAT_NAME,\n  (SELECT LEDGER_NAME FROM xc_gl_ledgers b WHERE b.LEDGER_ID=a.LEDGER_ID) LEDGER_NAME,\n  (SELECT VENDOR_NAME FROM xc_ap_vendors b WHERE b.VENDOR_ID=a.VENDOR_ID) VENDOR_NAME,\n  (SELECT PROJECT_NAME FROM xc_pm_projects b WHERE b.PROJECT_ID=a.PROJECT_ID) PROJECT_NAME,\n  (SELECT DEPT_NAME FROM xip_pub_depts b WHERE b.DEPT_ID=a.DEPT_ID) DEPT_NAME,\n  (SELECT AP_CONTRACT_NAME FROM xc_ap_contract b WHERE b.AP_CONTRACT_ID=a.AP_CONTRACT_ID) AP_CONTRACT_NAME,\n  (SELECT EMP_NAME FROM XIP_PUB_EMPS WHERE EMP_ID=(SELECT EMP_ID FROM XIP_PUB_USERS b WHERE b.USER_ID=a.CREATED_BY)) CREATED_BY_NAME\nFROM\n  xc_ap_pay_req_h a  ) t {#sql#}","itemId":"dataprovider1"},"children":[],"expanded":false,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}