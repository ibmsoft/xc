{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"var P_AP_DOC_CAT_CODE = app.get('AP_DOC_CAT_CODE');\nvar dbtype = com.xzsoft.xip.platform.util.PlatformUtil.getDbType() ;\nif('FKD_QTFK'==P_AP_DOC_CAT_CODE||'FKD_QTFK-H'==P_AP_DOC_CAT_CODE){\n  if(dbtype=='mysql'){\n      app.run('INSERT INTO xc_ap_inv_trans ( '+\n          'TRANS_ID,SOURCE_ID,SOURCE_DTL_ID,AP_INV_GL_H_ID,AP_PAY_H_ID,'+\n          'GL_DATE,SOURCE_TAB,AP_DOC_CAT_CODE,AP_CONTRACT_ID,VENDOR_ID,'+\n          'DR_AMT,TRANS_STATUS,CCID,'+\n          'CREATION_DATE,CREATED_BY,LAST_UPDATE_DATE,LAST_UPDATED_BY'+\n          ') VALUES ('+\n          'UUID(),{?varchar.AP_PAY_H_ID?},{?varchar.AP_PAY_L_ID?},{?varchar.AP_INV_GL_H_ID?},{?varchar.AP_PAY_H_ID?},'+\n          'SYSDATE(),\\'XC_AP_PAY_H\\',\\'FK\\',(SELECT AP_CONTRACT_ID FROM xc_ap_inv_gl_h WHERE AP_INV_GL_H_ID={?varchar.AP_INV_GL_H_ID?}),(SELECT VENDOR_ID FROM xc_ap_inv_gl_h WHERE AP_INV_GL_H_ID={?varchar.AP_INV_GL_H_ID?}),'+\n          '{?decimal.AMOUNT?},\\'0\\',(SELECT AP_CCID_DEBT FROM xc_ap_inv_gl_h b WHERE b.AP_INV_GL_H_ID={?varchar.AP_INV_GL_H_ID?}),'+\n          'SYSDATE(),{?XIP.userId?},SYSDATE(),{?XIP.userId?}'+\n          ')', {\n        transaction: 'start' //开始事务\n      });\n  }\n  if(dbtype=='oracle'){\n       app.run('INSERT INTO xc_ap_inv_trans ( '+\n          'TRANS_ID,SOURCE_ID,SOURCE_DTL_ID,AP_INV_GL_H_ID,AP_PAY_H_ID,'+\n          'GL_DATE,SOURCE_TAB,AP_DOC_CAT_CODE,AP_CONTRACT_ID,VENDOR_ID,'+\n          'DR_AMT,TRANS_STATUS,CCID,'+\n          'CREATION_DATE,CREATED_BY,LAST_UPDATE_DATE,LAST_UPDATED_BY'+\n          ') VALUES ('+\n          'UUID(),{?varchar.AP_PAY_H_ID?},{?varchar.AP_PAY_L_ID?},{?varchar.AP_INV_GL_H_ID?},{?varchar.AP_PAY_H_ID?},'+\n          'SYSDATE(),\\'XC_AP_PAY_H\\',\\'FK\\',(SELECT AP_CONTRACT_ID FROM xc_ap_inv_gl_h WHERE AP_INV_GL_H_ID={?varchar.AP_INV_GL_H_ID?}),(SELECT VENDOR_ID FROM xc_ap_inv_gl_h WHERE AP_INV_GL_H_ID={?varchar.AP_INV_GL_H_ID?}),'+\n          '{?decimal.AMOUNT?},\\'0\\',(SELECT AP_CCID_DEBT FROM xc_ap_inv_gl_h b WHERE b.AP_INV_GL_H_ID={?varchar.AP_INV_GL_H_ID?}),'+\n          'sysdate,{?XIP.userId?},sysdate,{?XIP.userId?}'+\n          ')', {\n        transaction: 'start' //开始事务\n      });\n  }\n}\nif('FKD_YUFK'==P_AP_DOC_CAT_CODE||'FKD_YUFK-H'==P_AP_DOC_CAT_CODE){\n  if(dbtype=='mysql'){\n      app.run('INSERT INTO xc_ap_inv_trans ( '+\n          'TRANS_ID,SOURCE_ID,SOURCE_DTL_ID,AP_INV_GL_H_ID,AP_PAY_H_ID,'+\n          'GL_DATE,SOURCE_TAB,AP_DOC_CAT_CODE,AP_CONTRACT_ID,VENDOR_ID,'+\n          'DR_AMT,TRANS_STATUS,CCID,'+\n          'CREATION_DATE,CREATED_BY,LAST_UPDATE_DATE,LAST_UPDATED_BY'+\n          ') VALUES ('+ \n          'UUID(),{?varchar.AP_PAY_H_ID?},{?varchar.AP_PAY_L_ID?},{?varchar.AP_INV_GL_H_ID?},{?varchar.AP_PAY_H_ID?},'+\n          'SYSDATE(),\\'XC_AP_PAY_H\\',\\'YUFK\\',(SELECT AP_CONTRACT_ID FROM xc_ap_inv_gl_h WHERE AP_INV_GL_H_ID={?varchar.AP_INV_GL_H_ID?}),(SELECT VENDOR_ID FROM xc_ap_inv_gl_h WHERE AP_INV_GL_H_ID={?varchar.AP_INV_GL_H_ID?}),'+\n          '{?decimal.AMOUNT?},\\'0\\',(SELECT AP_CCID_DEBT FROM xc_ap_inv_gl_h b WHERE b.AP_INV_GL_H_ID={?varchar.AP_INV_GL_H_ID?}),'+\n          'SYSDATE(),{?XIP.userId?},SYSDATE(),{?XIP.userId?}'+\n          ')', {\n        transaction: 'start' //开始事务\n      });\n  }\n  if(dbtype=='oracle'){\n    app.run('INSERT INTO xc_ap_inv_trans ( '+\n          'TRANS_ID,SOURCE_ID,SOURCE_DTL_ID,AP_INV_GL_H_ID,AP_PAY_H_ID,'+\n          'GL_DATE,SOURCE_TAB,AP_DOC_CAT_CODE,AP_CONTRACT_ID,VENDOR_ID,'+\n          'DR_AMT,TRANS_STATUS,CCID,'+\n          'CREATION_DATE,CREATED_BY,LAST_UPDATE_DATE,LAST_UPDATED_BY'+\n          ') VALUES ('+\n          'UUID(),{?varchar.AP_PAY_H_ID?},{?varchar.AP_PAY_L_ID?},{?varchar.AP_INV_GL_H_ID?},{?varchar.AP_PAY_H_ID?},'+\n          'sysdate,\\'XC_AP_PAY_H\\',\\'YUFK\\',(SELECT AP_CONTRACT_ID FROM xc_ap_inv_gl_h WHERE AP_INV_GL_H_ID={?varchar.AP_INV_GL_H_ID?}),(SELECT VENDOR_ID FROM xc_ap_inv_gl_h WHERE AP_INV_GL_H_ID={?varchar.AP_INV_GL_H_ID?}),'+\n          '{?decimal.AMOUNT?},\\'0\\',(SELECT AP_CCID_DEBT FROM xc_ap_inv_gl_h b WHERE b.AP_INV_GL_H_ID={?varchar.AP_INV_GL_H_ID?}),'+\n          'sysdate,{?XIP.userId?},sysdate,{?XIP.userId?}'+\n          ')', {\n        transaction: 'start' //开始事务\n      });\n  }\n}","itemId":"module"},"children":[{"configs":{"oracle":"insert into xc_ap_pay_h (\n  AP_PAY_H_ID,AP_PAY_H_CODE,AP_DOC_CAT_CODE,LEDGER_ID,GL_DATE,\n  VENDOR_ID,PROJECT_ID,DEPT_ID,AP_CONTRACT_ID,AMOUNT,\n  SOURCE,PAY_TYPE,DEPOSIT_BANK_ID,PAY_ACC_ID,PAY_CCID,\n  CA_ID,ACCOUNT_NAME,DEPOSIT_BANK_NAME,BANK_ACCOUNT,V_HEAD_ID,\n  V_STATUS,DESCRIPTION,VERIFIER_ID,VERFY_DATE,SIGN_USER_ID,\n  SIGN_DATE,SIGN_STATUS,CREATION_DATE,CREATED_BY,LAST_UPDATE_DATE,\n  LAST_UPDATED_BY) values (\n    {?varchar.AP_PAY_H_ID?},{?varchar.AP_PAY_H_CODE?},{?varchar.AP_DOC_CAT_CODE?},{?varchar.LEDGER_ID?},{?timestamp.GL_DATE?},\n    {?varchar.VENDOR_ID?},{?varchar.PROJECT_ID?},{?varchar.DEPT_ID?},{?varchar.AP_CONTRACT_ID?},{?decimal.AMOUNT?},\n    {?varchar.SOURCE?},{?varchar.PAY_TYPE?},{?varchar.PAY_BANK_NAME?},{?varchar.PAY_ACC_ID?},{?varchar.PAY_CCID?},\n    {?varchar.CA_ID?},{?varchar.ACCOUNT_NAME?},{?varchar.DEPOSIT_BANK_NAME?},{?varchar.BANK_ACCOUNT?},'1',\n    '起草',{?varchar.DESCRIPTION?},{?varchar.VERIFIER_ID?},{?timestamp.VERFY_DATE?},{?varchar.SIGN_USER_ID?},\n    {?timestamp.SIGN_DATE?},{?varchar.SIGN_STATUS?},sysdate,{?XIP.userId?},sysdate,\n    {?XIP.userId?})\n","itemId":"insert","mysql":"insert into xc_ap_pay_h (\n  AP_PAY_H_ID,AP_PAY_H_CODE,AP_DOC_CAT_CODE,LEDGER_ID,GL_DATE,\n  VENDOR_ID,PROJECT_ID,DEPT_ID,AP_CONTRACT_ID,AMOUNT,\n  SOURCE,PAY_TYPE,DEPOSIT_BANK_ID,PAY_ACC_ID,PAY_CCID,\n  CA_ID,ACCOUNT_NAME,DEPOSIT_BANK_NAME,BANK_ACCOUNT,V_HEAD_ID,\n  V_STATUS,DESCRIPTION,VERIFIER_ID,VERFY_DATE,SIGN_USER_ID,\n  SIGN_DATE,SIGN_STATUS,CREATION_DATE,CREATED_BY,LAST_UPDATE_DATE,\n  LAST_UPDATED_BY) values (\n    {?varchar.AP_PAY_H_ID?},{?varchar.AP_PAY_H_CODE?},{?varchar.AP_DOC_CAT_CODE?},{?varchar.LEDGER_ID?},{?timestamp.GL_DATE?},\n    {?varchar.VENDOR_ID?},{?varchar.PROJECT_ID?},{?varchar.DEPT_ID?},{?varchar.AP_CONTRACT_ID?},{?decimal.AMOUNT?},\n    {?varchar.SOURCE?},{?varchar.PAY_TYPE?},{?varchar.PAY_BANK_NAME?},{?varchar.PAY_ACC_ID?},{?varchar.PAY_CCID?},\n    {?varchar.CA_ID?},{?varchar.ACCOUNT_NAME?},{?varchar.DEPOSIT_BANK_NAME?},{?varchar.BANK_ACCOUNT?},{?varchar.V_HEAD_ID?},\n    {?varchar.V_STATUS?},{?varchar.DESCRIPTION?},{?varchar.VERIFIER_ID?},{?timestamp.VERFY_DATE?},{?varchar.SIGN_USER_ID?},\n    {?timestamp.SIGN_DATE?},'1',SYSDATE(),{?XIP.userId?},SYSDATE(),\n    {?XIP.userId?})"},"children":[],"expanded":false,"type":"sqlswitcher"},{"configs":{"sql":"{#insert#}","itemId":"query1"},"children":[],"expanded":false,"type":"query"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}