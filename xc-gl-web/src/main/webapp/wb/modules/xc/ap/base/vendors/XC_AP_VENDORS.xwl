{"inframe":false,"title":"供应商管理","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"com.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/ap/base/vendors/XC_AP_VENDORS\");","itemId":"module"},"events":{"finalize":"function clearOtherFn(type){\n  if(type=='xip_pub_orgs'){\n   \n  }\n}\n\nfunction returnRowFn(r,type){\n  if(type=='xip_pub_orgs'){\n    \n  }\n}","initialize":"function setLedgerValue(record){\n  \n}"},"children":[{"configs":{"region":"north","itemId":"vendortbar"},"children":[{"configs":{"text":"-","itemId":"item1"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#saveBtn#}","itemId":"savenewBtn","iconCls":"ok_icon"},"events":{"click":"if(app.form1.getForm().isValid()===false){\n\n  Wb.warn('{#MSG1#}!');\n  return;\n}\n\n\n\n\nvar VENDOR_ID=app.VENDOR_ID.getValue();\nvar VENDOR_CODE = app.VENDOR_CODE.getValue();\n// if(VENDOR_CODE === null || VENDOR_CODE === \"\"){\n\n//   Wb.warn('请录入编码!');\n//   return false ;\n// }\n\nvar VENDOR_NAME = app.VENDOR_NAME.getValue();\n// if(VENDOR_NAME === null || VENDOR_NAME === \"\"){\n\n//   Wb.warn('请录入名称!');\n//   return false ;\n// }\n\nvar START_DATE= app.START_DATE.getValue();\n\n// if(START_DATE === null || START_DATE === \"\"){\n\n//   Wb.warn('请录入开始日期!');\n//   return false ;\n// }\n\n\nvar MOBILE = app.MOBILE.getValue();\nvar phonePatrn= /^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/;\nif(!Ext.isEmpty(MOBILE)){\n  if(!phonePatrn.test(MOBILE)){\n    Wb.warn('{#MSG2#}!');\n    return;\n  }\n}\n\nvar TEL = app.TEL.getValue();\nvar telPatrn=/^[+]{0,1}(\\d){1,3}[ ]?([-]?((\\d)|[ ]){1,12})+$/;\nif(!Ext.isEmpty(TEL)){\n  if(!telPatrn.test(TEL)){\n    Wb.warn('{#MSG3#}');\n    return;\n  }\n}\n\nvar EMAIL = app.EMAIL.getValue();\n\nvar emailPatrn= /^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/;\nif(!Ext.isEmpty(EMAIL)){\n  if(!emailPatrn.test(EMAIL)){\n    Wb.warn('{#MSG4#}');\n    return;\n  }\n}\n\n//执行保存处理\n\n\nvar json = {\n  VENDOR_ID:app.VENDOR_ID.getValue(),\n  VENDOR_CODE:app.VENDOR_CODE.getValue(),\n  VENDOR_NAME:app.VENDOR_NAME.getValue(),\n  TAX_NO:app.TAX_NO.getValue(),\n  ADDRESS:app.ADDRESS.getValue(),\n  VENDOR_TYPE:app.VENDOR_TYPE.getValue(),\n  CONTACT:app.CONTACT.getValue(),\n  TEL:app.TEL.getValue(),\n  MOBILE:app.MOBILE.getValue(),\n  QQ:app.QQ.getValue(),\n  WECHAT:app.WECHAT.getValue(),\n  EMAIL:app.EMAIL.getValue(), \n  CUSTOMER_ID:app.CUSTOMER_ID.getValue(), \n  START_DATE:app.START_DATE.getValue(), \n  END_DATE:app.END_DATE.getValue()\n};\n\nif(app.opType.getValue()==\"add\"){\n  Wb.request({\n    url: 'm?xwl=xc/ap/base/vendors/data/insert', \n    params: json,\n    success: function() {\n\n      //新增返回\n      if('edit' != app.opType.getValue()){\n        Wb.toast('{#SAVETIP#}');\n        app.addEditeWin.close();\t\n        app.Grid.store.load();\n       // app.opType.setValue('edit') ;\n      \n       // app.xwl1.VENDOR_ID.setValue(VENDOR_ID.getValue()); //设置ID\n      //  app.xwl1.grid.store.load( {  params:{VENDOR_ID:VENDOR_ID.getValue()}} );\n      }else{\n        //编辑返回\n      }\n\n\n    }\n  });\n}else{\n  Wb.request({\n    url: 'm?xwl=xc/ap/base/vendors/data/update', \n    params: json,\n    success: function() {\n\n      Wb.toast('{#SAVETIP#}');\n      app.addEditeWin.close();\t\n      app.Grid.store.load();\n\n\n    }\n  });\n\n}\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item11"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"store"},"children":[{"configs":{"autoLoad":"true","itemId":"typeStore","url":"m?xwl=xc/ap/base/vendors/data/selectVendorType"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"folder"},{"configs":{"title":"批量修改","height":"300","layout":"border","width":"400","closeAction":"hide","buttonAlign":"center","dialog":"false","itemId":"moerEditeWin","modal":"true"},"children":[{"configs":{"itemId":"buttons"},"children":[{"configs":{"text":"{#saveBtn#}","itemId":"saveBtn","iconCls":"ok_icon"},"events":{"click":"var typeChange = app.typeChk.getValue();\n\nvar startChange = app.startChk.getValue();\n\nvar endChange = app.endChk.getValue();\n\nvar typeVal = app.typeTxt.getValue();\nvar startVal = app.startdate.getRawValue();\nvar endVal = app.enddate.getRawValue();\n\n//alert(typeChange);\n/**if(typeChange){\n  alert('dd');\n}else{\n  alert('s');\n}**/\n\n\n if(typeChange==false&&startChange==false&&endChange==false){\n \n     Wb.toast('{#MSG8#}');\n   return;\n}\n\n\n  \nif(startChange){\n  if(startVal==\"\"||startVal==null){\n      Wb.toast('{#MSG7#}');\n   \n    return;\n  }\n}\nif(endChange){\n  if(Ext.isEmpty(endVal)){\n   \n      Wb.toast('{#MSG6#}');\n    return;\n  }\n}\n\nif(startChange||endChange){\n  if(endVal<startVal){\n     Wb.toast('{#MSG5#}');\n     return;\n  }\n}\n  var rows=app.Grid.getSelectionModel().getSelection();\n  var idList = \"\" ;\n  Ext.each(rows,function(r){\n    var id = \"'\" + r.data.VENDOR_ID + \"'\";\n    if(idList === \"\"){\n      idList = id ;\n    }else{\n      idList = idList+\",\"+id ;\n    }\n  });\n // var json = {'ids' : idList} ;\n\n\n\n\n\n\n\n\n\n\n\nvar sql = \"UPDATE \"+\n   \" xc_ap_vendors  \"+\n \"SET \";\n\n\n\nvar json = {};\nif(typeChange){\n  if(typeVal==null){\n    typeVal = '';\n  }\n  sql+=\"  VENDOR_TYPE =' \"+typeVal+\"',\";\n  json.VENDOR_TYPE = typeVal;\n  //json+=\" VENDOR_TYPE:\"+typeVal+\",\";\n}\nif(startChange){\n   sql+=\"  START_DATE ='\"+startVal+\"',\";\n  json.START_DATE = startVal;\n   //json+=\" START_DATE:\"+startVal+\",\";\n  \n}\nif(endChange){\n  json.END_DATE = endVal;\n   \n   //json+=\" END_DATE:\"+endVal+\",\";\n   sql+=\"  END_DATE =' \"+endVal+\"',\";\n}\nsql+=\" LAST_UPDATE_DATE = {?timestamp.sys.date?},\"+\n  \"LAST_UPDATED_BY =   {?XIP.userId?}  where VENDOR_ID in(\"+idList+\")\";\n\n  Wb.request({\n           url: 'm?xwl=xc/ap/base/vendors/data/moreEdtie', \n           params:{sql: sql},\n           success: function() {\n            \n            //新增返回\n             if('edit' != app.opType.getValue()){\n                Wb.toast('{#SAVETIP#}');\n                app.Grid.store.load();\n                app.moerEditeWin.close();\n               \n             }else{\n               //编辑返回\n             }\n         \n             \n          }\n       });\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#cancelBtn#}","itemId":"closeBtn","iconCls":"cancel_icon"},"events":{"click":"app.moerEditeWin.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"array"},{"configs":{"region":"center","layout":"form","itemId":"panel1"},"children":[{"configs":{"frame":"false","style":"border-width:0px;padding-top:10px;padding-left:20px","layout":"column","border":"false","itemId":"panel2"},"children":[{"configs":{"style":"padding-left:20px","width":"80","itemId":"typeChk","boxLabel":"{#classify_label#}"},"events":{"change":"if(newValue===true){\n\n  app.typeTxt.setReadOnly(false);\n}else{\n  \n   app.typeTxt.setReadOnly(true);\n}"},"children":[],"expanded":false,"type":"check"},{"configs":{"readOnly":"true","store":"app.typeStore","displayField":"VENDOR_TYPE","width":"200","valueField":"VENDOR_TYPE","itemId":"typeTxt"},"children":[],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px;padding-top:10px;padding-left:20px","layout":"column","border":"false","itemId":"panel21"},"children":[{"configs":{"style":"padding-left:20px","width":"80","labelAlign":"right","itemId":"startChk","boxLabel":"{#start_date#}"},"events":{"change":"if(newValue===true){\n\n  app.startdate.setReadOnly(false);\n}else{\n  \n   app.startdate.setReadOnly(true);\n}"},"children":[],"expanded":false,"type":"check"},{"configs":{"readOnly":"true","width":"200","format":"Y-m-d","itemId":"startdate"},"children":[],"expanded":false,"type":"date"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px;padding-top:10px;padding-left:20px","layout":"column","border":"false","itemId":"panel211"},"children":[{"configs":{"style":"padding-left:20px","width":"80","labelAlign":"right","itemId":"endChk","boxLabel":"{#end_date#}"},"events":{"change":"if(newValue===true){\n\n  app.enddate.setReadOnly(false);\n}else{\n  \n   app.enddate.setReadOnly(true);\n}"},"children":[],"expanded":false,"type":"check"},{"configs":{"readOnly":"true","width":"200","format":"Y-m-d","itemId":"enddate"},"children":[],"expanded":false,"type":"date"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"panel"}],"expanded":false,"type":"window"},{"configs":{"maximized":"true","height":"550","width":"600","layout":"border","closeAction":"hide","buttonAlign":"center","border":"false","dialog":"false","itemId":"addEditeWin","modal":"true","maximizable":"false"},"children":[{"configs":{"region":"center","itemId":"tab1"},"children":[{"configs":{"tbar":"app.vendortbar","title":"{#BASE#}","layout":"border","itemId":"basePanel"},"children":[{"configs":{"region":"center","frame":"false","border":"false","bodyPadding":"0 0 0 0","itemId":"form1"},"children":[{"configs":{"frame":"false","layout":"column","border":"false","itemId":"tr_1"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".3","border":"false","itemId":"td_1"},"children":[{"configs":{"labelWidth":"100","allowBlank":"false","labelAlign":"right","itemId":"VENDOR_CODE","fieldLabel":"<font color='red'>*<\/font>{#CODE_COL#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".3","border":"false","itemId":"td_2"},"children":[{"configs":{"labelWidth":"100","allowBlank":"false","labelAlign":"right","itemId":"VENDOR_NAME","fieldLabel":"<font color='red'>*<\/font>{#NAME_COL#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".3","border":"false","itemId":"td_21"},"children":[{"configs":{"layout":"fit","closeAction":"hide","border":"false","itemId":"userxmw"},"children":[{"configs":{"hidden":"true","itemId":"CUSTOMER_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"100","width":"300","labelAlign":"right","itemId":"CUSTOMER_NAME","fieldLabel":"{#CUSTOMER_NAME_COL#}"},"children":[{"configs":{"itemId":"pickComp"},"events":{"itemdblclick":"setLedgerValue(record);\napp.CUSTOMER_ID.setValue(record.data.CUSTOMER_ID);\napp.CUSTOMER_NAME.setValue(record.data.CUSTOMER_NAME);\nvar picker = this.ownerCmp;\npicker.collapse();"},"children":[{"configs":{"pageSize":"5","autoLoad":"true","itemId":"store","url":"m?xwl=xc/ap/base/vendors/data/selectUser"},"events":{"beforeload":"operation.params = Wb.getValue(app.tbar);"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"hidden":"true","dataIndex":"LEDGER_ID","itemId":"CUSTOMER_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#CUSTOMER_CODE_COL#}","dataIndex":"CUSTOMER_CODE","itemId":"CUSTOMER_CODE_COL","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#CUSTOMER_NAME_COL1#}","dataIndex":"CUSTOMER_NAME","itemId":"CUSTOMER_NAME_COL","flex":"1"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"labelWidth":"100","emptyText":"{#CODE_NAME#}","labelAlign":"right","itemId":"QUERY_CODE_NAME"},"events":{"specialkey":"if(Ext.EventObject.getKey()==13){\n\tapp.pickComp.getStore().load();\n}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"toolbar"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"picker"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"padding-top:10px","layout":"column","border":"false","itemId":"tr_2"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".3","border":"false","itemId":"td_1"},"children":[{"configs":{"labelWidth":"100","store":"app.typeStore","displayField":"VENDOR_TYPE","valueField":"VENDOR_TYPE","labelAlign":"right","itemId":"VENDOR_TYPE","fieldLabel":"{#VENDOR_TYPE_label#}"},"children":[],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".3","border":"false","itemId":"td_2"},"children":[{"configs":{"labelWidth":"100","width":"300","labelAlign":"right","itemId":"TAX_NO","fieldLabel":"{#TAX_NO1#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".3","border":"false","itemId":"td_11"},"children":[{"configs":{"labelWidth":"100","width":"300","labelAlign":"right","itemId":"ADDRESS","fieldLabel":"{#ADDRESS1#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"panel"},{"configs":{"frame":"false","style":"padding-top:10px","layout":"column","border":"false","itemId":"tr_3"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".3","border":"false","itemId":"td_2"},"children":[{"configs":{"labelWidth":"100","width":"300","labelAlign":"right","itemId":"CONTACT","fieldLabel":"{#CONTACT1#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".3","border":"false","itemId":"td_1"},"children":[{"configs":{"labelWidth":"100","width":"300","labelAlign":"right","itemId":"TEL","fieldLabel":"{#TEL1#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".3","border":"false","itemId":"td_21"},"children":[{"configs":{"labelWidth":"100","width":"300","labelAlign":"right","itemId":"MOBILE","fieldLabel":"{#MOBILE1#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"panel"},{"configs":{"frame":"false","style":"padding-top:10px","layout":"column","border":"false","itemId":"tr_4"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".3","border":"false","itemId":"td_1"},"children":[{"configs":{"labelWidth":"100","width":"300","labelAlign":"right","itemId":"QQ","fieldLabel":"{#QQ1#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".3","border":"false","itemId":"td_2"},"children":[{"configs":{"labelWidth":"100","width":"300","labelAlign":"right","itemId":"EMAIL","fieldLabel":"{#EMAIL1#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".3","border":"false","itemId":"td_11"},"children":[{"configs":{"labelWidth":"100","width":"300","labelAlign":"right","itemId":"WECHAT","fieldLabel":"{#WECHAT1#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"panel"},{"configs":{"frame":"false","style":"padding-top:10px","layout":"column","border":"false","itemId":"tr_6"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".3","border":"false","itemId":"td_1"},"children":[{"configs":{"labelWidth":"100","allowBlank":"false","width":"300","format":"Y-m-d","labelAlign":"right","itemId":"START_DATE","fieldLabel":"<font color='red'>*<\/font>{#START_DATE1#}"},"children":[],"expanded":false,"type":"date"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".3","border":"false","itemId":"td_2"},"children":[{"configs":{"labelWidth":"100","allowBlank":"false","format":"Y-m-d","labelAlign":"right","itemId":"END_DATE","fieldLabel":"<font color='red'>*<\/font>{#END_DATE1#}"},"children":[],"expanded":false,"type":"date"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","hidden":"true","layout":"column","border":"false","itemId":"tr_8"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".3","border":"false","itemId":"td_1"},"children":[{"configs":{"labelWidth":"100","labelAlign":"right","itemId":"VENDOR_ID","fieldLabel":"ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"value":"add","itemId":"opType","fieldLabel":"操作类型"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"}],"expanded":true,"type":"panel"},{"configs":{"file":"m?xwl=xc/ap/base/vBanks/XC_AP_VENDOR_BANKS","itemId":"xwl1"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"tab"}],"expanded":false,"type":"window"},{"configs":{"layout":"border","itemId":"viewport1"},"children":[{"configs":{"region":"north","frame":"true","height":"40","style":"border-width:0px;padding-top:10px","layout":"column","itemId":"queryForm"},"children":[{"configs":{"labelWidth":"100","labelAlign":"right","itemId":"codeName","fieldLabel":"{#CODE_NAME#}"},"events":{"specialkey":"app.Grid.store.load( {  params:{codeName:app.codeName.getValue()}} );"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#queryBtn#}","itemId":"queryBtn","iconCls":"seek_icon","x":"10"},"events":{"click":"app.Grid.store.load( {  params:{codeName:app.codeName.getValue()}} );"},"children":[],"expanded":true,"type":"button"},{"configs":{"text":"{#resetBtn#}","itemId":"resetBtn","iconCls":"refresh_icon","x":"20"},"events":{"click":"app.queryForm.getForm().reset();\napp.Grid.store.load();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"form"},{"configs":{"region":"center","selType":"checkboxmodel","border":"true","itemId":"Grid"},"events":{"itemdblclick":"var rows = app.Grid.getSelection();\nif (rows.length != 1) {\n  Ext.MessageBox.alert('提示', '请选择一条数据!');\n  return;\n} else {\n  var edtiewin = new Ext.window.Window(app.addEditeWin);\n  Wb.edit(app.Grid,edtiewin);\n\n  \n  var vid = rows[0].data.VENDOR_ID; \n  edtiewin.setTitle(\"查看\");\n  app.xwl1.grid.store.load({params:{VENDOR_ID:vid}} );\n  \n  app.xwl1.VENDOR_ID.setValue(vid); //设置ID\n  app.xwl1.optype.setValue('browse'); \n  app.opType.setValue('browse') ;\n  // app.saveBtn.disabled = true;\n\tapp.vendortbar.hide();\n    app.xwl1.tbar.hide();\n  // app.savenewBtn.hide();\n  \n  \n  // app.xwl1.addBtn.hide();\n   //app.xwl1.delBtn.hide();\n   //app.xwl1.saveBtn.hide();\n}\n\n\n\n\n\n"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xc/ap/base/vendors/data/selectCodeName"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"-","itemId":"item1"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#addBtn#}","itemId":"addBtn","iconCls":"new_icon"},"events":{"click":"\nvar win = new Ext.window.Window(app.addEditeWin);\nvar uid = Xip.getId();\napp.VENDOR_ID.setValue(uid); //设置ID\napp.xwl1.VENDOR_ID.setValue(uid); //设置ID\nwin.setTitle(\"{#addBtn#}\");\napp.VENDOR_CODE.setReadOnly(false);\n\nvar myDate = new  Date();\n\nvar time = Ext.Date.parseDate(\"2099-12-31\", \"Y-m-d\"); \nvar mytime=Ext.Date.format(myDate, \"Y-m-d\"); \nvar curdtate = Ext.Date.parseDate(mytime, \"Y-m-d\"); \n\napp.START_DATE.setValue(curdtate); \napp.END_DATE.setValue(time); \n\n\n   app.vendortbar.show();\n   app.xwl1.tbar.show();\n//    app.savenewBtn.show();\n//    app.xwl1.addBtn.show();\n//    app.xwl1.delBtn.show();\n//    app.xwl1.saveBtn.show();\n\n\nwin.show();\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item11"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#editBtn#}","itemId":"editBtn","iconCls":"table_edit_icon"},"events":{"click":"var rows = app.Grid.getSelection();\nif (rows.length != 1) {\n   Wb.toast('{#MSG16#}');\n  \n  return;\n} else {\n  var edtiewin = new Ext.window.Window(app.addEditeWin);\n  Wb.edit(app.Grid,edtiewin);\n\n  var vid = rows[0].data.VENDOR_ID; \n  edtiewin.setTitle(\"{#editBtn#}\");\n  app.xwl1.grid.store.load({params:{VENDOR_ID:vid}} );\n  \n  app.xwl1.VENDOR_ID.setValue(vid); //设置ID\n  app.xwl1.optype.setValue('edit'); \n  app.opType.setValue('edit') ;\n  app.VENDOR_CODE.setReadOnly(true);\n  \n   app.vendortbar.show();\n   app.xwl1.tbar.show();\n  \n//    app.savenewBtn.show();\n//    app.xwl1.addBtn.show();\n//    app.xwl1.delBtn.show();\n//    app.xwl1.saveBtn.show();\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item12"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#editmoreBtn#}","itemId":"editmoreBtn","iconCls":"table_edit_icon"},"events":{"click":"var rows=app.Grid.getSelectionModel().getSelection();\nif(rows.length===0){\n  Wb.toast('{#MSG17#}');\n  return;\n}\nelse{\n\n  var idList = \"\" ;\n  Ext.each(rows,function(r){\n    var id = \"'\" + r.data.VENDOR_ID + \"'\";\n    if(idList === \"\"){\n      idList = id ;\n    }else{\n      idList = idList+\",\"+id ;\n    }\n  });\n  var json = {'ids' : idList} ;\n\n  var win = new Ext.window.Window(app.moerEditeWin);\n\n  win.show();\n\n\n\n}\n\n\n\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item121"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#browseBtn#}","itemId":"browseBtn"},"events":{"click":"var rows = app.Grid.getSelection();\nif (rows.length != 1) {\n  Ext.MessageBox.alert('{#TIP#}', '{#MSG16#}!');\n  return;\n} else {\n  var edtiewin = new Ext.window.Window(app.addEditeWin);\n  Wb.edit(app.Grid,edtiewin);\n\n  \n  var vid = rows[0].data.VENDOR_ID; \n  edtiewin.setTitle(\"{#browseBtn#}\");\n  app.xwl1.grid.store.load({params:{VENDOR_ID:vid}} );\n  \n  app.xwl1.VENDOR_ID.setValue(vid); //设置ID\n  app.xwl1.optype.setValue('browse'); \n  app.opType.setValue('browse') ;\n  // app.saveBtn.disabled = true;\n\tapp.vendortbar.hide();\n    app.xwl1.tbar.hide();\n  // app.savenewBtn.hide();\n  \n  \n  // app.xwl1.addBtn.hide();\n   //app.xwl1.delBtn.hide();\n   //app.xwl1.saveBtn.hide();\n}\n\n\n\n\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item1211"},"children":[],"expanded":true,"type":"item"},{"configs":{"text":"{#delBtn#}","itemId":"delBtn","iconCls":"application_delete_icon"},"events":{"click":"var rows=app.Grid.getSelectionModel().getSelection();\nif(rows.length===0){\n   Wb.toast('{#DELTIP#}');\n \n  return;\n}\nelse{\n   Ext.Msg.confirm('{#TIP#}','{#DELOKTIP#}',function(a){\n      if(a=='yes'){\n      var idList = \"\" ;\n      Ext.each(rows,function(r){\n        var id = \"'\" + r.data.VENDOR_ID + \"'\";\n        if(idList === \"\"){\n          idList = id ;\n        }else{\n          idList = idList+\",\"+id ;\n        }\n      });\n      var json = {'ids' : idList} ;\n        Wb.request({\n         url : 'm?xwl=xc/ap/base/vendors/data/delete',\n         params : json,\n         success :function(response){\n           Wb.toast('{#DELTIP1#}');\n           app.Grid.store.load();\n           \n         }\n      });\n     \n    }else{\n      return false ;\n    }\n  });\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item12111"},"children":[],"expanded":true,"type":"item"},{"configs":{"text":"{#importBtn#}","itemId":"importBtn"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item13"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#exportBtn#}","itemId":"exportBtn"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"-","itemId":"item14"},"children":[],"expanded":false,"type":"item"}],"expanded":false,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#XH#}","align":"center","width":"50","xtype":"rownumberer","titleAlign":"center","itemId":"column1"},"events":{"afterrender":"\n\n"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#VENDOR_ID1#}","hidden":"true","dataIndex":"VENDOR_ID","titleAlign":"center","itemId":"VENDOR_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#CUSTOMER_NAME_COL#}","hidden":"true","dataIndex":"CUSTOMER_NAME","titleAlign":"center","itemId":"CUSTOMER_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#CODE_COL#}","dataIndex":"VENDOR_CODE","titleAlign":"center","itemId":"VENDOR_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#NAME_COL#}","width":"230","dataIndex":"VENDOR_NAME","titleAlign":"center","itemId":"VENDOR_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#VENDOR_TYPE_label#}","dataIndex":"VENDOR_TYPE","titleAlign":"center","itemId":"VENDOR_TYPE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#CONTACT1#}","dataIndex":"CONTACT","titleAlign":"center","itemId":"CONTACT_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#TEL1#}","dataIndex":"TEL","titleAlign":"center","itemId":"TEL_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#MOBILE1#}","dataIndex":"MOBILE","titleAlign":"center","itemId":"MOBILE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#QQ1#}","dataIndex":"QQ","titleAlign":"center","itemId":"QQ_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#EMAIL1#}","dataIndex":"EMAIL","titleAlign":"center","itemId":"EMAIL_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#START_DATE1#}","dataIndex":"START_DATE","format":"Y-m-d","titleAlign":"center","itemId":"START_DATE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#END_DATE1#}","dataIndex":"END_DATE","format":"Y-m-d","titleAlign":"center","itemId":"END_DATE_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}