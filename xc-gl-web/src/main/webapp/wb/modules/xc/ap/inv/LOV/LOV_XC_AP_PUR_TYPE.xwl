{"inframe":false,"title":"采购类型选择LOV","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/ap/inv/json/LOV_XC_AP_INVOICE\");\nvar tempDocCatCode = request.getParameter('docCatCode');//获取发票类型\nrequest.setAttribute('docCatCode',tempDocCatCode);","itemId":"module"},"events":{"finalize":"var arr = [];","initialize":"var tempDocCatCode = '';\n\nWb.LEDGER_ID='';\nExt.apply(app, {\n  initWin: function(params) {\n    Ext.apply(app, params);\n    app.lovWinN = new Ext.window.Window(app.lovWinN);\n    app.lovWinN.show();\n     Wb.LEDGER_ID = params.LEDGER_ID;\n     app.LEDGER_ID.setValue(Wb.LEDGER_ID);\n  }\n});"},"children":[{"configs":{"maximized":"true","layout":"border","itemId":"lovWinN","modal":"true"},"events":{"afterrender":"var temp ='{#docCatCode#}';\nif(temp == 'CGFP-H'){\n  app.PAY_AMT_COL.getEditor().setMaxValue(0);\n}\nelse {\n  app.PAY_AMT_COL.getEditor().setMinValue(0);\n}","close":"app.hideFun();"},"children":[{"configs":{"region":"north","itemId":"form1"},"children":[{"configs":{"layout":"column","border":"false","itemId":"tr1"},"children":[{"configs":{"layout":"form","columnWidth":".245","border":"false","itemId":"td_1_1"},"children":[{"configs":{"labelWidth":"100","labelAlign":"right","itemId":"AP_PUR_TYPE_NAME","fieldLabel":"{#AP_PUR_TYPE_NAME#}"},"events":{"specialkey":"if(e.getKey()===13){app.queryBtn.fireEvent('click');}"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"100","hidden":"true","labelAlign":"right","itemId":"LEDGER_ID"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"layout":"fit","columnWidth":".245","border":"false","itemId":"td_3_2"},"children":[{"configs":{"layout":"column","border":"false","itemId":"tr_3_2_1"},"children":[{"configs":{"layout":"form","columnWidth":".02","border":"false","itemId":"td_3_2_1_1"},"children":[{"configs":{"itemId":"空格"},"children":[],"expanded":false,"type":"label"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".25","border":"false","itemId":"td_3_2_1_2"},"children":[{"configs":{"text":"{#queryBtn#}","itemId":"queryBtn","iconCls":"seek_icon"},"events":{"click":"Wb.reload(app.grid1);"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".25","border":"false","itemId":"td_3_2_1_3"},"children":[{"configs":{"text":"{#clearBtn#}","itemId":"clearBtn","iconCls":"refresh_icon"},"events":{"click":"//app.form1.getForm().reset();\napp.AP_PUR_TYPE_NAME.setValue('');\napp.queryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"form"},{"configs":{"region":"center","selType":"checkboxmodel","itemId":"grid1","editable":"true"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xc/ap/gl/LOV/DB/XC_AP_LD_PUR_TYPE_SELECT"},"events":{"beforeload":"operation.params = Wb.getValue(app.form1);\nstore.getProxy().extraParams.LEDGER_ID =Wb.LEDGER_ID;  "},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#commitBtn#}","itemId":"commitBtn","iconCls":"check_icon"},"events":{"click":"var recs = app.grid1.getSelection();\nif (!recs.length) {\n    Wb.toast(\"{#selectRec1#}\");\n    return;\n}\nvar rows = Wb.getData(recs);\nvar isContinue = false;\nWb.each(rows, function(row) {\n    if(Wb.isEmpty(row.PAY_AMT)){\n        var msg = '';\n        if('{#docCatCode#}' == 'CGFP-H'){\n            msg = '{#selectRec2#}';\n        }\n        else{\n            msg = '{#selectRec3#}';\n        }\n        Wb.toast(msg);\n        isContinue = false;\n        return false;\n    }\n    isContinue = true;\n});\nif(isContinue){\n    app.hideFun(recs);\n    app.lovWinN.close();\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#closeBtn#}","itemId":"closeBtn","iconCls":"delete_icon"},"events":{"click":"app.lovWinN.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#order#}","align":"center","xtype":"rownumberer","width":"50","titleAlign":"center","itemId":"ORDERBY"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"AP_PUR_TYPE_ID","hidden":"true","dataIndex":"AP_PUR_TYPE_ID","itemId":"AP_PUR_TYPE_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#AP_PUR_TYPE_NAME#}","width":"150","dataIndex":"AP_PUR_TYPE_NAME","titleAlign":"center","itemId":"AP_PUR_TYPE_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"BG_ITEM_ID","hidden":"true","dataIndex":"BG_ITEM_ID","itemId":"BG_ITEM_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#BG_ITEM_NAME#}","width":"150","dataIndex":"BG_ITEM_NAME","titleAlign":"center","itemId":"BG_ITEM_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#ACC_NAME#}","width":"150","dataIndex":"ACC_NAME","titleAlign":"center","itemId":"ACC_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#PAY_AMT#}","align":"right","width":"100","dataIndex":"PAY_AMT","format":"0,000.00","titleAlign":"center","itemId":"PAY_AMT_COL","renderer":"metaData.style='background-color:#ffffd0';\nreturn Wb.format((value === null || value === undefined) ? 0 : value,'0,000.00');"},"children":[{"configs":{"itemId":"editor"},"events":{"change":"if('{#docCatCode#}' == 'CGFP-H'){\n    if(newValue > 0){\n        Wb.toast(\"{#selectRec2#}\");\n        return;\n    }\n}\nif('{#docCatCode#}' == 'CGFP'){\n    if(newValue < 0){\n        Wb.toast(\"{#selectRec3#}\");\n        return;\n    }\n}","focus":"if(number.value === 0)\n\tnumber.setValue(null);"},"children":[],"expanded":false,"type":"number"}],"expanded":true,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"window"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}