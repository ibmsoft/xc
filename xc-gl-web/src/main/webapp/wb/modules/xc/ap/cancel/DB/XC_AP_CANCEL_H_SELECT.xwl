{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"var sql, data = app.get();\nsql = ' where 1=1 ';\nif (!Wb.isEmpty(data.LEDGER_ID)) {\n  sql+=' and LEDGER_ID={?LEDGER_ID?}';\n}\nif (!Wb.isEmpty(data.AP_CANCEL_TYPE)) {\n  sql+=' and AP_CANCEL_TYPE={?AP_CANCEL_TYPE?}';\n}\nif (!Wb.isEmpty(data.VENDOR_NAME)) {\n  sql+=' and VENDOR_NAME like \\'%'+data.VENDOR_NAME+'%\\' ';\n}\nif (!Wb.isEmpty(data.SRC_AMT_START)) {\n  sql+=' and SRC_AMT >='+data.SRC_AMT_START;\n}\nif (!Wb.isEmpty(data.SRC_AMT_END)) {\n  sql+=' and SRC_AMT <='+data.SRC_AMT_END;\n}\nif (!Wb.isEmpty(data.DESCRIPTION)) {\n  sql+=' and DESCRIPTION like \\'%'+data.DESCRIPTION+'%\\' ';\n}\nif (!Wb.isEmpty(data.GL_DATE_START)) {\n  if (!Wb.isEmpty(data.GL_DATE_END)) {\n    sql+=' and GL_DATE BETWEEN {?GL_DATE_START?} and {?GL_DATE_END?} ';\n  }else{\n\tsql+=' and GL_DATE >= {?GL_DATE_START?}';\n  }\n}else{\n\tif (!Wb.isEmpty(data.GL_DATE_END)) {\n      sql+=' and GL_DATE <= {?GL_DATE_END?}';\n    }\n}\nif (!Wb.isEmpty(data.CREATED_BY_NAME)) {\n  sql+=' and CREATED_BY_NAME like \\'%'+data.CREATED_BY_NAME+'%\\' ';\n}\nif (!Wb.isEmpty(data.V_STATUS)) {\n  sql+=' and V_STATUS like \\'%'+data.V_STATUS+'%\\' ';\n}\nrequest.setAttribute('sql', sql);","itemId":"module"},"children":[{"configs":{"oracle":"select * from (\n  select t1.*, ROWNUM as \"RN\" from (\n    select * from (\nSELECT \n  a.*,\n  (SELECT EMP_NAME FROM XIP_PUB_EMPS WHERE EMP_ID=(SELECT EMP_ID FROM XIP_PUB_USERS b WHERE b.USER_ID=a.CREATED_BY)) CREATED_BY_NAME,\n\n  (SELECT \n    LEDGER_NAME \n  FROM\n    xc_gl_ledgers b \n  WHERE b.LEDGER_ID = a.LEDGER_ID) LEDGER_NAME,\n  (SELECT \n    VAL_NAME \n  FROM\n    xip_pub_val_set_dtl \n  WHERE VAL_SET_CODE = 'XC_GL_V_STATUS' \n    AND VAL_CODE = a.V_STATUS) V_STATUS_NAME,\n\n  CASE\n    ap_cancel_type \n    WHEN 'YFHYUF' \n    THEN '应付核预付' \n    WHEN 'YFHYS' \n    THEN '应付核应收' \n    WHEN 'YFHLDC' \n    THEN '应付红蓝对冲' \n    WHEN 'YUFHLDC' \n    THEN '预付红蓝对冲' \n    ELSE '应付核预付' \n  END AS AP_CANCEL_TYPE_NAME,\n      \n  CASE\n    WHEN ap_cancel_type = 'YFHYUF' \n    OR ap_cancel_type = 'YFHLDC' \n    THEN \n    (SELECT \n      AP_DOC_CAT_CODE \n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID \n    LIMIT 1) \n    WHEN ap_cancel_type = 'YUFHLDC' \n    THEN \n    (SELECT \n      AP_DOC_CAT_CODE \n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID \n    LIMIT 1) \n    ELSE \n    (SELECT \n      AP_DOC_CAT_CODE \n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID \n    LIMIT 1) \n  END AS AP_DOC_CAT_CODE,\n      \n  CASE\n    WHEN ap_cancel_type = 'YFHYUF' \n    OR ap_cancel_type = 'YFHLDC' \n    THEN \n    (SELECT \n      AP_INV_GL_H_CODE \n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID \n    LIMIT 1) \n    WHEN ap_cancel_type = 'YUFHLDC' \n    THEN \n    (SELECT \n      AP_PAY_H_CODE \n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID \n    LIMIT 1) \n    ELSE \n    (SELECT \n      AP_INV_GL_H_CODE \n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID \n    LIMIT 1) \n  END AS SRC_CODE ,\n       CASE\n    WHEN ap_cancel_type = 'YFHYUF' \n    OR ap_cancel_type = 'YUFHLDC' \n    THEN \n    (SELECT \n      (SELECT AP_CONTRACT_NAME FROM xc_ap_contract c WHERE c.AP_CONTRACT_ID=b.AP_CONTRACT_ID) \n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n    WHEN ap_cancel_type = 'YFHLDC' \n    THEN \n    (SELECT \n      (SELECT AP_CONTRACT_NAME FROM xc_ap_contract c WHERE c.AP_CONTRACT_ID=b.AP_CONTRACT_ID) \n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID) \n    ELSE \n    (SELECT \n      (SELECT AP_CONTRACT_NAME FROM xc_ap_contract c WHERE c.AP_CONTRACT_ID=b.AP_CONTRACT_ID) \n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n  END AS AP_CONTRACT_NAME,\n  \n  CASE\n    WHEN ap_cancel_type = 'YFHYUF' \n    OR ap_cancel_type = 'YUFHLDC' \n    THEN \n    (SELECT \n      (SELECT c.VENDOR_NAME FROM xc_ap_vendors c WHERE c.VENDOR_ID=b.VENDOR_ID) \n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n    WHEN ap_cancel_type = 'YFHLDC' \n    THEN \n    (SELECT \n      (SELECT c.VENDOR_NAME FROM xc_ap_vendors c WHERE c.VENDOR_ID=b.VENDOR_ID) \n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID) \n    ELSE \n    (SELECT \n      (SELECT c.VENDOR_NAME FROM xc_ap_vendors c WHERE c.VENDOR_ID=b.VENDOR_ID) \n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n  END AS VENDOR_NAME,\n  \n  CASE\n    WHEN ap_cancel_type = 'YFHYUF' \n    OR ap_cancel_type = 'YUFHLDC' \n    THEN \n    (SELECT \n      (SELECT c.DEPT_NAME FROM xip_pub_depts c WHERE c.DEPT_ID=b.DEPT_ID)\n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n    WHEN ap_cancel_type = 'YFHLDC' \n    THEN \n    (SELECT \n      (SELECT c.DEPT_NAME FROM xip_pub_depts c WHERE c.DEPT_ID=b.DEPT_ID) \n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID) \n    ELSE \n    (SELECT \n      (SELECT c.DEPT_NAME FROM xip_pub_depts c WHERE c.DEPT_ID=b.DEPT_ID) \n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n  END AS DEPT_NAME,\n  \n  CASE\n    WHEN ap_cancel_type = 'YFHYUF' \n    OR ap_cancel_type = 'YUFHLDC' \n    THEN \n    (SELECT \n      (SELECT c.PROJECT_NAME FROM xc_pm_projects c WHERE c.PROJECT_ID=b.PROJECT_ID)\n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n    WHEN ap_cancel_type = 'YFHLDC' \n    THEN \n    (SELECT \n      (SELECT c.PROJECT_NAME FROM xc_pm_projects c WHERE c.PROJECT_ID=b.PROJECT_ID)\n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID) \n    ELSE \n    (SELECT \n      (SELECT c.PROJECT_NAME FROM xc_pm_projects c WHERE c.PROJECT_ID=b.PROJECT_ID)\n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n  END AS PROJECT_NAME\nFROM\n  xc_ap_cancel_h a \n    ) t\n {#sql#}\n    order by CREATION_DATE DESC\n  ) t1 where ROWNUM<={?bigint.endIndex?}\n)\nwhere RN >= {?bigint.beginIndex?}","itemId":"select","mysql":"select * from (\nSELECT \n  a.*,\n  (SELECT EMP_NAME FROM XIP_PUB_EMPS WHERE EMP_ID=(SELECT EMP_ID FROM XIP_PUB_USERS b WHERE b.USER_ID=a.CREATED_BY)) CREATED_BY_NAME,\n \n  CASE\n    WHEN ap_cancel_type = 'YFHYUF' \n    OR ap_cancel_type = 'YFHLDC' \n    THEN \n    (SELECT \n      AP_DOC_CAT_CODE \n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID \n    LIMIT 1) \n    WHEN ap_cancel_type = 'YUFHLDC' \n    THEN \n    (SELECT \n      AP_DOC_CAT_CODE \n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID \n    LIMIT 1) \n    ELSE \n    (SELECT \n      AP_DOC_CAT_CODE \n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID \n    LIMIT 1) \n  END AS AP_DOC_CAT_CODE,\n  \n  CASE\n    WHEN ap_cancel_type = 'YFHYUF' \n    OR ap_cancel_type = 'YFHLDC' \n    THEN \n    (SELECT \n      AP_INV_GL_H_CODE \n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID \n    LIMIT 1) \n    WHEN ap_cancel_type = 'YUFHLDC' \n    THEN \n    (SELECT \n      AP_PAY_H_CODE \n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID \n    LIMIT 1) \n    ELSE \n    (SELECT \n      AP_INV_GL_H_CODE \n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID \n    LIMIT 1) \n  END AS SRC_CODE,\n  \n  CASE\n    WHEN ap_cancel_type = 'YFHYUF' \n    OR ap_cancel_type = 'YUFHLDC' \n    THEN \n    (SELECT \n      (SELECT AP_CONTRACT_NAME FROM xc_ap_contract c WHERE c.AP_CONTRACT_ID=b.AP_CONTRACT_ID) \n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n    WHEN ap_cancel_type = 'YFHLDC' \n    THEN \n    (SELECT \n      (SELECT AP_CONTRACT_NAME FROM xc_ap_contract c WHERE c.AP_CONTRACT_ID=b.AP_CONTRACT_ID) \n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID) \n    ELSE \n    (SELECT \n      (SELECT AP_CONTRACT_NAME FROM xc_ap_contract c WHERE c.AP_CONTRACT_ID=b.AP_CONTRACT_ID) \n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n  END AS AP_CONTRACT_NAME,\n  \n  CASE\n    WHEN  ap_cancel_type = 'YUFHLDC' \n    THEN \n    (SELECT \n      (SELECT c.VENDOR_NAME FROM xc_ap_vendors c WHERE c.VENDOR_ID=b.VENDOR_ID) \n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n    WHEN ap_cancel_type = 'YFHLDC' OR ap_cancel_type = 'YFHYUF' OR ap_cancel_type = 'YFHYS'\n    THEN \n    (SELECT \n      (SELECT c.VENDOR_NAME FROM xc_ap_vendors c WHERE c.VENDOR_ID=b.VENDOR_ID) \n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID) \n    ELSE \n    (SELECT \n      (SELECT c.VENDOR_NAME FROM xc_ap_vendors c WHERE c.VENDOR_ID=b.VENDOR_ID) \n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n  END AS VENDOR_NAME,\n  \n  CASE\n    WHEN ap_cancel_type = 'YFHYUF' \n    OR ap_cancel_type = 'YUFHLDC' \n    THEN \n    (SELECT \n      (SELECT c.DEPT_NAME FROM xip_pub_depts c WHERE c.DEPT_ID=b.DEPT_ID)\n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n    WHEN ap_cancel_type = 'YFHLDC' \n    THEN \n    (SELECT \n      (SELECT c.DEPT_NAME FROM xip_pub_depts c WHERE c.DEPT_ID=b.DEPT_ID) \n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID) \n    ELSE \n    (SELECT \n      (SELECT c.DEPT_NAME FROM xip_pub_depts c WHERE c.DEPT_ID=b.DEPT_ID) \n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n  END AS DEPT_NAME,\n  \n  CASE\n    WHEN ap_cancel_type = 'YFHYUF' \n    OR ap_cancel_type = 'YUFHLDC' \n    THEN \n    (SELECT \n      (SELECT c.PROJECT_NAME FROM xc_pm_projects c WHERE c.PROJECT_ID=b.PROJECT_ID)\n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n    WHEN ap_cancel_type = 'YFHLDC' \n    THEN \n    (SELECT \n      (SELECT c.PROJECT_NAME FROM xc_pm_projects c WHERE c.PROJECT_ID=b.PROJECT_ID)\n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID) \n    ELSE \n    (SELECT \n      (SELECT c.PROJECT_NAME FROM xc_pm_projects c WHERE c.PROJECT_ID=b.PROJECT_ID)\n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n  END AS PROJECT_NAME\nFROM\n  xc_ap_cancel_h a \n) t {#sql#}\norder by CREATION_DATE DESC\nlimit {?bigint.start?},{?bigint.limit?}\n"},"children":[],"expanded":false,"type":"sqlswitcher"},{"configs":{"sql":"{#select#}","totalSql":"select count(*) from(\n\n  SELECT \n  a.*,\n  (SELECT EMP_NAME FROM XIP_PUB_EMPS WHERE EMP_ID=(SELECT EMP_ID FROM XIP_PUB_USERS b WHERE b.USER_ID=a.CREATED_BY)) CREATED_BY_NAME,\n\n  (SELECT \n    LEDGER_NAME \n  FROM\n    xc_gl_ledgers b \n  WHERE b.LEDGER_ID = a.LEDGER_ID) LEDGER_NAME,\n  (SELECT \n    VAL_NAME \n  FROM\n    xip_pub_val_set_dtl \n  WHERE VAL_SET_CODE = 'XC_GL_V_STATUS' \n    AND VAL_CODE = a.V_STATUS) V_STATUS_NAME,\n  CASE\n    ap_cancel_type \n    WHEN 'YFHYUF' \n    THEN '应付核预付' \n    WHEN 'YFHYS' \n    THEN '应付核应收' \n    WHEN 'YFHLDC' \n    THEN '应付红蓝对冲' \n    WHEN 'YUFHLDC' \n    THEN '预付红蓝对冲' \n    ELSE '应付核预付' \n  END AS AP_CANCEL_TYPE_NAME,\n  CASE\n    WHEN ap_cancel_type = 'YFHYUF' \n    OR ap_cancel_type = 'YFHLDC' \n    THEN \n    (SELECT \n      AP_INV_GL_H_CODE \n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID \n    LIMIT 1) \n    WHEN ap_cancel_type = 'YUFHLDC' \n    THEN \n    (SELECT \n      AP_PAY_H_CODE \n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID \n    LIMIT 1) \n    ELSE \n    (SELECT \n      AP_INV_GL_H_CODE \n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID \n    LIMIT 1) \n  END AS SRC_CODE ,\n   CASE\n    WHEN ap_cancel_type = 'YFHYUF' \n    OR ap_cancel_type = 'YUFHLDC' \n    THEN \n    (SELECT \n      (SELECT AP_CONTRACT_NAME FROM xc_ap_contract c WHERE c.AP_CONTRACT_ID=b.AP_CONTRACT_ID) \n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n    WHEN ap_cancel_type = 'YFHLDC' \n    THEN \n    (SELECT \n      (SELECT AP_CONTRACT_NAME FROM xc_ap_contract c WHERE c.AP_CONTRACT_ID=b.AP_CONTRACT_ID) \n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID) \n    ELSE \n    (SELECT \n      (SELECT AP_CONTRACT_NAME FROM xc_ap_contract c WHERE c.AP_CONTRACT_ID=b.AP_CONTRACT_ID) \n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n  END AS AP_CONTRACT_NAME,\n  \n  CASE\n    WHEN ap_cancel_type = 'YFHYUF' \n    OR ap_cancel_type = 'YUFHLDC' \n    THEN \n    (SELECT \n      (SELECT c.VENDOR_NAME FROM xc_ap_vendors c WHERE c.VENDOR_ID=b.VENDOR_ID) \n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n    WHEN ap_cancel_type = 'YFHLDC' \n    THEN \n    (SELECT \n      (SELECT c.VENDOR_NAME FROM xc_ap_vendors c WHERE c.VENDOR_ID=b.VENDOR_ID) \n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID) \n    ELSE \n    (SELECT \n      (SELECT c.VENDOR_NAME FROM xc_ap_vendors c WHERE c.VENDOR_ID=b.VENDOR_ID) \n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n  END AS VENDOR_NAME,\n  \n  CASE\n    WHEN ap_cancel_type = 'YFHYUF' \n    OR ap_cancel_type = 'YUFHLDC' \n    THEN \n    (SELECT \n      (SELECT c.DEPT_NAME FROM xip_pub_depts c WHERE c.DEPT_ID=b.DEPT_ID)\n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n    WHEN ap_cancel_type = 'YFHLDC' \n    THEN \n    (SELECT \n      (SELECT c.DEPT_NAME FROM xip_pub_depts c WHERE c.DEPT_ID=b.DEPT_ID) \n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID) \n    ELSE \n    (SELECT \n      (SELECT c.DEPT_NAME FROM xip_pub_depts c WHERE c.DEPT_ID=b.DEPT_ID) \n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n  END AS DEPT_NAME,\n  \n  CASE\n    WHEN ap_cancel_type = 'YFHYUF' \n    OR ap_cancel_type = 'YUFHLDC' \n    THEN \n    (SELECT \n      (SELECT c.PROJECT_NAME FROM xc_pm_projects c WHERE c.PROJECT_ID=b.PROJECT_ID)\n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n    WHEN ap_cancel_type = 'YFHLDC' \n    THEN \n    (SELECT \n      (SELECT c.PROJECT_NAME FROM xc_pm_projects c WHERE c.PROJECT_ID=b.PROJECT_ID)\n    FROM\n      xc_ap_inv_gl_h b \n    WHERE b.AP_INV_GL_H_ID = a.SRC_ID) \n    ELSE \n    (SELECT \n      (SELECT c.PROJECT_NAME FROM xc_pm_projects c WHERE c.PROJECT_ID=b.PROJECT_ID)\n    FROM\n      xc_ap_pay_h b \n    WHERE b.AP_PAY_H_ID = a.SRC_ID) \n  END AS PROJECT_NAME\nFROM\n  xc_ap_cancel_h a \n  \n  ) t {#sql#}","itemId":"dataprovider1"},"children":[],"expanded":false,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}