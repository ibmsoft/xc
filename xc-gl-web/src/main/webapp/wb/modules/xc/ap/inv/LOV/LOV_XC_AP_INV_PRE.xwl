{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/ap/inv/json/LOV_XC_AP_INVOICE\");","itemId":"module"},"events":{"initialize":"Ext.apply(app, {\n  initWin: function(params) {\n    Ext.apply(app, params);\n    app.lovWinN = new Ext.window.Window(app.lovWinN);\n    app.lovWinN.show();\n    app.AP_INV_H_ID.setValue(params.AP_INV_H_ID);\n    app.LEDGER_ID.setValue(params.LEDGER_ID);\n    app.AP_DOC_CAT_CODE.setValue(params.AP_DOC_CAT_CODE);\n    app.VENDOR_ID.setValue(params.VENDOR_ID);\n    app.AP_CONTRACT_ID.setValue(params.AP_CONTRACT_ID);\n    app.grid1.getStore().load();\n  }\n});"},"children":[{"configs":{"maximized":"true","layout":"border","itemId":"lovWinN"},"events":{"close":"var store = app.grid1.getStore();\nvar cancelAmount = 0;\nfor(var i = 0;i < store.getCount();i++){\n\tcancelAmount = cancelAmount + store.getAt(i).get('CANCEL_AMT');\n}\napp.hideFun(cancelAmount);"},"children":[{"configs":{"region":"north","hidden":"true","itemId":"form1"},"children":[{"configs":{"hidden":"true","itemId":"LEDGER_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"AP_INV_H_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"VENDOR_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"AP_CONTRACT_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"AP_DOC_CAT_CODE"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"form"},{"configs":{"region":"center","selType":"checkboxmodel","itemId":"grid1"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/ap/inv/LOV/DB/XC_AP_INV_PRE_SELECT"},"events":{"beforeload":"operation.params = Wb.getValue(app.form1);"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#selectPayBtn#}","itemId":"selectPayBtn","iconCls":"add_icon"},"events":{"click":"var ap_inv_h_id = app.AP_INV_H_ID.getValue();\nvar ledger_id = app.LEDGER_ID.getValue();\nvar ap_doc_cat_code = app.AP_DOC_CAT_CODE.getValue();\nvar vendor_id = app.VENDOR_ID.getValue();\nvar contract_id = app.AP_CONTRACT_ID.getValue();\nvar curGrid = app.grid1;\n\nWb.run({\n  \n  url: 'm?xwl=xc/ap/inv/LOV/LOV_XC_AP_PAY_H', \n  success: function(app) {\n    app.initWin({\n\t\tAP_INV_H_ID:ap_inv_h_id,\n        LEDGER_ID:ledger_id, \n        AP_DOC_CAT_CODE:ap_doc_cat_code,\n        VENDOR_ID : vendor_id,\n        AP_CONTRACT_ID : contract_id,\n        curData:curGrid.getStore(),\n        hideFun:function(){   \n          Wb.reload(curGrid.getStore());\n        }\n      \n    });\n\n  }\n  \n});\n\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#delBtn#}","itemId":"delBtn","iconCls":"file_delete_icon"},"events":{"click":"var recs = app.grid1.getSelection();\nif (!recs.length) {\n    Wb.toast(\"{#deleteRec#}\");\n    return;\n}\nWb.confirm('{#confirm1#} ' + recs.length + ' {#confirm3#}', function() {\n  Wb.request({\n    url: 'm?xwl=xc/ap/inv/DB/XC_AP_INV_PRE_DELETE',\n    params: Wb.apply({\n      destroy: Wb.getData(recs)\n    }),\n    success: function() {\n      Wb.remove(app.grid1, recs);\n    }\n  });\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#closeBtn#}","itemId":"closeBtn","iconCls":"delete_icon"},"events":{"click":"app.lovWinN.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#order#}","align":"center","xtype":"rownumberer","width":"50","titleAlign":"center","itemId":"ORDERBY"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#GL_DATE#}","hidden":"true","width":"100","dataIndex":"GL_DATE","titleAlign":"center","itemId":"GL_DATE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"AP_PAY_H_ID","hidden":"true","width":"100","dataIndex":"AP_PAY_H_ID","itemId":"AP_PAY_H_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#DESCRIPTION#}","width":"200","dataIndex":"DESCRIPTION","titleAlign":"center","itemId":"DESCRIPTION_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#AMOUNT#}","hidden":"true","align":"right","width":"100","dataIndex":"AMOUNT","format":"0,000.00","titleAlign":"center","itemId":"AMOUNT_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#NO_CANCEL_AMT#}","align":"right","width":"100","dataIndex":"NO_CANCEL_AMT","format":"0,000.00","titleAlign":"center","itemId":"NO_CANCEL_AMT_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#CANCEL_AMT#}","width":"100","align":"right","dataIndex":"CANCEL_AMT","format":"0,000.00","titleAlign":"center","itemId":"CANCEL_AMT_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#DEPT_NAME#}","width":"150","dataIndex":"DEPT_NAME","titleAlign":"center","itemId":"DEPT_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#PROJECT_NAME#}","width":"150","dataIndex":"PROJECT_NAME","titleAlign":"center","itemId":"PROJECT_NAME_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"window"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}