{"inframe":false,"title":"合同台帐明细","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"request.setAttribute('contextPath',request.getContextPath());\nvar pDbtype = com.xzsoft.xip.platform.util.PlatformUtil.getDbType() ;\nvar pLanguage = request.getSession().getAttribute(\"XzSessionVars\").get(\"language\");\nrequest.setAttribute('pDbtype',pDbtype);\nrequest.setAttribute('pLanguage',pLanguage);","itemId":"module"},"children":[{"configs":{"layout":"border","itemId":"viewport1"},"children":[{"configs":{"region":"north","itemId":"queryForm"},"children":[{"configs":{"layout":"column","border":"false","itemId":"tr1"},"children":[{"configs":{"layout":"form","columnWidth":".3","border":"false","itemId":"td_1_1"},"children":[{"configs":{"labelWidth":"40","displayField":"NAME","valueField":"CODE","labelAlign":"right","itemId":"QUERY_LEDGER_ID","fieldLabel":"账簿"},"events":{"select":"\n//清空form中其他已经选择的条件\napp.QUERY_CONTRACT_ID.clearValue();","beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/ap/report/DB/getAllLedger"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".3","border":"false","itemId":"td_1_2"},"children":[{"configs":{"labelWidth":"60","displayField":"NAME","valueField":"CODE","labelAlign":"right","itemId":"QUERY_CONTRACT_ID","fieldLabel":"合同号"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/ap/report/DB/getContract"},"events":{"beforeload":"var v_ledgerId = app.QUERY_LEDGER_ID.getValue();\nif(Wb.isEmpty(v_ledgerId)){\n  Wb.toast('请先选择账簿！');\n  return;\n}\nstore.proxy.extraParams.ledgerId = v_ledgerId;"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".1","border":"false","itemId":"td_1_4"},"children":[{"configs":{"layout":"column","border":"false","itemId":"tr_1_4","x":"10"},"children":[{"configs":{"layout":"form","columnWidth":".5","border":"false","itemId":"td_1_4_1"},"children":[{"configs":{"text":"查询","itemId":"queryBtn"},"events":{"click":"\nvar v_ledgerId = app.QUERY_LEDGER_ID.getValue();\nvar v_contractId = app.QUERY_CONTRACT_ID.getValue();\nif(Wb.isEmpty(v_ledgerId)){\n  Wb.toast('请先选择账簿！');\n  return;\n}\n\nif(Wb.isEmpty(v_contractId)){\n  Wb.toast('请选择合同！');\n  return;\n}\nvar map = new Ext.util.HashMap();\n//账簿\nmap.add('ledgerId',app.QUERY_LEDGER_ID.getValue());\nmap.add('contractId',app.QUERY_CONTRACT_ID.getValue());\nmap.add('pDbtype',\"{#pDbtype#}\");\nmap.add('pLanguage',\"{#pLanguage#}\");\n\nvar targetUrl = '{#contextPath#}/ReportServer?reportlet=xc_ap/AP_HTTZMX.cpt&__bypagesize__=false';\nvar reportFrame = document.getElementById('reportIframe');\nvar params = '';\nmap.each(function(key, value, length){\n    params +='&'+key+'='+value;\n});\nparams = targetUrl+params;\nreportFrame.src = params;"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".5","border":"false","itemId":"td_1_4_2"},"children":[{"configs":{"text":"重置","itemId":"clearBtn"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","html":"<iframe  scrolling=no  frameborder=0 width=100% height=100% id=reportIframe src='{#contextPath#}/ReportServer?reportlet=xc_ap/AP_HTTZMX.cpt&__bypagesize__=false'><\/iframe>\n","itemId":"reportForm"},"children":[],"expanded":false,"type":"panel"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}