{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"var lang = request.getSession().getAttribute(\"XzSessionVars\").get('language');\nrequest.setAttribute(\"language\",lang);","serverScript":"var sql, data = app.get();\nsql = ' where 1=1 ';\n//if (!Wb.isEmpty(data.LEDGER_ID)) {\n  sql+=' and LEDGER_ID={?LEDGER_ID?}';\n//}\nif (!Wb.isEmpty(data.AP_DOC_CAT_CODE)) {\n    if(data.AP_DOC_CAT_CODE != 'All'){\n        sql+=' and AP_DOC_CAT_CODE={?AP_DOC_CAT_CODE?}';\n    }\n}\nif (!Wb.isEmpty(data.AP_INV_H_CODE)) {\n  sql+=' and AP_INV_H_CODE like \\'%'+data.AP_INV_H_CODE+'%\\' ';\n}\nif (!Wb.isEmpty(data.INV_AMOUNT_START)) {\n  sql+=' and INV_AMOUNT >='+data.INV_AMOUNT_START;\n}\nif (!Wb.isEmpty(data.INV_AMOUNT_END)) {\n  sql+=' and INV_AMOUNT <='+data.INV_AMOUNT_END;\n}\nif (!Wb.isEmpty(data.VENDOR_NAME)) {\n  sql+=' and VENDOR_NAME like \\'%'+data.VENDOR_NAME+'%\\' ';\n}\nif (!Wb.isEmpty(data.PROJECT_NAME)) {\n  sql+=' and PROJECT_NAME like \\'%'+data.PROJECT_NAME+'%\\' ';\n}\nif (!Wb.isEmpty(data.DEPT_NAME)) {\n  sql+=' and DEPT_NAME like \\'%'+data.DEPT_NAME+'%\\' ';\n}\nif (!Wb.isEmpty(data.BIZ_DATE_START)) {\n  if (!Wb.isEmpty(data.BIZ_DATE_END)) {\n    sql+=' and BIZ_DATE BETWEEN {?BIZ_DATE_START?} and {?BIZ_DATE_END?} ';\n  }else{\n\tsql+=' and BIZ_DATE >= {?BIZ_DATE_START?}';\n  }\n}else{\n\tif (!Wb.isEmpty(data.BIZ_DATE_END)) {\n      sql+=' and BIZ_DATE <= {?BIZ_DATE_END?}';\n    }\n}\nif (!Wb.isEmpty(data.AUDIT_STATUS)) {\n    if(data.AUDIT_STATUS != 'ALL')\n        sql+=' and AUDIT_STATUS={?AUDIT_STATUS?}';\n}\nif (!Wb.isEmpty(data.SOURCE)) {\n    if(data.SOURCE != 'ALL')\n        sql+=' and SOURCE={?SOURCE?}';\n}\nif (!Wb.isEmpty(data.SYS_AUDIT_STATUS)) {\n    if(data.SYS_AUDIT_STATUS != 'ALL')\n        sql+=' and SYS_AUDIT_STATUS={?SYS_AUDIT_STATUS?}';\n}\nif (!Wb.isEmpty(data.SIGN_STATUS)) {\n  if(data.SIGN_STATUS != 'ALL'){\n    if(data.SYS_AUDIT_STATUS == 'E'){\n      sql+=' AND (SELECT IS_SIGN FROM xc_ap_doc_cats WHERE AP_CAT_CODE = AP_DOC_CAT_CODE)=\"1\" ';\n    }\n    if(data.SIGN_STATUS == '2'){\n      sql+=' and SIGN_STATUS=\"2\"';\n    }else{\n      if(data.SIGN_STATUS == '0'){\n        sql+=' and SIGN_STATUS in (\"1\",\"3\")';\n      }\n      else{\n        sql+=' and SIGN_STATUS={?SIGN_STATUS?}';\n      }\n    }\n  }\n}\nif (!Wb.isEmpty(data.SIGN_USER_ID)) {\n    sql+= \" AND IF((SELECT IS_SIGN FROM xc_ap_doc_cats WHERE AP_CAT_CODE = AP_DOC_CAT_CODE)<>'0',SIGN_USER_ID IS NOT NULL AND SIGN_STATUS<>'3' ,1=1 AND SIGN_STATUS<>'3' )\";\n}\nif (!Wb.isEmpty(data.CREATED_BY)) {\n  sql+=' and CREATED_BY={?CREATED_BY?}';\n}\nif (!Wb.isEmpty(data.CREATED_BY_NAME)) {\n  sql+=' and CREATED_BY_NAME like \\'%'+data.CREATED_BY_NAME+'%\\' ';\n}\nif (!Wb.isEmpty(data.IS_NO_SIGN_SELECT)) {\n   sql+=' and INS_CODE is not null ';\n}\nif (!Wb.isEmpty(data.FIN_NO)) {\n   sql+=data.FIN_NO;\n}\nrequest.setAttribute('sql', sql);","itemId":"module"},"children":[{"configs":{"oracle":"select * from (\n  select t1.*, ROWNUM as \"RN\" from (\n(\n    SELECT \n      a.*,\n      (select AP_INV_GL_H_ID from xc_ap_inv_gl_h b where b.AP_INV_H_ID=a.AP_INV_H_ID AND b.AP_INV_H_ID != '')   AP_INV_GL_H_ID,\n      (select NO_PAY_AMT from xc_ap_inv_gl_h b where b.AP_INV_H_ID=a.AP_INV_H_ID AND b.AP_INV_H_ID != '')   NO_PAY_AMT,\n      (select AP_INV_H_CODE from xc_ap_invoice_h b where b.AP_INV_H_ID=a.L_AP_INV_H_ID) L_AP_INV_H_CODE,\n      (SELECT AP_CAT_NAME FROM xc_ap_doc_cats b WHERE b.AP_CAT_CODE=a.AP_DOC_CAT_CODE) AP_DOC_CAT_NAME,\n      (SELECT LEDGER_NAME FROM xc_gl_ledgers b WHERE b.LEDGER_ID=a.LEDGER_ID) LEDGER_NAME,\n      (SELECT VENDOR_NAME FROM xc_ap_vendors b WHERE b.VENDOR_ID=a.VENDOR_ID) VENDOR_NAME,\n      (SELECT PROJECT_NAME FROM xc_pm_projects b WHERE b.PROJECT_ID=a.PROJECT_ID) PROJECT_NAME,\n      (SELECT DEPT_NAME FROM xip_pub_depts b WHERE b.DEPT_ID=a.DEPT_ID) DEPT_NAME,\n      (SELECT AP_CONTRACT_NAME FROM xc_ap_contract b WHERE b.AP_CONTRACT_ID=a.AP_CONTRACT_ID) AP_CONTRACT_NAME,\n      (SELECT EMP_NAME FROM XIP_PUB_EMPS WHERE EMP_ID=(SELECT EMP_ID FROM XIP_PUB_USERS b WHERE b.USER_ID=a.FIN_USER_ID)) FIN_USER_NAME,\n      (SELECT EMP_NAME FROM XIP_PUB_EMPS WHERE EMP_ID=(SELECT EMP_ID FROM XIP_PUB_USERS b WHERE b.USER_ID=a.SIGN_USER_ID)) SIGN_USER_NAME,\n      (SELECT VAL_NAME FROM xip_pub_val_set_dtl  WHERE VAL_SET_CODE='XC_EX_SIGN_STATUS' AND VAL_CODE=SIGN_STATUS) SIGN_STATUS_NAME,\n      (SELECT EMP_NAME FROM XIP_PUB_EMPS WHERE EMP_ID=(SELECT EMP_ID FROM XIP_PUB_USERS b WHERE b.USER_ID=a.CREATED_BY)) CREATED_BY_NAME\n    FROM\n      xc_ap_invoice_h a \n) t {#sql#}\n  ORDER BY t.AP_INV_H_CODE DESC\n  ) t1 where ROWNUM<={?bigint.endIndex?}\n)\nwhere RN >= {?bigint.beginIndex?}","itemId":"select","mysql":"select * from (\nSELECT \n    a.*,\n  (SELECT\n     CASE WHEN l.DESCRIPTION IS NULL OR l.DESCRIPTION = '' THEN d.DESCRIPTION ELSE l.DESCRIPTION END DESCRIPTION\n   FROM\n     xip_pub_val_set_dtl d\n   LEFT JOIN XIP_PUB_VAL_SET_DTL_LANG l ON d.VAL_SET_CODE = l.VAL_SET_CODE\n   AND d.VAL_CODE = l.VAL_CODE\n   AND l.VAL_SET_LANG = '{#language#}'\n   WHERE\n     d.VAL_SET_CODE = 'XC_AP_SYS_AUDIT_STATUS'\n   AND d.ENABLE_FLAG = 'Y'\n   AND d.VAL_CODE = a.SYS_AUDIT_STATUS) AS XC_AP_SYS_AUDIT_STATUS,\n  (select AP_INV_GL_H_ID from xc_ap_inv_gl_h b where b.AP_INV_H_ID=a.AP_INV_H_ID AND b.AP_INV_H_ID != '')   GL_AP_INV_GL_H_ID,\n  ifnull((select NO_PAY_AMT from xc_ap_inv_gl_h b where b.AP_INV_H_ID=a.AP_INV_H_ID AND b.AP_INV_H_ID != ''),0)   NO_PAY_AMT,\n  (select AP_INV_H_CODE from xc_ap_invoice_h b where b.AP_INV_H_ID=a.L_AP_INV_H_ID) L_AP_INV_H_CODE,\n  (SELECT AP_CAT_NAME FROM xc_ap_doc_cats b WHERE b.AP_CAT_CODE=a.AP_DOC_CAT_CODE) AP_DOC_CAT_NAME,\n  (SELECT LEDGER_NAME FROM xc_gl_ledgers b WHERE b.LEDGER_ID=a.LEDGER_ID) LEDGER_NAME,\n  (SELECT VENDOR_NAME FROM xc_ap_vendors b WHERE b.VENDOR_ID=a.VENDOR_ID) VENDOR_NAME,\n  (SELECT PROJECT_NAME FROM xc_pm_projects b WHERE b.PROJECT_ID=a.PROJECT_ID) PROJECT_NAME,\n  (SELECT DEPT_NAME FROM xip_pub_depts b WHERE b.DEPT_ID=a.DEPT_ID) DEPT_NAME,\n  (SELECT AP_CONTRACT_NAME FROM xc_ap_contract b WHERE b.AP_CONTRACT_ID=a.AP_CONTRACT_ID) AP_CONTRACT_NAME,\n  (SELECT EMP_NAME FROM XIP_PUB_EMPS WHERE EMP_ID=(SELECT EMP_ID FROM XIP_PUB_USERS b WHERE b.USER_ID=a.FIN_USER_ID)) FIN_USER_NAME,\n  (SELECT EMP_NAME FROM XIP_PUB_EMPS WHERE EMP_ID=(SELECT EMP_ID FROM XIP_PUB_USERS b WHERE b.USER_ID=a.SIGN_USER_ID)) SIGN_USER_NAME,\n  (SELECT VAL_NAME FROM xip_pub_val_set_dtl  WHERE VAL_SET_CODE='XC_EX_SIGN_STATUS' AND VAL_CODE=SIGN_STATUS) SIGN_STATUS_NAME,\n  (SELECT EMP_NAME FROM XIP_PUB_EMPS WHERE EMP_ID=(SELECT EMP_ID FROM XIP_PUB_USERS b WHERE b.USER_ID=a.CREATED_BY)) CREATED_BY_NAME\n  FROM\n  xc_ap_invoice_h a \n) t\n\t{#sql#}\n  ORDER BY t.AP_INV_H_CODE DESC\nlimit {?bigint.start?},{?bigint.limit?}"},"children":[],"expanded":false,"type":"sqlswitcher"},{"configs":{"sql":"{#select#}","itemId":"dataprovider1"},"children":[],"expanded":false,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}