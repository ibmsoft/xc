{"inframe":false,"title":"采购类型选择LOV","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"com.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,'xc/ap/req/json/LOV_XC_AP_PUR_TYPE');","itemId":"module"},"events":{"initialize":"Wb.apPayHId = '';\nWb.ap_doc_cat_code = '';\n\nExt.apply(app, {\n  initWin: function(params) {\n    Ext.apply(app, params);\n    app.lovWinN = new Ext.window.Window(app.lovWinN);\n    app.lovWinN.show();\n    Wb.apPayHId = params.AP_PAY_H_ID;\n    Wb.ap_doc_cat_code = params.AP_DOC_CAT_CODE;\n    Wb.ledger_id = params.LEDGER_ID;\n    app.LEDGER_ID.setValue(Wb.ledger_id);\n  }\n});"},"children":[{"configs":{"maximized":"true","layout":"border","itemId":"lovWinN","modal":"true"},"events":{"close":"app.hideFun();"},"children":[{"configs":{"region":"north","itemId":"form1"},"children":[{"configs":{"layout":"column","border":"false","itemId":"tr1"},"children":[{"configs":{"layout":"form","columnWidth":".245","border":"false","itemId":"td_1_1"},"children":[{"configs":{"labelWidth":"100","labelAlign":"right","itemId":"AP_PUR_TYPE_NAME","fieldLabel":"{#purchaseType#}"},"children":[],"expanded":true,"type":"text"},{"configs":{"labelWidth":"100","hidden":"true","labelAlign":"right","itemId":"LEDGER_ID"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"layout":"fit","columnWidth":".245","border":"false","itemId":"td_3_2"},"children":[{"configs":{"layout":"column","border":"false","itemId":"tr_3_2_1"},"children":[{"configs":{"layout":"form","columnWidth":".02","border":"false","itemId":"td_3_2_1_1"},"children":[{"configs":{"itemId":"空格"},"children":[],"expanded":false,"type":"label"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".25","border":"false","itemId":"td_3_2_1_2"},"children":[{"configs":{"text":"{#query#}","itemId":"queryBtn","iconCls":"seek_icon"},"events":{"click":"Wb.reload(app.grid1);"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".2","border":"false","itemId":"td_3_2_1_3"},"children":[{"configs":{"text":"{#reset#}","itemId":"clearBtn","iconCls":"refresh_icon"},"events":{"click":"app.form1.getForm().reset();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","selType":"checkboxmodel","itemId":"grid1","editable":"true"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xc/ap/req/LOV/DB/XC_AP_LD_PUR_TYPE_SELECT"},"events":{"beforeload":"operation.params = Wb.getValue(app.form1);"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#ok#}","itemId":"commitBtn"},"events":{"click":"var recs = app.grid1.getSelection();\nif (!recs.length) {\n  Wb.toast('{#okMsg1#}');\n  return;\n}\n\nvar rows = Wb.getData(recs);\n\nvar isContinue = false;\nWb.each(rows, function(row) {\n  if(Wb.isEmpty(row.PAY_AMT)){\n    Wb.toast('{#okMsg2#}');\n    isContinue = false;\n    return false;\n  }\n  isContinue = true;\n});\nif(isContinue){\n\n  Wb.confirm('{#okMsg3#}' + recs.length + '{#okMsg4#}', function() {\n    app.hideFun(recs);\n    app.lovWinN.close();\n  });\n}\n"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#cancel#}","itemId":"closeBtn"},"events":{"click":"app.lovWinN.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"采购对象","hidden":"true","dataIndex":"PUR_OBJECT","itemId":"PUR_OBJECT_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#purchaseObject#}","dataIndex":"PUR_OBJECT_NAME","itemId":"PUR_OBJECT_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#purchaseType#}","dataIndex":"AP_PUR_TYPE_NAME","itemId":"AP_PUR_TYPE_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#budgetProject#}","dataIndex":"BG_ITEM_NAME","itemId":"BG_ITEM_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#costProject#}","hidden":"true","dataIndex":"AP_ACC_NAME_INV","itemId":"AP_ACC_NAME_INV_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#invAccount#}","hidden":"true","dataIndex":"AP_ACC_NAME_DEBT","itemId":"AP_ACC_NAME_DEBT_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"暂估科目","hidden":"true","dataIndex":"AP_ACC_NAME_EST","itemId":"AP_ACC_NAME_EST_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#prePayAccount#}","hidden":"true","dataIndex":"AP_ACC_NAME_PRE","itemId":"AP_ACC_NAME_PRE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#payAmt#}","dataIndex":"PAY_AMT","format":"0,000,00","itemId":"PAY_AMT_COL","renderer":"metaData.style='background-color:#ffffd0';\nreturn value;"},"children":[{"configs":{"allowBlank":"false","minValue":"0","itemId":"editor"},"children":[],"expanded":false,"type":"number"}],"expanded":true,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"window"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}