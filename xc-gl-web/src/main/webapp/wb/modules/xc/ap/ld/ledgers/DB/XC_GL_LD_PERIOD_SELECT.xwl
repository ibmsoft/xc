{"inframe":false,"title":"会计区间查询","hidden":false,"roles":{"default":1},"children":[{"configs":{"itemId":"module"},"children":[{"configs":{"sql":"SELECT \n  CASE\n    (SELECT \n      COUNT(PERIOD_CODE) \n    FROM\n      xc_gl_ld_period \n    WHERE PERIOD_CODE = DATE_FORMAT(SYSDATE(), '%Y-%m') \n      AND LD_PERIOD_STATUS = '1' \n      AND LEDGER_ID = {?LEDGER_ID?}) \n    WHEN 0 \n    THEN \n    (SELECT \n      MAX(PERIOD_CODE) \n    FROM\n      xc_gl_ld_period \n    WHERE PERIOD_CODE < DATE_FORMAT(SYSDATE(), '%Y-%m') \n      AND LD_PERIOD_STATUS = '1' \n      AND LEDGER_ID = {?LEDGER_ID?}) \n    WHEN 1 \n    THEN \n    (SELECT \n      PERIOD_CODE \n    FROM\n      xc_gl_ld_period \n    WHERE PERIOD_CODE = DATE_FORMAT(SYSDATE(), '%Y-%m') \n      AND LD_PERIOD_STATUS = '1' \n      AND LEDGER_ID = {?LEDGER_ID?}) \n  END AS PERIOD_CODE \nFROM\n  WB_DUAL a ","type":"object","itemId":"dataprovider1"},"children":[],"expanded":false,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}