{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"var id,ids = [],\nrecsCreate = Wb.decode(request.getParameter('create'));\nWb.each(recsCreate,function(rec){\n    app.run(\"select 1 from xc_st_doc_class where ST_DOC_CLASS_CODE='\" + rec.ST_DOC_CLASS_CODE + \"'\",{\n        errorText: '单据大类编码\"' + rec.ST_DOC_CLASS_CODE + '\" 已经存在！'\n    });\n    app.run(\"select 1 from xc_st_doc_class where ST_DOC_CLASS_NAME='\" + rec.ST_DOC_CLASS_NAME + \"'\",{\n        errorText: '单据大类名称\"' + rec.ST_DOC_CLASS_NAME + '\" 已经存在！'\n    });\n    rec.CREATION_DATE = new Date();\n    rec.CREATED_BY = '{#XIP.userId#}';\n    rec.LAST_UPDATE_DATE = new Date();\n    rec.LAST_UPDATED_BY = '{#XIP.userId#}';\n});\nrecsUpdate = Wb.decode(request.getParameter('update'));\nWb.each(recsUpdate,function(rec){\n    app.run(\"select 1 from xc_st_doc_class where ST_DOC_CLASS_CODE='\" + rec.ST_DOC_CLASS_CODE + \"' and ST_DOC_CLASS_ID <> '\" + rec.ST_DOC_CLASS_ID+\"'\",{\n        errorText: '单据大类编码\"' + rec.ST_DOC_CLASS_CODE + '\" 已经存在！'\n    });\n    app.run(\"select 1 from xc_st_doc_class where ST_DOC_CLASS_NAME='\" + rec.ST_DOC_CLASS_NAME + \"' and ST_DOC_CLASS_ID <> '\" + rec.ST_DOC_CLASS_ID+\"'\",{\n        errorText: '单据大类名称\"' + rec.ST_DOC_CLASS_NAME + '\" 已经存在！'\n    });\n    rec.LAST_UPDATE_DATE = new java.util.Date();\n    rec.LAST_UPDATED_BY = '{#XIP.userId#}';\n});\nrequest.setAttribute('update',Wb.encode(recsUpdate));//重置create记录\nrequest.setAttribute('create',Wb.encode(recsCreate));//重置create记录\napp.update({\n\ttableName: 'xc_st_doc_class'\n});","itemId":"module"},"children":[],"expanded":false,"type":"module"}],"pageLink":"","iconCls":""}