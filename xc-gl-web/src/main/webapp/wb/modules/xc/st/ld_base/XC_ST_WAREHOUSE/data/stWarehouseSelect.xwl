{"inframe":false,"title":"库存仓库查询","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"var sql,data = app.get();\nsql = ' WHERE 1 = 1';\nif(data.ALL != \"ALL\")\n    sql+=' AND sw.LEDGER_ID = {?LEDGER_ID?}';\nif (!Wb.isEmpty(data.WAREHOUSE_CODE_NAME)) {\n    sql+=' AND (sw.WAREHOUSE_CODE LIKE \"%'+data.WAREHOUSE_CODE_NAME+'%\" OR sw.WAREHOUSE_NAME LIKE \"%'+data.WAREHOUSE_CODE_NAME+'%\")';\n}\nif (!Wb.isEmpty(data.QUERY_ORG_ID)) {\n    sql+=' AND sw.ORG_ID = {?QUERY_ORG_ID?}';\n}\nif (!Wb.isEmpty(data.QUERY_CODE_NAME)) {\n    sql+=' AND (sw.WAREHOUSE_CODE LIKE \"%'+data.QUERY_CODE_NAME+'%\" OR sw.WAREHOUSE_NAME LIKE \"%'+data.QUERY_CODE_NAME+'%\")';\n}\nif (!Wb.isEmpty(data.WAREHOUSE_IDS)) {\n    sql+=' AND sw.WAREHOUSE_ID = {?WAREHOUSE_IDS?}';\n}\nif (!Wb.isEmpty(data.IS_LOCATION)) {\n    sql+=' AND sw.IS_LOCATION = \"Y\"';\n    sql+=' AND sw.STATUS = \"Y\"';\n}\nif (!Wb.isEmpty(data.VALUATION_MODEL)) {\n    sql+=' AND sw.VALUATION_MODEL = {?VALUATION_MODEL?}';\n}\nif (!Wb.isEmpty(data.IS_INIT)) {\n    sql+=' AND sw.IS_INIT = {?IS_INIT?}';\n    sql+=' AND sw.STATUS = \"Y\"';\n}\nrequest.setAttribute('sql', sql);","itemId":"module"},"children":[{"configs":{"oracle":"SELECT\n\tsw.*,\n\tpo.ORG_NAME,\n\tWM_CONCAT(pe.EMP_NAME ORDER BY pe.EMP_CODE) AS \"EMP_NAME\",\n    (SELECT\n       CASE WHEN l.VAL_NAME IS NULL OR l.VAL_NAME = '' THEN d.VAL_NAME ELSE l.VAL_NAME END DESCRIPTION\n     FROM\n       xip_pub_val_set_dtl d\n     LEFT JOIN XIP_PUB_VAL_SET_DTL_LANG l ON d.VAL_SET_CODE = l.VAL_SET_CODE\n     AND d.VAL_CODE = l.VAL_CODE\n     AND l.VAL_SET_LANG = '{#language#}'\n     WHERE\n       d.VAL_SET_CODE = 'XC_ST_PRICE_METHOD'\n     AND d.ENABLE_FLAG = 'Y'\n     AND d.VAL_CODE = sw.VALUATION_MODEL) AS VALUATION_METHOD,\n   'Edit' AS \"OP_TYPE\",\n  (SELECT h.WAREHOUSE_ID FROM xc_st_wh_entry_h h WHERE h.WAREHOUSE_ID = sw.WAREHOUSE_ID\n  UNION SELECT h.WAREHOUSE_ID FROM xc_st_wh_delevered_h h WHERE h.WAREHOUSE_ID = sw.WAREHOUSE_ID\n  UNION SELECT h.OUT_WH_ID FROM xc_st_transshipment_h h WHERE h.OUT_WH_ID = sw.WAREHOUSE_ID\n  UNION SELECT h.IN_WH_ID FROM xc_st_transshipment_h h WHERE h.IN_WH_ID = sw.WAREHOUSE_ID\n  UNION SELECT h.WAREHOUSE_ID FROM xc_st_location_adjust_h h WHERE h.WAREHOUSE_ID = sw.WAREHOUSE_ID\n  UNION SELECT h.WAREHOUSE_ID FROM xc_st_use_apply_h h WHERE h.WAREHOUSE_ID = sw.WAREHOUSE_ID\n  UNION SELECT h.WAREHOUSE_ID FROM xc_st_cost_change_h h WHERE h.WAREHOUSE_ID = sw.WAREHOUSE_ID\n  UNION SELECT h.WAREHOUSE_ID FROM xc_po_arrival_h h WHERE h.WAREHOUSE_ID = sw.WAREHOUSE_ID\n  UNION SELECT h.WAREHOUSE_ID FROM xc_po_return_h h WHERE h.WAREHOUSE_ID = sw.WAREHOUSE_ID\n  UNION SELECT h.WAREHOUSE_ID FROM xc_st_location h WHERE h.WAREHOUSE_ID = sw.WAREHOUSE_ID) AS \"IS_USE_WAREHOUSE_ID\"\nFROM\n\txc_st_warehouse sw\nLEFT JOIN xip_pub_orgs po ON sw.ORG_ID = po.ORG_ID\nLEFT JOIN xc_st_warehouse_keeper swk ON sw.WAREHOUSE_ID = swk.WAREHOUSE_ID\nLEFT JOIN xip_pub_users pu ON swk.EMP_ID = pu.USER_ID\nLEFT JOIN xip_pub_emps pe ON pu.EMP_ID = pe.EMP_ID\n{#sql#}\nGROUP BY WAREHOUSE_ID\nORDER BY sw.WAREHOUSE_CODE","itemId":"sqlswitcher1","mysql":"SELECT\n\tsw.*,\n\tpo.ORG_NAME,\n\tGROUP_CONCAT(pe.EMP_NAME ORDER BY pe.EMP_CODE) AS \"EMP_NAME\",\n    (SELECT\n       CASE WHEN l.VAL_NAME IS NULL OR l.VAL_NAME = '' THEN d.VAL_NAME ELSE l.VAL_NAME END DESCRIPTION\n     FROM\n       xip_pub_val_set_dtl d\n     LEFT JOIN XIP_PUB_VAL_SET_DTL_LANG l ON d.VAL_SET_CODE = l.VAL_SET_CODE\n     AND d.VAL_CODE = l.VAL_CODE\n     AND l.VAL_SET_LANG = '{#language#}'\n     WHERE\n       d.VAL_SET_CODE = 'XC_ST_PRICE_METHOD'\n     AND d.ENABLE_FLAG = 'Y'\n     AND d.VAL_CODE = sw.VALUATION_MODEL) AS VALUATION_METHOD,\n   'Edit' AS \"OP_TYPE\",\n  (SELECT h.WAREHOUSE_ID FROM xc_st_wh_entry_h h WHERE h.WAREHOUSE_ID = sw.WAREHOUSE_ID\n  UNION SELECT h.WAREHOUSE_ID FROM xc_st_wh_delevered_h h WHERE h.WAREHOUSE_ID = sw.WAREHOUSE_ID\n  UNION SELECT h.OUT_WH_ID FROM xc_st_transshipment_h h WHERE h.OUT_WH_ID = sw.WAREHOUSE_ID\n  UNION SELECT h.IN_WH_ID FROM xc_st_transshipment_h h WHERE h.IN_WH_ID = sw.WAREHOUSE_ID\n  UNION SELECT h.WAREHOUSE_ID FROM xc_st_location_adjust_h h WHERE h.WAREHOUSE_ID = sw.WAREHOUSE_ID\n  UNION SELECT h.WAREHOUSE_ID FROM xc_st_use_apply_h h WHERE h.WAREHOUSE_ID = sw.WAREHOUSE_ID\n  UNION SELECT h.WAREHOUSE_ID FROM xc_st_cost_change_h h WHERE h.WAREHOUSE_ID = sw.WAREHOUSE_ID\n  UNION SELECT h.WAREHOUSE_ID FROM xc_po_arrival_h h WHERE h.WAREHOUSE_ID = sw.WAREHOUSE_ID\n  UNION SELECT h.WAREHOUSE_ID FROM xc_po_return_h h WHERE h.WAREHOUSE_ID = sw.WAREHOUSE_ID\n  UNION SELECT h.WAREHOUSE_ID FROM xc_st_location h WHERE h.WAREHOUSE_ID = sw.WAREHOUSE_ID) AS \"IS_USE_WAREHOUSE_ID\"\nFROM\n\txc_st_warehouse sw\nLEFT JOIN xip_pub_orgs po ON sw.ORG_ID = po.ORG_ID\nLEFT JOIN xc_st_warehouse_keeper swk ON sw.WAREHOUSE_ID = swk.WAREHOUSE_ID\nLEFT JOIN xip_pub_users pu ON swk.EMP_ID = pu.USER_ID\nLEFT JOIN xip_pub_emps pe ON pu.EMP_ID = pe.EMP_ID\n{#sql#}\nGROUP BY WAREHOUSE_ID\nORDER BY sw.WAREHOUSE_CODE"},"children":[],"expanded":false,"type":"sqlswitcher"},{"configs":{"sql":"{#sqlswitcher1#}","itemId":"dataprovider1"},"children":[],"expanded":false,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}