{"inframe":false,"title":"货位调整选择物料界面","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/st/common/json/XC_ST_COMMON\");","itemId":"module"},"events":{"initialize":"var LEDGER_ID = null;\nvar ORG_ID = null;\nExt.apply(app,{\n\tinitWin:function(params){\n        Ext.apply(app,params);\n        app.editWinN = new Ext.window.Window(app.window);\n        app.LEDGER_ID.setValue(params.LEDGER_ID);\n        app.ORG_ID.setValue(params.ORG_ID);\n        app.WAREHOUSE_ID.setValue(params.WAREHOUSE_ID);\n        app.grid.store.load();\n        app.editWinN.show();\n    }\n});"},"children":[{"configs":{"title":"{#XC_ST_COMMON_xzwl#}","height":"550","width":"1000","layout":"border","closeAction":"hide","resizable":"false","border":"false","itemId":"window","modal":"true"},"events":{"hide":"app.hideFun();"},"children":[{"configs":{"region":"north","border":"false","itemId":"form1"},"children":[{"configs":{"layout":"column","margin":"5 0 5 0","border":"false","itemId":"tr1"},"children":[{"configs":{"layout":"form","columnWidth":".249","border":"false","itemId":"td1_1"},"children":[{"configs":{"labelWidth":"80","displayField":"LOCATION_NAME","valueField":"LOCATION_NAME","labelAlign":"right","itemId":"LOCATION_NAME","fieldLabel":"{#XC_ST_COMMON_LOCATION_NAME#}","editable":"false"},"events":{"select":"app.LOCATION_ID.setValue(records[0].data.LOCATION_ID);\napp.queryBtn.fireEvent('click');"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/st/common/data/stLocationSelect"},"events":{"beforeload":"store.proxy.extraParams.IS_LAST = 'IS_LAST';\nstore.proxy.extraParams.LEDGER_ID = app.LEDGER_ID.getValue();\nstore.proxy.extraParams.WAREHOUSE_ID = app.WAREHOUSE_ID.getValue();"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".249","border":"false","itemId":"td1_2"},"children":[{"configs":{"labelWidth":"80","hidden":"true","labelAlign":"right","itemId":"LEDGER_ID","fieldLabel":"账簿ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"80","hidden":"true","labelAlign":"right","itemId":"WAREHOUSE_ID","fieldLabel":"仓库ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"80","hidden":"true","labelAlign":"right","itemId":"LOCATION_ID","fieldLabel":"货位ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"80","hidden":"true","labelAlign":"right","itemId":"ORG_ID","fieldLabel":"组织ID"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".249","border":"false","itemId":"td1_4"},"children":[{"configs":{"layout":"column","border":"false","itemId":"row1_3_1"},"children":[{"configs":{"text":"{#XC_ST_COMMON_queryBtn#}","itemId":"queryBtn","iconCls":"seek_icon"},"events":{"click":"app.grid.store.load({params : {LEDGER_ID : app.LEDGER_ID.getValue(),WAREHOUSE_ID : app.WAREHOUSE_ID.getValue(),LOCATION_ID : app.LOCATION_ID.getValue()}});"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","selType":"checkboxmodel","barExportAllButtons":"false","barExportButtons":"false","itemId":"grid","editable":"true"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/st/common/st_com_lov/XC_ST_MATERIAL_LOV/data/stMaterialParamsSelect_HWTZ"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#XC_ST_COMMON_commitBtn#}","itemId":"commitBtn","iconCls":"check_icon"},"events":{"click":"var recs = app.grid.getSelection();\nif (!recs.length) {\n    Wb.toast(\"{#XC_ST_COMMON_qzsxzytjl#}\");//请选择至少一条记录！\n    return;\n}\nvar rows = Wb.getData(recs);\nvar isContinue = false;\nWb.each(rows,function(row) {\n    if(Wb.isEmpty(row.ADJUST_QTY)){\n        Wb.toast('请录入调出数量！');//\n        isContinue = false;\n        return false;\n    }\n    if(Wb.isEmpty(row.NEW_LOCATION_NAME)){\n        Wb.toast('请录入调入货位！');//\n        isContinue = false;\n        return false;\n    }\n    else\n        isContinue = true;\n});\nif(isContinue){\n    app.hideFun(recs);\n    app.window.close();\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#XC_ST_COMMON_closeBtn#}","itemId":"closeBtn","iconCls":"delete_icon"},"events":{"click":"app.window.close();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#XC_ST_COMMON_NUMBER_COL#}","xtype":"rownumberer","width":"50","align":"center","titleAlign":"center","itemId":"NUMBER_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#XC_ST_COMMON_MATERIAL_CODE#}","width":"100","dataIndex":"MATERIAL_CODE","titleAlign":"center","itemId":"MATERIAL_CODE_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#XC_ST_COMMON_MATERIAL_NAME#}","width":"140","dataIndex":"MATERIAL_NAME","titleAlign":"center","itemId":"MATERIAL_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#XC_ST_COMMON_pc_xlh#}","width":"100","dataIndex":"SERIAL_BATCH_NUM","titleAlign":"center","itemId":"SERIAL_BATCH_NUM_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#XC_ST_COMMON_xcl#}","width":"100","align":"right","dataIndex":"QTY","titleAlign":"center","itemId":"QTY_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"<font color='red'>*<\/font>调出数量","align":"right","width":"100","dataIndex":"ADJUST_QTY","titleAlign":"center","itemId":"ADJUST_QTY_COL"},"children":[{"configs":{"allowBlank":"false","minValue":"0","itemId":"editor"},"events":{"change":"var rec = app.grid.getSelection()[0];\nif(Wb.isEmpty(rec.data.QTY) || rec.data.QTY === undefined || newValue === 0 || Wb.isEmpty(newValue)){\n    number.setValue(null);\n}\nelse{\n    number.setMaxValue(rec.data.QTY);\n}"},"children":[],"expanded":false,"type":"number"}],"expanded":true,"type":"column"},{"configs":{"text":"<font color='red'>*<\/font>调入货位","width":"150","dataIndex":"NEW_LOCATION_NAME","titleAlign":"center","itemId":"NEW_LOCATION_NAME_COL"},"children":[{"configs":{"displayField":"LOCATION_NAME","valueField":"LOCATION_NAME","itemId":"editor"},"events":{"select":"var rec = app.grid.getSelection()[0];\nrec.set(\"NEW_LOCATION_ID\",records[0].data.LOCATION_ID);\nrec.set(\"NEW_LOCATION_NAME\",records[0].data.LOCATION_NAME);"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/st/common/data/stLocationSelect"},"events":{"beforeload":"store.proxy.extraParams.IS_LAST = 'IS_LAST';\nstore.proxy.extraParams.LEDGER_ID = app.LEDGER_ID.getValue();\nstore.proxy.extraParams.WAREHOUSE_ID = app.WAREHOUSE_ID.getValue();"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":false,"type":"column"},{"configs":{"text":"调入货位ID","hidden":"true","width":"150","dataIndex":"NEW_LOCATION_ID","titleAlign":"center","itemId":"NEW_LOCATION_ID_COL"},"children":[],"expanded":true,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"window"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}