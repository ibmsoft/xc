{"inframe":false,"title":"库存账簿业务类型","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/st/base/XC_ST_BUSINESS_TYPE/json/XC_ST_BUSINESS_TYPE\");","itemId":"module"},"events":{"finalize":"var docClass = null;","initialize":"function returnRowFn(r,type){\n    if(type==='xip_pub_orgs'){\n        app.LEDGER_NAME.setValue(r.data.LEDGER_NAME);\n        app.LEDGER_ID.setValue(r.data.LEDGER_ID);\n        app.ORG_ID.setValue(r.data.ORG_ID);\n        app.queryBtn.fireEvent('click');\n    }\n}\nfunction clearOtherFn(type){\n    if(type=='xip_pub_orgs'){\n    }\n}"},"children":[{"configs":{"itemId":"tools"},"children":[{"configs":{"itemId":"orgInitStore","autoLoad":"true","url":"m?xwl=xc/com-lov/ORG_PICK/DB/ORG_SELECT_BY_LEDGER"},"events":{"load":"if(store.getCount() > 0){\n    app.LEDGER_ID.setValue(store.getAt(0).get('LEDGER_ID'));\n    app.LEDGER_NAME.setValue(store.getAt(0).get('LEDGER_NAME'));\n    app.ORG_ID.setValue(store.getAt(0).get('ORG_ID'));\n    app.ORG_XWL.ORG_ID.setValue(store.getAt(0).get('ORG_ID'));\n    app.ORG_XWL.ORG_NAME.setValue(store.getAt(0).get('ORG_NAME'));\n    app.queryBtn.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"folder"},{"configs":{"title":"{#XC_ST_BUSINESS_TYPE_syncBtn#}","height":"400","layout":"border","width":"550","closeAction":"hide","buttonAlign":"center","dialog":"true","itemId":"syncWindow"},"events":{"ok":"var rec = app.syncGrid.getSelection();\nif(rec.length === 0){\n    Wb.toast('{#XC_ST_BUSINESS_TYPE_qxzxytbdsj#}');//请选择需要同步的数据！\n    return;\n}\nWb.request({\n    url : 'm?xwl=xc/st/ld_base/XC_ST_LD_BUSINESS_TYPE/data/stLdBusinessTypeInsert', \n    params : {ORG_ID : app.ORG_ID.getValue(),\"LEDGER_ID\" : app.LEDGER_ID.getValue(),'infoArray' : Wb.encode(Wb.getData(rec))},\n    success: function(resp) {\n        app.syncGrid.store.load({params : {LEDGER_ID : app.LEDGER_ID.getValue()}});\n        app.queryBtn.fireEvent('click');\n        Wb.toast('{#XC_ST_BUSINESS_TYPE_tbcg#}');//同步成功！\n    }\n});"},"children":[{"configs":{"region":"center","selType":"checkboxmodel","itemId":"syncGrid"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/st/base/XC_ST_BUSINESS_TYPE/data/stBusinessTypeSelect"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#XC_ST_BUSINESS_TYPE_NUMBER_COL#}","xtype":"rownumberer","width":"50","align":"center","titleAlign":"center","itemId":"NUMBER_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"ID","hidden":"true","dataIndex":"BUSINESS_TYPE_ID","titleAlign":"center","itemId":"BUSINESS_TYPE_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#XC_ST_BUSINESS_TYPE_BUSINESS_TYPE_CODE#}","width":"150","dataIndex":"BUSINESS_TYPE_CODE","titleAlign":"center","itemId":"BUSINESS_TYPE_CODE_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#XC_ST_BUSINESS_TYPE_BUSINESS_TYPE_NAME#}","width":"150","dataIndex":"BUSINESS_TYPE_NAME","titleAlign":"center","itemId":"BUSINESS_TYPE_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#XC_ST_BUSINESS_TYPE_ST_CAT_NAME#}","width":"120","dataIndex":"ST_CAT_NAME","titleAlign":"center","itemId":"ST_CAT_NAME_COL"},"children":[],"expanded":true,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"window"},{"configs":{"layout":"border","itemId":"viewport1"},"children":[{"configs":{"region":"north","itemId":"search_form"},"children":[{"configs":{"layout":"column","margin":"5 0 5 0","border":"false","itemId":"row1"},"children":[{"configs":{"layout":"form","columnWidth":".249","border":"false","itemId":"row1_1"},"children":[{"configs":{"file":"m?xwl=xc/com-lov/ORG_PICK/ORG_ALL_PICK","itemId":"ORG_XWL"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".249","border":"false","itemId":"row1_2"},"children":[{"configs":{"labelWidth":"80","readOnly":"true","hidden":"true","labelAlign":"right","itemId":"LEDGER_NAME","fieldLabel":"账簿"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"80","readOnly":"true","hidden":"true","labelAlign":"right","itemId":"LEDGER_ID","fieldLabel":"账簿ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"80","readOnly":"true","hidden":"true","labelAlign":"right","itemId":"ORG_ID","fieldLabel":"组织ID"},"children":[],"expanded":false,"type":"text"}],"expanded":false,"type":"panel"},{"configs":{"layout":"column","columnWidth":".249","margin":"3 0 0 0","border":"false","itemId":"row1_3"},"children":[{"configs":{"text":"{#XC_ST_BUSINESS_TYPE_searchButton#}","itemId":"queryBtn","iconCls":"seek_icon"},"events":{"click":"app.grid.store.load({params : {LEDGER_ID : app.LEDGER_ID.getValue()}});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#XC_ST_BUSINESS_TYPE_resetButton#}","itemId":"clearBtn","iconCls":"refresh_icon"},"events":{"click":"app.search_form.getForm().reset();\napp.queryBtn.fireEvent('click');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"form"},{"configs":{"region":"center","selType":"checkboxmodel","barExportButtons":"false","barExportAllButtons":"false","itemId":"grid","editable":"true"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/st/ld_base/XC_ST_LD_BUSINESS_TYPE/data/stLdBusinessTypeSelect"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#XC_ST_BUSINESS_TYPE_syncBtn#}","itemId":"syncBtn","iconCls":"record_copy_icon"},"events":{"click":"if(Wb.isEmpty(app.ORG_XWL.ORG_NAME.getValue())){\n\tWb.toast('{#XC_ST_BUSINESS_TYPE_qxxzzzzjxtbcz#}');//请先选择组织，在进行同步操作！\n    return;\n}\napp.syncGrid.store.load({params : {LEDGER_ID : app.LEDGER_ID.getValue()}});\napp.syncWindow.show();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#XC_ST_BUSINESS_TYPE_saveBtn#}","itemId":"saveButton","iconCls":"save_icon"},"events":{"click":"var rec = app.grid.getSelection();//选择一行信息\nvar modify = app.grid.store.getModifiedRecords();\nif(modify === '' || modify.length === 0){\n    Wb.toast('{#XC_ST_BUSINESS_TYPE_mysjxybc#}');\n\treturn;\n}\nif(!Wb.verifyGrid(app.grid))//验证数据是否合法\n\treturn;\nWb.sync({\n    grid : app.grid,\n    url : 'm?xwl=xc/st/ld_base/XC_ST_LD_BUSINESS_TYPE/data/stLdBusinessTypeUpdate',\n    success : function(resp) {\n        Wb.toast('{#XC_ST_BUSINESS_TYPE_sjbccg#}');\n        app.queryBtn.fireEvent('click');\n    }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#XC_ST_BUSINESS_TYPE_deleteBtn#}","itemId":"deleteBtn","iconCls":"file_delete_icon"},"events":{"click":"var recs = app.grid.getSelection();//获得选中数据\nif (!recs.length) {//选中的数据条数\n\tWb.toast('{#XC_ST_BUSINESS_TYPE_qxzxyscdjl#}');\n\treturn;\n}\nWb.confirm('{#XC_ST_BUSINESS_TYPE_qdyscxzd#} ' + recs.length + ' {#XC_ST_BUSINESS_TYPE_tjlm#}',function() {\n    Wb.request({\n        url : 'm?xwl=xc/st/ld_base/XC_ST_LD_BUSINESS_TYPE/data/stLdBusinessTypeDelete',\n        params : {'infoArray' : Wb.encode(Wb.getData(recs))},//传参\n        success: function(resp){\n            Wb.toast('{#XC_ST_BUSINESS_TYPE_kcywlxsccg#}');\n            app.queryBtn.fireEvent('click');\n        }\n    });\n});"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#XC_ST_BUSINESS_TYPE_NUMBER_COL#}","xtype":"rownumberer","width":"50","align":"center","titleAlign":"center","itemId":"NUMBER_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#XC_ST_BUSINESS_TYPE_BUSINESS_TYPE_CODE#}","width":"120","dataIndex":"BUSINESS_TYPE_CODE","titleAlign":"center","itemId":"BUSINESS_TYPE_CODE_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#XC_ST_BUSINESS_TYPE_BUSINESS_TYPE_NAME#}","width":"120","dataIndex":"BUSINESS_TYPE_NAME","titleAlign":"center","itemId":"BUSINESS_TYPE_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#XC_ST_BUSINESS_TYPE_ST_CAT_NAME#}","width":"120","dataIndex":"DOC_CAT_NAME","titleAlign":"center","itemId":"DOC_CAT_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#XC_ST_BUSINESS_TYPE_ACC_NAME#}","width":"150","dataIndex":"ACC_NAME","titleAlign":"center","itemId":"ACC_NAME_COL"},"children":[{"configs":{"normalName":"ACC_NAME_PICK","itemId":"editor"},"events":{"expand":"picker.getPicker().getStore().load();","collapse":"app.QUERY_CODE_NAME.reset();"},"children":[{"configs":{"tagConfigs":"minWidth:400","height":"300","barExportButtons":"false","barExportAllButtons":"false","itemId":"pickComp"},"events":{"itemdblclick":"var r=app.grid.getSelectionModel().getSelection()[0];\nr.set('ACC_ID',record.data.ACC_ID);\nr.set('ACC_NAME',record.data.ACC_NAME);\nr.dirty = true;\napp.ACC_NAME_PICK.setValue(record.data.ACC_NAME);\nvar picker = this.ownerCmp;\npicker.collapse();"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/com-lov/ACC_ID_PICK/DB/XC_BG_LD_ACCOUNTS_SELECT_LD"},"events":{"beforeload":"store.proxy.extraParams.QUERY_LEDGER_ID = app.LEDGER_ID.getValue();\nstore.proxy.extraParams.QUERY_CODE_NAME = app.QUERY_CODE_NAME.getValue();"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#XC_ST_BUSINESS_TYPE_ACC_CODE#}","dataIndex":"ACC_CODE","itemId":"ACC_CODE_COL","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#XC_ST_BUSINESS_TYPE_ACC_NAMES#}","dataIndex":"ACC_NAME","itemId":"ACC_NAME_COLS","flex":"1"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"labelWidth":"100","labelAlign":"right","itemId":"QUERY_CODE_NAME","fieldLabel":"{#XC_ST_BUSINESS_TYPE_ACC_CODE_NAME#}"},"events":{"specialkey":"if(Ext.EventObject.getKey()==13){\n\tapp.pickComp.getStore().load();\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"itemId":"cancelBtn","iconCls":"delete_icon"},"events":{"click":"var rec = app.grid.getSelection()[0];\nrec.set('ACC_ID',null);\nrec.set('ACC_NAME',null);\napp.ACC_NAME_PICK.setValue('');\napp.pickComp.hide();"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"picker"}],"expanded":true,"type":"column"},{"configs":{"text":"{#XC_ST_BUSINESS_TYPE_DESCRIPTION#}","width":"150","dataIndex":"DESCRIPTION","titleAlign":"center","itemId":"DESCRIPTION_COL"},"children":[{"configs":{"height":"40","itemId":"editor"},"children":[],"expanded":false,"type":"textarea"}],"expanded":true,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}