{"inframe":false,"title":"物资编码表查询","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"var lang = request.getSession().getAttribute(\"XzSessionVars\").get('language');\nrequest.setAttribute(\"language\",lang);","loginRequired":"false","serverScript":"var sql,data = app.get();\nsql = ' WHERE 1 = 1';\nif (!Wb.isEmpty(data.MATERIAL_TYPE_ID)) {\n    sql+=' AND sm.MATERIAL_TYPE_ID = {?MATERIAL_TYPE_ID?}';\n}\nif (!Wb.isEmpty(data.upIdStr)) {\n    sql+=' AND sm.MATERIAL_TYPE_ID ' + data.upIdStr;\n}\nif (!Wb.isEmpty(data.MATERIAL_ID)) {\n    sql+=' AND sm.MATERIAL_ID = {?MATERIAL_ID?}';\n}\nif (!Wb.isEmpty(data.MAT_TYPE_SET_IDS)) {\n    sql+=' AND smt.MAT_TYPE_SET_ID = {?MAT_TYPE_SET_ID?}';\n}\nif (!Wb.isEmpty(data.LEDGER_ID)) {\n    sql+=' AND sm.MATERIAL_ID NOT IN (SELECT b.MATERIAL_ID FROM xc_st_material_parms b WHERE b.LEDGER_ID = {?LEDGER_ID?})';\n}\nrequest.setAttribute('sql', sql);","itemId":"module"},"children":[{"configs":{"sql":"SELECT\n\tsm.*,\n    (SELECT\n       CASE WHEN l.VAL_NAME IS NULL OR l.VAL_NAME = '' THEN d.VAL_NAME ELSE l.VAL_NAME END DESCRIPTION\n     FROM\n       xip_pub_val_set_dtl d\n     LEFT JOIN XIP_PUB_VAL_SET_DTL_LANG l ON d.VAL_SET_CODE = l.VAL_SET_CODE\n     AND d.VAL_CODE = l.VAL_CODE\n     AND l.VAL_SET_LANG = '{#language#}'\n     WHERE\n       d.VAL_SET_CODE = 'XC_ST_MATERIAL_PROPERTY'\n     AND d.ENABLE_FLAG = 'Y'\n     AND d.VAL_CODE = sm.MATERIAL_PRO) AS MATERIAL_PRO_NAME,\n\tsms.MATERIAL_SET_NAME,\n\tsmt.MATERIAL_TYPE_NAME,\n\tsmt.MAT_TYPE_SET_ID,\n\tapt.AP_PUR_TYPE_NAME,\n\tgd.DIM_NAME,\n\tast.AR_SALE_TYPE_NAME,\n\t(SELECT smts.MAT_TYPE_SET_NAME FROM xc_st_mat_type_set smts WHERE smts.MAT_TYPE_SET_ID = smt.MAT_TYPE_SET_ID) AS MAT_TYPE_SET_NAME\nFROM\n\txc_st_material sm\nLEFT JOIN xc_st_material_type smt ON sm.MATERIAL_TYPE_ID = smt.MATERIAL_TYPE_ID\nLEFT JOIN xc_st_material_set sms ON sm.MATERIAL_SET_ID = sms.MATERIAL_SET_ID\nLEFT JOIN xc_ap_pur_type apt ON sm.FINACE_TYPE_ID = apt.AP_PUR_TYPE_ID\nLEFT JOIN xc_ar_sale_type ast ON sm.SALE_TYPE_ID = ast.AR_SALE_TYPE_ID\nLEFT JOIN xc_gl_dimensions gd ON sm.DIM_ID = gd.DIM_ID\n{#sql#}\nORDER BY sm.MATERIAL_CODE","itemId":"dataprovider1"},"children":[],"expanded":false,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}