{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"var id,ids = [],\nrecsCreate = Wb.decode(request.getParameter('create'));\nWb.each(recsCreate,function(rec){\n    app.run(\"select 1 from xc_st_transshipment_ser where SERIAL_BATCH_NUM='\" + rec.SERIAL_BATCH_NUM + \"' and TR_L_ID = '\" + rec.TR_L_ID + \"'\",{\n        errorText: '序列号 \"' + rec.SERIAL_BATCH_NUM + '\" 已经存在！'\n    });\n    rec.CREATION_DATE = new Date();\n    rec.CREATED_BY = '{#XIP.userId#}';\n    rec.LAST_UPDATE_DATE = new Date();\n    rec.LAST_UPDATED_BY = '{#XIP.userId#}';\n});\nrecsUpdate = Wb.decode(request.getParameter('update'));\nWb.each(recsUpdate,function(rec){\n    app.run(\"select 1 from xc_st_transshipment_ser where SERIAL_BATCH_NUM='\" + rec.SERIAL_BATCH_NUM + \"' and TR_SERIAL_ID <> '\" + rec.TR_SERIAL_ID + \"'\",{\n        errorText: '序列号 \"' + rec.SERIAL_BATCH_NUM + '\" 已经存在！'\n    });\n    rec.LAST_UPDATE_DATE = new java.util.Date();\n    rec.LAST_UPDATED_BY = '{#XIP.userId#}';\n});\nrequest.setAttribute('update',Wb.encode(recsUpdate));//重置create记录\nrequest.setAttribute('create',Wb.encode(recsCreate));//重置create记录\napp.update({\n\ttableName: 'xc_st_transshipment_ser'\n});","itemId":"module"},"children":[],"expanded":false,"type":"module"}],"pageLink":"","iconCls":""}