{"inframe":false,"title":"库存仓库修改","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/st/ld_base/XC_ST_WAREHOUSE/json/XC_ST_WAREHOUSE\");","loginRequired":"false","serverScript":"var id,ids = [],\nrecsCreate = Wb.decode(request.getParameter('create'));\nWb.each(recsCreate,function(rec){\n    app.run(\"select 1 from xc_st_warehouse where WAREHOUSE_CODE='\" + rec.WAREHOUSE_CODE + \"' and ORG_ID ='\" + rec.ORG_ID+\"'\",{\n        errorText: '{#XC_ST_WAREHOUSE_WAREHOUSE_CODE#} \"' + rec.WAREHOUSE_CODE + '\" {#XC_ST_WAREHOUSE_yjcz#}'\n    });\n    app.run(\"select 1 from xc_st_warehouse where WAREHOUSE_NAME='\" + rec.WAREHOUSE_NAME + \"' and ORG_ID ='\" + rec.ORG_ID+\"'\",{\n        errorText: '{#XC_ST_WAREHOUSE_WAREHOUSE_NAME#} \"' + rec.WAREHOUSE_NAME + '\" {#XC_ST_WAREHOUSE_yjcz#}'\n    });\n    rec.CREATED_BY = '{#XIP.userId#}';\n    insertSql = \"INSERT INTO xc_st_warehouse VALUES ('\"+rec.WAREHOUSE_ID+\"','\"+rec.WAREHOUSE_CODE+\"','\"+rec.WAREHOUSE_NAME+\"','\"+rec.ORG_ID+\"','\"+rec.LEDGER_ID+\"','\"+rec.VALUATION_MODEL+\"','\"+rec.IS_INIT+\"','\"+rec.IS_LOCATION+\"','\"+rec.STATUS+\"',{?timestamp.sys.date?},'\"+rec.CREATED_BY+\"',{?timestamp.sys.date?},'\"+rec.CREATED_BY+\"')\";\n    app.run(insertSql,{});\n});\nrecsUpdate = Wb.decode(request.getParameter('update'));\nWb.each(recsUpdate,function(rec){\n    app.run(\"select 1 from xc_st_warehouse where WAREHOUSE_CODE='\" + rec.WAREHOUSE_CODE + \"' and WAREHOUSE_ID <> '\" + rec.WAREHOUSE_ID+\"'\",{\n        errorText: '{#XC_ST_WAREHOUSE_WAREHOUSE_CODE#} \"' + rec.WAREHOUSE_CODE + '\" {#XC_ST_WAREHOUSE_yjcz#}'\n    });\n    app.run(\"select 1 from xc_st_warehouse where WAREHOUSE_NAME='\" + rec.WAREHOUSE_NAME + \"' and WAREHOUSE_ID <> '\" + rec.WAREHOUSE_ID+\"'\",{\n        errorText: '{#XC_ST_WAREHOUSE_WAREHOUSE_NAME#} \"' + rec.WAREHOUSE_NAME + '\" {#XC_ST_WAREHOUSE_yjcz#}'\n    });\n    if(Wb.isEmpty(rec.EMP_NAME)){\n        app.run(\"DELETE FROM xc_st_warehouse_keeper WHERE WAREHOUSE_ID = '\" + rec.WAREHOUSE_ID+\"'\",{});\n    }\n    rec.LAST_UPDATED_BY = '{#XIP.userId#}';\n    updateSql = \"UPDATE xc_st_warehouse SET WAREHOUSE_CODE = '\"+rec.WAREHOUSE_CODE+\"',WAREHOUSE_NAME = '\"+rec.WAREHOUSE_NAME+\"',VALUATION_MODEL = '\"+rec.VALUATION_MODEL+\"',IS_INIT = '\"+rec.IS_INIT+\"',IS_LOCATION = '\"+rec.IS_LOCATION+\"',STATUS = '\"+rec.STATUS+\"',LAST_UPDATE_DATE = {?timestamp.sys.date?},LAST_UPDATED_BY = '\"+rec.LAST_UPDATED_BY+\"' WHERE WAREHOUSE_ID = '\"+rec.WAREHOUSE_ID+\"'\";\n    app.run(updateSql,{});\n});","itemId":"module"},"children":[],"expanded":false,"type":"module"}],"pageLink":"","iconCls":""}