{"inframe":false,"title":"账簿级财务分类查询","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"var sql,data = app.get();\nsql = ' WHERE 1 = 1';\nif (Wb.isEmpty(data.All)) {\n    sql+=' AND alpt.LEDGER_ID = {?LEDGER_ID?}';\n}\nif (!Wb.isEmpty(data.PUR_OBJECT)) {\n    sql+=' AND apt.PUR_OBJECT = {?PUR_OBJECT?}';\n}\nif (!Wb.isEmpty(data.ST_OPTYPE)) {\n    sql+=' AND apt.AP_PUR_TYPE_ID NOT IN (SELECT swls.AP_PUR_TYPE_ID FROM xc_st_wa_ld_set swls WHERE swls.LEDGER_ID = {?LEDGER_ID?} AND swls.WAREHOUSE_ID = {?WAREHOUSE_ID?})';\n}\nrequest.setAttribute('sql', sql);","itemId":"module"},"children":[{"configs":{"sql":"SELECT\n\tapt.AP_PUR_TYPE_ID,\n\tapt.AP_PUR_TYPE_CODE,\n\tapt.AP_PUR_TYPE_NAME,\n\tapt.PUR_OBJECT,\n\tapt.STATUS,\n\talpt.AP_ACC_ID_INV,\n\talpt.AP_ACC_ID_DEBT,\n\talpt.AP_ACC_ID_EST,\n\talpt.AP_ACC_ID_PRE,\n\t(SELECT BG_ITEM_NAME from xc_bg_items i where i.BG_ITEM_ID = alpt.BG_ITEM_ID) BG_ITEM_NAME,\n\t(select ACC_NAME from xc_gl_accounts i where i.ACC_ID = alpt.AP_ACC_ID_INV) AP_ACC_ID_INV_NAME,\n\t(select ACC_NAME from xc_gl_accounts i where i.ACC_ID = alpt.AP_ACC_ID_DEBT) AP_ACC_ID_DEBT_NAME,\n\t(select ACC_NAME from xc_gl_accounts i where i.ACC_ID = alpt.AP_ACC_ID_EST) AP_ACC_ID_EST_NAME,\n\t(select ACC_NAME from xc_gl_accounts i where i.ACC_ID = alpt.AP_ACC_ID_PRE) AP_ACC_ID_PRE_NAME,\n\talpt.DESCRIPTION\nFROM\n\txc_ap_pur_type apt\nLEFT JOIN xc_ap_ld_pur_type alpt ON apt.AP_PUR_TYPE_ID = alpt.AP_PUR_TYPE_ID\n{#sql#}\nORDER BY apt.AP_PUR_TYPE_CODE","itemId":"dataprovider1"},"children":[],"expanded":false,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}