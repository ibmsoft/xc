{"inframe":false,"title":"账簿库存业务类型删除","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/st/base/XC_ST_BUSINESS_TYPE/json/XC_ST_BUSINESS_TYPE\");","loginRequired":"false","serverScript":"var recsDelete = Wb.decode(request.getParameter('infoArray'));\nWb.each(recsDelete,function(rec){\n    var sql = \"SELECT h.BUSINESS_TYPE_ID FROM xc_st_wh_entry_h h WHERE h.BUSINESS_TYPE_ID = '\" + rec.BUSINESS_TYPE_ID + \"' AND h.LEDGER_ID = '\" + rec.LEDGER_ID + \"'\";\n    sql += \" UNION SELECT h.BUSINESS_TYPE_ID FROM xc_st_wh_delevered_h h WHERE h.BUSINESS_TYPE_ID = '\" + rec.BUSINESS_TYPE_ID + \"' AND h.LEDGER_ID = '\" + rec.LEDGER_ID + \"'\";\n    sql += \" UNION SELECT h.BUSINESS_TYPE_ID FROM xc_st_use_apply_h h WHERE h.BUSINESS_TYPE_ID = '\" + rec.BUSINESS_TYPE_ID + \"' AND h.LEDGER_ID = '\" + rec.LEDGER_ID + \"'\";\n    sql += \" UNION SELECT h.BUSINESS_TYPE_ID FROM xc_st_cost_change_h h WHERE h.BUSINESS_TYPE_ID = '\" + rec.BUSINESS_TYPE_ID + \"' AND h.LEDGER_ID = '\" + rec.LEDGER_ID + \"'\";\n    sql += \" UNION SELECT h.BUSINESS_TYPE_ID FROM xc_st_location_adjust_h h WHERE h.BUSINESS_TYPE_ID = '\" + rec.BUSINESS_TYPE_ID + \"' AND h.LEDGER_ID = '\" + rec.LEDGER_ID + \"'\";\n    sql += \" UNION SELECT h.BUSINESS_TYPE_ID FROM xc_st_transshipment_h h WHERE h.BUSINESS_TYPE_ID = '\" + rec.BUSINESS_TYPE_ID + \"' AND h.LEDGER_ID = '\" + rec.LEDGER_ID + \"'\";\n    sql += \" UNION SELECT h.BUSINESS_TYPE_ID FROM xc_st_wh_init_h h WHERE h.BUSINESS_TYPE_ID = '\" + rec.BUSINESS_TYPE_ID + \"' AND h.LEDGER_ID = '\" + rec.LEDGER_ID + \"'\";\n    app.run(sql,{\n        errorText:'{#XC_ST_BUSINESS_TYPE_BUSINESS_TYPE_NAME#} \"'+rec.BUSINESS_TYPE_NAME+'\" {#XC_ST_BUSINESS_TYPE_yjsybnsc_01#}'\n    });\n});\nvar newArr = Wb.encode(recsDelete);\nrequest.setAttribute(\"batArray\",newArr);","itemId":"module"},"children":[{"configs":{"sql":"DELETE\nFROM\n\txc_st_ld_business_type\nWHERE\n\tLD_BUSINESS_TYPE_ID = {?LD_BUSINESS_TYPE_ID?}","itemId":"query1","arrayName":"batArray"},"children":[],"expanded":false,"type":"query"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}