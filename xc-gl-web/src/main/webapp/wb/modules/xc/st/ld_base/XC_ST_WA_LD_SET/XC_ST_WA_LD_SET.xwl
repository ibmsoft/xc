{"inframe":false,"title":"仓库库存会计科目设置","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/st/ld_base/XC_ST_WA_LD_SET/json/XC_ST_WA_LD_SET\");","itemId":"module"},"events":{"finalize":"function returnRowFn(r,type){\n    if(type==='xip_pub_orgs'){\n        app.LEDGER_ID.setValue(r.data.LEDGER_ID);\n        app.ORG_ID.setValue(r.data.ORG_ID);\n        app.WAREHOUSE_XWL.WAREHOUSE_ID.setValue(null);\n        app.WAREHOUSE_XWL.WAREHOUSE_NAME.setValue(null);\n        app.WAREHOUSE_XWL.QUERY_ORG_ID.setValue(r.data.ORG_ID);\n        app.WAREHOUSE_XWL.LEDGER_ID.setValue(r.data.LEDGER_ID);\n        app.searchButton.fireEvent('click');\n    }\n    if(type==='xc_st_warehouse'){\n        app.searchButton.fireEvent('click');\n    }\n}\nfunction clearOtherFn(type){\n    if(type=='xip_pub_orgs'){\n        app.searchButton.fireEvent('click');\n    }\n}"},"children":[{"configs":{"itemId":"request"},"children":[{"configs":{"itemId":"orgInitStore","autoLoad":"true","url":"m?xwl=xc/com-lov/ORG_PICK/DB/ORG_SELECT_BY_LEDGER"},"events":{"load":"if(store.getCount() > 0){\n    app.LEDGER_ID.setValue(store.getAt(0).get('LEDGER_ID'));\n    app.ORG_ID.setValue(store.getAt(0).get('ORG_ID'));\n    app.ORG_XWL.ORG_ID.setValue(store.getAt(0).get('ORG_ID'));\n    app.ORG_XWL.ORG_NAME.setValue(store.getAt(0).get('ORG_NAME'));\n    app.WAREHOUSE_XWL.QUERY_ORG_ID.setValue(store.getAt(0).get('ORG_ID'));\n    app.WAREHOUSE_XWL.LEDGER_ID.setValue(store.getAt(0).get('LEDGER_ID'));\n    app.searchButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"folder"},{"configs":{"layout":"border","itemId":"viewport1"},"children":[{"configs":{"region":"north","itemId":"form1"},"children":[{"configs":{"layout":"column","margin":"5 0 5 0","border":"false","itemId":"row1"},"children":[{"configs":{"layout":"form","columnWidth":".249","border":"false","itemId":"td_1_1"},"children":[{"configs":{"file":"m?xwl=xc/com-lov/ORG_PICK/ORG_ALL_PICK","itemId":"ORG_XWL"},"children":[],"expanded":false,"type":"xwl"},{"configs":{"hidden":"true","itemId":"LEDGER_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"ORG_ID"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".249","border":"false","itemId":"row1_1"},"children":[{"configs":{"file":"m?xwl=xc/st/common/st_com_lov/XC_ST_WAREHOUSE_LOV/XC_ST_WAREHOUSE_LOV","itemId":"WAREHOUSE_XWL"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"},{"configs":{"layout":"column","columnWidth":".249","margin":"3 0 0 0","border":"false","itemId":"row1_3"},"children":[{"configs":{"text":"{#XC_ST_WA_LD_SET_searchButton#}","itemId":"searchButton","iconCls":"seek_icon"},"events":{"click":"app.leftGrid.store.load();\napp.rightGrid.store.load();"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#XC_ST_WA_LD_SET_resetButton#}","itemId":"resetButton","iconCls":"refresh_icon"},"events":{"click":"app.form1.getForm().reset();\napp.searchButton.fireEvent('click');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","layout":"border","border":"false","itemId":"gridPanel"},"children":[{"configs":{"region":"west","width":"'45%'","layout":"fit","border":"false","itemId":"leftPanel"},"children":[{"configs":{"multiSelect":"true","selType":"checkboxmodel","itemId":"leftGrid","editable":"true"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/st/common/data/apLdPurTypeSelect"},"events":{"beforeload":"store.proxy.extraParams.LEDGER_ID = app.LEDGER_ID.getValue();\nstore.proxy.extraParams.PUR_OBJECT = 'WZ';\nstore.proxy.extraParams.ST_OPTYPE = 'ST_OPTYPE';\nstore.proxy.extraParams.WAREHOUSE_ID = app.WAREHOUSE_XWL.WAREHOUSE_ID.getValue();"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#XC_ST_WA_LD_SET_NUMBER_COL#}","xtype":"rownumberer","width":"50","align":"center","titleAlign":"center","itemId":"NUMBER_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"ID","hidden":"true","dataIndex":"AP_PUR_TYPE_ID","titleAlign":"center","itemId":"AP_PUR_TYPE_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#XC_ST_WA_LD_SET_AP_PUR_TYPE_NAME#}","width":"120","dataIndex":"AP_PUR_TYPE_NAME","titleAlign":"center","itemId":"AP_PUR_TYPE_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#XC_ST_WA_LD_SET_AP_ACC_ID_INV_NAME#}","width":"180","dataIndex":"AP_ACC_ID_INV_NAME","titleAlign":"center","itemId":"AP_ACC_ID_INV_NAME_COL"},"children":[],"expanded":true,"type":"column"}],"expanded":false,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"panel"},{"configs":{"region":"center","border":"false","itemId":"centerPanel"},"children":[{"configs":{"margin":"150 0 0 35","border":"false","itemId":"button1"},"children":[{"configs":{"text":">>","itemId":"rightAllButton"},"events":{"click":"app.addButton.fireEvent('click');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"},{"configs":{"margin":"10 0 0 40","border":"false","itemId":"button2"},"children":[{"configs":{"text":">","itemId":"rightButton"},"events":{"click":"app.addButton.fireEvent('click');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"},{"configs":{"margin":"10 0 0 40","border":"false","itemId":"button3"},"children":[{"configs":{"text":"<","itemId":"leftButton"},"events":{"click":"app.deleteButton.fireEvent('click');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"},{"configs":{"margin":"10 0 0 35","border":"false","itemId":"button4"},"children":[{"configs":{"text":"<<","itemId":"leftAllButton"},"events":{"click":"app.deleteButton.fireEvent('click');"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"region":"east","width":"'45%'","layout":"fit","border":"false","itemId":"rightPanel"},"children":[{"configs":{"multiSelect":"true","selType":"checkboxmodel","itemId":"rightGrid","editable":"true"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"hidden":"true","itemId":"addButton","iconCls":"file_add_icon"},"events":{"click":"var rec = app.leftGrid.getSelection();\nif(Wb.isEmpty(app.WAREHOUSE_XWL.WAREHOUSE_ID.getValue())){\n    Wb.toast('{#XC_ST_WA_LD_SET_qxzck#}');//请选择仓库！\n    return;\n}\nif(rec.length === 0){\n    Wb.toast('{#XC_ST_WA_LD_SET_qxzxytbdsj#}');//请选择需要同步的数据！\n    return;\n}\nWb.request({\n    url : 'm?xwl=xc/st/ld_base/XC_ST_WA_LD_SET/data/stWaLdSetInsert', \n    params : {ORG_ID : app.ORG_ID.getValue(),WAREHOUSE_ID : app.WAREHOUSE_XWL.WAREHOUSE_ID.getValue(),\"LEDGER_ID\" : app.LEDGER_ID.getValue(),'infoArray' : Wb.encode(Wb.getData(rec))},\n    success: function(resp) {\n        app.searchButton.fireEvent('click');\n        Wb.toast('{#XC_ST_WA_LD_SET_tbcg#}');\n    }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"hidden":"true","itemId":"deleteButton","iconCls":"file_delete_icon"},"events":{"click":"var rec = app.rightGrid.getSelection();\nif(rec.length === 0){\n    Wb.toast('{#XC_ST_WA_LD_SET_qxzxyscdsj#}');//请选择需要删除的数据！\n    return;\n}\nWb.request({\n    url : 'm?xwl=xc/st/ld_base/XC_ST_WA_LD_SET/data/stWaLdSetDelete', \n    params : {'infoArray' : Wb.encode(Wb.getData(rec))},\n    success: function(resp) {\n        app.searchButton.fireEvent('click');\n        Wb.toast('{#XC_ST_WA_LD_SET_sccg#}');//删除成功！\n    }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#XC_ST_WA_LD_SET_saveBtn#}","itemId":"saveButton","iconCls":"save_icon"},"events":{"click":"var rec = app.rightGrid.getSelection();//选择一行信息\nvar modify = app.rightGrid.store.getModifiedRecords();\nif(modify === '' || modify.length === 0){\n    Wb.toast('{#XC_ST_WA_LD_SET_mysjxybc#}');\n\treturn;\n}\nif(!Wb.verifyGrid(app.rightGrid))//验证数据是否合法\n\treturn;\nWb.sync({\n    grid : app.rightGrid,\n    url : 'm?xwl=xc/st/ld_base/XC_ST_WA_LD_SET/data/stWaLdSetUpdate',\n    success : function(resp) {\n        Wb.toast('{#XC_ST_WA_LD_SET_sjbccg#}');\n\t\tapp.searchButton.fireEvent('click');\n    }\n});"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"store","url":"m?xwl=xc/st/ld_base/XC_ST_WA_LD_SET/data/stWaLdSetSelect"},"events":{"beforeload":"store.proxy.extraParams.LEDGER_ID = app.LEDGER_ID.getValue();\nstore.proxy.extraParams.WAREHOUSE_ID = app.WAREHOUSE_XWL.WAREHOUSE_ID.getValue();"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#XC_ST_WA_LD_SET_NUMBER_COL#}","xtype":"rownumberer","width":"50","align":"center","titleAlign":"center","itemId":"NUMBER_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"ID","hidden":"true","dataIndex":"AP_PUR_TYPE_ID","titleAlign":"center","itemId":"BUSINESS_TYPE_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#XC_ST_WA_LD_SET_AP_PUR_TYPE_NAME_1#}","width":"120","dataIndex":"AP_PUR_TYPE_NAME","titleAlign":"center","itemId":"AP_PUR_TYPE_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#XC_ST_WA_LD_SET_AP_ACC_ID_INV_NAME#}","width":"180","dataIndex":"AP_ACC_ID_INV_NAME","titleAlign":"center","itemId":"AP_ACC_ID_INV_NAME_COL"},"children":[{"configs":{"normalName":"AP_ACC_ID_INV_NAME_PICK","itemId":"editor"},"events":{"expand":"app.AP_ACC_ID_INV_NAME_PICK.getPicker().getStore().reload();","collapse":"app.QUERY_CODE_NAME.reset();"},"children":[{"configs":{"tagConfigs":"minWidth:400","height":"300","barExportButtons":"false","barExportAllButtons":"false","itemId":"pickComp"},"events":{"itemdblclick":"var r=app.rightGrid.getSelectionModel().getSelection()[0];\nr.set('AP_ACC_ID_INV',record.data.ACC_ID);\nr.set('AP_ACC_ID_INV_NAME',record.data.ACC_NAME);\nr.dirty = true;\napp.AP_ACC_ID_INV_NAME_PICK.setValue(record.data.ACC_NAME);\nvar picker = this.ownerCmp;\npicker.collapse();"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xc/st/common/data/getLedgerAccount"},"events":{"beforeload":"store.proxy.extraParams.QUERY_LEDGER_ID = app.LEDGER_ID.getValue();\nstore.proxy.extraParams.QUERY_CODE_NAME = app.QUERY_CODE_NAME.getValue();"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#XC_ST_WA_LD_SET_ACC_CODE#}","dataIndex":"ACC_CODE","itemId":"ACC_CODE_COL","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#XC_ST_WA_LD_SET_ACC_NAME#}","dataIndex":"ACC_NAME","itemId":"ACC_NAME_COL","flex":"1"},"children":[],"expanded":false,"type":"column"}],"expanded":false,"type":"array"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"labelWidth":"100","labelAlign":"right","itemId":"QUERY_CODE_NAME","fieldLabel":"{#XC_ST_WA_LD_SET_ACC_CODE_NAME#}"},"events":{"specialkey":"if(Ext.EventObject.getKey()==13){\n\tapp.pickComp.getStore().load();\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"itemId":"cancelBtn","iconCls":"delete_icon"},"events":{"click":"var rec = app.rightGrid.getSelection()[0];\nrec.set('AP_ACC_ID_INV',null);\nrec.set('AP_ACC_ID_INV_NAME',null);\napp.AP_ACC_ID_INV_NAME_PICK.setValue('');\napp.pickComp.hide();"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"picker"}],"expanded":true,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}