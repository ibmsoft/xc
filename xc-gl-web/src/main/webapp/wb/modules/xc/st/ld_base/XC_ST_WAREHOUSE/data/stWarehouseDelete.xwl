{"inframe":false,"title":"库存仓库删除","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/st/ld_base/XC_ST_WAREHOUSE/json/XC_ST_WAREHOUSE\");","loginRequired":"false","serverScript":"var recsDelete = Wb.decode(request.getParameter('infoArray'));\nWb.each(recsDelete,function(rec){\n    var sql = \"SELECT h.WAREHOUSE_ID FROM xc_st_wh_entry_h h WHERE h.WAREHOUSE_ID = '\" + rec.WAREHOUSE_ID + \"'\";\n    sql += \" UNION SELECT h.WAREHOUSE_ID FROM xc_st_wh_delevered_h h WHERE h.WAREHOUSE_ID = '\" + rec.WAREHOUSE_ID + \"'\";\n    sql += \" UNION SELECT h.OUT_WH_ID FROM xc_st_transshipment_h h WHERE h.OUT_WH_ID = '\" + rec.WAREHOUSE_ID + \"'\";\n    sql += \" UNION SELECT h.IN_WH_ID FROM xc_st_transshipment_h h WHERE h.IN_WH_ID = '\" + rec.WAREHOUSE_ID + \"'\";\n    sql += \" UNION SELECT h.WAREHOUSE_ID FROM xc_st_location_adjust_h h WHERE h.WAREHOUSE_ID = '\" + rec.WAREHOUSE_ID + \"'\";\n    sql += \" UNION SELECT h.WAREHOUSE_ID FROM xc_st_use_apply_h h WHERE h.WAREHOUSE_ID = '\" + rec.WAREHOUSE_ID + \"'\";\n    sql += \" UNION SELECT h.WAREHOUSE_ID FROM xc_st_cost_change_h h WHERE h.WAREHOUSE_ID = '\" + rec.WAREHOUSE_ID + \"'\";\n    sql += \" UNION SELECT h.WAREHOUSE_ID FROM xc_st_wh_init_h h WHERE h.WAREHOUSE_ID = '\" + rec.WAREHOUSE_ID + \"'\";\n    sql += \" UNION SELECT h.WAREHOUSE_ID FROM xc_po_arrival_h h WHERE h.WAREHOUSE_ID = '\" + rec.WAREHOUSE_ID + \"'\";\n    sql += \" UNION SELECT h.WAREHOUSE_ID FROM xc_po_return_h h WHERE h.WAREHOUSE_ID = '\" + rec.WAREHOUSE_ID + \"'\";\n    sql += \" UNION SELECT h.WAREHOUSE_ID FROM xc_st_location h WHERE h.WAREHOUSE_ID = '\" + rec.WAREHOUSE_ID + \"'\";\n    app.run(sql,{\n        errorText:'{#XC_ST_WAREHOUSE_WAREHOUSE#} \"'+rec.WAREHOUSE_NAME+'\" {#XC_ST_WAREHOUSE_yjsybnsc#}'\n    });\n});\nvar newArr = Wb.encode(recsDelete);\nrequest.setAttribute(\"batArray\",newArr);","itemId":"module"},"children":[{"configs":{"sql":"DELETE\nFROM\n\txc_st_warehouse_keeper\nWHERE\n\tWAREHOUSE_ID = {?WAREHOUSE_ID?}","transaction":"start","arrayName":"batArray","itemId":"deleteIsExist"},"children":[],"expanded":false,"type":"query"},{"configs":{"sql":"DELETE\nFROM\n\txc_st_warehouse\nWHERE\n\tWAREHOUSE_ID = {?WAREHOUSE_ID?}","itemId":"query1","arrayName":"batArray"},"children":[],"expanded":false,"type":"query"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}