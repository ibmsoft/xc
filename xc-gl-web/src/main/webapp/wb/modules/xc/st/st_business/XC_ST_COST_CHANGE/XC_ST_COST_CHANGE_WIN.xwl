{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/st/st_business/XC_ST_COST_CHANGE/json/XC_ST_COST_CHANGE\");\nvar ctxPath = request.getContextPath() ;\nrequest.setAttribute('contextPath',ctxPath);","itemId":"module"},"events":{"finalize":"var tableValue = '';//窗口中的所有信息\nvar isEditCol = 'N';//判断是否更新过行信息","initialize":"Wb.isInsert = null;\nvar COST_CHANGE_H_ID = null;\nvar LEDGER_ID = null,\nORG_ID = null,\nORG_NAME = null;\nExt.apply(app, {\n    initWin: function(params) {\n        Ext.apply(app, params);\n        app.win = new Ext.window.Window(app.editWinN);\n        app.win.show();\n        Wb.isInsert = params.IS_INSERT;\n        COST_CHANGE_H_ID = params.COST_CHANGE_H_ID;\n        LEDGER_ID = params.LEDGER_ID;\n        ORG_ID = params.ORG_ID;\n        ORG_NAME = params.ORG_NAME;\n        app.grid1.store.load({params : {COST_CHANGE_H_ID : COST_CHANGE_H_ID}});\n        if (Wb.isInsert == 'Add') {//新增操作\n            app.COST_CHANGE_H_ID.setValue(COST_CHANGE_H_ID);\n            app.STATUS.setValue('1');\n            app.BIZ_DATE.setValue(new Date());\n            app.IS_CREATE.setValue('Y');\n            app.ADJUST_PERSON.setValue('{#XIP.empName#}');\n            app.PERSON_ID.setValue('{#XIP.userId#}');\n            app.WAREHOUSE_XWL.WAREHOUSE_ID.setValue(params.WAREHOUSE_ID);\n            app.WAREHOUSE_XWL.WAREHOUSE_NAME.setValue(params.WAREHOUSE_NAME);\n            app.orgInitStore.load();\n        }\n        if (Wb.isInsert == 'Update') {//修改操作\n            app.IS_CREATE.setValue('N');\n            Wb.request({\n                url : 'm?xwl=xc/st/st_business/XC_ST_COST_CHANGE/data/stCostChangeHSelectById',\n                params : {COST_CHANGE_H_ID : COST_CHANGE_H_ID},\n                success : function(resp){\n                    var rec = Wb.decode(resp.responseText).rows[0];\n                    if(rec.STATUS !== '1')\n                        setAllReadOnly(true);\n                    else{\n                        setSomeReadOnly(true);\n                        setOrg(rec.ORG_ID,rec.LEDGER_ID);\n                        setMinDate(rec.LEDGER_ID);\n                    }\n                    rec.BIZ_DATE = Wb.strToDate(rec.BIZ_DATE);\n                    Wb.setValue(app.editWinN,rec);\n                    tableValue = Wb.encode(Wb.getValue(app.form1));\n                }\n            });\n        }\n        if (Wb.isInsert == 'Seek') {//查看操作\n            Wb.request({\n                url : 'm?xwl=xc/st/st_business/XC_ST_COST_CHANGE/data/stCostChangeHSelectById',\n                params : {COST_CHANGE_H_ID : COST_CHANGE_H_ID},\n                success : function(resp){\n                    var rec = Wb.decode(resp.responseText).rows[0];\n                    setAllReadOnly(true);\n                    rec.BIZ_DATE = Wb.strToDate(rec.BIZ_DATE);\n                    Wb.setValue(app.editWinN,rec);\n                }\n            });\n            setButtonHide();\n        }\n    }\n});\nfunction returnRowFn(r,type){\n    if(type==='xip_pub_orgs'){\n        app.LEDGER_ID.setValue(r.data.LEDGER_ID);\n        app.ORG_ID.setValue(r.data.ORG_ID);\n        setMinDate(r.data.LEDGER_ID);\n        setOrg(r.data.ORG_ID,r.data.LEDGER_ID);\n        clearAll();\n    }\n    //仓库改变，清空该仓库下面入库单带出来的信息\n    if(type=='xc_st_warehouse'){\n        clearCommon();\n    }\n}\nfunction clearOtherFn(type){\n    if(type=='xip_pub_orgs'){\n        app.LEDGER_ID.setValue(null);\n        app.ORG_ID.setValue(null);\n    }\n    //仓库改变，清空该仓库下面入库单带出来的信息\n    if(type=='xc_st_warehouse'){\n        clearCommon();\n    }\n}\nfunction setSomeReadOnly(flag){\n\tapp.ORG_XWL.ORG_NAME.setReadOnly(flag);\n    app.WAREHOUSE_XWL.WAREHOUSE_NAME.setReadOnly(flag);\n}\nfunction setAllReadOnly(flag){\n\tsetSomeReadOnly(flag);\n    app.COST_CHANGE_H_NAME.setReadOnly(flag);\n    app.ADJUST_REASON.setReadOnly(flag);\n    app.BIZ_DATE.setReadOnly(flag);\n    app.BUSINESS_TYPE_NAME.setReadOnly(flag);\n    app.saveBtn.setDisabled(flag);\n    app.submitBtn.setDisabled(flag);\n    app.addBtn.setDisabled(flag);\n    app.delBtns.setDisabled(flag);\n}\nfunction setButtonHide(){\n    app.saveBtn.hide();\n    app.submitBtn.hide();\n    app.enclosureBtn.hide();\n    app.grid1Tbar.hide();\n}\nfunction clearAll(){\n    app.WAREHOUSE_XWL.WAREHOUSE_ID.reset();\n    app.WAREHOUSE_XWL.WAREHOUSE_NAME.reset();\n    app.BUSINESS_TYPE_ID.reset();\n    app.BUSINESS_TYPE_NAME.reset();\n    clearCommon();\n}\nfunction clearCommon(){\n    app.grid1.store.removeAll();\n}\nfunction setOrg(orgId,ledgerId) {\n    app.WAREHOUSE_XWL.QUERY_ORG_ID.setValue(orgId);\n    app.WAREHOUSE_XWL.LEDGER_ID.setValue(ledgerId);\n    app.WAREHOUSE_XWL.IS_INIT.setValue('Y');\n}\nfunction setMinDate(ledgerId){\n    Wb.request({//账簿会计期查询\n        url : 'm?xwl=xc/st/common/data/ledgerDateSelect',\n        params : {LEDGER_ID : ledgerId},\n        success : function(resp){\n            var temp = Wb.decode(resp.responseText);\n            if(temp.rows[0].START_DATE !== null && temp.rows[0].START_DATE !== \"\"){\n                app.BIZ_DATE.setMinValue(Wb.strToDate(temp.rows[0].START_DATE));\n                app.BIZ_DATE.setReadOnly(false);\n            }\n            else {\n                if(app.LEDGER_ID.getValue() !== null && app.LEDGER_ID.getValue() !== \"\"){\n                    Wb.toast('{#XC_ST_COST_CHANGE_gzbmyqykjqqcxxz#}');//该账簿没有启用会计期，请重新选择！\n                    app.BIZ_DATE.reset();\n                    app.BIZ_DATE.setReadOnly(true);\n                }\n            }\n        }\n    });\n}"},"children":[{"configs":{"itemId":"tools"},"children":[{"configs":{"itemId":"orgInitStore","url":"m?xwl=xc/com-lov/ORG_PICK/DB/ORG_SELECT_BY_LEDGER"},"events":{"load":"if(!Wb.isEmpty(ORG_NAME) && Wb.isInsert == 'Add'){\n    app.ORG_ID.setValue(ORG_ID);\n    app.LEDGER_ID.setValue(LEDGER_ID);\n    app.ORG_XWL.ORG_ID.setValue(ORG_ID);\n    app.ORG_XWL.ORG_NAME.setValue(ORG_NAME);\n    app.ORG_XWL.LEDGER_ID.setValue(LEDGER_ID);\n}\nif(Wb.isEmpty(ORG_NAME)){\n    if(store.getCount() > 0){\n        app.ORG_ID.setValue(store.getAt(0).get('ORG_ID'));\n        app.LEDGER_ID.setValue(store.getAt(0).get('LEDGER_ID'));\n        app.ORG_XWL.ORG_ID.setValue(store.getAt(0).get('ORG_ID'));\n        app.ORG_XWL.ORG_NAME.setValue(store.getAt(0).get('ORG_NAME'));\n        app.ORG_XWL.LEDGER_ID.setValue(store.getAt(0).get('LEDGER_ID'));\n    }\n}\nsetOrg(app.ORG_ID.getValue(),app.LEDGER_ID.getValue());\nsetMinDate(app.LEDGER_ID.getValue());\napp.BUSINESS_TYPE_NAME.getStore().load();"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"folder"},{"configs":{"maximized":"true","height":"530","width":"900","layout":"border","closeAction":"hide","border":"false","itemId":"editWinN","modal":"true","maximizable":"true"},"events":{"hide":"app.hideFun();"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#XC_ST_COST_CHANGE_saveBtn#}","itemId":"saveBtn","iconCls":"save_icon"},"events":{"click":"/*--------------  验证数据是否合法  ---------------*/\nif (Wb.verify(app.editWinN) && Wb.verifyGrid(app.grid1)) {\n    //判断是否有明细\n    var store = app.grid1.store;\n    if(store.getCount() === 0){\n        Wb.toast('{#XC_ST_COST_CHANGE_qtjmxsj#}');//请添加明细数据！\n        return;\n    }\n    Wb.sync({\n        url : '{#contextPath#}'+'/xcStDocsAction.do?method=saveOrUpdateXcStDocs',\n        grid : app.grid1,\n        params  : Wb.getValue(app.form1),\n        success : function(resp){\n            var record = Wb.decode(resp.responseText);\n            var msg = record.msg;\n            if(record.flag === '0'){\n                Wb.isInsert = 'Update';\n                Wb.toast('{#XC_ST_COST_CHANGE_bccg#}');\n                app.COST_CHANGE_H_CODE.setValue(record.docCode);\n                setSomeReadOnly(true);\n                app.grid1.store.load({params : {COST_CHANGE_H_ID : COST_CHANGE_H_ID}});\n                app.IS_CREATE.setValue('N');\n                tableValue = Wb.encode(Wb.getValue(app.form1));\n                isEditCol = 'N';\n            }\n            else{\n                Wb.toast(msg);//保存失败！\n            }\n        }\n    });\n} else {\n    Wb.verifyGrid(app.grid1);\n    Wb.toast('{#XC_ST_COST_CHANGE_qsrsybsx#}');\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#XC_ST_COST_CHANGE_submitBtn#}","itemId":"submitBtn","iconCls":"check_icon"},"events":{"click":"if(Wb.isInsert=='Add' || tableValue !== Wb.encode(Wb.getValue(app.form1)) || isEditCol == 'Y'){\n    Wb.toast('{#XC_ST_COST_CHANGE_qxbcztj#}');//请先保存，再提交！\n    return false;\n}\nif(app.STATUS.getValue() != '1'){\n    Wb.toast('{#XC_ST_COST_CHANGE_sxdjfcgztbntj#}');\n    return;\n}\nWb.request({\n    url: '{#contextPath#}'+'/xcStCommonAction.do?method=updateXcStDocStatus',\n    params: Wb.apply({stDocId : app.COST_CHANGE_H_ID.getValue(),docClassCode : 'CBTZD'}),\n    success: function(resp) {\n        var record = Wb.decode(resp.responseText);\n        if(record.flag == '0'){\n            Wb.toast('{#XC_ST_COST_CHANGE_tjcg#}');\n            setAllReadOnly(true);\n            app.STATUS.setValue('3');\n            tableValue = Wb.encode(Wb.getValue(app.form1));\n        }\n        else\n            Wb.toast(record.msg);\n    }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#XC_ST_COST_CHANGE_enclosureBtn#}","itemId":"enclosureBtn","iconCls":"attach_icon"},"events":{"click":"if(Wb.isInsert == 'Add'){\n    Wb.toast('{#XC_ST_COST_CHANGE_qxbcztjfj#}');\n    return false;\n}\nvar temp_id = app.COST_CHANGE_H_ID.getValue();\nvar temp_code = app.COST_CHANGE_H_CODE.getValue();\nWb.request({\n    url : '{#contextPath#}' + '/xcStCommonAction.do?method=getXcStAttCatCode',\n    params : {LEDGER_ID : app.LEDGER_ID.getValue(),DOC_CAT_CODE : app.DOC_CAT_CODE.getValue()},\n    success : function(resp){\n        var temp = Wb.decode(resp.responseText);\n        if(temp.flag == '0'){\n            var attCatCode = temp.attCatCode;\n            Xip.showAttachmentManager('{#XIP.userId#}',temp_id,'',attCatCode,temp_code,'Y','Y','Y',function(){},10); \n        }\n        else{\n            Wb.toast(temp.msg);\n        }\n    }\n});"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"array"},{"configs":{"region":"north","frame":"false","border":"false","bodyPadding":"0 0 0 0","itemId":"form1"},"children":[{"configs":{"style":"fontSize:20px","html":"<font style=\"\">{#XC_ST_COST_CHANGE_CBTZD#}<\/font>","margin":"10 0 20 0","labelAlign":"center","itemId":"title"},"children":[],"expanded":false,"type":"label"},{"configs":{"frame":"false","layout":"column","margin":"5 0 0 0","border":"false","itemId":"tr_1"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".249","border":"false","itemId":"td_1_1"},"children":[{"configs":{"file":"m?xwl=xc/com-lov/ORG_PICK/ORG_ALL_PICK","itemId":"ORG_XWL"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".249","border":"false","itemId":"td_1_2"},"children":[{"configs":{"file":"m?xwl=xc/st/common/st_com_lov/XC_ST_WAREHOUSE_LOV/XC_ST_WAREHOUSE_LOV","itemId":"WAREHOUSE_XWL"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".249","border":"false","itemId":"td_1_3"},"children":[{"configs":{"labelWidth":"80","readOnly":"true","labelAlign":"right","itemId":"COST_CHANGE_H_CODE","fieldLabel":"{#XC_ST_COST_CHANGE_COST_CHANGE_H_CODE#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".249","border":"false","itemId":"td_1_4"},"children":[{"configs":{"labelWidth":"80","allowBlank":"false","labelAlign":"right","itemId":"BIZ_DATE","fieldLabel":"<font color='red'>*<\/font>{#XC_ST_COST_CHANGE_BIZ_DATE#}"},"children":[],"expanded":false,"type":"date"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","layout":"column","margin":"5 0 0 0","border":"false","itemId":"tr_2"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".249","border":"false","itemId":"td_2_1"},"children":[{"configs":{"labelWidth":"80","allowBlank":"false","displayField":"BUSINESS_TYPE_NAME","valueField":"BUSINESS_TYPE_NAME","labelAlign":"right","itemId":"BUSINESS_TYPE_NAME","fieldLabel":"<font color='red'>*<\/font>{#XC_ST_COST_CHANGE_BUSINESS_TYPE_NAME#}","editable":"false"},"events":{"select":"app.BUSINESS_TYPE_ID.setValue(records[0].data.BUSINESS_TYPE_ID);"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/st/ld_base/XC_ST_LD_BUSINESS_TYPE/data/stLdBusinessTypeSelect"},"events":{"load":"if(store.getCount() > 0){\n    app.BUSINESS_TYPE_NAME.setValue(store.getAt(0).get('BUSINESS_TYPE_NAME'));\n    app.BUSINESS_TYPE_ID.setValue(store.getAt(0).get('BUSINESS_TYPE_ID'));\n}","beforeload":"store.proxy.extraParams.LEDGER_ID = app.LEDGER_ID.getValue();\nstore.proxy.extraParams.DOC_CAT_CODE = app.DOC_CAT_CODE.getValue();"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".498","border":"false","itemId":"td_2_2"},"children":[{"configs":{"labelWidth":"80","allowBlank":"false","displayField":"ADJUST_REASON","valueField":"ADJUST_REASON","labelAlign":"right","itemId":"ADJUST_REASON","fieldLabel":"<font color='red'>*<\/font>{#XC_ST_COST_CHANGE_ADJUST_REASON#}","editable":"false"},"events":{"select":"app.ADJUST_REASON_ID.setValue(records[0].data.ADJUST_REASON_ID);\napp.ADJUST_REASON.setValue(records[0].data.ADJUST_REASON);"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/st/ld_base/XC_ST_ADJUST_REASON/data/stAdjustReasonSelect"},"events":{"beforeload":"store.proxy.extraParams.LEDGER_ID = app.LEDGER_ID.getValue();"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".249","border":"false","itemId":"td_2_3"},"children":[{"configs":{"labelWidth":"80","readOnly":"true","labelAlign":"right","itemId":"ADJUST_PERSON","fieldLabel":"{#XC_ST_COST_CHANGE_ADJUST_PERSON#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","layout":"column","margin":"5 0 5 0","border":"false","itemId":"tr_3"},"children":[{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".498","border":"false","itemId":"td_3_1"},"children":[{"configs":{"labelWidth":"80","labelAlign":"right","itemId":"COST_CHANGE_H_NAME","fieldLabel":"{#XC_ST_COST_CHANGE_COST_CHANGE_H_NAME#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","style":"border-width:0px","layout":"form","columnWidth":".249","border":"false","itemId":"td_3_2"},"children":[{"configs":{"labelWidth":"80","readOnly":"true","pickList":"[['1','{#XC_ST_COST_CHANGE_STATUS_1#}'],['2','{#XC_ST_COST_CHANGE_STATUS_2#}'],['3','{#XC_ST_COST_CHANGE_STATUS_3#}']]","labelAlign":"right","itemId":"STATUS","fieldLabel":"{#XC_ST_COST_CHANGE_STATUS#}"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"frame":"false","hidden":"true","layout":"column","border":"false","itemId":"hidePanel"},"children":[{"configs":{"itemId":"ORG_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"itemId":"LEDGER_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"itemId":"COST_CHANGE_H_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"BUSINESS_TYPE_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","value":"CBTZD","itemId":"DOC_CAT_CODE"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"WAREHOUSE_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"ADJUST_REASON_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"PERSON_ID"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","itemId":"IS_CREATE"},"children":[],"expanded":false,"type":"text"},{"configs":{"hidden":"true","value":"CBTZD","itemId":"docClassCode"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","selType":"checkboxmodel","itemId":"grid1","editable":"true"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/st/st_business/XC_ST_COST_CHANGE/data/stCostChangeLSelect"},"events":{"update":"isEditCol = 'Y';","remove":"isEditCol = 'Y';","add":"isEditCol = 'Y';"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar","normalName":"grid1Tbar"},"children":[{"configs":{"text":"{#XC_ST_COST_CHANGE_addLBtn#}","itemId":"addBtn","iconCls":"file_add_icon"},"events":{"click":"if(Wb.isEmpty(app.WAREHOUSE_XWL.WAREHOUSE_ID.getValue())){\n    Wb.toast('{#XC_ST_COST_CHANGE_qxxzck#}');\n    return;\n}\nWb.run({\n    url: 'm?xwl=xc/st/common/st_com_lov/XC_ST_MATERIAL_LOV/XC_ST_MATERIAL_LOV_TZD', \n    success: function(apps) {\n        apps.initWin({\n            LEDGER_ID : app.LEDGER_ID.getValue(),\n            ORG_ID : app.ORG_ID.getValue(),\n            WAREHOUSE_ID : app.WAREHOUSE_XWL.WAREHOUSE_ID.getValue(),\n            hideFun : function(rs){\n                Wb.each(rs, function(r) {\n                    var grid1Store = app.grid1.getStore();\n                    for(var i = 0;i < grid1Store.getCount();i++){\n                        var gr = grid1Store.getAt(i);\n                        if(gr.get('MATERIAL_ID') == r.get('MATERIAL_ID')){\n                            app.grid1.getStore().removeAt(i);\n                        }\n                    }\n                    Wb.add(app.grid1, {\n                        COST_CHANGE_L_ID : Xip.getId(),\n                        COST_CHANGE_H_ID : app.COST_CHANGE_H_ID.getValue(),\n                        MATERIAL_ID : r.get('MATERIAL_ID'),\n                        ENTRY_H_ID : r.get('ENTRY_H_ID'),\n                        ENTRY_L_ID : r.get('ENTRY_L_ID'),\n                        ENTRY_H_CODE : r.get('ENTRY_H_CODE'),\n                        ENTRY_L_CODE : r.get('ENTRY_L_CODE'),\n                        QTY : r.get('XCSL'),\n                        PRICE : r.get('PRICE'),\n                        AMOUNT : r.get('JCCB'),\n                        CHANGE_LOT : r.get('CHANGE_LOT'),\n                        NEWEST_PRICE : r.get('NEWEST_PRICE'),\n                        NEWEST_AMOUNT : r.get('NEWEST_AMOUNT'),\n                        SPECIFICATION : r.get('SPECIFICATION'),\n                        MATERIAL_CODE : r.get('MATERIAL_CODE'),\n                        MATERIAL_NAME : r.get('MATERIAL_NAME'),\n                        DIM_ID : r.get('DIM_ID'),\n                        DIM_NAME : r.get('DIM_NAME'),\n                        ORG_ID : app.ORG_ID.getValue(),\n                        LEDGER_ID : app.LEDGER_ID.getValue()\n                    },'after', 1, false);\n                });\n            }\n        });\n    }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#XC_ST_COST_CHANGE_delLBtns#}","itemId":"delBtns","iconCls":"file_delete_icon"},"events":{"click":"//删除原则，先将选中记录在表格中移除，点击主单保存时，才真正从数据库删除。\nvar recs = app.grid1.getSelection();\nif (!recs.length) {\n    Wb.toast('{#XC_ST_COST_CHANGE_qxzxyscdjl#}');\n    return;\n}\nWb.confirm('{#XC_ST_COST_CHANGE_qdyscxzd#} ' + recs.length + ' {#XC_ST_COST_CHANGE_tjlm#}',function() {\n\tWb.remove(app.grid1,recs);\n});"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"COST_CHANGE_L_ID","hidden":"true","dataIndex":"COST_CHANGE_L_ID","titleAlign":"center","itemId":"COST_CHANGE_L_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"COST_CHANGE_H_ID","hidden":"true","dataIndex":"COST_CHANGE_H_ID","titleAlign":"center","itemId":"COST_CHANGE_H_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"<font color='red'>*<\/font>{#XC_ST_COST_CHANGE_MATERIAL_CODE#}","width":"120","dataIndex":"MATERIAL_CODE","titleAlign":"center","itemId":"MATERIAL_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"<font color='red'>*<\/font>{#XC_ST_COST_CHANGE_MATERIAL_NAME#}","width":"120","dataIndex":"MATERIAL_NAME","titleAlign":"center","itemId":"MATERIAL_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#XC_ST_COST_CHANGE_ENTRY_H_CODE#}","width":"150","dataIndex":"ENTRY_H_CODE","titleAlign":"center","itemId":"ENTRY_H_CODE_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#XC_ST_COST_CHANGE_ENTRY_L_CODE#}","width":"120","dataIndex":"ENTRY_L_CODE","titleAlign":"center","itemId":"ENTRY_L_CODE_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#XC_ST_COST_CHANGE_QTY#}","width":"100","align":"right","dataIndex":"QTY","titleAlign":"center","itemId":"QTY_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#XC_ST_COST_CHANGE_DIM_NAME#}","width":"80","dataIndex":"DIM_NAME","titleAlign":"center","itemId":"DIM_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#XC_ST_COST_CHANGE_PRICE#}","align":"right","width":"100","dataIndex":"PRICE","titleAlign":"center","format":"0,000.0000","itemId":"PRICE_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#XC_ST_COST_CHANGE_AMOUNT#}","align":"right","width":"100","dataIndex":"AMOUNT","titleAlign":"center","format":"0,000.00","itemId":"AMOUNT_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#XC_ST_COST_CHANGE_CHANGE_LOT#}","align":"right","width":"100","dataIndex":"CHANGE_LOT","titleAlign":"center","format":"0,000.00","itemId":"CHANGE_LOT_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#XC_ST_COST_CHANGE_NEWEST_PRICE#}","align":"right","width":"100","dataIndex":"NEWEST_PRICE","titleAlign":"center","format":"0,000.0000","itemId":"NEWEST_PRICE_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#XC_ST_COST_CHANGE_NEWEST_AMOUNT#}","align":"right","width":"100","dataIndex":"NEWEST_AMOUNT","titleAlign":"center","format":"0,000.00","itemId":"NEWEST_AMOUNT_COL"},"children":[],"expanded":true,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"window"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}