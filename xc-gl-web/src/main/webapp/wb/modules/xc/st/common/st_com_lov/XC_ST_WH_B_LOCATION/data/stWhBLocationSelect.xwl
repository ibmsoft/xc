{"inframe":false,"title":"入库及退货批次OR序列号表","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"var sql,data = app.get();\nsql = ' WHERE 1 = 1';\nif (!Wb.isEmpty(data.BUSINESS_H_ID)) {\n    sql+=' AND swbl.BUSINESS_H_ID = {?BUSINESS_H_ID?}';\n}\nif (!Wb.isEmpty(data.BUSINESS_L_ID)) {\n    sql+=' AND swbl.BUSINESS_L_ID = {?BUSINESS_L_ID?}';\n}\nif (!Wb.isEmpty(data.WAREHOUSE_ID)) {\n    sql+=' AND sl.WAREHOUSE_ID = {?WAREHOUSE_ID?}';\n    sql+=' AND swbl.DOC_CAT_CODE IN' + data.DOC_CAT_CODE_01;\n    sql+=' AND IFNULL(swbl.QTY,0) - IFNULL(swbl.DELEVERED_QTY,0) > 0';\n}\nif (!Wb.isEmpty(data.MATERIAL_ID)) {\n    sql+=' AND sli.MATERIAL_ID = {?MATERIAL_ID?}';\n}\nif (!Wb.isEmpty(data.SERIAL_BATCH_NUM)) {\n    sql+=' AND sli.SERIAL_BATCH_NUM = {?SERIAL_BATCH_NUM?}';\n}\nif (!Wb.isEmpty(data.LOCATION_NAME)) {\n    sql+=' AND sl.LOCATION_NAME LIKE \"%'+data.LOCATION_NAME+'%\"';\n}\nrequest.setAttribute('sql', sql);","itemId":"module"},"children":[{"configs":{"sql":"SELECT\n\tswbl.*,\n\tsli.QTY AS \"HWXCL\",\n\tsl.LOCATION_CODE,\n\tsl.LOCATION_NAME,\n\tsli.MATERIAL_ID,\n\tsli.SERIAL_BATCH_NUM\nFROM\n\txc_st_wh_b_location swbl\nLEFT JOIN xc_st_location sl ON swbl.LOCATION_ID = sl.LOCATION_ID\nLEFT JOIN xc_st_location_inventory sli ON swbl.LOCATION_ID = sli.LOCATION_ID\n{#sql#}\nGROUP BY sl.LOCATION_ID\nORDER BY sl.LOCATION_CODE","itemId":"dataprovider1"},"children":[],"expanded":false,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}