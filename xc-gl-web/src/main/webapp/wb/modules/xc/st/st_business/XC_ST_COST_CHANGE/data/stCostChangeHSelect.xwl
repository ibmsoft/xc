{"inframe":false,"title":"库存成本调整单主表查询","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"var sql,data = app.get();\nsql = ' WHERE 1 = 1';\nsql+=' AND scch.LEDGER_ID = {?LEDGER_ID?}';\nsql+=' AND sw.WAREHOUSE_ID = {?WAREHOUSE_ID?}';\nif (!Wb.isEmpty(data.ADJUST_REASON)) {\n    sql+=' AND scch.ADJUST_REASON LIKE \"%'+data.ADJUST_REASON+'%\"';\n}\nif (!Wb.isEmpty(data.EMP_NAME)) {\n    sql+=' AND pe.EMP_NAME \"%'+data.EMP_NAME+'%\"';\n}\nif (!Wb.isEmpty(data.BIZ_DATE_START)) {\n    if (!Wb.isEmpty(data.BIZ_DATE_END)) \n        sql+=' and scch.BIZ_DATE BETWEEN {?BIZ_DATE_START?} and {?BIZ_DATE_END?} ';\n    else\n        sql+=' and scch.BIZ_DATE >= {?BIZ_DATE_START?}';\n}\nelse{\n    if (!Wb.isEmpty(data.BIZ_DATE_END))\n        sql+=' and scch.BIZ_DATE <= {?BIZ_DATE_END?}';\n}\nif (!Wb.isEmpty(data.STATUS)) {\n    if(data.STATUS != 'ALL')\n        sql+=' and scch.STATUS={?STATUS?}';\n}\nrequest.setAttribute('sql', sql);","itemId":"module"},"children":[{"configs":{"sql":"SELECT\n\tscch.*,\n\tgl.LEDGER_NAME,\n\tpo.ORG_NAME,\n\tsbt.BUSINESS_TYPE_CODE,\n\tsbt.BUSINESS_TYPE_NAME,\n\tsw.WAREHOUSE_CODE,\n\tsw.WAREHOUSE_NAME,\n\tpe.EMP_NAME AS \"ADJUST_PERSON\",\n\tsar.ADJUST_REASON\nFROM\n\txc_st_cost_change_h scch\nLEFT JOIN xc_gl_ledgers gl ON scch.LEDGER_ID = gl.LEDGER_ID\nLEFT JOIN xip_pub_orgs po ON scch.ORG_ID = po.ORG_ID\nLEFT JOIN xc_st_business_type sbt ON scch.BUSINESS_TYPE_ID = sbt.BUSINESS_TYPE_ID\nLEFT JOIN xc_st_warehouse sw ON scch.WAREHOUSE_ID = sw.WAREHOUSE_ID\nLEFT JOIN xip_pub_users pu ON scch.PERSON_ID = pu.USER_ID\nLEFT JOIN xip_pub_emps pe ON pu.EMP_ID = pe.EMP_ID\nLEFT JOIN xc_st_adjust_reason sar ON scch.ADJUST_REASON_ID = sar.ADJUST_REASON_ID\n{#sql#}\nORDER BY scch.COST_CHANGE_H_CODE DESC","itemId":"dataprovider1"},"children":[],"expanded":false,"type":"dataprovider"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}