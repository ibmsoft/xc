{"inframe":false,"title":"账簿属性设置","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"com.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/po/ld/ledgers/XC_GL_LEDGERS\");","itemId":"module"},"events":{"finalize":"function returnRowFn(r,type){\n  if(type==='xip_pub_orgs'){\n    app.PO_ACC_ID_DIF_XWL.QUERY_LEDGER_ID.setValue(r.data.LEDGER_ID);\n    app.PO_ACC_ID_EST_XWL.QUERY_LEDGER_ID.setValue(r.data.LEDGER_ID);\n    app.PO_ACC_ID_MAT_XWL.QUERY_LEDGER_ID.setValue(r.data.LEDGER_ID);\n    Wb.request({\n      url:'m?xwl=xc/po/ld/ledgers/DB/XC_GL_LEDGER_SELECT',\n      params:{'ledgerId':r.data.LEDGER_ID,'orgId':r.data.ORG_ID},\n      success:function(resp){\n        var rec = Wb.decode(resp.responseText);\n        if(rec.total>0){\n          Wb.setValue(app.form1,rec.rows[0]);\n          app.PO_ACC_ID_DIF_XWL.ACC_ID.setValue(rec.rows[0].PO_ACC_ID_DIF);\n          app.PO_ACC_ID_DIF_XWL.ACC_NAME.setValue(rec.rows[0].PO_ACC_ID_DIF_NAME);\n          app.PO_ACC_ID_EST_XWL.ACC_ID.setValue(rec.rows[0].PO_ACC_ID_EST);\n          app.PO_ACC_ID_EST_XWL.ACC_NAME.setValue(rec.rows[0].PO_ACC_ID_EST_NAME);\n          app.PO_ACC_ID_MAT_XWL.ACC_ID.setValue(rec.rows[0].PO_ACC_ID_MAT);\n         app.PO_ACC_ID_MAT_XWL.ACC_NAME.setValue(rec.rows[0].PO_ACC_ID_MAT_NAME);\n        }\n      }\n    });\n  }\n\n}\nfunction clearOtherFn(type){\n  if(type=='xip_pub_orgs'){\n\t\n  }\n\n}\n\n\n\n\n\n"},"children":[{"configs":{"itemId":"request"},"children":[{"configs":{"autoLoad":"true","itemId":"ldInitStore","url":"m?xwl=xc/com-lov/ORG_PICK/DB/ORG_SELECT_BY_LEDGER"},"events":{"load":"if (records.length > 0) {\n  app.ORG_XWL.ORG_ID.setValue(store.getAt(0).get('ORG_ID'));\n  app.ORG_XWL.ORG_NAME.setValue(store.getAt(0).get('ORG_NAME'));\n  app.ORG_XWL.LEDGER_ID.setValue(store.getAt(0).get('LEDGER_ID'));\n  app.PO_ACC_ID_DIF_XWL.QUERY_LEDGER_ID.setValue(store.getAt(0).get('LEDGER_ID'));\n  app.PO_ACC_ID_EST_XWL.QUERY_LEDGER_ID.setValue(store.getAt(0).get('LEDGER_ID'));\n  app.PO_ACC_ID_MAT_XWL.QUERY_LEDGER_ID.setValue(store.getAt(0).get('LEDGER_ID'));\n  Wb.request({\n    url:'m?xwl=xc/po/ld/ledgers/DB/XC_GL_LEDGER_SELECT',\n    params:{'ledgerId':store.getAt(0).get('LEDGER_ID'),'orgId':store.getAt(0).get('ORG_ID')},\n    success:function(resp){\n      var rec = Wb.decode(resp.responseText);\n      if(rec.total>0){\n        Wb.setValue(app.form1,rec.rows[0]);\n        app.PO_ACC_ID_DIF_XWL.ACC_ID.setValue(rec.rows[0].PO_ACC_ID_DIF);\n        app.PO_ACC_ID_DIF_XWL.ACC_NAME.setValue(rec.rows[0].PO_ACC_ID_DIF_NAME);\n        app.PO_ACC_ID_EST_XWL.ACC_ID.setValue(rec.rows[0].PO_ACC_ID_EST);\n        app.PO_ACC_ID_EST_XWL.ACC_NAME.setValue(rec.rows[0].PO_ACC_ID_EST_NAME);\n        app.PO_ACC_ID_MAT_XWL.ACC_ID.setValue(rec.rows[0].PO_ACC_ID_MAT);\n        app.PO_ACC_ID_MAT_XWL.ACC_NAME.setValue(rec.rows[0].PO_ACC_ID_MAT_NAME);\n      }\n    }\n  });\n}\n"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"folder"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#po_ld_ledger_save#}","itemId":"saveBtn","iconCls":"ok_icon"},"events":{"click":"Wb.request({\n\turl:'m?xwl=xc/po/ld/ledgers/DB/XC_GL_LEDGERS_UPDATE',\n  \tparams:{'PO_ACC_ID_MAT':app.PO_ACC_ID_MAT_XWL.ACC_ID.getValue(),'PO_ACC_ID_DIF':app.PO_ACC_ID_DIF_XWL.ACC_ID.getValue(),\n           \t'IS_WDH':app.IS_WDH.getValue(),'IS_DHD':app.IS_DHD.getValue(),'IS_CGSQ':app.IS_CGSQ.getValue(),\n           'LEDGER_ID':app.ORG_XWL.LEDGER_ID.getValue(),'ORG_ID':app.ORG_XWL.ORG_ID.getValue(),\n           'PO_ACC_ID_EST':app.PO_ACC_ID_EST_XWL.ACC_ID.getValue()},\n  \tsuccess:function(resp){\n      \tWb.toast('{#po_ld_ledger_save_success#}');\n    }\n});"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"layout":"border","itemId":"viewport1"},"events":{"afterrender":"//设置账簿的输入框背景色，并且设置必输。\napp.ORG_XWL.ORG_NAME.setFieldStyle('background-color: #ffffd0; background-image: none;');\napp.ORG_XWL.ORG_NAME.allowBlank=false;\napp.PO_ACC_ID_DIF_XWL.ACC_NAME.setLabelWidth(180);\napp.PO_ACC_ID_EST_XWL.ACC_NAME.setLabelWidth(180);\napp.PO_ACC_ID_MAT_XWL.ACC_NAME.setLabelWidth(180);\napp.PO_ACC_ID_DIF_XWL.ACC_NAME.setFieldLabel('{#po_ld_ledger_dif_acc#}');\napp.PO_ACC_ID_EST_XWL.ACC_NAME.setFieldLabel('{#po_ld_ledger_est_acc#}');\napp.PO_ACC_ID_MAT_XWL.ACC_NAME.setFieldLabel('{#po_ld_ledger_mat_acc#}');"},"children":[{"configs":{"tbar":"app.tbar","region":"center","border":"false","itemId":"form1"},"children":[{"configs":{"title":"{#fieldset1label#}","itemId":"fieldset1"},"children":[{"configs":{"tagConfigs":"baseCls : 'my-panel-no-border'","height":"35","layout":"column","border":"false","itemId":"tr1"},"children":[{"configs":{"tagConfigs":"baseCls : 'my-panel-no-border'","layout":"fit","columnWidth":".25","margin":"6 0 0 0","border":"false","itemId":"td_1_11"},"children":[{"configs":{"file":"m?xwl=xc/com-lov/ORG_PICK/ORG_ALL_PICK","itemId":"ORG_XWL"},"children":[],"expanded":false,"type":"xwl"}],"expanded":false,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"fieldset"},{"configs":{"title":"{#fieldset2name#}","itemId":"fieldset2"},"children":[{"configs":{"height":"35","layout":"column","border":"false","itemId":"tr2"},"children":[{"configs":{"layout":"form","columnWidth":".3","border":"false","itemId":"td1"},"children":[{"configs":{"labelWidth":"180","labelAlign":"right","pickList":"[['Y','{#po_ld_ledger_y#}'],['N','{#po_ld_ledger_n#}']]","itemId":"IS_CGSQ","fieldLabel":"{#po_ld_ledger_is_cgsq#}"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".3","border":"false","itemId":"td11"},"children":[{"configs":{"labelWidth":"180","labelAlign":"right","pickList":"[['Y','{#po_ld_ledger_y#}'],['N','{#po_ld_ledger_n#}']]","itemId":"IS_DHD","fieldLabel":"{#po_ld_ledger_is_dhd#}"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".3","border":"false","itemId":"td12"},"children":[{"configs":{"labelWidth":"180","labelAlign":"right","pickList":"[['Y','{#po_ld_ledger_y#}'],['N','{#po_ld_ledger_n#}']]","itemId":"IS_WDH","fieldLabel":"{#po_ld_ledger_is_wdh#}"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"height":"35","layout":"column","border":"false","itemId":"tr3"},"children":[{"configs":{"layout":"form","columnWidth":".3","border":"false","itemId":"td3_1"},"children":[{"configs":{"file":"m?xwl=xc/po/po-com-lov/ACC_ID_PICK/ACC_ID_LD","itemId":"PO_ACC_ID_DIF_XWL"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".3","border":"false","itemId":"td3_2"},"children":[{"configs":{"file":"m?xwl=xc/po/po-com-lov/ACC_ID_PICK/ACC_ID_LD","itemId":"PO_ACC_ID_EST_XWL"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"},{"configs":{"layout":"form","columnWidth":".3","border":"false","itemId":"td3_3"},"children":[{"configs":{"file":"m?xwl=xc/po/po-com-lov/ACC_ID_PICK/ACC_ID_LD","itemId":"PO_ACC_ID_MAT_XWL"},"children":[],"expanded":false,"type":"xwl"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"fieldset"}],"expanded":true,"type":"form"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}