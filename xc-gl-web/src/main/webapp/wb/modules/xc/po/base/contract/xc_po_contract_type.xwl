{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/po/base/contract/json/xc_po_contract_type\");\nvar contextPath = request.getContextPath();\nrequest.setAttribute(\"contextPath\",contextPath);","itemId":"module"},"events":{"initialize":"var editRecords = [];\nvar deleteRecords = [];"},"children":[{"configs":{"layout":"border","border":"false","itemId":"viewport1"},"children":[{"configs":{"region":"north","height":"40","layout":"column","border":"false","itemId":"queryForm"},"children":[{"configs":{"labelWidth":"120","columnWidth":"0.3","labelAlign":"right","itemId":"queryTypeCode","fieldLabel":"{#base_contract_type_code#}"},"events":{"specialkey":"if(Ext.EventObject.getKey()==13){\n  app.queryBtn.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"120","columnWidth":"0.3","labelAlign":"right","itemId":"queryTypeName","fieldLabel":"{#base_contract_type_name#}"},"events":{"specialkey":"if(Ext.EventObject.getKey()==13){\n  app.queryBtn.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"text":"{#base_contract_query#}","columnWidth":"0.065","margin":"0 0 0 10","itemId":"queryBtn","iconCls":"seek_icon"},"events":{"click":"app.grid1.store.load({\n\tparams:{'code':app.queryTypeCode.getValue(),\n           'name':app.queryTypeName.getValue()}\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#base_contract_reset#}","columnWidth":"0.065","margin":"0 0 0 10","itemId":"resetBtn","iconCls":"cancel_icon"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"form"},{"configs":{"region":"center","selType":"checkboxmodel","border":"false","itemId":"grid1","editable":"true"},"children":[{"configs":{"border":"false","itemId":"tbar"},"children":[{"configs":{"text":"{#base_contract_add#}","itemId":"addBtn","iconCls":"file_add_icon"},"events":{"click":"Wb.add(app.grid1,[{CONTRACT_TYPE_ID:Xip.getId(),STATUS:'Y'}]);"},"children":[],"expanded":true,"type":"button"},{"configs":{"text":"-","itemId":"item1"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#base_contract_save#}","itemId":"saveBtn","iconCls":"save_icon"},"events":{"click":"var vstore = app.grid1.store;\nvar vrec = vstore.getRange(0,vstore.getCount());\nif(!Wb.verifyGrid(app.grid1)){\n  Wb.toast('{#base_contract_exist_illegal#}');\n  return;\n}\nWb.request({\n\turl:'{#contextPath#}'+'/poContractTypeAction.do?method=saveContractType',\n  \tparams:{'records':Wb.getData(vrec),'deleteRecords':deleteRecords},\n  \tsuccess:function(resp){\n    \tvar rec = Wb.decode(resp.responseText);\n      \tif(rec.flag=='0'){\n          \tWb.toast('{#base_contract_save_success#}');\n        }else if(rec.flag=='1'){\n          Wb.toast(rec.flag);\n        }\n    }\n});"},"children":[],"expanded":true,"type":"button"},{"configs":{"text":"-","itemId":"item2"},"children":[],"expanded":false,"type":"item"},{"configs":{"text":"{#base_contract_delete#}","itemId":"deleteBtn","iconCls":"file_delete_icon"},"events":{"click":"Wb.remove(app.grid1);"},"children":[],"expanded":true,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#base_contract_rowNum#}","width":"50","align":"center","xtype":"rownumberer","titleAlign":"center","itemId":"rowNum"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#base_contract_type_id#}","hidden":"true","dataIndex":"CONTRACT_TYPE_ID","titleAlign":"center","itemId":"CONTRACT_TYPE_ID_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"<font color='red'>*<\/font>{#base_contract_type_code#}","width":"200","dataIndex":"CONTRACT_TYPE_CODE","titleAlign":"center","itemId":"CONTRACT_TYPE_CODE_COL"},"children":[{"configs":{"allowBlank":"false","itemId":"editor"},"events":{"change":"//判断是否有相同的编码\nWb.request({\n\turl:'m?xwl=xc/po/base/contract/data/selectDataByCode',\n  \tparams:{'contractTypeCode':text.getValue()},\n  \tsuccess:function(resp){\n      var rec = Wb.decode(resp.responseText);\n      if(rec.total>0){\n      \tWb.toast('{#base_contract_exist_same_type_code#}');\n        text.setValue('');\n        return;\n      }\n    }\n});"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"column"},{"configs":{"text":"<font color='red'>*<\/font>{#base_contract_type_name#}","width":"200","dataIndex":"CONTRACT_TYPE_NAME","titleAlign":"center","itemId":"CONTRACT_TYPE_NAME_COL"},"children":[{"configs":{"allowBlank":"false","itemId":"editor"},"events":{"change":"//判断是否有相同的名称\nWb.request({\n\turl:'m?xwl=xc/po/base/contract/data/selectDataByName',\n  \tparams:{'contractTypeName':text.getValue()},\n  \tsuccess:function(resp){\n      var rec = Wb.decode(resp.responseText);\n      if(rec.total>0){\n      \tWb.toast('{#base_contract_exist_same_type_name#}');\n        text.setValue('');\n        return;\n      }\n    }\n});"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"column"},{"configs":{"text":"<font color='red'>*<\/font>{#base_contract_description#}","width":"280","dataIndex":"DESCRIPTION","titleAlign":"center","itemId":"DESCRIPTION_COL"},"children":[{"configs":{"allowBlank":"false","itemId":"editor"},"children":[],"expanded":false,"type":"textarea"}],"expanded":true,"type":"column"},{"configs":{"text":"{#base_contract_status#}","dataIndex":"STATUS","titleAlign":"center","itemId":"STATUS_COL","renderer":"metaData.style='background-color:#ffffd0';\nif(value=='Y') return '{#base_contract_enable#}';\nif(value=='N') return '{#base_contract_unable#}';"},"children":[{"configs":{"pickList":"[['Y','{#base_contract_enable#}'],['N','{#base_contract_unable#}']]","itemId":"editor"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xc/po/base/contract/data/getContractTypeData"},"events":{"update":"editRecords.push({'id':record.data.CONTRACT_TYPE_ID,\n     \t\t\t\t'code':record.data.CONTRACT_TYPE_CODE,\n                    'name':record.data.CONTRACT_TYPE_NAME,\n                   \t'description':record.data.DESCRIPTION,\n                  \t'status':record.data.STATUS});","remove":"deleteRecords.push(record.data.CONTRACT_TYPE_ID);"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}