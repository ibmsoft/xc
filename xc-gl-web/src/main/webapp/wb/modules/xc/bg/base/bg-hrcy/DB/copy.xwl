{"inframe":false,"title":"复制","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"\nvar bg_hrcy_id = app.get('BG_HRCY_ID');\n\napp.info(request.getParameter('bg_items'));\nvar bg_items = Wb.decode(request.getParameter('bg_items'));\n\n//验证编码是否重复\napp.run('select 1 from xc_bg_hrcy where BG_HRCY_CODE={?BG_HRCY_CODE?}',\n        {errorText: '编码\"'+app.get('BG_HRCY_CODE')+'\" 已经存在。'}\n       );\n//验证名称是否重复\napp.run('select 1 from xc_bg_hrcy where BG_HRCY_NAME={?BG_HRCY_NAME?}', \n        {errorText: '名称\"'+app.get('BG_HRCY_NAME')+'\" 已经存在。'}\n       );\nbg_hrcy_id = java.util.UUID.randomUUID();\nWb.each(bg_items,function(bg_item){\n  bg_item.BG_ITEM_ID = java.util.UUID.randomUUID();\n  bg_item.BG_HRCY_ID = bg_hrcy_id;\n});\n\nrequest.setAttribute('BG_HRCY_ID',bg_hrcy_id);\nrequest.setAttribute('bg_items',Wb.encode(bg_items));\n","itemId":"module"},"children":[{"configs":{"sql":"insert into xc_bg_hrcy (\n\tBG_HRCY_ID,\n\tBG_HRCY_CODE,\n\tBG_HRCY_NAME,\n\tBG_HRCY_DESC,\n\tIS_ENABLED,\n    CREATION_DATE, \n\tCREATED_BY, \n\tLAST_UPDATE_DATE,\n\tLAST_UPDATED_BY \n)\nvalues\n(\n\t{?BG_HRCY_ID?},\n\t{?BG_HRCY_CODE?},\n\t{?BG_HRCY_NAME?},\n\t{?BG_HRCY_DESC?},\n\t'Y',\n    {?timestamp.sys.date?},\n    {?XIP.userId?},\n    {?timestamp.sys.date?},\n    {?XIP.userId?}      \n);","transaction":"start","itemId":"insert_bg_hrcy"},"children":[],"expanded":false,"type":"query"},{"configs":{"sql":"insert into xc_bg_items (\n  BG_ITEM_ID,\n  BG_HRCY_ID,\n  BG_ITEM_CODE,\n  BG_ITEM_NAME,\n  BG_ITEM_DESC,\n  BG_ITEM_UP_ID,\n  BG_ITEM_PROP,\n  BG_ITEM_TYPE,\n  START_DATE,\n  END_DATE,\n  CREATION_DATE, \n  CREATED_BY, \n  LAST_UPDATE_DATE,\n  LAST_UPDATED_BY \n)\nvalues\n(\n  {?BG_ITEM_ID?},\n  {?BG_HRCY_ID?},\n  {?BG_ITEM_CODE?},\n  {?BG_ITEM_NAME?},\n  {?BG_ITEM_DESC?},\n  {?BG_ITEM_UP_ID?},\n  {?BG_ITEM_PROP?},\n  {?BG_ITEM_TYPE?},\n  {?START_DATE?},\n  {?END_DATE?},\n  {?timestamp.sys.date?},\n  {?XIP.userId?},\n  {?timestamp.sys.date?},\n  {?XIP.userId?}  \n)","arrayName":"bg_items","itemId":"insert_bg_items"},"children":[],"expanded":false,"type":"query"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}