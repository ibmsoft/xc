{"inframe":false,"title":"项目预算单审批查看","hidden":false,"roles":{"default":1},"children":[{"configs":{"initScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/bg/biz/bg-ex-ver/json/bg-ex-doc\");\nvar userId = request.getSession().getAttribute(\"XzSessionVars\").get('userId');\n\nvar protocol = request.getProtocol() ;\nvar ipAddr = request.getServerName();\nvar port = request.getServerPort() ;\nvar ctxPath = request.getContextPath() ;\n\nvar pp = protocol.substr(0,5) ;\nprotocol = (pp.indexOf(\"https\") == -1 ? \"http\" : \"https\") ;\nvar url = protocol + \"://\" + ipAddr +\":\" + port + ctxPath ;\n\nrequest.setAttribute('contextPath',ctxPath);\nrequest.setAttribute(\"userId\",userId);\nrequest.setAttribute(\"appIP\",url);\nvar appId = request.getSession().getAttribute(\"XzSessionVars\").get('appId');\nrequest.setAttribute(\"funId\",request.getParameter('funId'));\nrequest.setAttribute(\"appId\",request.getParameter('appId'));","loginRequired":"false","serverScript":"var bg_doc_id = request.getParameter(\"businessId\");\nrequest.setAttribute(\"bg_doc_id\",bg_doc_id);","itemId":"module"},"children":[{"configs":{"itemId":"store"},"children":[{"configs":{"itemId":"bg_doc_dtl_store","url":"m?xwl=xc/bg/qry/bg-doc-qry/bg-doc-qryDB/bg-doc-dtlSelect"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"folder"},{"configs":{"layout":"border","itemId":"viewport1"},"events":{"beforerender":"Wb.request({\n    url : 'm?xwl=xc/bg/biz/bg-ex-doc/bg-ex-docDB/selectBgDocById',\n    async : false,\n    params : {BG_DOC_ID : '{#bg_doc_id#}'},\n    success : function(resp){\n        var data = Wb.decode(resp.responseText).rows[0];\n        Wb.setValue(app.bg_doc_form,data);\n\t\tapp.bg_doc_dtl_store.load({params : {BG_DOC_ID : '{#bg_doc_id#}'}});\n    }\n});"},"children":[{"configs":{"region":"north","itemId":"formPanel","border":"false"},"children":[{"configs":{"text":"{#titleLabel1#}","style":"fontSize:25px","margin":"20 0 10 0","labelAlign":"center","itemId":"titleLabel"},"children":[],"expanded":false,"type":"label"},{"configs":{"region":"center","itemId":"bg_doc_form"},"children":[{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","border":"false","itemId":"row2"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.3","labelWidth":"80","readOnly":"true","allowBlank":"false","displayField":"LEDGER_NAME","hidden":"true","labelAlign":"right","itemId":"LEDGER_ID","fieldLabel":"<font color='red'>*<\/font>{#LEDGER_NAME#}","editable":"false"},"events":{"change":"var ledger_id = app.LEDGER_ID.getValue();\nWb.request({\n    url : 'm?xwl=xc/bg/biz/bg-ex-doc/bg-ex-docDB/orgsSelect',//判断是否有会计科目数据\n    params : {LEDGER_ID : ledger_id},//传参\n    success: function(resp){\n        var temp = Wb.decode(resp.responseText);\n        if(temp.total > 0){\n            app.ORG_ID.setValue(temp.rows[0].ORG_NAME);\n\t\t}\n        else{\n            app.ORG_ID.setValue('');\n        }\n    }\n});"},"children":[],"expanded":true,"type":"combo"},{"configs":{"tagConfigs":"columnWidth : 0.3","labelWidth":"80","readOnly":"true","store":"app.ledger_store","allowBlank":"false","displayField":"LEDGER_NAME","valueField":"LEDGER_ID","labelAlign":"right","itemId":"LEDGER_NAME","fieldLabel":"<font color='red'>*<\/font>{#LEDGER_NAME#}","editable":"false"},"events":{"change":"if(combo.getDisplayValue() !== newValue){\n    app.LEDGER_ID.setValue(newValue);\n}"},"children":[],"expanded":true,"type":"combo"},{"configs":{"tagConfigs":"columnWidth : 0.4","labelWidth":"80","readOnly":"true","height":"22","width":"280","labelAlign":"right","itemId":"ORG_ID","fieldLabel":"{#ORG_ID#}","editable":"false"},"children":[],"expanded":true,"type":"combo"},{"configs":{"tagConfigs":"columnWidth : 0.25","labelWidth":"80","readOnly":"true","allowBlank":"false","labelAlign":"right","itemId":"PROJECT_NAME","fieldLabel":"<font color='red'>*<\/font>{#PROJECT_NAME#}","editable":"false"},"children":[{"configs":{"tagConfigs":"minWidth : 400","height":"250","store":"app.pro_store","barExportButtons":"false","barRefreshButton":"false","itemId":"pickComp"},"events":{"itemclick":"var picker = this.ownerCmp;\napp.PROJECT_ID.setValue(record.data.PROJECT_ID);\npicker.setValue(record.data.PROJECT_NAME);\npicker.collapse();\napp.pro_text.reset();"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"labelWidth":"70","emptyText":"根据编码/名称查询","labelAlign":"right","itemId":"pro_text"},"events":{"change":"if(text.getValue() === ''){\n    app.proSearchButton.fireEvent('click');\n}","specialkey":"if(Ext.EventObject.getKey()==13){\n\tapp.proSearchButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"width":"25","itemId":"proSearchButton","iconCls":"seek_icon","tooltip":"查询"},"events":{"click":"app.pro_store.load({params : {LEDGER_ID : app.LEDGER_ID.getValue(),pro_info : app.pro_text.getValue()}});"},"children":[],"expanded":false,"type":"button"},{"configs":{"width":"25","itemId":"proResetButton","iconCls":"cancel_icon","tooltip":"重置"},"events":{"click":"app.PROJECT_ID.reset();\napp.PROJECT_ID.getPicker().hide();\napp.pro_text.reset();"},"children":[],"expanded":false,"type":"button"}],"expanded":false,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"序号","align":"center","xtype":"rownumberer","width":"50","titleAlign":"center","itemId":"ORDERBY"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"ID","hidden":"true","dataIndex":"PROJECT_ID","titleAlign":"center","itemId":"PROJECT_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"编码","width":"80","dataIndex":"PROJECT_CODE","titleAlign":"center","itemId":"PROJECT_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"名称","width":"130","dataIndex":"PROJECT_NAME","titleAlign":"center","itemId":"PROJECT_NAME_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"picker"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","border":"false","itemId":"row3"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.3","labelWidth":"80","height":"22","readOnly":"true","width":"220","emptyText":"{#Automatically#}","labelAlign":"right","itemId":"BG_DOC_CODE","fieldLabel":"{#BG_DOC_CODE#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 10 0","border":"false","itemId":"row4"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.95","labelWidth":"80","readOnly":"true","height":"47","labelAlign":"right","itemId":"BG_DOC_DESC","fieldLabel":"{#BG_DOC_DESC#}"},"children":[],"expanded":false,"type":"textarea"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"}],"expanded":true,"type":"form"},{"configs":{"region":"center","store":"app.bg_doc_dtl_store","itemId":"bg_doc_dtl_grid","editable":"true"},"children":[{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#ORDERBY#}","align":"center","xtype":"rownumberer","width":"50","titleAlign":"center","itemId":"ORDERBY"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#BG_ITEM_NAME#}","width":"160","dataIndex":"BG_ITEM_NAME","titleAlign":"center","itemId":"BG_ITEM_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#DEPT_NAME#}","width":"160","dataIndex":"DEPT_NAME","titleAlign":"center","itemId":"DEPT_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#AMOUNT#}","width":"100","align":"right","dataIndex":"AMOUNT","titleAlign":"center","itemId":"AMOUNT_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#BG_DTL_DESC#}","width":"200","dataIndex":"BG_DTL_DESC","titleAlign":"center","itemId":"BG_DTL_DESC_COL"},"children":[],"expanded":true,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":"panel_icon"}