{"inframe":false,"title":"预算参数设置","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"//引入对应的json文件\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,'xc/bg/base/bg-ld/XC_BG_LD');","itemId":"module"},"children":[{"configs":{"layout":"border","itemId":"viewport1"},"children":[{"configs":{"region":"north","border":"false","itemId":"query_from"},"children":[{"configs":{"layout":"column","border":"false","padding":"10","itemId":"query_panel"},"children":[{"configs":{"tagConfigs":"columnWidth:0.25","labelWidth":"40","displayField":"LEDGER_NAME","valueField":"LEDGER_ID","emptyText":"{#query_ledger_emptyText#}","labelAlign":"right","itemId":"query_ledger","fieldLabel":"{#query_ledger#}","editable":"false"},"events":{"beforequery":"var combo = plan.combo ;\nif(!plan.forceAll){\n  var flag = false;\n  var value = plan.query;\n  combo.store.filterBy(function(record,id){\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value)!=-1);\n  });\n  combo.expand();\n  return false;\n}","select":"app.bg_grid.getStore().load({\n   params:{ledger_id:app.query_ledger.getValue()}\n});"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/com-qry/gl-ledgers/select-sec-fd-ledgers"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"},{"configs":{"tagConfigs":"columnWidth:0.08","text":"{#queryBtn#}","margin":"0 0 0 20","itemId":"queryBtn","iconCls":"seek_icon"},"events":{"click":"if(app.query_ledger.getValue()==='' ||app.query_ledger.getValue()===null) {\n  Wb.toast('请先选择账薄信息进行查询!');\n  //Ext.MessageBox.alert('提示','请先选择账薄信息');\n  return;\n}\n\napp.bg_grid.getStore().load({\n   params:{ledger_id:app.query_ledger.getValue()}\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"tagConfigs":"columnWidth:0.08","text":"{#resetBtn#}","margin":"0 0 0 20","itemId":"resetBtn","iconCls":"refresh_icon"},"events":{"click":"app.query_ledger.reset();\napp.bg_grid.getStore().load();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"form"},{"configs":{"region":"center","itemId":"bg_grid"},"events":{"itemdblclick":"app.updateBtn.fireEvent('click');"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#updateBtn#}","itemId":"updateBtn","iconCls":"file_edit_icon"},"events":{"click":"var rows = app.bg_grid.getSelection();\nif(rows.length<1) {\n   Wb.toast('{#qsxytxyxgdzbxx#}');//请先选择一条需要修改的账薄信息!\n   return;\n}\n\n// //重新查询数据库获取数据\n// Ext.Ajax.request({\n//    url:'m?xwl=xc/bg/base/bg-ld/bg_ld_db/select_ledger_by_id',\n//    params:{ledger_id:rows[0].data.LEDGER_ID},\n//    success:function(response){\n//      app.update_gb_win.show();\n//      Wb.setValue(app.update_gb_win,Wb.decode(response.responseText).rows[0]);\n//    }\n// });\n\n\napp.update_gb_win.show();\nWb.setValue(app.update_gb_win,rows[0].data);"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#row_num_col#}","align":"center","width":"50","xtype":"rownumberer","itemId":"row_num_col"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#ledger_id_col#}","hidden":"true","dataIndex":"LEDGER_ID","titleAlign":"center","itemId":"ledger_id_col"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#ledger_code_col#}","width":"70","dataIndex":"LEDGER_CODE","titleAlign":"center","itemId":"ledger_code_col"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#ledger_name_col#}","width":"150","dataIndex":"LEDGER_NAME","titleAlign":"center","itemId":"ledger_name_col","renderer":"metaData.style = 'overflow:auto;padding: 3px 6px;text-overflow: ellipsis;white-space: nowrap;white-space:normal;line-height:18px;';   \nreturn value;"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#bg_hrcy_name_col1#}","width":"150","dataIndex":"BG_HRCY_NAME","titleAlign":"center","itemId":"bg_hrcy_name_col","renderer":"metaData.style = 'overflow:auto;padding: 3px 6px;text-overflow: ellipsis;white-space: nowrap;white-space:normal;line-height:18px;';   \nreturn value;"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#bg_ex_period_name_col#}","width":"100","dataIndex":"BG_EX_PERIOD_NAME","titleAlign":"center","itemId":"bg_ex_period_name_col"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#bg_is_chk_name_col#}","width":"80","dataIndex":"BG_IS_CHK_NAME","titleAlign":"center","itemId":"bg_is_chk_name_col"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#bg_is_special_name_col#}","width":"100","dataIndex":"BG_IS_SPECIAL_NAME","titleAlign":"center","itemId":"bg_is_special_name_col"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#bg_is_cash_name_col#}","width":"100","dataIndex":"BG_IS_CASH_NAME","titleAlign":"center","itemId":"bg_is_cash_name_col"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xc/bg/base/bg-ld/bg_ld_db/select_ledger_dtl"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"grid"}],"expanded":false,"type":"viewport"},{"configs":{"title":"{#update_gb_win#}","autoShow":"false","frame":"true","height":"290","layout":"fit","width":"500","closeAction":"hide","buttonAlign":"center","border":"true","itemId":"update_gb_win","modal":"true","draggable":"false"},"children":[{"configs":{"itemId":"buttons"},"children":[{"configs":{"text":"{#saveBtn#}","width":"80","itemId":"saveBtn","iconCls":"save_icon"},"events":{"click":"var temp_leID = app.LEDGER_ID.getValue();//账薄ID\n\n\n//界面中的保存校验\n\n//验证并保存\nWb.request({\n  url:'m?xwl=xc/bg/base/bg-ld/bg_ld_db/update_ledgers',\n  out:app.update_gb_win,\n  success:function() {\n    Wb.toast('{#xgcg#}');//修改成功！\n    app.bg_grid.getStore().reload();\n    app.update_gb_win.close();\n  },\n  failure:function(){\n    Wb.toast('{#xgsb#}');//修改失败！\n  }\n});\n\n"},"children":[],"expanded":true,"type":"button"},{"configs":{"text":"{#cancelBtn#}","itemId":"cancelBtn","iconCls":"cancel_icon"},"events":{"click":"app.update_gb_win.close();\n"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"array"},{"configs":{"layout":"column","itemId":"bg_panel"},"children":[{"configs":{"tagConfigs":"columnWidth:0.9","labelWidth":"140","readOnly":"true","hidden":"true","labelAlign":"right","padding":"5","itemId":"LEDGER_ID","fieldLabel":"{#LEDGER_ID#}"},"children":[],"expanded":true,"type":"text"},{"configs":{"tagConfigs":"columnWidth:0.9","labelWidth":"140","readOnly":"true","labelAlign":"right","padding":"10 0 5 20","itemId":"LEDGER_NAME","fieldLabel":"{#LEDGER_NAME#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"140","readOnly":"true","hidden":"true","labelAlign":"right","itemId":"BG_HRCY_ID","fieldLabel":"{#BG_HRCY_ID#}"},"children":[],"expanded":false,"type":"text"},{"configs":{"tagConfigs":"columnWidth:0.9","labelWidth":"140","labelAlign":"right","padding":"5 0 5 20","itemId":"BG_HRCY_NAME","fieldLabel":"{#BG_HRCY_NAME#}"},"events":{"expand":"app.BG_HRCY_NAME.getPicker().getStore().load();","collapse":"//如果为空，则清空EX_IA_ACC_ID\nif(picker.getValue()==='' || picker.getValue()===null) {\n  app.BG_HRCY_ID.setValue();\n}\napp.query_bg_hrcy_name.reset();\n"},"children":[{"configs":{"tagConfigs":"minWidth:400","height":"350","barPageButton":"true","barExportButtons":"false","width":"400","barRefreshButton":"false","barNavigateButtons":"true","itemId":"pickComp"},"events":{"itemclick":"var picker = this.ownerCmp;\npicker.setValue(record.data.BG_HRCY_NAME);\napp.BG_HRCY_ID.setValue(record.data.BG_HRCY_ID);//把记录ACC_ID存放到隐藏域，可方便被提交到后台\npicker.collapse();//隐藏picker"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"emptyText":"{#query_bg_hrcy_name_emptyText#}","itemId":"query_bg_hrcy_name"},"events":{"specialkey":"if(e.getKey()===13) {\n  app.queryBgHrcyBtn.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"itemId":"queryBgHrcyBtn","iconCls":"seek_icon"},"events":{"click":"app.BG_HRCY_NAME.getPicker().getStore().load({\n   params:{bg_hrcy_name:app.query_bg_hrcy_name.getValue()}});"},"children":[],"expanded":false,"type":"item"},{"configs":{"itemId":"deleteBgHrcyBtn","iconCls":"delete_icon"},"events":{"click":"app.BG_HRCY_ID.reset();\napp.BG_HRCY_NAME.reset();\napp.query_bg_hrcy_name.reset();//清空模糊查询面板\napp.BG_HRCY_NAME.getPicker().hide();//隐藏picker"},"children":[],"expanded":false,"type":"item"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#bg_hrcy_row_num#}","hidden":"true","align":"center","width":"50","xtype":"rownumberer","titleAlign":"center","itemId":"bg_hrcy_row_num"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#bg_hrcy_id_col#}","hidden":"true","width":"80","dataIndex":"BG_HRCY_ID","titleAlign":"center","itemId":"bg_hrcy_id_col"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#bg_hrcy_code_col#}","width":"120","dataIndex":"BG_HRCY_CODE","titleAlign":"center","itemId":"bg_hrcy_code_col","renderer":"metaData.style = 'overflow:auto;padding: 3px 6px;text-overflow: ellipsis;white-space: nowrap;white-space:normal;line-height:18px;';   \nreturn value;"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#bg_hrcy_name_col2#}","width":"230","dataIndex":"BG_HRCY_NAME","titleAlign":"center","itemId":"bg_hrcy_name_col","renderer":"metaData.style = 'overflow:auto;padding: 3px 6px;text-overflow: ellipsis;white-space: nowrap;white-space:normal;line-height:18px;';   \nreturn value;"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"},{"configs":{"pageSize":"10","itemId":"store","autoLoad":"true","url":"m?xwl=xc/bg/base/bg-ld/bg_ld_db/select_bg_hrcy"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"picker"},{"configs":{"tagConfigs":"columnWidth:0.9","labelWidth":"140","displayField":"VAL_NAME","valueField":"VAL_CODE","labelAlign":"right","itemId":"BG_IS_CHK","padding":"5 0 5 20","fieldLabel":"{#BG_IS_CHK#}","forceSelection":"true"},"children":[{"configs":{"pageSize":"-1","itemId":"store","autoLoad":"true","url":"m?xwl=xc/bg/base/bg-ld/bg_ld_db/select_val_set_dtl_YN"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"},{"configs":{"tagConfigs":"columnWidth:0.9","labelWidth":"140","displayField":"VAL_NAME","valueField":"VAL_CODE","labelAlign":"right","itemId":"BG_EX_PERIOD","padding":"5 0 5 20","fieldLabel":"{#BG_EX_PERIOD#}","forceSelection":"true"},"children":[{"configs":{"pageSize":"-1","itemId":"store","autoLoad":"true","url":"m?xwl=xc/bg/base/bg-ld/bg_ld_db/select_val_set_dtl_ex_period"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"},{"configs":{"tagConfigs":"columnWidth:0.9","labelWidth":"140","displayField":"VAL_NAME","valueField":"VAL_CODE","labelAlign":"right","itemId":"BG_IS_SPECIAL","padding":"5 0 5 20","fieldLabel":"{#BG_IS_SPECIAL#}","forceSelection":"true"},"children":[{"configs":{"pageSize":"-1","itemId":"store","autoLoad":"true","url":"m?xwl=xc/bg/base/bg-ld/bg_ld_db/select_val_set_dtl_YN"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"},{"configs":{"tagConfigs":"columnWidth:0.9","labelWidth":"140","displayField":"VAL_NAME","valueField":"VAL_CODE","labelAlign":"right","itemId":"BG_IS_CASH","padding":"5 0 5 20","fieldLabel":"{#BG_IS_CASH#}","forceSelection":"true"},"children":[{"configs":{"pageSize":"-1","itemId":"store","autoLoad":"true","url":"m?xwl=xc/bg/base/bg-ld/bg_ld_db/select_val_set_dtl_YN"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"}],"expanded":true,"type":"form"}],"expanded":true,"type":"window"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}