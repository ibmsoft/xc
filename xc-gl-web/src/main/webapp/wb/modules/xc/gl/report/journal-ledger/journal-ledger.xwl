{"inframe":false,"title":"序时账","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"com.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/gl/report/daily-accounts/cash-daily-account/cashDailyAccount\");\nvar sessionVars = request.getSession().getAttribute(com.xzsoft.xip.framework.common.SessionVariable.XZ_SESSION_VARS);\nvar la_system_language = sessionVars.get(com.xzsoft.xip.framework.common.SessionVariable.language);\nrequest.setAttribute('la_system_language',la_system_language);\nrequest.setAttribute('contextPath',request.getContextPath());","itemId":"module"},"children":[{"configs":{"layout":"border","itemId":"viewport"},"events":{"afterrender":"var _currentDate = new Date();\nvar _defaultPeriodCode = Ext.Date.format(_currentDate, 'Y-m');\napp.endPeriodCode.setValue(_defaultPeriodCode);\napp.endPeriodCode.setRawValue(_defaultPeriodCode);"},"children":[{"configs":{"region":"north","frame":"true","style":"border-width:0px","border":"false","itemId":"paramsForm"},"children":[{"configs":{"itemId":"orgId"},"children":[],"expanded":false,"type":"hidden"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","border":"false","itemId":"tr1"},"children":[{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","frame":"true","layout":"form","columnWidth":".2","border":"false","itemId":"td1.1"},"children":[{"configs":{"labelWidth":"80","displayField":"NAME","valueField":"CODE","labelAlign":"right","itemId":"ledgerCombox","fieldLabel":"{#la_ledgerLabel#}"},"events":{"select":"app.orgId.setValue(records[0].data.ORG_ID);\n","beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[{"configs":{"pageSize":"-1","autoLoad":"true","itemId":"store","url":"m?xwl=xc/gl/report/daily-accounts/cash-daily-account/data/getAllLedger"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"fit","columnWidth":".36","itemId":"td1.3"},"children":[{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"column","itemId":"td1.3.1"},"children":[{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".54","itemId":"td3.3.1"},"children":[{"configs":{"labelWidth":"80","displayField":"NAME","valueField":"CODE","labelAlign":"right","itemId":"startPeriodCode","fieldLabel":"{#la_startPeriod#}"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[{"configs":{"pageSize":"-1","autoLoad":"true","itemId":"store","url":"m?xwl=xc/gl/report/ledger-balance/data/getLedgerPeriod"},"events":{"beforeload":"if(!Ext.isEmpty(app.ledgerCombox.getValue())){\n  store.getProxy().extraParams.ledgerId = app.ledgerCombox.getValue();\n}else{\n  return ;\n}\n"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".04","itemId":"td3.3.2"},"children":[{"configs":{"text":"--","labelAlign":"center","itemId":"rangeFlag"},"children":[],"expanded":false,"type":"label"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".38","itemId":"td3.3.3"},"children":[{"configs":{"displayField":"NAME","valueField":"CODE","labelAlign":"right","itemId":"endPeriodCode"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[{"configs":{"pageSize":"-1","autoLoad":"true","itemId":"store","url":"m?xwl=xc/gl/report/ledger-balance/data/getLedgerPeriod"},"events":{"beforeload":"if(!Ext.isEmpty(app.ledgerCombox.getValue())){\n  store.getProxy().extraParams.ledgerId = app.ledgerCombox.getValue();\n}else{\n  return ;\n}"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"form","columnWidth":".15","border":"false","itemId":"td1.4"},"children":[{"configs":{"labelWidth":"{#la_labelWidth#}","value":"0","pickList":"[['1','{#la_x#}'],['0','{#la_y#}']]","labelAlign":"right","itemId":"accountCheck","fieldLabel":"{#la_container#}"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".02","itemId":"td1.7"},"children":[{"configs":{"labelAlign":"center","itemId":"blankFlag"},"children":[],"expanded":false,"type":"label"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".068","itemId":"td1.5"},"children":[{"configs":{"text":"{#la_queryBtn#}","width":"70","itemId":"queryBtn","y":"2","iconCls":"seek_icon"},"events":{"click":"if(Ext.isEmpty(app.ledgerCombox.getValue())){\n  Wb.info('{#la_selectLedger#}');\n}else if(Ext.isEmpty(app.startPeriodCode.getValue()) || Ext.isEmpty(app.endPeriodCode.getValue())){\n  Wb.info('{#la_selectPeriod#}');\n}else{\n   var map = new Ext.util.HashMap();\n   map.add('language','{#la_system_language#}');\n   //组合参数\n  map.add('orgId',app.orgId.getValue());\n  var ledgerId = app.ledgerCombox.getValue();\n  map.add('ledgerId',ledgerId);\n  //会计期间\n  if(Ext.isEmpty(app.startPeriodCode.getValue())){\n     map.add('startPeriodCode','0');\n  }else{\n     map.add('startPeriodCode',app.startPeriodCode.getValue());\n  }\n  if(Ext.isEmpty(app.endPeriodCode.getValue())){\n     map.add('endPeriodCode','0');\n  }else{\n     map.add('endPeriodCode',app.endPeriodCode.getValue());\n  }\n//金额式\n  var targetUrl = '{#contextPath#}/ReportServer?reportlet=xc_journal_ledger/journal_ledger_cash.cpt&__bypagesize__=false';\n  map.add('isFirst','N');\n  //账簿格式\n  var params = '';\n  map.each(function(key, value, length){\n    params +='&'+key+'='+value;\n  });\n  var reportFrame = document.getElementById('journalReport');\n  params = targetUrl+params;\n  reportFrame.src = params;\n}"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".05","itemId":"td1.6"},"children":[{"configs":{"text":"{#la_resetBtn#}","width":"70","itemId":"resetBtn","y":"2","iconCls":"refresh_icon"},"events":{"click":"Wb.reset(app.paramsForm);"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","layout":"fit","html":"<iframe  scrolling=no frameborder=0 width=100% height=100% id=journalReport src='{#contextPath#}/ReportServer?reportlet=xc_journal_ledger/journal_ledger_cash.cpt&language={#la_system_language#}&__bypagesize__=false'><\/iframe>\n","itemId":"reportPanel"},"children":[],"expanded":false,"type":"panel"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}