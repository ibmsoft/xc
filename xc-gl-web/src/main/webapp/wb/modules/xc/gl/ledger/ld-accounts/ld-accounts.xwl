{"inframe":false,"title":"账簿科目管理","hidden":false,"roles":{"default":1},"children":[{"configs":{"title":"账簿科目管理","initScript":"var ctxPath = request.getContextPath();\nrequest.setAttribute(\"contextPath\",ctxPath);","loginRequired":"false","jsLinks":"[\"platform/util/platformUtil.js\"]","serverScript":"//---------------------获取当前模块语言对应的.json文件，放到request中----------------\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/gl/ledger/ld-accounts/ld-accounts\");\n","itemId":"module"},"events":{"finalize":"var group_array = [];//存储所有组\nvar items_array = [];//预算项\nvar ACC_HRCY_ID = '';//体系ID\nvar LEDGER_ID = '';//账簿ID\nvar cates_code = '';\nvar cate_code = '';\nvar is_enabled = 0;//启用不启用\nvar recs;\nvar selectRows = 0;\nvar modifyLength = 1;\nvar ACC_CODE_UNION_MAP = new Ext.util.HashMap();"},"children":[{"configs":{"itemId":"store"},"children":[{"configs":{"autoSync":"true","autoLoad":"true","itemId":"dim_store","url":"m?xwl=xc/gl/ledger/ld-accounts/ld_accountsDB/dimensionSelect"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"item_store","url":"m?xwl=xc/gl/ledger/ld-accounts/ld_accountsDB/xc_bg_itemsSelect"},"events":{"load":"items_array = [];\nvar count = store.getCount();\nfor(var i=0;i < count;i++){\n\titems_array.push(store.getAt(i).data);\n}","beforeload":"store.proxy.extraParams.LEDGER_ID = app.ledgers_com.getValue();\nstore.proxy.extraParams.NOWDATE = Ext.util.Format.date(new Date(),'Y-m-d');"},"children":[],"expanded":false,"type":"store"},{"configs":{"autoSync":"true","autoLoad":"true","itemId":"curr_store","url":"m?xwl=xc/gl/ledger/ld-accounts/ld_accountsDB/currencySelectNotCNY"},"children":[],"expanded":false,"type":"store"},{"configs":{"autoLoad":"true","itemId":"cate_store","url":"m?xwl=xc/gl/global/account/accounts/accountsDB/categorySelect"},"children":[],"expanded":false,"type":"store"},{"configs":{"autoSync":"true","autoLoad":"true","itemId":"group_store","url":"m?xwl=xc/gl/ledger/ld-accounts/ld_accountsDB/groupSelect"},"events":{"load":"group_array = [];\nvar count = store.getCount();\nfor(var i=0;i < count;i++){\n\tgroup_array.push(store.getAt(i).data);\n}"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"folder"},{"configs":{"itemId":"windows"},"children":[{"configs":{"height":"500","width":"960","layout":"border","closeAction":"hide","buttonAlign":"center","dialog":"true","itemId":"syncWindow"},"children":[{"configs":{"region":"north","border":"false","itemId":"search_form"},"events":{"afterrender":"Wb.request({\n\turl : 'm?xwl=xc/gl/ledger/ld-accounts/ld_accountsDB/categorySelect',\n\tsuccess : function(response){\n        var temp = Ext.decode(response.responseText);//从后台获取数据\n\t\tvar total = temp.total;\n\t\t//var name = temp1.ACC_CATEGORY_NAME;\n        var allRadio = Ext.create('Ext.form.field.Radio',{\n            name : 'answerRadio1',\n            boxLabel : '全部',\n            inputValue : '',\n\t\t\tid : 'radio'+0,\n            labelAlign : \"right\",\n            labelWidth : 60,\n            width : 100\n        });\n\t\tapp.radioPanel1.add(allRadio);\n\t\t//app.radioPanel1.add(allRadio);\n        for(var i = 1;i <= total; i++){\n\t\t\tvar name = temp.rows[i-1].ACC_CATEGORY_NAME;\n\t\t\tvar code = temp.rows[i-1].ACC_CATEGORY_CODE;\n            var anserRadio = Ext.create('Ext.form.field.Radio',{\n                name : 'answerRadio1',\n                boxLabel : name,\n                inputValue : code,\n                id : 'radio'+i,\n                labelAlign: \"right\",\n                labelWidth : 60,\n                width : 100\n            });\n            app.radioPanel1.add(anserRadio);\n            //app.radioPanel1.add(anserRadio);\n        }\n\t\t/*for(var j = 0;j < total;j++){\n            Ext.getCmp('radio' + j).on('focus',function(){\n                cate_code = Ext.getCmp('radio' + j).inputValue;\n                alert(cate_code);\n                app.searchButton.fireEvent('click');\n            });\n        }*/\n        Ext.getCmp('radio' + 0).on('focus',function(){\n            cate_code = Ext.getCmp('radio' + 0).inputValue;\n            Ext.getCmp('radio' + 0).setValue(true);\n            app.searchButton.fireEvent('click');\n        });\n        Ext.getCmp('radio' + 1).on('focus',function(){\n            cate_code = Ext.getCmp('radio' + 1).inputValue;\n            Ext.getCmp('radio' + 1).setValue(true);\n            app.searchButton.fireEvent('click');\n        });\n        Ext.getCmp('radio' + 2).on('focus',function(){\n            cate_code = Ext.getCmp('radio' + 2).inputValue;\n            Ext.getCmp('radio' + 2).setValue(true);\n            app.searchButton.fireEvent('click');\n        });\n        Ext.getCmp('radio' + 3).on('focus',function(){\n            cate_code = Ext.getCmp('radio' + 3).inputValue;\n            Ext.getCmp('radio' + 3).setValue(true);\n            app.searchButton.fireEvent('click');\n        });\n        Ext.getCmp('radio' + 4).on('focus',function(){\n            cate_code = Ext.getCmp('radio' + 4).inputValue;\n            Ext.getCmp('radio' + 4).setValue(true);\n            app.searchButton.fireEvent('click');\n        });\n\t\tExt.getCmp('radio' + 5).on('focus',function(){\n            cate_code = Ext.getCmp('radio' + 5).inputValue;\n            Ext.getCmp('radio' + 5).setValue(true);\n            app.searchButton.fireEvent('click');\n        });\n        Ext.getCmp('radio' + 6).on('focus',function(){\n            cate_code = Ext.getCmp('radio' + 6).inputValue;\n            Ext.getCmp('radio' + 6).setValue(true);\n            app.searchButton.fireEvent('click');\n        });\n        Ext.getCmp('radio' + 7).on('focus',function(){\n            cate_code = Ext.getCmp('radio' + 7).inputValue;\n            Ext.getCmp('radio' + 7).setValue(true);\n            app.searchButton.fireEvent('click');\n        });\n    }\n});"},"children":[{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","itemId":"row1","border":"false"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.25","labelWidth":"120","labelAlign":"right","itemId":"acc_group_com","fieldLabel":"{#Account Group#}","editable":"false"},"events":{"change":"app.searchButton.fireEvent('click');","specialkey":"if(Ext.EventObject.getKey()==13){\n\tapp.searchButton.fireEvent('click');\n}"},"children":[{"configs":{"tagConfigs":"minWidth : 300","height":"300","store":"app.group_store","barExportButtons":"false","barRefreshButton":"false","itemId":"pickComp","barInfoLabel":"false"},"events":{"itemclick":"var picker = this.ownerCmp;\npicker.setValue(record.data.ACC_GROUP_NAME);\n// app.acc_group_com.setValue(record.get('ACC_GROUP_ID')); //把记录ACC_GROUP_ID存放到隐藏域，可方便被提交到后台\npicker.collapse();\napp.group_text.reset();"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"labelWidth":"70","emptyText":"根据编码/名称查询","labelAlign":"right","itemId":"group_text"},"events":{"change":"if(text.getValue() === ''){\n    app.groupSearchButton.fireEvent('click');\n}","specialkey":"if(Ext.EventObject.getKey()==13){\n\tapp.groupSearchButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"width":"25","itemId":"groupSearchButton","iconCls":"seek_icon","tooltip":"查询"},"events":{"click":"app.group_store.load({params : {group_name : app.group_text.getValue()}});"},"children":[],"expanded":false,"type":"button"},{"configs":{"width":"25","itemId":"groupResetButton","iconCls":"cancel_icon","tooltip":"重置"},"events":{"click":"app.acc_group_com.reset();\napp.acc_group_com.getPicker().hide();"},"children":[],"expanded":false,"type":"button"}],"expanded":false,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"序号","hidden":"true","align":"center","xtype":"rownumberer","width":"50","titleAlign":"center","itemId":"ORDERBY"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"ID","hidden":"true","dataIndex":"ACC_GROUP_ID","itemId":"ACC_GROUP_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"编码","width":"80","dataIndex":"ACC_GROUP_CODE","titleAlign":"center","itemId":"ACC_GROUP_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"名称","width":"130","dataIndex":"ACC_GROUP_NAME","titleAlign":"center","itemId":"ACC_GROUP_NAME_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":false,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"picker"},{"configs":{"tagConfigs":"columnWidth : 0.25","labelWidth":"120","labelAlign":"right","itemId":"searchText","fieldLabel":"{#searchsText#}"},"events":{"change":"if(text.getValue() === ''){\n    app.searchButton.fireEvent('click');\n}","specialkey":"if(Ext.EventObject.getKey()==13){\n\tapp.searchButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"tagConfigs":"columnWidth : 0.1","text":"{#searchsButton#}","margin":"0 0 0 20","itemId":"searchButton","iconCls":"seek_icon"},"events":{"click":"var group = app.acc_group_com.getValue();\n//改变显示值\nfor(var i=0;i < group_array.length;i++) {\n    if(group === group_array[i].ACC_GROUP_NAME)\n        group = group_array[i].ACC_GROUP_ID;\n}\napp.accounts_grid.store.load({params : {ACC_INFO : Ext.String.escape(app.searchText.getValue()),\n                                       ACC_HRCY_ID : ACC_HRCY_ID,\n                                       ACC_GROUP_ID : group,\n                                       ACC_CATEGORY_INFO : cate_code,\n                                       LEDGER_ID:LEDGER_ID}});"},"children":[],"expanded":false,"type":"button"},{"configs":{"tagConfigs":"columnWidth : 0.1","text":"{#resetsButton#}","margin":"0 0 0 20","itemId":"resetButton","iconCls":"refresh_icon"},"events":{"click":"app.search_form.getForm().reset();\ncate_code = '';\napp.searchButton.fireEvent('click');"},"children":[],"expanded":false,"type":"button"}],"expanded":false,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","hidden":"true","layout":"column","margin":"10 0 10 20","itemId":"row2","border":"false"},"children":[{"configs":{"tagConfigs":"baseCls : 'my-panel-no-border'","frame":"true","layout":"column","itemId":"radioPanel1"},"children":[],"expanded":false,"type":"panel"}],"expanded":false,"type":"panel"},{"configs":{"tagConfigs":"baseCls : 'my-panel-no-border'","layout":"column","margin":"10 0 10 10","itemId":"radioPanel"},"children":[{"configs":{"labelWidth":"80","name":"categoryInfo","width":"80","margin":"0 0 0 10","labelAlign":"right","itemId":"allRadio","boxLabel":"{#allRadio#}","handler":"if(value){\n    cate_code = '';\n    app.searchButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"radio"},{"configs":{"labelWidth":"80","name":"categoryInfo","width":"80","margin":"0 0 0 10","labelAlign":"right","itemId":"zcRadio","boxLabel":"{#zcRadio#}","handler":"if(value){\n    cate_code = '资产';\n    app.searchButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"radio"},{"configs":{"labelWidth":"80","name":"categoryInfo","width":"80","margin":"0 0 0 10","labelAlign":"right","itemId":"fzRadio","boxLabel":"{#fzRadio#}","handler":"if(value){\n    cate_code = '负债';\n    app.searchButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"radio"},{"configs":{"labelWidth":"80","name":"categoryInfo","width":"80","margin":"0 0 0 10","labelAlign":"right","itemId":"gtRadio","boxLabel":"{#gtRadio#}","handler":"if(value){\n    cate_code = '共同';\n    app.searchButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"radio"},{"configs":{"labelWidth":"80","name":"categoryInfo","width":"120","margin":"0 0 0 10","labelAlign":"right","itemId":"qyRadio","boxLabel":"{#qyRadio#}","handler":"if(value){\n    cate_code = '所有者权益';\n    app.searchButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"radio"},{"configs":{"labelWidth":"80","name":"categoryInfo","width":"80","margin":"0 0 0 10","labelAlign":"right","itemId":"cbRadio","boxLabel":"{#cbRadio#}","handler":"if(value){\n    cate_code = '成本';\n    app.searchButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"radio"},{"configs":{"labelWidth":"80","name":"categoryInfo","width":"140","margin":"0 0 0 10","labelAlign":"right","itemId":"ryRadio","boxLabel":"{#ryRadio#}","handler":"if(value){\n    cate_code = '损益';\n    app.searchButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"radio"},{"configs":{"labelWidth":"80","name":"categoryInfo","width":"150","margin":"0 0 0 10","labelAlign":"right","itemId":"bwRadio","boxLabel":"{#bwRadio#}","handler":"if(value){\n    cate_code = '表外';\n    app.searchButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"radio"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","selType":"checkboxmodel","barExportButtons":"false","barExportAllButtons":"false","rowNumber":"false","itemId":"accounts_grid"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/gl/ledger/ld-accounts/ld_accountsDB/accountsSelect"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#rownum#}","align":"center","xtype":"rownumberer","width":"50","titleAlign":"center","itemId":"ORDERBY"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"科目ID","hidden":"true","dataIndex":"ACC_ID","itemId":"ACC_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"体系ID","hidden":"true","dataIndex":"ACC_HRCY_ID","itemId":"ACC_HRCY_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#acc_code#}","width":"120","dataIndex":"ACC_CODE","titleAlign":"center","itemId":"ACC_CODE_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#acc_name#}","width":"200","dataIndex":"ACC_NAME","titleAlign":"center","itemId":"ACC_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#acc_category#}","width":"80","dataIndex":"ACC_CATEGORY_NAME","titleAlign":"center","itemId":"ACC_CATEGORY_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#acc_group#}","width":"80","dataIndex":"ACC_GROUP_NAME","titleAlign":"center","itemId":"ACC_GROUP_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#bal_direction#}","width":"80","dataIndex":"BALANCE_DIRECTION","titleAlign":"center","itemId":"BALANCE_DIRECTION_COL","renderer":"if(value == 1){\n  return '借';\n}\nelse if(value == 0){\n  return '平';\n}\nelse if(value==-1){\n  return '贷';\n}"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#START_DATE#}","width":"90","xtype":"datecolumn","dataIndex":"START_DATE","titleAlign":"center","itemId":"START_DATE_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#END_DATE#}","width":"90","xtype":"datecolumn","dataIndex":"END_DATE","titleAlign":"center","itemId":"END_DATE_COL","renderer":"if(Ext.util.Format.date(value, 'Y-m-d') == '9999-12-31'){\n  return null;\n}else{\n  return Ext.util.Format.date(value, 'Y-m-d');\n}"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"上级编码","hidden":"true","width":"90","dataIndex":"UP_ACC_CODE","titleAlign":"center","itemId":"UP_ACC_CODE_COL"},"children":[],"expanded":true,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"window"},{"configs":{"height":"400","width":"500","layout":"absolute","closeAction":"hide","buttonAlign":"center","border":"false","dialog":"true","itemId":"editWindow"},"children":[{"configs":{"height":"330","width":"245","itemId":"editForm","y":"0","x":"0"},"children":[{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","itemId":"rowOp","border":"false"},"children":[{"configs":{"labelWidth":"80","readOnly":"true","hidden":"true","labelAlign":"right","itemId":"ACC_SEG_UNION","fieldLabel":"辅助核算"},"children":[],"expanded":false,"type":"text"},{"configs":{"tagConfigs":"columnWidth : 0.35","text":"{#upd_item#}","height":"22","margin":"0 0 0 10","itemId":"UPDATE_ITEM"},"children":[],"expanded":false,"type":"label"},{"configs":{"tagConfigs":"columnWidth : 0.4","text":"{#upd_content#}","height":"22","width":"80","margin":"0 0 0 40","itemId":"UPDATE_CONTENT","y":"0","x":"104"},"children":[],"expanded":false,"type":"label"}],"expanded":false,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","itemId":"row3","border":"false"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.1","labelWidth":"80","margin":"0 0 0 20","labelAlign":"right","itemId":"IS_UPDATE_DIMS"},"events":{"change":"if(check.getValue() === true){\n\tapp.IS_AMOUNTS.setReadOnly(false);\n}\nif(check.getValue() === false){\n    app.IS_AMOUNTS.setReadOnly(true);\n    app.DIM_NAMES.allowBlank = true;\n\tapp.DIM_NAMES.setReadOnly(true);\n    app.DIM_NAMES.reset();\n    app.IS_AMOUNTS.reset();\n}"},"children":[],"expanded":false,"type":"check"},{"configs":{"tagConfigs":"columnWidth : 0.85","labelWidth":"80","height":"22","readOnly":"true","pickList":"[[1,'是'],[0,'否']]","labelAlign":"right","itemId":"IS_AMOUNTS","fieldLabel":"{#is_amt#}","editable":"false"},"events":{"select":"if(combo.getValue() === 1){\n\tapp.DIM_NAMES.allowBlank = false;\n\tapp.DIM_NAMES.setReadOnly(false);\n}\nif(combo.getValue() === 0){\n    app.DIM_NAMES.allowBlank = true;\n\tapp.DIM_NAMES.setReadOnly(true);\n    app.DIM_NAMES.reset();\n}"},"children":[],"expanded":false,"type":"combo"}],"expanded":false,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","itemId":"row5","border":"false"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.95","labelWidth":"80","readOnly":"true","store":"app.dim_store","displayField":"DIM_NAME","valueField":"DIM_ID","margin":"0 0 0 25","labelAlign":"right","itemId":"DIM_NAMES","fieldLabel":"{#amt_dim#}","editable":"false"},"children":[],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","itemId":"row6","border":"false"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.1","labelWidth":"80","margin":"0 0 0 20","labelAlign":"right","itemId":"IS_UPDATE_FOREGINS"},"events":{"change":"if(check.getValue() === true){\n\tapp.IS_FOREGIN_CNYS.setReadOnly(false);\n}\nif(check.getValue() === false){\n    app.IS_FOREGIN_CNYS.setReadOnly(true);\n    app.CURRENCY_NAMES.allowBlank = true;\n\tapp.CURRENCY_NAMES.setReadOnly(true);\n    app.IS_FOREGIN_CNYS.reset();\n    app.CURRENCY_NAMES.reset();\n}"},"children":[],"expanded":false,"type":"check"},{"configs":{"tagConfigs":"columnWidth : 0.85","labelWidth":"80","height":"22","readOnly":"true","pickList":"[[1,'是'],[0,'否']]","labelAlign":"right","itemId":"IS_FOREGIN_CNYS","fieldLabel":"{#foreign_cny#}","editable":"false"},"events":{"select":"if(combo.getValue() === 1){\n\tapp.CURRENCY_NAMES.allowBlank = false;\n\tapp.CURRENCY_NAMES.setReadOnly(false);\n}\nif(combo.getValue() === 0){\n    app.CURRENCY_NAMES.allowBlank = true;\n\tapp.CURRENCY_NAMES.setReadOnly(true);\n    app.CURRENCY_NAMES.reset();\n}"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","itemId":"row7","border":"false"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.95","labelWidth":"80","readOnly":"true","store":"app.curr_store","displayField":"CURRENCY_NAME","valueField":"CURRENCY_CODE","margin":"0 0 0 25","labelAlign":"right","itemId":"CURRENCY_NAMES","fieldLabel":"{#currency#}","editable":"false"},"children":[],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","itemId":"row8","border":"false"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.1","labelWidth":"80","margin":"0 0 0 20","labelAlign":"right","itemId":"IS_BG_ITEM_ID"},"events":{"change":"if(check.getValue() === true){\n\tapp.BG_ITEM_IDS.setReadOnly(false);\n}\nif(check.getValue() === false){\n    app.BG_ITEM_IDS.allowBlank = true;\n\tapp.BG_ITEM_IDS.setReadOnly(true);\n    app.BG_ITEM_IDS.reset();\n}"},"children":[],"expanded":false,"type":"check"},{"configs":{"tagConfigs":"columnWidth : 0.85","labelWidth":"80","readOnly":"true","labelAlign":"right","itemId":"BG_ITEM_IDS","fieldLabel":"{#Budget_Item#}","editable":"false"},"children":[{"configs":{"tagConfigs":"minWidth : 300","height":"300","store":"app.item_store","barExportButtons":"false","barRefreshButton":"false","itemId":"pickComp","barInfoLabel":"false"},"events":{"itemclick":"var picker = this.ownerCmp;\npicker.setValue(record.data.BG_ITEM_NAME);\npicker.collapse();\napp.ITEM_TEXTS.reset();"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"labelWidth":"70","emptyText":"根据编码/名称查询","labelAlign":"right","itemId":"ITEM_TEXTS"},"events":{"change":"if(text.getValue() === ''){\n\tapp.ITEMSSearchButton.fireEvent('click');\n}","specialkey":"if(Ext.EventObject.getKey()==13){\n\tapp.ITEMSSearchButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"width":"25","itemId":"ITEMSSearchButton","iconCls":"seek_icon","tooltip":"查询"},"events":{"click":"app.item_store.load({params : {LEDGER_ID : app.ledgers_com.getValue(),item_name : app.ITEM_TEXTS.getValue()}});"},"children":[],"expanded":false,"type":"button"},{"configs":{"width":"25","itemId":"ITEMSResetButton","iconCls":"cancel_icon","tooltip":"重置"},"events":{"click":"app.BG_ITEM_IDS.reset();\napp.BG_ITEM_IDS.getPicker().hide();"},"children":[],"expanded":false,"type":"button"}],"expanded":false,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"序号","hidden":"true","align":"center","xtype":"rownumberer","width":"50","titleAlign":"center","itemId":"ORDERBY"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"ID","hidden":"true","dataIndex":"BG_ITEM_ID","itemId":"BG_ITEM_ID_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"编码","width":"80","dataIndex":"BG_ITEM_CODE","titleAlign":"center","itemId":"BG_ITEM_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"名称","width":"130","dataIndex":"BG_ITEM_NAME","titleAlign":"center","itemId":"BG_ITEM_NAME_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":false,"type":"array"}],"expanded":false,"type":"grid"}],"expanded":true,"type":"picker"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","itemId":"row1","border":"false"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.1","labelWidth":"80","margin":"0 0 0 20","labelAlign":"right","itemId":"START_DATE_CHECKS"},"events":{"change":"if(check.getValue() === true){\n\tapp.START_DATES.allowBlank = false;\n\tapp.START_DATES.setReadOnly(false);\n}\nif(check.getValue() === false){\n    app.START_DATES.allowBlank = true;\n\tapp.START_DATES.setReadOnly(true);\n    app.START_DATES.reset();\n}"},"children":[],"expanded":false,"type":"check"},{"configs":{"tagConfigs":"columnWidth : 0.85","labelWidth":"80","readOnly":"true","height":"22","labelAlign":"right","itemId":"START_DATES","fieldLabel":"{#START_DATE#}"},"children":[],"expanded":false,"type":"date"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 10 0","itemId":"row2","border":"false"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.1","labelWidth":"80","margin":"0 0 0 20","labelAlign":"right","itemId":"END_DATE_CHECKS"},"events":{"change":"if(check.getValue() === true){\n\tapp.END_DATES.allowBlank = false;\n\tapp.END_DATES.setReadOnly(false);\n}\nif(check.getValue() === false){\n    app.END_DATES.allowBlank = true;\n\tapp.END_DATES.setReadOnly(true);\n    app.END_DATES.reset();\n}"},"children":[],"expanded":false,"type":"check"},{"configs":{"tagConfigs":"columnWidth : 0.85","labelWidth":"80","readOnly":"true","height":"22","labelAlign":"right","itemId":"END_DATES","fieldLabel":"{#END_DATE#}"},"children":[],"expanded":false,"type":"date"}],"expanded":true,"type":"panel"}],"expanded":false,"type":"form"},{"configs":{"labelWidth":"80","height":"24","width":"120","labelAlign":"right","itemId":"UPDATE_ASS","fieldLabel":"{#UPDATE_ASS#}","x":"260"},"events":{"change":"if(check.getValue() === true){\n    app.ass_grid.show();\n//     var acc_segs = [];\n//     var store = app.ass_grid.store;\n//     for(var i = 0;i < store.count();i++){\n//         if(store.getAt(i).data.IS_ENABLED === 0){\n//         }\n//     }\n}\nif(check.getValue() === false){\n    app.ass_grid.hide();\n    //app.ass_grid.store.load();\n}"},"children":[],"expanded":false,"type":"check"},{"configs":{"pagingBar":"false","height":"252","hidden":"true","width":"245","itemId":"ass_grid","editable":"true","y":"25","x":"250"},"events":{"tagEvents":"/*{\n    itemmouseenter:function(view,record,item,index,e,options){\n        app.ass_grid.getSelectionModel().select(index);\n    }\n}*/"},"children":[{"configs":{"remoteSort":"true","itemId":"store","url":"m?xwl=xc/gl/ledger/ld-accounts/ld_accountsDB/ld_segmentsSelect"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"核算段ID","hidden":"true","dataIndex":"LD_SEG_ID","titleAlign":"center","itemId":"LD_SEG_ID_COL","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"编码","hidden":"true","dataIndex":"SEG_CODE","titleAlign":"center","itemId":"SEG_CODE_COL","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"辅助核算维度","hidden":"true","width":"92","dataIndex":"SEG_NAME","titleAlign":"center","itemId":"SEG_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#ACC_SEG_UNION#}","width":"135","dataIndex":"LD_SEG_ALIAS","titleAlign":"center","itemId":"LD_SEG_ALIAS_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#Enabled#}","width":"63","xtype":"checkcolumn","dataIndex":"IS_ENABLED","titleAlign":"center","itemId":"IS_ENABLED_COL"},"events":{"checkchange":"var acc_segs = [];\nvar store = app.ass_grid.store;\nvar flag = 0;\n var _addUnionCode = store.getAt(rowIndex).data.SEG_CODE;\nif(checked){\n  ACC_CODE_UNION_MAP.add(_addUnionCode,1);\n}else{\n  ACC_CODE_UNION_MAP.removeAtKey(_addUnionCode);\n}\nfor(var i = 0;i < store.count();i++){\n    if(store.getAt(i).data.IS_ENABLED == 1){\n        flag = 1;\n        acc_segs.push(store.getAt(i).data.LD_SEG_ALIAS);\n    }\n    if(flag === 1){\n\t\tapp.ACC_SEG_UNION.setValue(acc_segs);\n    }\n    else{\n        app.ACC_SEG_UNION.setValue('');\n    }\n}"},"children":[],"expanded":true,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"window"},{"configs":{"height":"477","width":"550","layout":"absolute","closeAction":"hide","buttonAlign":"center","dialog":"true","itemId":"editLookWindow","modal":"true"},"children":[{"configs":{"height":"420","width":"270","itemId":"editLookForm","y":"0","x":"0"},"children":[{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","hidden":"true","layout":"column","itemId":"row0","border":"false"},"children":[{"configs":{"labelWidth":"40","height":"32","hidden":"true","width":"161","labelAlign":"right","itemId":"ACC_ID","fieldLabel":"科目ID","y":"0","x":"28"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"40","height":"32","hidden":"true","width":"161","labelAlign":"right","itemId":"LD_ACC_ID","fieldLabel":"账簿科目ID","y":"0","x":"28"},"children":[],"expanded":false,"type":"text"},{"configs":{"labelWidth":"80","readOnly":"true","height":"22","hidden":"true","width":"200","labelAlign":"right","itemId":"ACC_SEG_UNION","fieldLabel":"辅助核算","y":"30","x":"-12"},"children":[],"expanded":false,"type":"text"}],"expanded":false,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","itemId":"row1","border":"false"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.95","labelWidth":"80","readOnly":"true","labelAlign":"right","itemId":"ACC_CODE","fieldLabel":"{#acc_code#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","itemId":"row2","border":"false"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.95","labelWidth":"80","readOnly":"true","labelAlign":"right","itemId":"ACC_NAME","fieldLabel":"{#acc_name#}"},"children":[],"expanded":false,"type":"text"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","itemId":"row3","border":"false"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.95","labelWidth":"80","readOnly":"true","store":"app.cate_store","displayField":"ACC_CATEGORY_NAME","valueField":"ACC_CATEGORY_CODE","labelAlign":"right","itemId":"ACC_CATEGORY_CODE","fieldLabel":"{#acc_category#}"},"children":[],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","itemId":"row4","border":"false"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.95","labelWidth":"80","readOnly":"true","store":"app.group_store","displayField":"ACC_GROUP_NAME","valueField":"ACC_GROUP_ID","labelAlign":"right","itemId":"ACC_GROUP_ID","fieldLabel":"{#acc_group#}"},"children":[],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","itemId":"row5","border":"false"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.95","labelWidth":"80","readOnly":"true","pickList":"[['1','借'],['0','平'],['-1','贷']]","labelAlign":"right","itemId":"BALANCE_DIRECTION","fieldLabel":"{#bal_direction#}"},"children":[],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","itemId":"row8","border":"false"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.95","labelWidth":"80","pickList":"[[1,'是'],[0,'否']]","labelAlign":"right","itemId":"IS_AMOUNT","fieldLabel":"{#is_amt#}","editable":"false"},"events":{"select":"if(combo.getValue() === 1){\n\tapp.DIM_ID.allowBlank = false;\n\tapp.DIM_ID.setReadOnly(false);\n}\nif(combo.getValue() === 0){\n    app.DIM_ID.allowBlank = true;\n\tapp.DIM_ID.setReadOnly(true);\n    app.DIM_ID.reset();\n}"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","itemId":"row9","border":"false"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.95","labelWidth":"80","readOnly":"true","store":"app.dim_store","displayField":"DIM_NAME","valueField":"DIM_ID","labelAlign":"right","itemId":"DIM_ID","fieldLabel":"{#amt_dim#}","editable":"false"},"children":[],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","itemId":"row10","border":"false"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.95","labelWidth":"80","height":"22","pickList":"[[1,'是'],[0,'否']]","labelAlign":"right","itemId":"IS_FOREGIN_CNY","fieldLabel":"{#foreign_cny#}","editable":"false"},"events":{"select":"if(combo.getValue() === 1){\n\tapp.DEFAULT_CURRENCY.allowBlank = false;\n\tapp.DEFAULT_CURRENCY.setReadOnly(false);\n    app.DEFAULT_CURRENCY.reset();\n}\nif(combo.getValue() === 0){\n    app.DEFAULT_CURRENCY.allowBlank = true;\n\tapp.DEFAULT_CURRENCY.setReadOnly(true);\n    app.DEFAULT_CURRENCY.reset();\n}"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","itemId":"row11","border":"false"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.95","labelWidth":"80","readOnly":"true","height":"22","store":"app.curr_store","displayField":"CURRENCY_NAME","valueField":"CURRENCY_CODE","labelAlign":"right","itemId":"DEFAULT_CURRENCY","fieldLabel":"{#currency#}","editable":"false"},"events":{"change":"if(newValue === 'CNY'){\n\tcombo.setValue('人民币');\n}"},"children":[],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","itemId":"row12","border":"false"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.95","labelWidth":"80","labelAlign":"right","itemId":"BG_ITEM_ID","fieldLabel":"{#Budget_Item#}","editable":"false"},"events":{"change":"//改变显示值\nfor(var i=0;i < items_array.length;i++) {\n\tif(newValue === items_array[i].BG_ITEM_ID){\n        app.BG_ITEM_ID.setValue(items_array[i].BG_ITEM_NAME);\n    }\n}"},"children":[{"configs":{"tagConfigs":"minWidth : 300","height":"300","store":"app.item_store","barExportButtons":"false","barRefreshButton":"false","itemId":"pickComp","barInfoLabel":"false"},"events":{"itemclick":"var picker = this.ownerCmp;\npicker.setValue(record.data.BG_ITEM_ID);\npicker.collapse();\napp.ITEM_TEXT.reset();"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"labelWidth":"70","emptyText":"根据编码/名称查询","labelAlign":"right","itemId":"ITEM_TEXT"},"events":{"change":"if(text.getValue() === ''){\n    app.ITEMSearchButton.fireEvent('click');\n}","specialkey":"if(Ext.EventObject.getKey()==13){\n\tapp.ITEMSearchButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"width":"25","itemId":"ITEMSearchButton","iconCls":"seek_icon","tooltip":"查询"},"events":{"click":"app.item_store.load({params : {LEDGER_ID : app.ledgers_com.getValue(),NOWDATE : Ext.util.Format.date(new Date(),'Y-m-d'),item_name : app.ITEM_TEXT.getValue()}});"},"children":[],"expanded":false,"type":"button"},{"configs":{"width":"25","itemId":"ITEMResetButton","iconCls":"cancel_icon","tooltip":"重置"},"events":{"click":"app.BG_ITEM_ID.reset();\napp.BG_ITEM_ID1.reset();\napp.BG_ITEM_ID1.getPicker().hide();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"序号","hidden":"true","align":"center","xtype":"rownumberer","width":"50","titleAlign":"center","itemId":"ORDERBY"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"ID","hidden":"true","dataIndex":"BG_ITEM_ID","itemId":"BG_ITEM_ID_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"编码","width":"80","dataIndex":"BG_ITEM_CODE","titleAlign":"center","itemId":"BG_ITEM_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"名称","width":"130","dataIndex":"BG_ITEM_NAME","titleAlign":"center","itemId":"BG_ITEM_NAME_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":false,"type":"picker"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","itemId":"row6","border":"false"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.95","labelWidth":"80","allowBlank":"false","labelAlign":"right","itemId":"START_DATE","fieldLabel":"{#START_DATE#}"},"children":[],"expanded":false,"type":"date"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 10 0","itemId":"row7","border":"false"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.95","labelWidth":"80","allowBlank":"false","labelAlign":"right","itemId":"END_DATE","fieldLabel":"{#END_DATE#}"},"children":[],"expanded":false,"type":"date"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"pagingBar":"false","height":"420","width":"273","border":"true","itemId":"acc_ass_grid","editable":"true","y":"0","x":"270"},"events":{"tagEvents":"/*{\n    itemmouseenter:function(view,record,item,index,e,options){\n        app.acc_ass_grid.getSelectionModel().select(index);\n    }\n}*/"},"children":[{"configs":{"remoteSort":"true","itemId":"store","url":"m?xwl=xc/gl/ledger/ld-accounts/ld_accountsDB/ld_segmentsSelect"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"核算段ID","hidden":"true","dataIndex":"LD_SEG_ID","titleAlign":"center","itemId":"LD_SEG_ID_COL","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"编码","hidden":"true","dataIndex":"SEG_CODE","titleAlign":"center","itemId":"SEG_CODE_COL","flex":"1"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"辅助核算维度","hidden":"true","width":"92","dataIndex":"SEG_NAME","titleAlign":"center","itemId":"SEG_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#ACC_SEG_UNION#}","width":"130","dataIndex":"LD_SEG_ALIAS","titleAlign":"center","itemId":"LD_SEG_ALIAS_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#Enabled#}","width":"64","xtype":"checkcolumn","dataIndex":"IS_ENABLED","titleAlign":"center","itemId":"IS_ENABLED_COL"},"events":{"checkchange":"var acc_seg = [];\nvar store = app.acc_ass_grid.store;\nvar flag = 0;\nfor(var i = 0;i < store.count();i++){\n    if(store.getAt(i).data.IS_ENABLED == 1){\n        flag = 1;\n        acc_seg.push(store.getAt(i).data.LD_SEG_ALIAS);\n    }\n    if(flag === 1){\n\t\tapp.ACC_SEG_UNION.setValue(acc_seg);\n    }\n    else{\n        app.ACC_SEG_UNION.setValue('');\n    }\n}"},"children":[],"expanded":true,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"window"}],"expanded":true,"type":"folder"},{"configs":{"layout":"border","itemId":"viewport1"},"children":[{"configs":{"region":"north","border":"false","itemId":"searchs_form"},"events":{"afterrender":"Wb.request({\n\turl : 'm?xwl=xc/gl/ledger/ld-accounts/ld_accountsDB/categorySelect',\n\tsuccess : function(response){\n        var temp = Ext.decode(response.responseText);//从后台获取数据\n\t\tvar total = temp.total;\n\t\t//var name = temp1.ACC_CATEGORY_NAME;\n        var allRadio = Ext.create('Ext.form.field.Radio',{\n            name : 'answerRadio',\n            boxLabel : '全部',\n            inputValue : '',\n\t\t\tid : 'radios'+0,\n            labelAlign : \"right\",\n            labelWidth : 60,\n            width : 100\n        });\n\t\tapp.radiosPanel1.add(allRadio);\n\t\t//app.radioPanel1.add(allRadio);\n        for(var i = 1;i <= total; i++){\n\t\t\tvar name = temp.rows[i-1].ACC_CATEGORY_NAME;\n\t\t\tvar code = temp.rows[i-1].ACC_CATEGORY_CODE;\n            var anserRadio = Ext.create('Ext.form.field.Radio',{\n                name : 'answerRadio',\n                boxLabel : name,\n                inputValue : code,\n                id : 'radios'+i,\n                labelAlign: \"right\",\n                labelWidth : 60,\n                width : 100\n            });\n            app.radiosPanel1.add(anserRadio);\n            //app.radioPanel1.add(anserRadio);\n        }\n\t\t/*for(var j = 0;j < total;j++){\n            Ext.getCmp('radios' + j).on('focus',function(){\n                cate_code = Ext.getCmp('radios' + j).inputValue;\n                alert(cate_code);\n                app.searchsButton.fireEvent('click');\n            });\n        }*/\n        Ext.getCmp('radios' + 0).on('focus',function(){\n            cates_code = Ext.getCmp('radios' + 0).inputValue;\n            Ext.getCmp('radios' + 0).setValue(true);\n            app.searchsButton.fireEvent('click');\n        });\n        Ext.getCmp('radios' + 1).on('focus',function(){\n            cates_code = Ext.getCmp('radios' + 1).inputValue;\n            Ext.getCmp('radios' + 1).setValue(true);\n            app.searchsButton.fireEvent('click');\n        });\n        Ext.getCmp('radios' + 2).on('focus',function(){\n            cates_code = Ext.getCmp('radios' + 2).inputValue;\n            Ext.getCmp('radios' + 2).setValue(true);\n            app.searchsButton.fireEvent('click');\n        });\n        Ext.getCmp('radios' + 3).on('focus',function(){\n            cates_code = Ext.getCmp('radios' + 3).inputValue;\n            Ext.getCmp('radios' + 3).setValue(true);\n            app.searchsButton.fireEvent('click');\n        });\n        Ext.getCmp('radios' + 4).on('focus',function(){\n            cates_code = Ext.getCmp('radios' + 4).inputValue;\n            Ext.getCmp('radios' + 4).setValue(true);\n            app.searchsButton.fireEvent('click');\n        });\n\t\tExt.getCmp('radios' + 5).on('focus',function(){\n            cates_code = Ext.getCmp('radios' + 5).inputValue;\n            Ext.getCmp('radios' + 5).setValue(true);\n            app.searchsButton.fireEvent('click');\n        });\n        Ext.getCmp('radios' + 6).on('focus',function(){\n            cates_code = Ext.getCmp('radios' + 6).inputValue;\n            Ext.getCmp('radios' + 6).setValue(true);\n            app.searchsButton.fireEvent('click');\n        });\n        Ext.getCmp('radios' + 7).on('focus',function(){\n            cates_code = Ext.getCmp('radios' + 7).inputValue;\n            Ext.getCmp('radios' + 7).setValue(true);\n            app.searchsButton.fireEvent('click');\n        });\n    }\n});"},"children":[{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","layout":"column","margin":"10 0 0 0","itemId":"rows1","border":"false"},"children":[{"configs":{"tagConfigs":"columnWidth : 0.25","labelWidth":"80","store":"app.dim_store","displayField":"LEDGER_NAME","valueField":"LEDGER_ID","labelAlign":"right","itemId":"ledgers_com","fieldLabel":"{#Ledger#}","editable":"false"},"events":{"change":"app.item_store.load({params : {LEDGER_ID : app.ledgers_com.getValue(),item_name : ''}});","select":"app.searchsButton.fireEvent('click');","specialkey":"if(Ext.EventObject.getKey()==13){\n\tapp.searchsButton.fireEvent('click');\n}"},"children":[{"configs":{"autoSync":"true","autoLoad":"true","itemId":"store","url":"m?xwl=xc/com-qry/gl-ledgers/select-sec-fd-ledgers"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"},{"configs":{"tagConfigs":"columnWidth : 0.20","labelWidth":"110","labelAlign":"right","itemId":"acc_groups_com","fieldLabel":"{#Account Group#}","editable":"false"},"events":{"change":"app.searchsButton.fireEvent('click');"},"children":[{"configs":{"tagConfigs":"minWidth : 300","height":"300","store":"app.group_store","barExportButtons":"false","barRefreshButton":"false","itemId":"pickComp","barInfoLabel":"false"},"events":{"itemclick":"var picker = this.ownerCmp;\npicker.setValue(record.data.ACC_GROUP_NAME);\n// app.acc_group_com.setValue(record.get('ACC_GROUP_ID')); //把记录ACC_GROUP_ID存放到隐藏域，可方便被提交到后台\npicker.collapse();\napp.groups_text.reset();"},"children":[{"configs":{"itemId":"tbar"},"children":[{"configs":{"labelWidth":"70","emptyText":"根据编码/名称查询","labelAlign":"right","itemId":"groups_text"},"events":{"change":"if(text.getValue() === ''){\n    app.groupsSearchButton.fireEvent('click');\n}","specialkey":"if(Ext.EventObject.getKey()==13){\n\tapp.groupsSearchButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"width":"25","itemId":"groupsSearchButton","iconCls":"seek_icon","tooltip":"查询"},"events":{"click":"app.group_store.load({params : {group_name : app.groups_text.getValue()}});"},"children":[],"expanded":false,"type":"button"},{"configs":{"width":"25","itemId":"groupsResetButton","iconCls":"cancel_icon","tooltip":"重置"},"events":{"click":"app.acc_groups_com.reset();\napp.acc_groups_com.getPicker().hide();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"序号","hidden":"true","align":"center","xtype":"rownumberer","width":"50","titleAlign":"center","itemId":"ORDERBY"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"ID","hidden":"true","dataIndex":"ACC_GROUP_ID","itemId":"ACC_GROUP_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"编码","width":"80","dataIndex":"ACC_GROUP_CODE","titleAlign":"center","itemId":"ACC_GROUP_CODE_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"名称","width":"130","dataIndex":"ACC_GROUP_NAME","titleAlign":"center","itemId":"ACC_GROUP_NAME_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":false,"type":"grid"}],"expanded":false,"type":"picker"},{"configs":{"tagConfigs":"columnWidth : 0.25","labelWidth":"90","labelAlign":"right","itemId":"searchsText","fieldLabel":"{#searchsText#}"},"events":{"change":"if(text.getValue() === ''){\n    app.searchsButton.fireEvent('click');\n}","specialkey":"if(Ext.EventObject.getKey()==13){\n\tapp.searchsButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"text"},{"configs":{"tagConfigs":"columnWidth : 0.08","text":"{#searchsButton#}","height":"22","margin":"0 0 0 20","itemId":"searchsButton","iconCls":"seek_icon"},"events":{"click":"var group = app.acc_groups_com.getValue();\n//改变显示值\nfor(var i=0;i < group_array.length;i++) {\n    if(group === group_array[i].ACC_GROUP_NAME)\n        group = group_array[i].ACC_GROUP_ID;\n}\napp.ld_accounts_grid.store.load({params : {ACC_INFO : Ext.String.escape(app.searchsText.getValue()),\n                                       LEDGER_ID : app.ledgers_com.getValue(),\n                                       ACC_GROUP_ID : group,\n                                       ACC_CATEGORY_INFO : cates_code}});"},"children":[],"expanded":false,"type":"button"},{"configs":{"tagConfigs":"columnWidth : 0.08","text":"{#resetsButton#}","height":"22","margin":"0 0 0 20","itemId":"resetsButton","iconCls":"refresh_icon"},"events":{"click":"app.searchs_form.getForm().reset();\ncate_code = '';\napp.searchsButton.fireEvent('click');"},"children":[],"expanded":false,"type":"button"}],"expanded":false,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","hidden":"true","layout":"column","margin":"10 0 10 15","itemId":"rows2","border":"false"},"children":[{"configs":{"tagConfigs":"baseCls : 'my-panel-no-border',\ncolumnWidth : 1","frame":"true","layout":"column","itemId":"radiosPanel1"},"children":[],"expanded":false,"type":"panel"}],"expanded":false,"type":"panel"},{"configs":{"tagConfigs":"baseCls : 'my-panel-no-border'","layout":"column","margin":"10 0 10 10","itemId":"radiosPanel"},"children":[{"configs":{"labelWidth":"80","name":"categoryInfo","width":"80","margin":"0 0 0 10","labelAlign":"right","itemId":"allRadio","boxLabel":"{#allRadio#}","handler":"if(value){\n    cates_code = '';\n    app.searchsButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"radio"},{"configs":{"labelWidth":"80","name":"categoryInfo","width":"80","margin":"0 0 0 10","labelAlign":"right","itemId":"zcRadio","boxLabel":"{#zcRadio#}","handler":"if(value){\n    cates_code = '资产';\n    app.searchsButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"radio"},{"configs":{"labelWidth":"80","name":"categoryInfo","width":"80","margin":"0 0 0 10","labelAlign":"right","itemId":"fzRadio","boxLabel":"{#fzRadio#}","handler":"if(value){\n    cates_code = '负债';\n    app.searchsButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"radio"},{"configs":{"labelWidth":"80","name":"categoryInfo","width":"80","margin":"0 0 0 10","labelAlign":"right","itemId":"gtRadio","boxLabel":"{#gtRadio#}","handler":"if(value){\n    cates_code = '共同';\n    app.searchsButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"radio"},{"configs":{"labelWidth":"80","name":"categoryInfo","width":"130","margin":"0 0 0 10","labelAlign":"right","itemId":"qyRadio","boxLabel":"{#qyRadio#}","handler":"if(value){\n    cates_code = '所有者权益';\n    app.searchsButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"radio"},{"configs":{"labelWidth":"80","name":"categoryInfo","width":"80","margin":"0 0 0 10","labelAlign":"right","itemId":"cbRadio","boxLabel":"{#cbRadio#}","handler":"if(value){\n    cates_code = '成本';\n    app.searchsButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"radio"},{"configs":{"labelWidth":"80","name":"categoryInfo","width":"80","margin":"0 0 0 10","labelAlign":"right","itemId":"ryRadio","boxLabel":"{#ryRadio#}","handler":"if(value){\n    cates_code = '损益';\n    app.searchsButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"radio"},{"configs":{"labelWidth":"80","name":"categoryInfo","width":"180","margin":"0 0 0 10","labelAlign":"right","itemId":"bwRadio","boxLabel":"{#bwRadio#}","handler":"if(value){\n    cates_code = '表外';\n    app.searchsButton.fireEvent('click');\n}"},"children":[],"expanded":false,"type":"radio"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","selType":"checkboxmodel","rowNumber":"false","itemId":"ld_accounts_grid","editable":"true"},"events":{"itemdblclick":"var rec = app.ld_accounts_grid.getSelection();//选择记录\nvar win = new Ext.window.Window(app._editLookWindow); //app._strategy_window指向配置对象而非实例\nwin.show();//显示窗口\nif(rec[0].data.IS_AMOUNT == 1){\n\tapp.DIM_ID.setReadOnly(false);\n    app.DIM_ID.allowBlank = false;\n}\nif(rec[0].data.IS_FOREGIN_CNY == 1){\n\tapp.DEFAULT_CURRENCY.setReadOnly(false);\n    app.DEFAULT_CURRENCY.allowBlank = false;\n}\napp.acc_ass_grid.store.load({params : {LD_ACC_ID : rec[0].data.LD_ACC_ID,selectRows : 1,LEDGER_ID : app.ledgers_com.getValue()}});\nwin.setIconCls('seek_icon');//图标\nWb.setTitle(win,'查看--修改\"'+rec[0].data.ACC_NAME+'\"');//标题\nWb.setValue(win,rec[0].data);//把记录数据应用到窗口\n// if(rec[0].data.DEFAULT_CURRENCY == 'CNY'){\n//     app.DEFAULT_CURRENCY.setValue('人民币');\n// }\nwin.mon(win,'ok',function(){\n    if(!Wb.verifyGrid(win))//验证数据是否合法\n        return;\n    if(rec[0].data.ACC_START_DATE > app.START_DATE.getValue()){\n        Wb.toast('开始日期不能小于全局的开始日期，请重新输入！');\n        return;\n    }\n    if(app.START_DATE.getValue().getTime() > app.END_DATE.getValue().getTime()){\n        Wb.toast('结束日期不能小于开始日期，请重新输入！');\n        return;\n    }\n    if(rec[0].data.ACC_END_DATE < app.END_DATE.getValue()){\n        Wb.toast('结束日期不能大于全局的结束日期，请重新输入！');\n        return;\n    }\n    if(app.DEFAULT_CURRENCY.getValue() === null){\n\t\tapp.DEFAULT_CURRENCY.setValue('CNY');\n    }\n    var currency = '';\n    if(app.DEFAULT_CURRENCY.getValue() === '人民币'){\n\t\tcurrency = 'CNY';\n    }\n    if(app.DEFAULT_CURRENCY.getValue() !== '人民币'){\n\t\tcurrency = app.DEFAULT_CURRENCY.getValue();\n    }\n    var acc_seg = [];\n    var modify = app.acc_ass_grid.store.getModifiedRecords();\n    var bg_item_id = app.BG_ITEM_ID.getValue(); \n    for(var i=0;i < items_array.length;i++) {\n        if(bg_item_id === items_array[i].BG_ITEM_NAME){\n            bg_item_id = items_array[i].BG_ITEM_ID;\n        }\n    }\n    // 被修改的行\n    var modifiedrows = app.acc_ass_grid.getStore().getModifiedRecords();\n    var _UPDATE_ASS = 0 ;\n    if(modifiedrows.length > 0){\n      _UPDATE_ASS = 1 ;\n    }\n    // 提交修改请求\n\tWb.request({\n\t\turl: 'm?xwl=xc/gl/ledger/ld-accounts/ld_accountsDB/ld_accountsAndAccEdit',\n        out : app.editLookForm,\n\t\tparams: {\n          'modifyArray':Wb.getData(modify),\n          DEFAULT_CURRENCY : currency,\n          BG_ITEM_ID : bg_item_id,\n          UPDATE_ASS : _UPDATE_ASS,\n          'ledgerId' : app.ledgers_com.getValue()\n        },\n\t\tsuccess: function(resp) {\n\t\t\tapp.searchsButton.fireEvent('click');\n            Wb.toast('数据保存成功！');\n            app.editLookWindow.hide();\n\t\t}\n\t});\n});"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/gl/ledger/ld-accounts/ld_accountsDB/ld_accountsSelect"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"同步01","hidden":"true","itemId":"syncButton01","iconCls":"record_copy_icon"},"events":{"click":"LEDGER_ID = app.ledgers_com.getValue();\nif(LEDGER_ID === null){\n\tWb.error('请选择账簿！');\n\treturn;\n}\nWb.request({\n    url: 'm?xwl=xc/gl/ledger/ld-accounts/ld_accountsDB/ledgersSelectGetHrcy_id',\n    params:{LEDGER_ID:LEDGER_ID},\n    success: function(resp) {\n        ACC_HRCY_ID = Ext.JSON.decode(resp.responseText).rows[0].ACC_HRCY_ID;\n        var win = new Ext.window.Window(app._syncWindow); //app._strategy_window指向配置对象而非实例\n        win.show();\n        win.setIconCls('record_add_icon');//图标\n        Wb.setTitle(win,'同步');//标题\n        app.accounts_grid.store.load({params : {ACC_HRCY_ID:ACC_HRCY_ID,ACC_GROUP_ID:'%%',LEDGER_ID:LEDGER_ID}});\n        win.mon(win,'ok',function() {\n            var r = app.accounts_grid.getSelection();\n            if (r.length === 0) {//大于一条或没选择会警告\n                Wb.warn('请选择需要同步的记录。');\n                return;\n            }\n            for(var t = 0; t < r.length; t++){\n                var ACC_ID = r[t].data.ACC_ID;\n                var START_DATE = r[t].data.START_DATE;\n                var END_DATE = r[t].data.END_DATE;\n                Wb.request({\n                    url: 'm?xwl=xc/gl/ledger/ld-accounts/ld_accountsDB/ld_accountsSync',\n                    params:{ACC_ID:ACC_ID,LEDGER_ID:LEDGER_ID,START_DATE:START_DATE,END_DATE:END_DATE,CREATION_DATE:new Date()},\n                    success: function(resp) {\n                        app.searchsButton.fireEvent('click');\n\t\t\t\t\t\tapp.searchButton.fireEvent('click');\n                        //app.syncWindow.hide();//根据closeAction属性，默认为销毁\n                    }\n                });\n            }\n        });\n    }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#syncButton#}","itemId":"syncButton","iconCls":"record_copy_icon"},"events":{"click":"LEDGER_ID = app.ledgers_com.getValue();\nif(LEDGER_ID === null){\n\tWb.toast('请选择账簿！');\n\treturn;\n}\nWb.request({\n    url: 'm?xwl=xc/gl/ledger/ld-accounts/ld_accountsDB/ledgersSelectGetHrcy_id',\n    params:{LEDGER_ID:LEDGER_ID},\n    success: function(resp) {\n        ACC_HRCY_ID = Ext.JSON.decode(resp.responseText).rows[0].ACC_HRCY_ID;\n        var win = new Ext.window.Window(app._syncWindow); //app._strategy_window指向配置对象而非实例\n        win.show();\n        win.setIconCls('record_add_icon');//图标\n        Wb.setTitle(win,'同步');//标题\n        app.accounts_grid.store.load({params : {ACC_HRCY_ID:ACC_HRCY_ID,ACC_GROUP_ID:'%%',group_select:'0',LEDGER_ID:LEDGER_ID}});\n        win.mon(win,'ok',function() {\n            var r = app.accounts_grid.getSelection();\n            if (r.length === 0) {//没选择会警告\n                Wb.toast('请选择需要同步的记录。');\n                return;\n            }\n//             Ext.Ajax.request({\n//                 url : '{#contextPath#}' +'/accountsSyncAction.do?method=accountsSync',\n//                 method : 'POST',\n//                 async : false,//异步传参\n//                 params : {\n//                     LEDGER_ID:LEDGER_ID,LD_ACC_ID:'654321','infoArray' : Wb.getData(r)\n//                 },\n//                 success : function(){\n//                   Wb.info('成功');\n//                 }\n//             });\n            Wb.request({\n                url : 'm?xwl=xc/gl/ledger/ld-accounts/ld_accountsDB/ld_accountsSync', \n                params : {LEDGER_ID:LEDGER_ID,'infoArray' : Wb.encode(Wb.getData(r))},\n                success: function(resp) {\n                    app.searchsButton.fireEvent('click');\n                    app.searchButton.fireEvent('click');\n                    Wb.toast('同步成功：\u201c'+r.length+'\u201d条科目');\n                },\n                failure: function(response){\n                    app.searchsButton.fireEvent('click');\n                    app.searchButton.fireEvent('click');\n                }\n            });\n        });\n    }\n});"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#deleteButton#}","itemId":"deleteButton","iconCls":"file_delete_icon"},"events":{"click":"var recs = app.ld_accounts_grid.getSelection();\nif (!recs.length) {\n    Wb.toast('请选择需要删除的记录。');\n    return;\n}\nelse {\n    Wb.confirm('确定要删除选择的 ' + recs.length + ' 条记录吗？',function() {\n        Wb.request({//删除科目辅助核算\n            url: 'm?xwl=xc/gl/ledger/ld-accounts/ld_accountsDB/accountsLowerCodeSelect', //使用basic-delete.xwl用于演示目的，建议使用delete.xwl\n            params: {LEDGER_ID:recs[0].data.LEDGER_ID,ACC_CODE:recs[0].data.ACC_CODE,ACC_ID:recs[0].data.ACC_ID,ACC_HRCY_ID:recs[0].data.ACC_HRCY_ID},\n            //params : {'selectInfo':Wb.encode(Wb.getData(recs))},\n            success: function(resp) {\n                var temp = Ext.decode(resp.responseText);\n                if(temp.total > 0){\n\t\t\t\t\tWb.confirm('有下级科目，是否同步删除？',function() {\n                        deleteld_acc();\n                    });\n                }\n                else if(temp.total === 0){\n                    deleteld_acc();\n                }\n            }\n        });\n    });\n}\nfunction deleteld_acc(){\n    Wb.request({//删除科目辅助核算\n        url: 'm?xwl=xc/gl/ledger/ld-accounts/ld_accountsDB/ld_accountsDelete', //使用basic-delete.xwl用于演示目的，建议使用delete.xwl\n        params: {'infoArray' : Wb.encode(Wb.getData(recs))},\n        success: function() {\n            Wb.toast('账簿科目删除成功');\n            Wb.remove(app.ld_accounts_grid,recs);\n            app.searchsButton.fireEvent('click');\n        }\n    });\n}"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"{#batchEditButton#}","itemId":"batchEditButton","iconCls":"check_group_icon"},"events":{"click":"recs = app.ld_accounts_grid.getSelection();\nLEDGER_ID = app.ledgers_com.getValue();\nif(LEDGER_ID === null){\n\tWb.toast('请选择账簿！');\n\treturn;\n}\nif (recs <= 1) {//大于一条或没选择会警告\n    Wb.toast('请选择需要修改的记录。');\n    return;\n}\nvar win = new Ext.window.Window(app._editWindow); //app._strategy_window指向配置对象而非实例\nwin.show();//显示窗口\nwin.setIconCls('check_group_icon');//图标\nWb.setTitle(win,'批量修改');//标题\nif(recs.length == 1){\n    selectRows = 1;\n    app.ass_grid.store.load({params : {LD_ACC_ID : recs[0].data.LD_ACC_ID,selectRows : selectRows,LEDGER_ID : LEDGER_ID}});\n}\nelse if(recs.length > 1){\n    selectRows = 0;\n    app.ass_grid.store.load({params : {selectRows : selectRows,LEDGER_ID : LEDGER_ID}});\n}\nwin.mon(win,'ok',function() {\n\tvar ACC_CODE = '';//选中数据的科目编码\n    var ACC_END_DATE;//全局表中的结束时间时间\n    var ACC_START_DATE;//全局表中的开始时间时间\n    var LD_START_DATE;//账簿科目表中的开始时间\n    var LD_END_DATE;//账簿科目表中的结束时间\n    var START_DATE;\n    var START_DATE_CHECKS = 0;\n    var END_DATE;\n    var END_DATE_CHECKS = 0;\n    var IS_UPDATE_FOREGIN = 0;//是否修改币种\n    var IS_UPDATE_DIM = 0;//是否修改数量核算\n    var IS_UPDATE_ITEMS = 0;//是否修改预算项\n    var IS_AMOUNT = 0;//数量核算\n    var DIM_NAME = '';//计量单位\n    var BG_ITEM_ID = '';//预算项\n    var IS_FOREGIN_CNY = 0;//外币核算\n\tvar CURRENCY_NAME = 'CNY';//币种\n\tvar UPDATE_ASS = 0;//辅助核算段\n    var ACC_SEG_UNION;\n    var ACC_CODE_UNION = ''; //科目辅助段拼接编码\n    if(app.START_DATE_CHECKS.getValue() === true && app.END_DATE_CHECKS.getValue() === false){\n        START_DATE_CHECKS = 1;//选中值设为1\n        START_DATE = app.START_DATES.getValue();//结束时间\n        for(var q = 0; q < recs.length; q++){\n            LD_END_DATE = recs[q].data.END_DATE;\n            ACC_START_DATE = recs[q].data.ACC_START_DATE;\n            if(START_DATE > LD_END_DATE){\n                Wb.toast('结束日期不能小于开始日期，请重新输入！');\n                return;\n            }\n            if(ACC_START_DATE > START_DATE){\n                Wb.toast('开始日期不能小于全局的开始日期，请重新输入！');\n                return;\n            }\n        }\n    }\n    if(app.END_DATE_CHECKS.getValue() === true && app.START_DATE_CHECKS.getValue() === false){//数量核算\n        END_DATE_CHECKS = 1;//选中值设为1\n        END_DATE = app.END_DATES.getValue();//结束时间\n        for(var t = 0; t < recs.length; t++){\n            LD_START_DATE = recs[t].data.START_DATE;\n            ACC_END_DATE = recs[t].data.ACC_END_DATE;\n            if(END_DATE < LD_START_DATE){\n                Wb.toast('结束日期不能小于开始日期，请重新输入！');\n                return;\n            }\n            if(ACC_END_DATE < END_DATE){\n                Wb.toast('结束日期不能大于全局的结束日期，请重新输入！');\n                return;\n            }\n        }\n\t}\n    if(app.START_DATE_CHECKS.getValue() === true && app.END_DATE_CHECKS.getValue() === true){\n        END_DATE_CHECKS = 1;//选中值设为1\n        START_DATE_CHECKS = 1;//选中值设为1\n        START_DATE = app.START_DATES.getValue();//结束时间\n        END_DATE = app.END_DATES.getValue();//结束时间\n        for(var x = 0; x < recs.length; x++){\n            ACC_START_DATE = recs[x].data.ACC_START_DATE;\n            ACC_END_DATE = recs[x].data.ACC_END_DATE;\n            if(ACC_START_DATE > START_DATE){\n                Wb.toast('开始日期不能小于全局的开始日期，请重新输入！');\n                return;\n            }\n            if(ACC_END_DATE < END_DATE){\n                Wb.toast('结束日期不能大于全局的结束日期，请重新输入！');\n                return;\n            }\n        }\n        if(END_DATE < START_DATE){\n            Wb.toast('结束日期不能小于开始日期，请重新输入！');\n            return;\n        }\n    }\n    if(app.IS_UPDATE_DIMS.getValue() === true){\n        IS_UPDATE_DIM = 1;//选中值设为1\n        if(app.IS_AMOUNTS.getValue() === 1){//数量核算\n            IS_AMOUNT = 1;//选中值设为1\n            DIM_NAME = app.DIM_NAMES.getValue();//选中的值\n        }\n      \n    }\n    if(app.IS_UPDATE_FOREGINS.getValue() === true){\n        IS_UPDATE_FOREGIN = 1;//选中值设为1\n        if(app.IS_FOREGIN_CNYS.getValue() === 1){//币种核算\n            IS_FOREGIN_CNY = 1;//选中值设为1\n            CURRENCY_NAME = app.CURRENCY_NAMES.getValue();//选中的值\n        }\n    }\n    if(app.IS_BG_ITEM_ID.getValue() === true){//预算项\n        IS_UPDATE_ITEMS = 1;\n        BG_ITEM_ID = app.BG_ITEM_IDS.getValue();\n        for(var i=0;i < items_array.length;i++) {\n            if(BG_ITEM_ID === items_array[i].BG_ITEM_NAME){\n                BG_ITEM_ID = items_array[i].BG_ITEM_ID;\n            }\n        }\n    }\n    var modify = app.ass_grid.store.getModifiedRecords();//科目辅助核算段\n  \n     var accStr = \"\" ;\n    if(app.UPDATE_ASS.getValue() === true){\n        // 记录科目ID信息\n        for(var k=0; k<recs.length; k++){\n          var accId = recs[k].data.ACC_ID ;\n          if(k == recs.length-1){\n            accStr += \"'\" + accId + \"'\" ;\n          }else{\n            accStr += \"'\" + accId + \"',\" ;\n          }\n        } \n       \n        UPDATE_ASS = 1;\n        if(selectRows === 1){\n            if(modify.length === 0){\n\t\t\t\tACC_SEG_UNION = app.ACC_SEG_UNION.setValue(recs[0].data.ACC_SEG_UNION);\n            }\n            else{\n                ACC_SEG_UNION = app.ACC_SEG_UNION.getValue();\n            }\n        }\n        if(selectRows === 0){\n            if(modify.length === 0){\n\t\t\t\tACC_SEG_UNION = app.ACC_SEG_UNION.setValue('');\n            }\n            else{\n                ACC_SEG_UNION = app.ACC_SEG_UNION.getValue();\n            }\n        }\n            //拼接编码\n      ACC_CODE_UNION_MAP.each(function(key, value, length){\n        ACC_CODE_UNION +=key+',';\n      });\n      if(!Ext.isEmpty(ACC_CODE_UNION)){\n         ACC_CODE_UNION = ACC_CODE_UNION.substring(0,ACC_CODE_UNION.length-1);\n      }\n    }\n    Wb.request({\n        url: 'm?xwl=xc/gl/ledger/ld-accounts/ld_accountsDB/ld_accountsEdit',\n        params:{\n            START_DATE_CHECKS:START_DATE_CHECKS,\n            STARTDATE:START_DATE,\n            END_DATE_CHECK:END_DATE_CHECKS,\n            ENDDATE:END_DATE,\n            CURRENCY:CURRENCY_NAME,\n            DIM:DIM_NAME,\n            AMOUNT:IS_AMOUNT,\n            IS_UPDATE_DIM:IS_UPDATE_DIM,\n            BG_ITEM:BG_ITEM_ID,\n            IS_UPDATE_ITEMS:IS_UPDATE_ITEMS,\n            FOREGIN_CNY:IS_FOREGIN_CNY,\n            IS_UPDATE_FOREGIN:IS_UPDATE_FOREGIN,\n            UPDATE_ASS:UPDATE_ASS,\n            ACC_SEG_UNIONS:app.ACC_SEG_UNION.getValue(),\n            ACC_CODE_UNION:ACC_CODE_UNION,\n            selectRows:selectRows,\n            'infoArray':Wb.encode(Wb.getData(recs)),\n            'modifyArray':Wb.encode(Wb.getData(modify)),\n            'ledgerId':app.ledgers_com.getValue(),\n            'accStr' : accStr\n        },\n        success : function(){\n            app.searchsButton.fireEvent('click');\n            Wb.toast('数据保存成功！');\n            app.editWindow.hide();\n        }\n    });\n});"},"children":[],"expanded":false,"type":"button"}],"expanded":false,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#rownum#}","align":"center","xtype":"rownumberer","width":"50","titleAlign":"center","itemId":"ORDERBY"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"账簿科目ID","hidden":"true","dataIndex":"LD_ACC_ID","itemId":"LD_ACC_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"科目ID","hidden":"true","dataIndex":"ACC_ID","itemId":"ACC_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"体系ID","hidden":"true","dataIndex":"ACC_HRCY_ID","itemId":"ACC_HRCY_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"账簿ID","hidden":"true","dataIndex":"LEDGER_ID","itemId":"LEDGER_ID_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#acc_code#}","width":"150","dataIndex":"ACC_CODE","titleAlign":"center","itemId":"ACC_CODE_COL","draggable":"true"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#acc_name#}","width":"250","dataIndex":"ACC_NAME","titleAlign":"center","itemId":"ACC_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#acc_category#}","width":"100","dataIndex":"ACC_CATEGORY_NAME","titleAlign":"center","itemId":"ACC_CATEGORY_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#acc_group#}","width":"100","dataIndex":"ACC_GROUP_NAME","titleAlign":"center","itemId":"ACC_GROUP_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#bal_direction#}","width":"80","dataIndex":"BALANCE_DIRECTION","titleAlign":"center","itemId":"BALANCE_DIRECTION_COL","renderer":"if(value == 1){\n  return '借';\n}\nelse if(value == 0){\n  return '平';\n}\nelse if(value == -1){\n  return'贷';\n}"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"科目开始日期","hidden":"true","width":"100","xtype":"datecolumn","dataIndex":"ACC_START_DATE","titleAlign":"center","itemId":"ACC_START_DATE_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"科目结束日期","hidden":"true","width":"100","xtype":"datecolumn","dataIndex":"ACC_END_DATE","titleAlign":"center","itemId":"ACC_END_DATE_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#foreign_cny#}","width":"80","dataIndex":"IS_FOREGIN_CNY","titleAlign":"center","itemId":"IS_FOREGIN_CNY_COL","renderer":"if(value == 1){\n\treturn '是';\n}\nelse if(value === 0){\n\treturn '否';\n}"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#currency#}","width":"80","dataIndex":"CURRENCY_NAME","titleAlign":"center","itemId":"CURRENCY_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#Amount#}","width":"80","dataIndex":"IS_AMOUNT","titleAlign":"center","itemId":"IS_AMOUNT_COL","renderer":"if(value === 1){\n\treturn '是';\n}\nelse if(value === 0){\n\treturn '否';\n}"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#Amt_Dim#}","width":"80","dataIndex":"DIM_NAME","titleAlign":"center","itemId":"DIM_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#Budget_Item#}","width":"120","dataIndex":"BG_ITEM_NAME","titleAlign":"center","itemId":"BG_ITEM_NAME_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"银行科目","hidden":"true","width":"80","dataIndex":"IS_BANK_ACC","titleAlign":"center","itemId":"IS_BANK_ACC_COL","renderer":"if(value == 'Y'){\n\treturn '是';\n}\nelse if(value == 'N'){\n\treturn '否';\n}"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"现金科目","hidden":"true","width":"80","dataIndex":"IS_CASH_ACC","titleAlign":"center","itemId":"IS_CASH_ACC_COL","renderer":"if(value == 'Y'){\n\treturn '是';\n}\nelse if(value == 'N'){\n\treturn '否';\n}"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"现金流量","hidden":"true","width":"80","dataIndex":"IS_CASH_ITEM","titleAlign":"center","itemId":"IS_CASH_ITEM_COL","renderer":"if(value == 'Y'){\n\treturn '是';\n}\nelse if(value == 'N'){\n\treturn '否';\n}"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#ACC_SEG_UNION#}","width":"180","dataIndex":"ACC_SEG_UNION","titleAlign":"center","itemId":"ACC_SEG_UNION_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#START_DATE#}","width":"100","xtype":"datecolumn","dataIndex":"START_DATE","titleAlign":"center","itemId":"START_DATE_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#END_DATE#}","width":"100","xtype":"datecolumn","dataIndex":"END_DATE","titleAlign":"center","itemId":"END_DATE_COL","renderer":"if(Ext.util.Format.date(value, 'Y-m-d') == '9999-12-31'){\n  return null;\n}else{\n  return Ext.util.Format.date(value, 'Y-m-d');\n}"},"children":[],"expanded":true,"type":"column"}],"expanded":true,"type":"array"}],"expanded":false,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}