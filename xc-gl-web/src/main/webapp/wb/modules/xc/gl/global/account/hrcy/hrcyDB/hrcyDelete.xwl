{"inframe":false,"title":"删除体系","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"var recsDelete = Wb.decode(request.getParameter('infoArray'));\nvar ACC_HRCY_ID = request.getParameter(\"ACC_HRCY_ID\");\nWb.each(recsDelete,function(rec){\n    app.run(\"SELECT 1 FROM xc_gl_acc_hrcy WHERE IS_PREPARED = 'Y' AND ACC_HRCY_ID = '\"+rec.ACC_HRCY_ID+\"'\",{\n        errorText:'预制的科目体系不能删除！'\n    });\n    app.run(\"SELECT 1 FROM xc_gl_ledgers WHERE ACC_HRCY_ID = '\"+rec.ACC_HRCY_ID+\"'\",{\n        errorText:'科目体系\"'+rec.ACC_HRCY_NAME+'\"已经被账簿使用，不能删除！'\n    });\n    app.run(\"DELETE FROM xc_gl_accounts WHERE ACC_HRCY_ID = '\"+rec.ACC_HRCY_ID+\"'\",{\n    });\n});\nvar newArr = Wb.encode(recsDelete);\nrequest.setAttribute(\"batArray\",newArr);\ncom.xzsoft.xc.gl.util.XCGLWebBuilderUtil.clearHrcyCachedData(ACC_HRCY_ID);","itemId":"module"},"children":[{"configs":{"sql":"DELETE\nFROM\n\txc_gl_acc_hrcy\nWHERE\n\tACC_HRCY_ID = {?ACC_HRCY_ID?}","arrayName":"batArray","itemId":"deleteHrcy"},"children":[],"expanded":false,"type":"query"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}