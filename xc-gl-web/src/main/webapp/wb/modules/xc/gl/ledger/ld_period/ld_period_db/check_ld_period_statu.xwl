{"inframe":false,"title":"校验账薄会计期的期间状态","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"//验证状态是否为永久关闭状态\napp.run('SELECT 1 FROM xc_gl_ld_period WHERE LEDGER_ID = {?ledger_id?} AND PERIOD_CODE = {?period_code?} AND LD_PERIOD_STATUS = 3',{\n\terrorText:'已经为永久关闭状态，无法切换!'\n});\n\n//验证凭证处是否有为空的记账人（针对关闭状态）\napp.run(\"SELECT 1 FROM xc_gl_v_heads WHERE LEDGER_ID = {?ledger_id?} AND PERIOD_CODE = {?period_code?} AND (BOOKKEEPER is null OR  BOOKKEEPER = '') \",{\n    errorText:'本期存在未记账凭证，不能关闭!'\n});","itemId":"module"},"children":[{"configs":{"sql":"UPDATE XC_GL_LD_PERIOD \n   SET LD_PERIOD_STATUS = {?statu?},\n       LAST_UPDATE_DATE = {?timestamp.sys.date?},\n       LAST_UPDATED_BY  = {?XIP.userId?}\nWHERE LEDGER_ID = {?ledger_id?} \n  AND PERIOD_CODE = {?period_code?}\n \n","itemId":"query1"},"children":[],"expanded":false,"type":"query"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":"edit_icon"}