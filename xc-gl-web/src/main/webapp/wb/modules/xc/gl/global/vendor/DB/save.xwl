{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"var recs = Wb.decode(request.getParameter('create'));\nWb.each(recs,function(rec){\n  rec.VENDOR_ID = java.util.UUID.randomUUID();\n  rec.CREATION_DATE = new Date();\n  rec.CREATED_BY = '{#XIP.userId#}';\n  rec.LAST_UPDATE_DATE = new Date();\n  rec.LAST_UPDATED_BY = '{#XIP.userId#}';\n  //检查是否存在重复的vendor_code\n  app.run(\"select 1 from xc_ap_vendors where VENDOR_CODE='\"+rec.VENDOR_CODE+\"'\", {\n    errorText: '\"' + rec.VENDOR_CODE + '\" 已经存在。'\n  });\n  //检查是否存在重复的vendor_name\n  app.run(\"select 1 from xc_ap_vendors where VENDOR_NAME='\"+rec.VENDOR_NAME+\"'\", {\n    errorText: '\"' + rec.VENDOR_NAME + '\" 已经存在。'\n  });\n});\n\nrequest.setAttribute('create',Wb.encode(recs));\n\nvar recs1 = Wb.decode(request.getParameter('update'));\nWb.each(recs1,function(rec){\n  rec.LAST_UPDATE_DATE = new Date();\n  rec.LAST_UPDATED_BY = '{#XIP.userId#}';\n  //检查是否存在重复的vendor_code\n  app.run(\"select 1 from xc_ap_vendors where VENDOR_CODE='\"+rec.VENDOR_CODE+\"' and VENDOR_ID<> '\"+rec.VENDOR_ID+\"'\", {\n    errorText: '\"' + rec.VENDOR_CODE + '\" 已经存在。'\n  });\n  //检查是否存在重复的vendor_name\n  app.run(\"select 1 from xc_ap_vendors where VENDOR_NAME='\"+rec.VENDOR_NAME+\"' and VENDOR_ID<> '\"+rec.VENDOR_ID+\"'\", {\n    errorText: '\"' + rec.VENDOR_NAME + '\" 已经存在。'\n  });\n});\n\nrequest.setAttribute('update',Wb.encode(recs1));\n\napp.update({\n  tableName: 'xc_ap_vendors'\n});\napp.send();\n\n\n\n\n","itemId":"module"},"children":[],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}