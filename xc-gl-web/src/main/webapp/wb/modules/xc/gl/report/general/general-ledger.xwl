{"inframe":false,"title":"总分类账","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"var ctxPath = request.getContextPath() ;\nrequest.setAttribute(\"contextPath\",ctxPath);\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/gl/report/daily-accounts/cash-daily-account/cashDailyAccount\");\nvar sessionVars = request.getSession().getAttribute(com.xzsoft.xip.framework.common.SessionVariable.XZ_SESSION_VARS);\nvar la_system_language = sessionVars.get(com.xzsoft.xip.framework.common.SessionVariable.language);\nrequest.setAttribute('la_system_language',la_system_language);","itemId":"module"},"children":[{"configs":{"width":"1500","layout":"border","border":"false","itemId":"viewport1"},"events":{"afterrender":"app.LEDGER_ID.getStore().load(function(records, operation, success) {\n  if (records.length == 1) {\n    app.LEDGER_ID.setValue(records[0].data.CODE);\n    app.oriCurrencyCode.setValue(records[0].data.CURRENCY_CODE);\n    app.orgName.setValue(records[0].data.ORG_NAME);\n    app.currencyName.setValue(records[0].data.CURRENCY_NAME);\n    app.CURRENCY_CODE.setValue(records[0].data.CURRENCY_CODE);\n    app.orgId.setValue(records[0].data.ORG_ID);\n  }\n});\n//设置默认会计期间\nvar _currentDate = new Date();\nvar _defaultPeriodCode = Ext.Date.format(_currentDate, 'Y-m');\napp.startPeriodCode.setValue(_defaultPeriodCode);\napp.startPeriodCode.setRawValue(_defaultPeriodCode);\napp.endPeriodCode.setValue(_defaultPeriodCode);\napp.endPeriodCode.setRawValue(_defaultPeriodCode);"},"children":[{"configs":{"region":"north","frame":"true","style":"border-width:0px","border":"false","itemId":"queryForm"},"children":[{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n\n}","layout":"column","border":"false","itemId":"tr1"},"children":[{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".20","itemId":"td1"},"children":[{"configs":{"labelWidth":"{#la_labelWidth#}","displayField":"NAME","valueField":"CODE","labelAlign":"right","itemId":"LEDGER_ID","fieldLabel":"{#la_ledgerLabel#}"},"events":{"select":"app.oriCurrencyCode.setValue(records[0].data.CURRENCY_CODE);\napp.orgName.setValue(records[0].data.ORG_NAME);\napp.currencyName.setValue(records[0].data.CURRENCY_NAME);\napp.CURRENCY_CODE.setValue(records[0].data.CURRENCY_CODE);\napp.orgId.setValue(records[0].data.ORG_ID);\napp.startPeriodCode.clearValue();\napp.endPeriodCode.clearValue();\napp.ACC_CODE1.clearValue();\napp.ACC_CODE2.clearValue();\napp.FORMAT.setValue('0');","beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/gl/report/daily-accounts/cash-daily-account/data/getAllLedger"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".20","itemId":"td2"},"children":[{"configs":{"labelWidth":"{#la_labelWidth#}","displayField":"NAME","valueField":"CODE","labelAlign":"right","itemId":"CURRENCY_CODE","fieldLabel":"{#la_currency#}"},"events":{"select":"var selCurrencyCode = records[0].data.CODE;\nif(selCurrencyCode == app.oriCurrencyCode.getValue()){\n  app.FORMAT.setValue('0');\n}","beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[{"configs":{"pageSize":"-1","autoLoad":"true","itemId":"store","url":"m?xwl=xc/gl/report/general/general-db/select-currency"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"fit","columnWidth":".38","itemId":"td3"},"children":[{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"column","itemId":"td3.1"},"children":[{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".54","itemId":"td3.3.1"},"children":[{"configs":{"labelWidth":"{#la_labelWidth#}","displayField":"PERIOD_CODE","width":"300","valueField":"PERIOD_CODE","labelAlign":"right","itemId":"startPeriodCode","fieldLabel":"{#la_startPeriod#}"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/gl/report/general/general-db/select-ledgerPeriod"},"events":{"beforeload":"if(!Ext.isEmpty(app.LEDGER_ID.getValue())){\n  store.getProxy().extraParams.ledgerId = app.LEDGER_ID.getValue();\n}else{\n  return ;\n}"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".04","itemId":"td3.3.2"},"children":[{"configs":{"text":"--","labelAlign":"center","itemId":"rangeFlag"},"children":[],"expanded":false,"type":"label"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".38","itemId":"td3.3.3"},"children":[{"configs":{"displayField":"PERIOD_CODE","width":"220","valueField":"PERIOD_CODE","labelAlign":"right","itemId":"endPeriodCode"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/gl/report/general/general-db/select-ledgerPeriod"},"events":{"beforeload":"if(!Ext.isEmpty(app.LEDGER_ID.getValue())){\n  store.getProxy().extraParams.ledgerId = app.LEDGER_ID.getValue();\n}else{\n  return ;\n}"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n\n}","layout":"column","border":"false","itemId":"tr2"},"children":[{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border',\n  columnWidth:.2\n}","layout":"form","itemId":"td2.1"},"children":[{"configs":{"labelWidth":"{#la_labelWidth#}","displayField":"ACC_GROUP_NAME","valueField":"ACC_GROUP_ID","labelAlign":"right","itemId":"ACC_GROUP","fieldLabel":"{#la_accountGroup#}"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/gl/report/general/general-db/select-group"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border',\n  columnWidth:.2\n}","layout":"form","itemId":"td2.2"},"children":[{"configs":{"labelWidth":"{#la_labelWidth#}","value":"-1","pickList":"[['-1','{#la_all#}'],['1','1'],['2','2'],['3','3'],['4','4'],['5','5'],['6','6']]","labelAlign":"right","itemId":"SUMMARY","fieldLabel":"{#la_summaryLevel#}"},"children":[],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"fit","columnWidth":".38","itemId":"td2.3"},"children":[{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"column","itemId":"td2.3.1"},"children":[{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".54","itemId":"td1"},"children":[{"configs":{"labelWidth":"{#la_labelWidth#}","displayField":"ACC_NAME","width":"300","valueField":"ACC_CODE","labelAlign":"right","itemId":"ACC_CODE1","fieldLabel":"{#la_account#}"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/gl/report/general/general-db/select_acc_code"},"events":{"beforeload":"if(!Ext.isEmpty(app.LEDGER_ID.getValue()||app.ACC_GROUP.getValue())){\n  store.getProxy().extraParams.ledger_id = app.LEDGER_ID.getValue();\n  store.getProxy().extraParams.acc_group_id = app.ACC_GROUP.getValue();\n}else{\n  return ;\n}"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".04","itemId":"td2"},"children":[{"configs":{"text":"--","labelAlign":"center","itemId":"rangeFlag"},"children":[],"expanded":false,"type":"label"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".38","itemId":"td3"},"children":[{"configs":{"displayField":"ACC_NAME","valueField":"ACC_CODE","labelAlign":"right","itemId":"ACC_CODE2"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/gl/report/general/general-db/select_acc_code"},"events":{"beforeload":"if(!Ext.isEmpty(app.LEDGER_ID.getValue())){\n  store.getProxy().extraParams.ledger_id = app.LEDGER_ID.getValue();\n}\nelse{\n  return ;\n}"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n\n}","layout":"column","border":"false","itemId":"tr3"},"children":[{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".20","itemId":"td3.1"},"children":[{"configs":{"labelWidth":"{#la_labelWidth#}","value":"0","pickList":"[['0','{#la_cashWay#}'],['1','{#la_foreign#}'],['2','{#la_amount#}']]","labelAlign":"right","itemId":"FORMAT","fieldLabel":"{#la_ledgerFormat#}"},"events":{"change":"if(app.CURRENCY_CODE.getValue() == app.oriCurrencyCode.getValue()){\n  if(newValue == '1' || newValue == '3'){\n    combo.setValue(oldValue);\n  }\n}","beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".20","itemId":"td3.2"},"children":[{"configs":{"labelWidth":"{#la_labelWidth#}","value":"0","pickList":"[['1','{#la_x#}'],['0','{#la_y#}']]","labelAlign":"right","itemId":"accountCheck","fieldLabel":"{#la_container#}"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"fit","columnWidth":".38","itemId":"td3.3"},"children":[{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"column","itemId":"td2.3.1"},"children":[{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".58","itemId":"td1"},"children":[{"configs":{"labelAlign":"center","itemId":"rangeFlag"},"children":[],"expanded":false,"type":"label"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".21","itemId":"td3"},"children":[{"configs":{"text":"{#la_queryBtn#}","width":"60","itemId":"queryBtn","iconCls":"seek_icon"},"events":{"click":"if(Ext.isEmpty(app.LEDGER_ID.getValue())){\n  Wb.info('{#la_selectLedger#}');\n}else if(Ext.isEmpty(app.startPeriodCode.getValue()) || Ext.isEmpty(app.endPeriodCode.getValue())){\n   Wb.info('{#la_selectPeriod#}');\n}else{\n   var map = new Ext.util.HashMap();\n   map.add('language','{#la_system_language#}');\n   //组合参数\n   var ledgerId = app.LEDGER_ID.getValue();\n   map.add('ledgerId',ledgerId);\n  //会计期间\n   if(Ext.isEmpty(app.startPeriodCode.getValue())){\n      map.add('startPeriodCode','0');\n   }else{\n      map.add('startPeriodCode',app.startPeriodCode.getValue());\n   }\n   if(Ext.isEmpty(app.endPeriodCode.getValue())){\n      map.add('endPeriodCode','0');\n   }else{\n      map.add('endPeriodCode',app.endPeriodCode.getValue());\n   }\n  //科目组编码\n  if(Ext.isEmpty(app.ACC_GROUP.getValue())){\n    map.add('accGroupId','-1');\n  }else{\n    map.add('accGroupId',app.accGroup.getValue());\n  }\n  //科目起始编码\n  if(Ext.isEmpty(app.ACC_CODE1.getValue())){\n     map.add('startAccCode','0');\n  }else{\n     map.add('startAccCode',app.ACC_CODE1.getValue());\n  }\n  if(Ext.isEmpty(app.ACC_CODE2.getValue())){\n     map.add('endAccCode','0');\n  }else{\n     var tmpAccCode = app.ACC_CODE2.getValue(); \n     map.add('endAccCode',tmpAccCode);\n  } \n  //汇总层级 \n map.add('accLevel',parseInt(app.SUMMARY.getValue()));\n\n  //币种--默认为账簿本位币币种\n  if(!Ext.isEmpty(app.CURRENCY_CODE.getValue())){\n     map.add('currencyCode',app.CURRENCY_CODE.getValue());\n     map.add('currencyName',app.CURRENCY_CODE.getRawValue());\n  }else{\n     map.add('currencyCode',app.oriCurrencyCode.getValue());\n     map.add('currencyName',app.currencyName.getValue());\n  }\n  //组织名称\n  map.add('orgName',app.orgName.getValue());\n  //账簿格式默认为金额式\n  var targetUrl =  '{#contextPath#}/ReportServer?reportlet=xc_account/accountant_static.cpt&__bypagesize__=false'; \n  if(\"1\" == app.accountCheck.getValue()){\n    targetUrl =  '{#contextPath#}/ReportServer?reportlet=xc_account/accountant_static_t.cpt&__bypagesize__=false'; \n  }\n  if(\"1\" == app.FORMAT.getValue()){\n    //外币金金额式\n    targetUrl =  '{#contextPath#}/ReportServer?reportlet=xc_account/accountant_static_foreign.cpt&__bypagesize__=false'; \n    if(\"1\" == app.accountCheck.getValue()){\n      targetUrl =  '{#contextPath#}/ReportServer?reportlet=xc_account/accountant_static_foreign_t.cpt&__bypagesize__=false'; \n    }\n    \n  }else if(\"2\" == app.FORMAT.getValue()){\n    //数量金额式\n     targetUrl =  '{#contextPath#}/ReportServer?reportlet=xc_account/accountant_static_amount.cpt&__bypagesize__=false';\n    if(\"1\" == app.accountCheck.getValue()){\n      targetUrl =  '{#contextPath#}/ReportServer?reportlet=xc_account/accountant_static_amount_t.cpt&__bypagesize__=false';\n    }\n  }\n  map.add('isAccount',app.accountCheck.getValue());\n  map.add('defaultCurrency',app.oriCurrencyCode.getValue());\n  map.add('isFirst','N');\n  map.add('orgId',app.orgId.getValue());\n  //账簿格式\n  var params = '';\n  map.each(function(key, value, length){\n    params +='&'+key+'='+value;\n  });\n  var reportFrame = document.getElementById('classifyReport');\n  params = targetUrl+params;\n  reportFrame.src = params;\n}\n\n\n\n\n\n"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".21","itemId":"td4"},"children":[{"configs":{"text":"{#la_resetBtn#}","width":"60","itemId":"cancelBtn","iconCls":"refresh_icon"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n\n}","layout":"column","itemId":"td7"},"children":[{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border',\n  columnWidth:.27\n}","layout":"column","itemId":"td7.1"},"children":[{"configs":{"itemId":"orgName"},"children":[],"expanded":false,"type":"hidden"},{"configs":{"itemId":"orgId"},"children":[],"expanded":false,"type":"hidden"},{"configs":{"itemId":"oriCurrencyCode"},"children":[],"expanded":false,"type":"hidden"},{"configs":{"itemId":"currencyName"},"children":[],"expanded":false,"type":"hidden"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"region":"center","html":"<iframe  scrolling=no frameborder=0 width=100% height=100% id=classifyReport name=classifyReport src='{#contextPath#}/ReportServer?reportlet=xc_account/accountant_static.cpt&language={#la_system_language#}&__bypagesize__=false'><\/iframe>\n","itemId":"reportPanel"},"children":[],"expanded":true,"type":"panel"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}