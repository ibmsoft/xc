{"inframe":false,"title":"插入","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"//检查在该体系下面是否存在重复的code\napp.run('select 1 from XC_PM_PROJECTS where PROJECT_CODE = {?PROJECT_CODE?} and LEDGER_ID = {?LEDGER_ID?}', {\n  errorText: '编码为\"' + app.get('PROJECT_CODE') + '\" 在该账簿下已经存在。'\n});\n//检查在该体系下面是否存在重复的name\napp.run('select 1 from XC_PM_PROJECTS where PROJECT_NAME = {?PROJECT_NAME?} and LEDGER_ID = {?LEDGER_ID?}', {\n  errorText: '名称为\"' + app.get('PROJECT_NAME') + '\" 在该账簿下已经存在。'\n});\nvar id = java.util.UUID.randomUUID();\nvar creation_date = new java.util.Date();\nvar last_update_date = new java.util.Date();\nvar last_update_by = '{#XIP.userId#}';\nvar created_by = '{#XIP.userId#}';\nrequest.setAttribute('PROJECT_ID',id); //设置自动生成的ID号\nrequest.setAttribute('CREATED_BY',created_by);\nrequest.setAttribute('LAST_UPDATED_BY',last_update_by);\nrequest.setAttribute('LAST_UPDATE_DATE',last_update_date);\nrequest.setAttribute('CREATION_DATE',creation_date);\n//插入记录到表\napp.update({\n  tableName: 'XC_PM_PROJECTS',\n  mode: 'insert'\n});","itemId":"module"},"children":[],"expanded":false,"type":"module"}],"pageLink":"","iconCls":""}