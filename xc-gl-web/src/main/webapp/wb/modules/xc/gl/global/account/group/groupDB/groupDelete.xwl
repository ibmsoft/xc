{"inframe":false,"title":"删除科目组查询是否被科目占用","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"var recsDelete = Wb.decode(request.getParameter('infoArray'));\nWb.each(recsDelete,function(rec){\n    app.run(\"SELECT 1 FROM xc_gl_accounts WHERE ACC_GROUP_ID = '\"+rec.ACC_GROUP_ID+\"'\",{\n        errorText:'科目组\"'+rec.ACC_GROUP_NAME+'\"已经被科目使用，不能删除！'\n    });\n    app.run(\"update xc_gl_acc_group set ORDERBY=ORDERBY-1 where ORDERBY>='\"+rec.ORDERBY+\"'\",{});\n});\nvar newArr = Wb.encode(recsDelete);\nrequest.setAttribute(\"batArray\",newArr);","itemId":"module"},"children":[{"configs":{"sql":"DELETE\nFROM\n\txc_gl_acc_group\nWHERE\n\tACC_GROUP_ID = {?ACC_GROUP_ID?}","arrayName":"batArray","itemId":"deleteGroup"},"children":[],"expanded":false,"type":"query"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}