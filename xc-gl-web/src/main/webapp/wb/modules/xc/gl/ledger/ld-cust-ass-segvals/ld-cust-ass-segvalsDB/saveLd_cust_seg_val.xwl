{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"var createRows = Wb.decode(request.getParameter('infoArray'));\nWb.each(createRows, function(rec) {\n  app.run(\"select 1 from xc_gl_ld_cust_ass_segvals where LD_CUST_SEGVAL_CODE='\"+rec.LD_CUST_SEGVAL_CODE+\"' and LEDGER_ID='\"+rec.LEDGER_ID+\"' and LD_CUST_SEGVAL_ID<>'\"+rec.LD_CUST_SEGVAL_ID+\"'\",{errorText:'编码为'+rec.LD_CUST_SEGVAL_CODE+'在该账簿下已经存在！'});\n  app.run(\"select 1 from xc_gl_ld_cust_ass_segvals where LD_CUST_SEGVAL_NAME='\"+rec.LD_CUST_SEGVAL_NAME+\"' and LEDGER_ID='\"+rec.LEDGER_ID+\"' and LD_CUST_SEGVAL_ID<>'\"+rec.LD_CUST_SEGVAL_ID+\"'\",{errorText:'名称为'+rec.LD_CUST_SEGVAL_NAME+'在该账簿下已经存在！'});\n});\nrequest.setAttribute('data',Wb.encode(createRows));\napp.send(createRows); //把create中包含的数据（主要更新V_CATEGORY_ID）发送到客户端以同步到表格","itemId":"module"},"children":[{"configs":{"sql":"update xc_gl_ld_cust_ass_segvals \nset\nLD_CUST_SEGVAL_CODE={?LD_CUST_SEGVAL_CODE?},\nLD_CUST_SEGVAL_NAME={?LD_CUST_SEGVAL_NAME?},\nSTART_DATE={?START_DATE?},\nEND_DATE=(case when {?END_DATE?} is null then '9999-12-31 00:00:00'\n         else {?END_DATE?}\n          end \n         ),\nLD_CUST_SEGVAL_DESC={?LD_CUST_SEGVAL_DESC?},\nLAST_UPDATE_DATE={?timestamp.sys.date?},\nLAST_UPDATED_BY={?XIP.userId?}\nwhere LD_CUST_SEGVAL_ID={?LD_CUST_SEGVAL_ID?}","transaction":"start","arrayName":"data","itemId":"query1"},"children":[],"expanded":false,"type":"query"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}