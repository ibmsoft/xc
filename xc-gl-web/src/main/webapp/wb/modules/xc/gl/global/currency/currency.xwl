{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"title":"币种信息管理","initScript":"com.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/gl/global/currency/currency\");\nvar contextPath = request.getContextPath();\nrequest.setAttribute(\"contextPath\",contextPath);","loginRequired":"false","itemId":"module"},"events":{"initialize":"var beforecheckChange;\nvar code;\nvar sm;\nvar sm1;"},"children":[{"configs":{"layout":"border","itemId":"viewport1"},"children":[{"configs":{"region":"center","frame":"false","height":"800","width":"600","border":"false","itemId":"grid1"},"events":{"tagEvents":"{\n  itemmouseenter:function(view, record, item, index, e, options){\n    app.grid1.getSelectionModel().select(index);\n  }\n}"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xc/gl/global/currency/currencyDB/selectCurrency"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#rownum#}","align":"center","xtype":"rownumberer","width":"60","titleAlign":"center","itemId":"rowNumCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#symbol#}","width":"180","align":"left","dataIndex":"CURRENCY_CODE","titleAlign":"center","itemId":"currencyCodeCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#currencyName#}","align":"left","width":"200","dataIndex":"CURRENCY_NAME","titleAlign":"center","itemId":"currencyNameCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#nation#}","align":"left","dataIndex":"NATION","titleAlign":"center","itemId":"nationCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#precision#}","width":"150","align":"left","dataIndex":"PERICISON","titleAlign":"center","itemId":"perisionCol"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#isEnabled#}","xtype":"checkcolumn","align":"center","dataIndex":"IS_ENABLED","titleAlign":"center","itemId":"isEnabledCol"},"events":{"checkchange":"sm=app.grid1.getSelectionModel().getSelection();\nif(sm.length!==0){\n  code=sm[0].data.CURRENCY_CODE;\nif(beforecheckChange==1){\n   Wb.request({\n   params:{\n   CURRENCY_CODE:code\n   },\n   url: 'm?xwl=xc/gl/global/currency/currencyDB/validate',\n   success: function(resp) {\n     var a = Wb.decode(resp.responseText);\n      if(a.total!==0){\n        Wb.toast('已被账簿中使用，无法禁用');\n        app.grid1.store.load();\n      }\n     else{\n        Wb.request({\n        params:{\n        CURRENCY_CODE:code\n        },\n          url:'m?xwl=xc/gl/global/currency/currencyDB/validate1',\n          success:function(resp){\n            var a = Wb.decode(resp.responseText);\n         if(a.total!==0){\n         Wb.toast('已被账簿科目中使用，无法禁用');\n        app.grid1.store.load();\n            }\n                else{\n     Wb.request({\n      params:{\n     after:'0',\n     CURRENCY_CODE:code\n     },\n     url: 'm?xwl=xc/gl/global/currency/currencyDB/updateIsEnabled',\n     message: '正在保存中...',\n     success: function() {\n      app.grid1.store.load();\n      }\n        }   \n     );\n       }\n        }\n        });\n     }}         \n\n      });\n        }  \nif(beforecheckChange===0){\nWb.request({\n  params:{\n  after:'1',\n    CURRENCY_CODE:code\n  },\n  url: 'm?xwl=xc/gl/global/currency/currencyDB/updateIsEnabled',\n  message: '正在保存中...',\n  success: function() {\n    app.grid1.store.load();\n  }\n});}\n}","beforecheckchange":"sm1=app.grid1.getSelectionModel().getSelection();\nif(sm1.length!==0){\nbeforecheckChange=sm1[0].data.IS_ENABLED;\n}"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}