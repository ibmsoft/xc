{"inframe":false,"title":"辅助明细","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","jsLinks":"[\"platform/util/platformUtil.js\"]","serverScript":"request.setAttribute('contextPath',request.getContextPath());\ncom.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/gl/report/assist-detail/assist-detail\");\nvar sessionVars = request.getSession().getAttribute(com.xzsoft.xip.framework.common.SessionVariable.XZ_SESSION_VARS);\nvar la_system_language = sessionVars.get(com.xzsoft.xip.framework.common.SessionVariable.language);\nrequest.setAttribute('la_system_language',la_system_language);","itemId":"module"},"children":[{"configs":{"layout":"border","itemId":"viewport1"},"events":{"afterrender":"app.ledgerCombo.getStore().load(function(records, operation, success){\n  if(records.length == 1){\n    app.ledgerCombo.setValue(records[0].data.CODE);\n  }\n});\n//设置默认会计期间\nvar _currentDate = new Date();\nvar _defaultPeriodCode = Ext.Date.format(_currentDate,'Y-m');\napp.periodComboStart.setValue(_defaultPeriodCode);\napp.periodComboStart.setRawValue(_defaultPeriodCode);\napp.periodComboEnd.setValue(_defaultPeriodCode);\napp.periodComboEnd.setRawValue(_defaultPeriodCode);"},"children":[{"configs":{"region":"north","frame":"true","style":"border-width:0px","buttonAlign":"center","border":"false","itemId":"selectForm"},"children":[{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","frame":"true","layout":"column","border":"false","itemId":"tr1"},"children":[{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","frame":"true","layout":"form","columnWidth":".2","border":"false","itemId":"td1"},"children":[{"configs":{"labelWidth":"{#la_labelWidth#}","displayField":"NAME","valueField":"CODE","labelAlign":"right","itemId":"ledgerCombo","fieldLabel":"<font color=\"red\">*<\/font>{#ledger#}"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}","select":"app.segmentCombo.getStore().load({\n  params:{\n  'ledgerId':combo.getValue()\n   }\n});\n//清空form中其他已经选择的条件\napp.periodComboStart.clearValue();\napp.periodComboEnd.clearValue();\napp.accComboStart.clearValue();\napp.accComboEnd.clearValue();\napp.startSegmentVal.clearValue();\napp.endSegmentVal.clearValue();\napp.segmentTree.getStore().getRootNode().removeAll();\n"},"children":[{"configs":{"pageSize":"-1","autoLoad":"true","itemId":"store","url":"m?xwl=xc/gl/report/assist-detail/data/getAllLedger"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"fit","columnWidth":".38","itemId":"td2"},"children":[{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"column","itemId":"td2.1"},"children":[{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".54","itemId":"td2.2.1"},"children":[{"configs":{"labelWidth":"{#la_labelWidth#}","displayField":"NAME","valueField":"CODE","labelAlign":"right","itemId":"periodComboStart","fieldLabel":"<font color=\"red\">*<\/font>{#periodStart#}"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/gl/report/assist-detail/data/getLedgerPeriod"},"events":{"beforeload":"var v_ledgerId = app.ledgerCombo.getValue();\nif(Wb.isEmpty(v_ledgerId)){\n  Wb.toast('请先选择账簿！');\n  return;\n}\nstore.proxy.extraParams.ledgerId = v_ledgerId;"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".04","itemId":"td2.2.2"},"children":[{"configs":{"text":"--","labelAlign":"center","itemId":"rangeFlag"},"children":[],"expanded":false,"type":"label"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".38","itemId":"td3.3.3"},"children":[{"configs":{"displayField":"NAME","valueField":"CODE","itemId":"periodComboEnd"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/gl/report/assist-detail/data/getLedgerPeriod"},"events":{"beforeload":"var v_ledgerId = app.ledgerCombo.getValue();\nif(Wb.isEmpty(v_ledgerId)){\n  Wb.toast('请先选择账簿！');\n  return;\n}\nstore.proxy.extraParams.ledgerId = v_ledgerId;"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","frame":"true","layout":"form","columnWidth":".12","border":"false","itemId":"td3"},"children":[{"configs":{"text":"{#select#}","width":"75","itemId":"selectBtn","iconCls":"seek_icon"},"events":{"click":"var v_startCode = app.startSegmentVal.getValue();\nvar v_endCode = app.endSegmentVal.getValue();\nvar v_ledgerId = app.ledgerCombo.getValue();\nvar v_segment = app.segmentCombo.getValue();\nvar v_period_start = app.periodComboStart.getValue();\nvar v_period_end = app.periodComboEnd.getValue();\nif(Wb.isEmpty(v_ledgerId)){\n  Wb.toast('{#selectBtnMsg1#}');\n  return;\n}\nif(Wb.isEmpty(v_period_start) && Wb.isEmpty(v_period_end)){\n  Wb.toast('{#selectBtnMsg2#}');\n  return;\n}\nif(Wb.isEmpty(v_segment)){\n  Wb.toast('{#selectBtnMsg3#}');\n  return;\n}\nvar map = new Ext.util.HashMap();\nmap.add('language','{#la_system_language#}');\n//账簿\nmap.add('ledgerId',app.ledgerCombo.getValue());\n//期间\nif(Ext.isEmpty(app.periodComboStart.getValue())){\n  map.add('startPeriod','0');\n}else{\n  map.add('startPeriod',app.periodComboStart.getValue());\n}\nif(Ext.isEmpty(app.periodComboEnd.getValue())){\n  map.add('endPeriod','0');\n}else{\n  map.add('endPeriod',app.periodComboEnd.getValue());\n}\n//科目\nif(Ext.isEmpty(app.accComboStart.getValue())){\n  map.add('startAccCode','0');\n}else{\n  map.add('startAccCode',app.accComboStart.getValue());\n}\nif(Ext.isEmpty(app.accComboEnd.getValue())){\n  map.add('endAccCode','0');\n}else{\n  map.add('endAccCode',app.accComboEnd.getValue());\n}\n//辅助段\n//assistSegment\nmap.add('assistSegment',app.segmentCombo.getValue());\n//辅助段的值\nif(Ext.isEmpty(app.startSegmentVal.getValue())){\n  map.add('startSegmentVal','0');\n}else{\n  map.add('startSegmentVal',app.startSegmentVal.getValue());\n}\nif(Ext.isEmpty(app.endSegmentVal.getValue())){\n  map.add('endSegmentVal','0');\n}else{\n  map.add('endSegmentVal',app.endSegmentVal.getValue());\n}\n//是否含未记账、是否明细科目\nmap.add('isFirst','N');\nvar targetUrl = '{#contextPath#}/ReportServer?reportlet=xc_assistant/assistant_detail.cpt&__bypagesize__=false';\nif('1' == app.ynAccCombo.getValue()){\n  targetUrl = '{#contextPath#}/ReportServer?reportlet=xc_assistant/assistant_detail_t.cpt&__bypagesize__=false';\n}\nif(v_segment=='XC_AP_VENDORS'){\n  app.segmentTree.getStore().proxy.url='m?xwl=xc/gl/report/assist-detail/data/SegmentTree_vendor';\n\t\n}else if(v_segment=='XC_AR_CUSTOMERS'){\n\tapp.segmentTree.getStore().proxy.url='m?xwl=xc/gl/report/assist-detail/data/SegmentTree_customer';\n\t\n}else if(v_segment=='XC_GL_PRODUCTS'){\n\t\tapp.segmentTree.getStore().proxy.url='m?xwl=xc/gl/report/assist-detail/data/SegmentTree_product';\n}else if(v_segment=='XC_PM_PROJECTS'){\n  app.segmentTree.getStore().proxy.url='m?xwl=xc/gl/report/assist-detail/data/SegmentTree_project';\n \n}else if(v_segment=='XIP_PUB_ORGS'){\n  app.segmentTree.getStore().proxy.url='m?xwl=xc/gl/report/assist-detail/data/SegmentTree_org';\n \n}else if(v_segment=='XIP_PUB_DEPTS'){\n  app.segmentTree.getStore().proxy.url='m?xwl=xc/gl/report/assist-detail/data/SegmentTree_dept';\n \n}else if(v_segment=='XIP_PUB_EMPS'){\n  app.segmentTree.getStore().proxy.url='m?xwl=xc/gl/report/assist-detail/data/SegmentTree_emp';\n \n}else if(v_segment=='XC_GL_CUSTOM1'){\n  app.segmentTree.getStore().proxy.url='m?xwl=xc/gl/report/assist-detail/data/SegmentTree_custom1';\n \n}else if(v_segment=='XC_GL_CUSTOM2'){\n  app.segmentTree.getStore().proxy.url='m?xwl=xc/gl/report/assist-detail/data/SegmentTree_custom2';\n \n}else if(v_segment=='XC_GL_CUSTOM3'){\n  app.segmentTree.getStore().proxy.url='m?xwl=xc/gl/report/assist-detail/data/SegmentTree_custom3';\n \n}else if(v_segment=='XC_GL_CUSTOM4'){\n  app.segmentTree.getStore().proxy.url='m?xwl=xc/gl/report/assist-detail/data/SegmentTree_custom4';\n \n}\napp.segmentTree.getStore().load({params:{'ledgerId':v_ledgerId,'startCode':v_startCode,'endCode':v_endCode}});\nvar reportFrame = document.getElementById('assistDetail');\nvar params = '';\nmap.each(function(key, value, length){\n    params +='&'+key+'='+value;\n});\nparams = targetUrl+params;\nreportFrame.src = params;\n\n\n\n"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","frame":"true","layout":"column","border":"false","itemId":"tr2"},"children":[{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","frame":"true","layout":"form","columnWidth":".2","border":"false","itemId":"td1"},"children":[{"configs":{"tagConfigs":"columnWidth:0.3","labelWidth":"{#la_labelWidth#}","value":"0","pickList":"[['0','{#no#}'],['1','{#yes#}']]","labelAlign":"right","itemId":"ynAccCombo","fieldLabel":"{#isAccount#}","editable":"false"},"children":[],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"fit","columnWidth":".38","itemId":"td2"},"children":[{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"column","itemId":"td2.1"},"children":[{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".54","itemId":"td2.2.1"},"children":[{"configs":{"tagConfigs":"columnWidth:0.3","labelWidth":"{#la_labelWidth#}","displayField":"NAME","valueField":"CODE","labelAlign":"right","itemId":"accComboStart","fieldLabel":"{#accountStart#}"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/gl/report/assist-detail/data/getAccount"},"events":{"beforeload":"var v_ledgerId = app.ledgerCombo.getValue();\nif(Wb.isEmpty(v_ledgerId)){\n  Wb.toast('请先选择账簿！');\n  return;\n}\nstore.proxy.extraParams.ledgerId = v_ledgerId;"},"children":[],"expanded":false,"type":"store"}],"expanded":false,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".04","itemId":"td2.2.2"},"children":[{"configs":{"text":"--","labelAlign":"center","itemId":"rangeFlag"},"children":[],"expanded":false,"type":"label"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".38","itemId":"td3.3.3"},"children":[{"configs":{"tagConfigs":"columnWidth:0.22","displayField":"NAME","valueField":"CODE","itemId":"accComboEnd"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/gl/report/assist-detail/data/getAccount"},"events":{"beforeload":"var v_ledgerId = app.ledgerCombo.getValue();\nif(Wb.isEmpty(v_ledgerId)){\n  Wb.toast('请先选择账簿！');\n  return;\n}\nstore.proxy.extraParams.ledgerId = v_ledgerId;"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","frame":"true","layout":"form","columnWidth":".12","border":"false","itemId":"td3"},"children":[{"configs":{"text":"{#reset#}","width":"75","itemId":"resetBtn","iconCls":"refresh_icon"},"events":{"click":"app.selectForm.getForm().reset();"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","frame":"true","layout":"column","border":"false","itemId":"tr3"},"children":[{"configs":{"tagConfigs":"baseCls:'my-panel-no-border'","frame":"true","layout":"form","columnWidth":".2","border":"false","itemId":"td1"},"children":[{"configs":{"tagConfigs":"columnWidth:0.3","labelWidth":"{#la_labelWidth#}","displayField":"NAME","valueField":"CODE","labelAlign":"right","itemId":"segmentCombo","fieldLabel":"<font color=\"red\">*<\/font>{#segement#}"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}","select":"if(Ext.isEmpty(records[0].data.ALIAS_NAME)){\n  app.segmentTree.getRootNode().set('text',records[0].data.NAME);\n}else{\n  app.segmentTree.getRootNode().set('text',records[0].data.ALIAS_NAME);\n}\n\napp.segmentTree.getRootNode().commit();","change":"if(combo.getValue()=='XC_AP_VENDORS')\n{\n  app.startSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/getLedgerVendor';\n  app.endSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/getLedgerVendor';\n  \n}else if(combo.getValue()=='XC_AR_CUSTOMERS'){\n app.startSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/getLedgerCustomer';\n  app.endSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/getLedgerCustomer';\n  \n}else if(combo.getValue()=='XC_GL_PRODUCTS'){\n  app.startSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/getLedgerProduct';\n  app.endSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/getLedgerProduct';\n  \n}else if(combo.getValue()=='XC_PM_PROJECTS'){\n  app.startSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/getProject';\n  app.endSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/getProject';\n  \n}else if(combo.getValue()=='XIP_PUB_ORGS'){\n  app.startSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/getOrg';\n  app.endSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/getOrg';\n  \n}else if(combo.getValue()=='XIP_PUB_DEPTS'){\n  app.startSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/getDept';\n  app.endSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/getDept';\n  \n}else if(combo.getValue()=='XIP_PUB_EMPS'){\n  app.startSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/getLedgerEmp';\n  app.endSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/getLedgerEmp';\n  \n}else if(combo.getValue()=='XC_GL_CUSTOM1'){\n  app.startSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/getCustom1';\n  app.endSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/selectCustom1';\n  \n}else if(combo.getValue()=='XC_GL_CUSTOM2'){\n  app.startSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/getCustom2';\n  app.endSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/selectCustom2';\n  \n}else if(combo.getValue()=='XC_GL_CUSTOM3'){\n  app.startSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/getCustom3';\n  app.endSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/selectCustom3';\n  \n}else if(combo.getValue()=='XC_GL_CUSTOM4'){\n  app.startSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/getCustom4';\n  app.endSegmentVal.store.proxy.url='m?xwl=xc/gl/report/assist-detail/data/selectCustom4';\n  \n}\napp.segmentTree.getStore().getRootNode().removeAll();\n"},"children":[{"configs":{"itemId":"store","url":"m?xwl=xc/gl/report/assist-detail/data/getSegment"},"events":{"beforeload":"var v_ledgerId = app.ledgerCombo.getValue();\nif(Wb.isEmpty(v_ledgerId)){\n  return;\n}\nstore.proxy.extraParams.ledgerId = v_ledgerId;"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"fit","columnWidth":".38","itemId":"td2"},"children":[{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"column","itemId":"td2.1"},"children":[{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".54","itemId":"td2.2.1"},"children":[{"configs":{"tagConfigs":"columnWidth:0.3","labelWidth":"{#la_labelWidth#}","displayField":"NAME","valueField":"CODE","labelAlign":"right","itemId":"startSegmentVal","fieldLabel":"{#segementStart#}"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/gl/report/assist-detail/data/getLedgerVendor"},"events":{"beforeload":"var v_ledgerId = app.ledgerCombo.getValue();\nvar v_segment = app.segmentCombo.getValue();\nif(Wb.isEmpty(v_segment)){\n  return;\n}\nstore.proxy.extraParams.ledgerId = v_ledgerId;\n"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".04","itemId":"td2.2.2"},"children":[{"configs":{"text":"--","labelAlign":"center","itemId":"rangeFlag"},"children":[],"expanded":false,"type":"label"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{\n  baseCls:'my-panel-no-border'\n}","layout":"form","columnWidth":".38","itemId":"td3.3.3"},"children":[{"configs":{"tagConfigs":"columnWidth:0.22","displayField":"NAME","valueField":"CODE","itemId":"endSegmentVal"},"events":{"beforequery":"var combo = plan.combo;\nif (!plan.forceAll) {\n  var value = plan.query;\n  combo.store.filterBy(function(record, id) {\n    var text = record.get(combo.displayField);\n    return (text.indexOf(value) != -1);\n  });\n  combo.expand();\n  return false;\n}"},"children":[{"configs":{"pageSize":"-1","itemId":"store","url":"m?xwl=xc/gl/report/assist-detail/data/getLedgerVendor"},"events":{"beforeload":"store.proxy.extraParams.ledgerId = app.ledgerCombo.getValue();"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"panel"}],"expanded":true,"type":"form"},{"configs":{"rootVisible":"true","region":"west","width":"'22%'","split":"true","itemId":"segmentTree"},"events":{"itemclick":"var _treeId = record.data.id;\nvar _treeCode = record.data.code;\nif('0' == _treeId){\n   return ;\n}\nvar map = new Ext.util.HashMap();\n//账簿\nmap.add('ledgerId',app.ledgerCombo.getValue());\n//期间\nif(Ext.isEmpty(app.periodComboStart.getValue())){\n  map.add('startPeriod','0');\n}else{\n  map.add('startPeriod',app.periodComboStart.getValue());\n}\nif(Ext.isEmpty(app.periodComboEnd.getValue())){\n  map.add('endPeriod','0');\n}else{\n  map.add('endPeriod',app.periodComboEnd.getValue());\n}\n//科目\nif(Ext.isEmpty(app.accComboStart.getValue())){\n  map.add('startAccCode','0');\n}else{\n  map.add('startAccCode',app.accComboStart.getValue());\n}\nif(Ext.isEmpty(app.accComboEnd.getValue())){\n  map.add('endAccCode','0');\n}else{\n  map.add('endAccCode',app.accComboEnd.getValue());\n}\n//辅助段\n//assistSegment\nmap.add('assistSegment',app.segmentCombo.getValue());\n//辅助段的值\nmap.add('startSegmentVal',_treeCode);\nmap.add('endSegmentVal',_treeCode);\nmap.add('isFirst','N');\nvar targetUrl = '{#contextPath#}/ReportServer?reportlet=xc_assistant/assistant_detail.cpt&language={#la_system_language#}&__bypagesize__=false';\nif('1' == app.ynAccCombo.getValue()){\n  targetUrl = '{#contextPath#}/ReportServer?reportlet=xc_assistant/assistant_detail_t.cpt&language={#la_system_language#}&__bypagesize__=false';\n}\n//是否含未记账、是否明细科目\nmap.add('isAccount',app.ynAccCombo.getValue());\nvar reportFrame = document.getElementById('assistDetail');\nvar params = '';\nmap.each(function(key, value, length){\n    params +='&'+key+'='+value;\n});\nparams = targetUrl+params;\nreportFrame.src = params;"},"children":[{"configs":{"root":"{'text':'{#all#}','code':'0','id':'0'}","itemId":"store","url":"m?xwl=xc/gl/report/assist-detail/data/SegmentTree_vendor"},"events":{"load":"app.segmentTree.expandAll();","beforeload":"if(Ext.isEmpty(app.segmentCombo.getValue())){\n  return ;\n}\n// 参数必须重新传递\nvar node = operation.node;\noperation.params.parentId = node.isRoot() ? '-1' : operation.node.data.id;\noperation.params.ledgerId = app.ledgerCombo.getValue();\n//科目范围\nif(Ext.isEmpty(app.startSegmentVal.getValue())){\n  operation.params.startCode = '';\n}else{\n  operation.params.startCode = app.startSegmentVal.getValue();\n}\nif(Ext.isEmpty(app.endSegmentVal.getValue())){\n  operation.params.endCode = '';\n}else{\n  operation.params.endCode = app.endSegmentVal.getValue();\n}\n\n"},"children":[],"expanded":false,"type":"treestore"}],"expanded":true,"type":"tree"},{"configs":{"region":"center","layout":"fit","html":"<iframe  scrolling=no  frameborder=0 width=100% height=100% id=assistDetail src='{#contextPath#}/ReportServer?reportlet=xc_assistant/assistant_detail.cpt&language={#la_system_language#}&__bypagesize__=false'><\/iframe>\n","itemId":"reportPanel"},"children":[],"expanded":false,"type":"panel"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}