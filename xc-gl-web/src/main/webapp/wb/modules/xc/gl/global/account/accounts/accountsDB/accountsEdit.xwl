{"inframe":false,"title":"科目批量修改","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"var infoArray = request.getParameter(\"infoArray\") ;\nvar array = Wb.decode(infoArray) ;\nvar newArr = Wb.encode(array);\nrequest.setAttribute(\"batArray\",newArr);","itemId":"module"},"children":[{"configs":{"oracle":"UPDATE xc_gl_ld_accounts gla\nSET gla.END_DATE = {?DATE?},\nLAST_UPDATE_DATE={?timestamp.sys.date?},\nLAST_UPDATED_BY={?XIP.userId?}\nWHERE\n\tgla.ACC_ID = {?ACC_ID?}\nAND gla.END_DATE > (\n\tSELECT\n\t\tga.END_DATE\n\tFROM\n\t\txc_gl_accounts ga\n\tWHERE\n\t\tga.acc_id = {?ACC_ID?}\n\tAND ga.END_DATE = TO_DATE({?DATE?},'yy-MM-dd')\n)\nAND gla.END_DATE >= (\n\tSELECT\n\t\tga.END_DATE\n\tFROM\n\t\txc_gl_accounts ga\n\tWHERE\n\t\tga.ACC_ID = {?ACC_ID?}\n\tAND ga.END_DATE = TO_DATE({?ENDDATE?},'yy-MM-dd')\n)","itemId":"ld_accountsEditDate","mysql":"UPDATE xc_gl_ld_accounts gla\nSET gla.END_DATE = {?ENDDATE?},\ngla.START_DATE = {?STARTDATE?},\nLAST_UPDATE_DATE={?timestamp.sys.date?},\nLAST_UPDATED_BY={?XIP.userId?}\nWHERE\n\tgla.ACC_ID = {?ACC_ID?}\nAND gla.START_DATE <= (\n\tSELECT\n\t\tga.START_DATE\n\tFROM\n\t\txc_gl_accounts ga\n\tWHERE\n\t\tga.ACC_ID = {?ACC_ID?}\n\tAND ga.START_DATE = DATE_FORMAT({?STARTDATE?}, '%Y-%m-%d')\n)\nAND gla.END_DATE >= (\n\tSELECT\n\t\tga.END_DATE\n\tFROM\n\t\txc_gl_accounts ga\n\tWHERE\n\t\tga.ACC_ID = {?ACC_ID?}\n\tAND ga.END_DATE = DATE_FORMAT({?ENDDATE?},'%Y-%m-%d')\n)"},"children":[],"expanded":false,"type":"sqlswitcher"},{"configs":{"oracle":"UPDATE xc_gl_accounts\nSET\n\tACC_GROUP_ID = decode({?ACC_GROUP_CHECK?},'0',{?GROUP_ID?},ACC_GROUP_ID),\n\tEND_DATE = decode({?END_DATE_CHECK?},'0',{?ENDDATE?},END_DATE),\n\tSTART_DATE = decode({?START_DATE_CHECK?},'0',{?STARTDATE?},START_DATE),\n    ACC_CATEGORY_CODE = decode({?ACC_CATEGORY_CHECK?},'0',{?CATEGORY_CODE?},ACC_CATEGORY_CODE),\n\tBALANCE_DIRECTION = decode({?BALANCE_DIRECTION_CHECK?},'0',{?BALANCE?},BALANCE_DIRECTION),\n    IS_BANK_ACC = decode({?IS_BANK_ACC_CHECK?},'0',{?BANK_ACC?},IS_BANK_ACC),\n\tIS_CASH_ACC = decode({?IS_CASH_ACC_CHECK?},'0',{?CASH_ACC?},IS_CASH_ACC),\n\tIS_CASH_ITEM = decode({?IS_CASH_ITEM_CHECK?},'0',{?CASH_ITEM?},IS_CASH_ITEM),\n    LAST_UPDATE_DATE={?timestamp.sys.date?},\n    LAST_UPDATED_BY={?XIP.userId?}\nWHERE\n\tACC_ID ={?ACC_ID?}","itemId":"accountsEditDate","mysql":"UPDATE xc_gl_accounts\nSET\n\tACC_GROUP_ID = IF({?ACC_GROUP_CHECK?}<>'0',{?GROUP_ID?},ACC_GROUP_ID),\n\tEND_DATE = IF({?END_DATE_CHECK?}<>'0',{?ENDDATE?},END_DATE),\n\tSTART_DATE = IF({?START_DATE_CHECK?}<>'0',{?STARTDATE?},START_DATE),\n    ACC_CATEGORY_CODE = IF({?ACC_CATEGORY_CHECK?}<>'0',{?CATEGORY_CODE?},ACC_CATEGORY_CODE),\n\tBALANCE_DIRECTION = IF({?BALANCE_DIRECTION_CHECK?}<>'0',{?BALANCE?},BALANCE_DIRECTION),\n    IS_BANK_ACC = IF({?IS_BANK_ACC_CHECK?}<>'0',{?BANK_ACC?},IS_BANK_ACC),\n\tIS_CASH_ACC = IF({?IS_CASH_ACC_CHECK?}<>'0',{?CASH_ACC?},IS_CASH_ACC),\n\tIS_CASH_ITEM = IF({?IS_CASH_ITEM_CHECK?}<>'0',{?CASH_ITEM?},IS_CASH_ITEM),\n    LAST_UPDATE_DATE={?timestamp.sys.date?},\n    LAST_UPDATED_BY={?XIP.userId?}\nWHERE\n\tACC_ID ={?ACC_ID?}\n"},"children":[],"expanded":false,"type":"sqlswitcher"},{"configs":{"sql":"{#accountsEditDate#}","transaction":"start","itemId":"accountsEdit","arrayName":"batArray"},"children":[],"expanded":false,"type":"query"},{"configs":{"sql":"{#ld_accountsEditDate#}","arrayName":"batArray","itemId":"ld_accountsEdit"},"children":[],"expanded":false,"type":"query"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}