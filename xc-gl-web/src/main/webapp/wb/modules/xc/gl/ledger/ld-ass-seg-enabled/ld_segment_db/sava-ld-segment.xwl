{"inframe":false,"title":"保存辅助核算段","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"//var defaultPassword = Encrypter.getMD5('111111'),\nvar createRows = Wb.decode(request.getParameter('create'));\nvar updateRows = Wb.decode(request.getParameter('update'));\nWb.each(createRows, function(rec) {\n  app.run('select 1 from xc_gl_ld_ass_segments where LD_SEG_ALIAS = \"'+rec.LD_SEG_ALIAS+'\"',{errorText:'段别名\"'+rec.LD_SEG_ALIAS+'\"已经存在！'});\n  Wb.apply(rec, {\n    LD_SEG_ID: java.util.UUID.randomUUID(),\n    CREATION_DATE: new Date(),\n    CREATED_BY : '{#XIP.userId#}'\n  });\n});\nWb.each(updateRows, function(rec) {\n    app.run('select 1 from xc_gl_ld_ass_segments where LD_SEG_ALIAS = \"'+rec.LD_SEG_ALIAS+'\" and LD_SEG_ID <> \"'+rec.LD_SEG_ALIAS+'\"',{errorText:'段别名\"'+rec.LD_SEG_ALIAS+'\"已经存在！'});\n});\nrequest.setAttribute('create', Wb.encode(createRows));\nrequest.setAttribute('update', Wb.encode(updateRows));\n//默认使用app.update操作都在同一个数据库事务内\napp.update({\n//   fieldsMap: {\n//     EMAIL: 'STAFF_EMAIL' //把客户端STAFF_EMAIL字段名称映射为数据库实际使用的字段名称EMAIL（在select语句中使用as更名了）\n//   },\n  tableName: 'xc_gl_ld_ass_segments'\n});\n\n// app.update({\n//   tableName: 'WB_USER'\n// });\n\napp.send(createRows); //把create中包含的数据（主要更新V_CATEGORY_ID）发送到客户端以同步到表格\napp.send(updateRows);","itemId":"module"},"children":[],"expanded":false,"type":"module"}],"pageLink":"","iconCls":""}