{"inframe":false,"title":"修改项目","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":" //检查在该体系下面是否存在重复的code\napp.run('select 1 from XC_PM_PROJECTS where PROJECT_CODE = {?PROJECT_CODE?} and LEDGER_ID = {?LEDGER_ID?} and PROJECT_ID <> {?PROJECT_ID?}', {\n  errorText: '编码为\"' + app.get('PROJECT_CODE') + '\" 在该账簿下已经存在。'\n});\n//检查在该体系下面是否存在重复的name\napp.run('select 1 from XC_PM_PROJECTS where PROJECT_NAME = {?PROJECT_NAME?} and LEDGER_ID = {?LEDGER_ID?} and PROJECT_ID <> {?PROJECT_ID?}', {\n  errorText: '名称为\"' + app.get('PROJECT_NAME') + '\" 在该账簿下已经存在。'\n});\napp.send({'flag':'0'});","itemId":"module"},"children":[{"configs":{"sql":"update XC_PM_PROJECTS set PROJECT_NAME = {?PROJECT_NAME?},\n\t\t\t\t\t\t\tPROJECT_CODE = {?PROJECT_CODE?},\n                            START_DATE = {?START_DATE?},\n                            END_DATE = {?END_DATE?},\n                           LAST_UPDATE_DATE={?timestamp.sys.date?},\n                           LAST_UPDATED_BY={?XIP.userId?}\nwhere PROJECT_ID={?PROJECT_ID?}","itemId":"query1"},"children":[],"expanded":false,"type":"query"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}