{"inframe":false,"title":"","hidden":false,"roles":{"default":1},"children":[{"configs":{"title":"{#moduleTitle#}","loginRequired":"false","serverScript":"com.xzsoft.xip.platform.util.XipUtil.getCurrentLang(request,\"xc/gl/global/segment/XC_GL_ASS_SEGMENT\");","head":"\n\n\n","itemId":"module"},"events":{"finalize":"var beforeCheckChange;","initialize":"function update(id,is_enabled){\n  Wb.request({\n    url: 'm?xwl=xc/gl/global/segment/DB/save',\n    params: {seg_code:id,is_enabled:is_enabled},\n    success:function(){\n      app.grid1.store.reload();\n    }\n  });\n}\n\nfunction weihu(){\n alert(1);\n}"},"children":[{"configs":{"layout":"fit","itemId":"viewport1"},"children":[{"configs":{"itemId":"grid1","editable":"true"},"events":{"itemclick":"\n","tagEvents":"\n"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xc/gl/global/segment/DB/select"},"children":[],"expanded":false,"type":"store"},{"configs":{"itemId":"tbar"},"children":[{"configs":{"text":"{#maintainBtn#}","itemId":"manageBtn","iconCls":"file_edit_icon"},"events":{"click":"var recs = app.grid1.getSelection();\nif(recs.length===0){\n  Wb.toast('请选择 1 条记录');\n  return false;\n}\nvar rec = recs[0];\nvar is_enabled = rec.data.IS_ENABLED;\nvar seg_type = rec.data.SEG_TYPE;\nvar seg_code = rec.data.SEG_CODE;\nvar url = '';\nvar title = '';\n\nif(seg_type == '1'){\n  if(is_enabled === 1){\n    if(seg_code == 'XC_AP_VENDORS'){\n      url = 'm?xwl=xc/gl/global/vendor/XC_GL_GB_VENDOR';\n      title = '供应商管理';\n    }else if(seg_code == 'XC_AR_CUSTOMERS'){\n      url = 'm?xwl=xc/gl/global/customer/XC_GL_GB_CUSTOMER';\n      title = '客户管理';\n    }else if(seg_code == 'XC_GL_PRODUCTS'){\n      url = 'm?xwl=xc/gl/global/product/XC_GL_GB_PRODUCT';\n      title = '产品管理';\n    }else if(seg_code == 'XIP_PUB_EMPS'){\n      url = 'm?xwl=xip/hr/emp/emp';\n      title = '个人往来管理';\n    }else if(seg_code == 'XIP_PUB_ORGS'){\n      url = 'm?xwl=xip/hr/org/org';\n      title = '内部往来管理';\n    }\n    //跳转界面\n    Wb.open({\n      url:url,\n      title:title\n    });\n  }else{\n    Wb.toast('该辅助段未启用');\n  }\n}else{\n  Wb.toast('只有共享辅助段可以维护');\n}\n"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"toolbar"},{"configs":{"itemId":"columns"},"children":[{"configs":{"text":"{#rownum#}","align":"center","xtype":"rownumberer","width":"50","itemId":"rownum"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#segmentName#}","width":"150","align":"left","dataIndex":"SEG_NAME","titleAlign":"center","itemId":"SEG_NAME_COL"},"children":[],"expanded":false,"type":"column"},{"configs":{"text":"{#segmentType#}","width":"150","align":"left","dataIndex":"SEG_TYPE","titleAlign":"center","itemId":"SEG_TYPE_COL","renderer":"if(value=='1'){\n  return '共享';\n}else if(value=='0'){\n  return '私有';\n}"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#isEnabled#}","align":"center","xtype":"checkcolumn","dataIndex":"IS_ENABLED","titleAlign":"center","itemId":"IS_ENABLED_COL"},"events":{"checkchange":"\n","beforecheckchange":"app.grid1.getSelectionModel().select(rowIndex);\nbeforeCheckChange=app.grid1.getSelection()[0].data.IS_ENABLED;\n\nvar rec = app.grid1.getSelection()[0];\nvar seg_code = rec.data.SEG_CODE;\n\nif(beforeCheckChange===1){\n  var isUsed=false;\n  //验证是否被使用\n  Wb.request({\n    url: 'm?xwl=xc/gl/global/segment/DB/validate',\n    params:{seg_code:seg_code},\n    sync: false,\n    success: function(resp){\n      var a = Wb.decode(resp.responseText);\n      if(a.total!==0){\n        Wb.info('已被账户引用，无法修改');\n        isUsed=true;\n      }\n      if(isUsed){\n        update(seg_code,1);\n      }else{\n        update(seg_code,0);\n      }\n    }\n  });\n}else {\n  update(seg_code,1);\n}\n\n"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#segmentDesc#}","width":"300","align":"left","dataIndex":"SEG_DESC","titleAlign":"center","itemId":"SEG_DESC_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#segmentCode#}","hidden":"true","align":"left","dataIndex":"SEG_CODE","titleAlign":"center","itemId":"SEG_CODE_COL"},"children":[],"expanded":true,"type":"column"},{"configs":{"text":"{#orderNumber#}","hidden":"true","align":"right","dataIndex":"ORDERBY","titleAlign":"center","itemId":"ORDERBY_COL"},"children":[],"expanded":false,"type":"column"}],"expanded":true,"type":"array"}],"expanded":true,"type":"grid"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}