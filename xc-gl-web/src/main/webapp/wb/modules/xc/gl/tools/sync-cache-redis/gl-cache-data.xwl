{"inframe":false,"title":"总账基础缓存数据","hidden":false,"roles":{"default":1},"children":[{"configs":{"serverScript":"\n// TODO: 设置根目录\nrequest.setAttribute(\"ctxPath\", request.getContextPath()) ;","itemId":"module"},"children":[{"configs":{"itemId":"viewport1"},"children":[{"configs":{"title":"总账基础数据缓存处理","autoShow":"true","frame":"true","closable":"false","layout":"fit","width":"600","bodyPadding":"10","dialog":"false","itemId":"cacheWin"},"children":[{"configs":{"layout":"column","itemId":"chkGroup"},"children":[{"configs":{"tagConfigs":"{columnWidth:1}","title":"全局数据","height":"60","layout":"column","itemId":"gbPanel"},"children":[{"configs":{"itemId":"accounts","checked":"true","boxLabel":"会计科目"},"children":[],"expanded":false,"type":"check"},{"configs":{"itemId":"vendors","checked":"true","boxLabel":"供应商"},"children":[],"expanded":false,"type":"check"},{"configs":{"itemId":"customers","checked":"true","boxLabel":"客户"},"children":[],"expanded":false,"type":"check"},{"configs":{"itemId":"products","checked":"true","boxLabel":"产品"},"children":[],"expanded":false,"type":"check"},{"configs":{"itemId":"orgs","checked":"true","boxLabel":"内部往来"},"children":[],"expanded":false,"type":"check"},{"configs":{"itemId":"emps","checked":"true","boxLabel":"个人往来"},"children":[],"expanded":false,"type":"check"},{"configs":{"itemId":"category","checked":"true","boxLabel":"凭证分类"},"children":[],"expanded":false,"type":"check"},{"configs":{"itemId":"cashitem","checked":"true","boxLabel":"现金流量项目"},"children":[],"expanded":false,"type":"check"}],"expanded":false,"type":"fieldset"},{"configs":{"columnWidth":"1","bodyPadding":"5","itemId":"ledgerPanel"},"children":[{"configs":{"labelWidth":"50","displayField":"NAME","width":"450","valueField":"ID","labelAlign":"right","itemId":"comboLedger","fieldLabel":"账簿","editable":"false"},"children":[{"configs":{"autoLoad":"true","itemId":"store","url":"m?xwl=xc/com-qry/gl-ledgers/select-sec-ledger"},"events":{"load":"Ext.define('ledgerModel', {  \n    extend: 'Ext.data.Model',  \n    fields: [  \n        {name: 'ID'},  \n        {name: 'NAME'}\n     ]  \n});\nvar r = Ext.create('ledgerModel', {\n  'ID':'ALL', \n  'NAME':'全部'\n});\n\nstore.insert(0,r);\n\n// TODO: 设置默认值\nWb.setValue(app.comboLedger,{'comboLedger':'ALL'}) ;"},"children":[],"expanded":false,"type":"store"}],"expanded":true,"type":"combo"}],"expanded":true,"type":"panel"},{"configs":{"tagConfigs":"{columnWidth:1}","title":"账簿级数据","height":"80","layout":"column","itemId":"ldPanel"},"children":[{"configs":{"itemId":"ledgers","checked":"true","boxLabel":"账簿"},"children":[],"expanded":false,"type":"check"},{"configs":{"itemId":"ccid","checked":"true","boxLabel":"科目组合"},"children":[],"expanded":false,"type":"check"},{"configs":{"itemId":"depts","checked":"true","boxLabel":"成本中心"},"children":[],"expanded":true,"type":"check"},{"configs":{"itemId":"projects","checked":"true","boxLabel":"PA项目"},"children":[],"expanded":false,"type":"check"},{"configs":{"itemId":"custom1","checked":"true","boxLabel":"自定义维度1"},"children":[],"expanded":false,"type":"check"},{"configs":{"itemId":"custom2","checked":"true","boxLabel":"自定义维度2"},"children":[],"expanded":true,"type":"check"},{"configs":{"itemId":"custom3","checked":"true","boxLabel":"自定义维度3"},"children":[],"expanded":false,"type":"check"},{"configs":{"itemId":"custom4","checked":"true","boxLabel":"自定义维度4"},"children":[],"expanded":false,"type":"check"}],"expanded":false,"type":"fieldset"}],"expanded":true,"type":"checkgroup"},{"configs":{"itemId":"buttons"},"children":[{"configs":{"text":"全选","itemId":"selectAll","iconCls":"accept_icon"},"events":{"click":"Wb.setValue(app.chkGroup,{\n  accounts:true,\n  vendors:true,\n  customers:true,\n  products:true,\n  orgs:true,\n  emps:true,\n  depts:true,\n  projects:true,\n  custom1:true,\n  custom2:true,\n  custom3:true,\n  custom4:true,\n  category:true,\n  cashitem:true,\n  ledgers:true,\n  ccid:true\n}) ;"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"反选","itemId":"deselectAll","iconCls":"delete_icon"},"events":{"click":"Wb.setValue(app.chkGroup,{\n  accounts:false,\n  vendors:false,\n  customers:false,\n  products:false,\n  orgs:false,\n  emps:false,\n  depts:false,\n  projects:false,\n  custom1:false,\n  custom2:false,\n  custom3:false,\n  custom4:false,\n  category:false,\n  cashitem:false,\n  ledgers:false,\n  ccid:false\n}) ;"},"children":[],"expanded":false,"type":"button"},{"configs":{"text":"同步","itemId":"sync","iconCls":"ok_icon"},"events":{"click":"// TODO: 选中情况\nvar items = Wb.getValue(app.chkGroup) ;\n\n// TODO: 进度条\nvar msg = Ext.MessageBox.show({\n  title:'请等待',\n  msg:'正在提交请求，请稍后...',\n  width:240,\n  wait:true,\n  progress :true,\n  closable :false\n});\n\n// TODO: 提交请求\nWb.request({\n  url : '{#ctxPath#}'+'/xcglInitServlet',\n  timeout : 3600000,\n  params:{\n    'method'  : 'doCache2Redis',\n    'chkItems': Wb.encode(items.chkGroup),\n    'ledgerId': app.comboLedger.getValue() \n    \n  },\n  success: function(resp) {\n    msg.hide() ;\n    var response = Wb.decode(resp.responseText) ;\n    Wb.info(response.msg) ;\n  }\n});"},"children":[],"expanded":false,"type":"button"}],"expanded":true,"type":"array"}],"expanded":true,"type":"window"}],"expanded":true,"type":"viewport"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}