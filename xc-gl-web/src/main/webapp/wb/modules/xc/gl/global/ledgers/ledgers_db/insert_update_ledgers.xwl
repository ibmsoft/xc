{"inframe":false,"title":"新增和修改账薄","hidden":false,"roles":{"default":1},"children":[{"configs":{"loginRequired":"false","serverScript":"//为新增的数据加上账薄ID\nvar id,ids = [];\nvar rows = Wb.decode(request.getParameter('insertArray'));\n\nWb.each(rows,function(r) {\n    id = java.util.UUID.randomUUID();\n    r.LEDGER_ID = id;\n    ids.push({\n      LEDGER_ID: id\n    });\n  var temp_org_id = r.ORG_ID;\n  //验证编码是否重复（区分大小写）\n  \n});\nrequest.setAttribute('insertArray', Wb.encode(rows)); //重置记录\napp.send(ids); //把id列表发送到客户端以同步到表格\n","itemId":"module"},"children":[{"configs":{"sql":"INSERT INTO XC_GL_LEDGERS\n (\n   LEDGER_ID,\n   LEDGER_CODE,\n   LEDGER_NAME,\n   ACC_HRCY_ID,\n   ORG_ID,\n   CREATION_DATE,\n   CREATED_BY,\n   LAST_UPDATE_DATE,\n   LAST_UPDATED_BY\n )\n VALUES\n (\n   {?LEDGER_ID?},\n   {?LEDGER_CODE?},\n   {?LEDGER_NAME?},\n   {?ACC_HRCY_ID?},\n   {?ORG_ID?},\n   {?timestamp.sys.date?},\n   {?XIP.userId?},\n   {?timestamp.sys.date?},\n   {?XIP.userId?}\n )\n","transaction":"start","arrayName":"insertArray","itemId":"inertLedgers"},"children":[],"expanded":false,"type":"query"},{"configs":{"sql":"UPDATE XC_GL_LEDGERS\nSET \n    LEDGER_CODE = {?LEDGER_CODE?}, \n\tLEDGER_NAME = {?LEDGER_NAME?},\n\tACC_HRCY_ID = {?ACC_HRCY_ID?},\n    ORG_ID = {?ORG_ID?},\n    LAST_UPDATE_DATE = {?timestamp.sys.date?},\n    LAST_UPDATED_BY  = {?XIP.userId?}  \nWHERE  LEDGER_ID = {?LEDGER_ID?}\n","transaction":"start","arrayName":"updateArray","itemId":"updateLedgers"},"children":[],"expanded":false,"type":"query"}],"expanded":true,"type":"module"}],"pageLink":"","iconCls":""}